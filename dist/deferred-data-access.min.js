!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.DataAccessInterface=t():e.DataAccessInterface=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="http://localhost:8081/dist/",t(t.s=20)}([function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=(t.TargetStatus=Object.freeze({PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected",DESTROYED:"destroyed"}),t.TARGET_INTERNALS=Symbol("request.target:internals"),t.TARGET_DATA="resource::data",t.getId=function(){var e="DA/"+Date.now()+"/",t=0;return function(){return""+e+ ++t+"/"+Date.now()}}(),t.Deferred=function e(){var t=this;n(this,e),this.promise=new Promise(function(e,r){t.resolve=e,t.reject=r})});t.createDeferred=function(){return new o},t.areProxiesAvailable=function(){return"function"==typeof Proxy}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getResourcePoolId=t.getResourceId=t.getResourceData=t.getRawResource=t.createForeignResource=t.areSameResource=t.isResource=t.getResourceType=t.isResourceConvertible=t.IConvertible=t.defaultResourcePool=void 0;var o=r(13),i=n(o),u=r(14),s=n(u),a=r(15);t.defaultResourcePool=i.default,t.IConvertible=s.default,t.isResourceConvertible=u.isResourceConvertible,t.getResourceType=a.getResourceType,t.isResource=a.isResource,t.areSameResource=a.areSameResource,t.createForeignResource=a.createForeignResource,t.getRawResource=a.getRawResource,t.getResourceData=a.getResourceData,t.getResourceId=a.getResourceId,t.getResourcePoolId=a.getResourcePoolId},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.createRequestTarget=t.sendRequest=t.getChildrenCount=t.getLastChild=t.getChildren=t.getRawPromise=t.hadChildPromises=t.getQueueCommands=t.getQueueLength=t.isPending=t.getStatus=t.setTemporary=t.isTemporary=t.toJSON=t.destroy=t.canBeDestroyed=t.isActive=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),s=r(4),a=r(16),c=function(e){return e&&e.__esModule?e:{default:e}}(a),l=Symbol("request.target::promise"),f=function(e){return e[u.TARGET_INTERNALS]||e[l]},d=function(){function e(t,r){var n=this;o(this,e),this[u.TARGET_INTERNALS]=new c.default(this,t,r);var i=function(e){(0,s.isResource)(e)||(n[l]=t,delete n[u.TARGET_INTERNALS])};t.then(i,i)}return i(e,[{key:"then",value:function(){var e=f(this);return e.then.apply(e,arguments)}},{key:"catch",value:function(){var e=f(this);return e.catch.apply(e,arguments)}}]),e}(),y=(t.isActive=function(e){return!(!e||!e[u.TARGET_INTERNALS])&&e[u.TARGET_INTERNALS].isActive()},t.canBeDestroyed=function(e){return!(!e||!e[u.TARGET_INTERNALS])&&e[u.TARGET_INTERNALS].canBeDestroyed()},t.destroy=function(e){return e&&e[u.TARGET_INTERNALS]?e[u.TARGET_INTERNALS].destroy():null},t.toJSON=function(e){return e&&e[u.TARGET_INTERNALS]?e[u.TARGET_INTERNALS].toJSON():null},t.isTemporary=function(e){return e&&e[u.TARGET_INTERNALS]&&e[u.TARGET_INTERNALS].temporary},t.setTemporary=function(e,t){e&&e[u.TARGET_INTERNALS]&&(e[u.TARGET_INTERNALS].temporary=Boolean(t))},t.getStatus=function(e){return e&&e[u.TARGET_INTERNALS]?e[u.TARGET_INTERNALS].status:""}),h=(t.isPending=function(e){return y(e)===u.TargetStatus.PENDING},t.getQueueLength=function(e){var t=e&&e[u.TARGET_INTERNALS]?e[u.TARGET_INTERNALS].queue:null;return t?t.length:0},t.getQueueCommands=function(e){var t=[],r=e&&e[u.TARGET_INTERNALS]?e[u.TARGET_INTERNALS].queue:null;if(r)for(var n=r.length,o=0;o<n;o++)t.push(r[o][0].type);return t},t.hadChildPromises=function(e){return Boolean(e&&e[u.TARGET_INTERNALS]&&e[u.TARGET_INTERNALS].hadChildPromises)},t.getRawPromise=function(e){return e&&e[u.TARGET_INTERNALS]?e[u.TARGET_INTERNALS].promise:null},function(e){return e&&e[u.TARGET_INTERNALS]?e[u.TARGET_INTERNALS].children:null});t.getChildren=function(e){var t=h(e);return t?[].concat(n(t)):[]},t.getLastChild=function(e){var t=h(e);return t&&t.length?t[t.length-1]:null},t.getChildrenCount=function(e){var t=h(e);return t?t.length:0},t.sendRequest=function(e){var t=h(e);return t?t.length:0},t.createRequestTarget=function(e,t){return new d(e,t)};t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createRequestProxyFactory=t.RequestProxyFactory=t.createRequestHandlers=t.RequestHandlers=t.createRequestFactory=t.RequestFactory=t.createRequestTargetDecorator=t.RequestTargetDecorator=t.createRequestTarget=t.RequestTarget=t.RequestTargetInternals=t.createRequestPackage=void 0;var o=r(5),i=r(16),u=n(i),s=r(2),a=n(s),c=r(18),l=n(c),f=r(19),d=n(f),y=r(27),h=n(y),p=r(28),v=n(p);t.createRequestPackage=o.createRequestPackage,t.RequestTargetInternals=u.default,t.RequestTarget=a.default,t.createRequestTarget=s.createRequestTarget,t.RequestTargetDecorator=l.default,t.createRequestTargetDecorator=c.createRequestTargetDecorator,t.RequestFactory=d.default,t.createRequestFactory=f.createRequestFactory,t.RequestHandlers=h.default,t.createRequestHandlers=y.createRequestHandlers,t.RequestProxyFactory=v.default,t.createRequestProxyFactory=p.createRequestProxyFactory},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ResourcePoolRegistryEvents=t.createResourcePoolRegistry=t.ResourcePoolRegistry=t.ResourceConverterEvents=t.createResourceConverter=t.ResourceConverter=t.createTargetResource=t.TargetResource=t.ResourcePoolEvents=t.createResourcePool=t.ResourcePool=void 0;var o=r(9),i=n(o),u=r(11),s=n(u),a=r(24),c=n(a),l=r(25),f=n(l);t.ResourcePool=i.default,t.createResourcePool=o.createResourcePool,t.ResourcePoolEvents=o.ResourcePoolEvents,t.TargetResource=s.default,t.createTargetResource=u.createTargetResource,t.ResourceConverter=c.default,t.createResourceConverter=a.createResourceConverter,t.ResourceConverterEvents=a.ResourceConverterEvents,t.ResourcePoolRegistry=f.default,t.createResourcePoolRegistry=l.createResourcePoolRegistry,t.ResourcePoolRegistryEvents=l.ResourcePoolRegistryEvents},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.filterRequestHandlers=t.createRequestPackage=void 0;var o=r(22),i=n(o),u=r(23),s=n(u);t.createRequestPackage=i.default,t.filterRequestHandlers=s.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RequestTargetCommandFields=t.RequestTargetCommandNames=t.RequestTargetCommands=t.Reserved=t.ProxyCommandFields=t.ProxyCommandNames=t.ProxyCommands=t.CommandHandlerFactory=t.createDescriptors=t.createCommandDescriptor=t.CommandDescriptor=void 0;var o=r(7),i=n(o),u=r(12),s=n(u),a=r(8),c=n(a),l=r(26),f=n(l),d=r(17),y=n(d);t.CommandDescriptor=i.default,t.createCommandDescriptor=o.createCommandDescriptor,t.createDescriptors=o.createDescriptors,t.CommandHandlerFactory=s.default,t.ProxyCommands=c.default,t.ProxyCommandNames=a.ProxyCommandNames,t.ProxyCommandFields=a.ProxyCommandFields,t.Reserved=f.default,t.RequestTargetCommands=y.default,t.RequestTargetCommandNames=d.RequestTargetCommandNames,t.RequestTargetCommandFields=d.RequestTargetCommandFields},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.createDescriptors=t.descriptorGeneratorFactory=t.addDescriptorTo=t.createCommandDescriptor=void 0;var o=r(8),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function e(t,r,o){n(this,e),this.name=void 0!==o?o:t,this.type=t,this.handler=r,this.isTemporary=null,this.cacheable=!1,this.virtual=!1,this.resourceType=null},s=(t.createCommandDescriptor=function(e,t,r){var n=new u(e,t,r);return Object.freeze(n)},t.addDescriptorTo=function(e,t){t instanceof Array?t.push(e):t&&(t[e.name]=e)});t.descriptorGeneratorFactory=function(e,t){return function(r,n,o,i,a){var c=new u(e,r,t);return c.isTemporary=o,c.resourceType=i,c.cacheable=a,s(c,n),Object.freeze(c)}},t.createDescriptors=function(e,t,r,n,s){var a=i.default.list,c=a.length;t=t||{};for(var l=0;l<c;l++){var f=a[l],d=e[f],y=o.ProxyCommandFields[f];if(d instanceof Function){var h=new u(f,d,y);h.isTemporary=r,h.resourceType=n,h.cacheable=s,h=Object.freeze(h),t instanceof Array?t.push(h):t&&(t[y]=h)}}return t};t.default=u},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyCommandFields=t.ProxyCommandNames=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(7),u=t.ProxyCommandNames=Object.freeze({GET:"get",SET:"set",APPLY:"apply",DELETE_PROPERTY:"deleteProperty"}),s=t.ProxyCommandFields=Object.freeze({get:Symbol("proxy.commands::get"),set:Symbol("proxy.commands::set"),apply:Symbol("proxy.commands::apply"),deleteProperty:Symbol("proxy.commands::deleteProperty")}),a=function(){function e(){n(this,e),this.createGETDescriptor=(0,i.descriptorGeneratorFactory)(u.GET,s.get),this.createSETDescriptor=(0,i.descriptorGeneratorFactory)(u.SET,s.set),this.createAPPLYDescriptor=(0,i.descriptorGeneratorFactory)(u.APPLY,s.apply),Object.freeze(this)}return o(e,[{key:"list",get:function(){return[u.GET,u.SET,u.APPLY,u.DELETE_PROPERTY]}},{key:"required",get:function(){return[s.GET,s.SET,s.APPLY]}}]),e}();t.default=new a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createResourcePool=t.getDefaultValidTargets=t.setValidTargets=t.isValidTarget=t.ResourcePoolEvents=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=r(10),c=function(e){return e&&e.__esModule?e:{default:e}}(a),l=r(0),f=r(11),d=t.ResourcePoolEvents=Object.freeze({RESOURCE_ADDED:"resourceAdded",RESOURCE_REMOVED:"resourceRemoved",POOL_CLEAR:"poolClear",POOL_CLEARED:"poolCleared",POOL_DESTROYED:"poolDestroyed"}),y=Symbol("ResourcePool::map"),h={},p=t.isValidTarget=function(e){return!(0,l.isResource)(e)&&Boolean(h[void 0===e?"undefined":s(e)])},v=t.setValidTargets=function(e){h={};for(var t=e.length,r=0;r<t;r++)h[e[r]]=!0},R=t.getDefaultValidTargets=function(){return["object","function"]},E=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e[y]=new Map,Object.defineProperties(e,{id:{value:(0,l.getId)()}}),e}return i(t,e),u(t,[{key:"set",value:function(e,t){var r=null;return p(e)&&(this[y].has(e)?r=this[y].get(e):(r=(0,f.createTargetResource)(this,e,t||(void 0===e?"undefined":s(e))),this[y].set(r.id,r),this[y].set(e,r),this.hasEventListener(d.RESOURCE_ADDED)&&this.dispatchEvent(d.RESOURCE_ADDED,r))),r}},{key:"has",value:function(e){return this[y].has(e)}},{key:"get",value:function(e){return this[y].get(e)}},{key:"remove",value:function(e){var t=this[y].get(e);t&&(this[y].delete(t.id),this[y].delete(t.resource),this.hasEventListener(d.RESOURCE_REMOVED)&&this.dispatchEvent(d.RESOURCE_REMOVED,t),t.destroy())}},{key:"clear",value:function(){this.hasEventListener(d.POOL_CLEAR)&&this.dispatchEvent(d.POOL_CLEAR,this);for(var e=void 0,t=this[y].keys();!(e=t.next()).done;)if("string"==typeof e.value){var r=this[y].get(e.value);r.destroy()}this[y].clear(),this.hasEventListener(d.POOL_CLEARED)&&this.dispatchEvent(d.POOL_CLEARED,this)}},{key:"isActive",value:function(){return Boolean(this[y])}},{key:"destroy",value:function(){this.clear(),delete this[y],this.hasEventListener(d.POOL_DESTROYED)&&this.dispatchEvent(d.POOL_DESTROYED,this)}}]),t}(c.default);t.createResourcePool=function(){return new E};v(R()),t.default=E},function(e,t,r){!function(t,r){e.exports=r()}(0,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="http://localhost:8081/dist/",t(t.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;var n=r(1),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=o.default,t.Event=n.Event},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s=t.Event=function(){function e(t,r){n(this,e),this.type=t,this.data=r||null,this.defaultPrevented=!1}return i(e,[{key:"toJSON",value:function(){return{type:this.type,data:this.data}}},{key:"isDefaultPrevented",value:function(){return this.defaultPrevented}},{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),e}(),a=function(){function e(t,r,o){var i=this;n(this,e),this.index=-1,this.immediatelyStopped=!1,this.stopImmediatePropagation=function(){i.immediatelyStopped=!0},this.listeners=t,this.onStopped=r,this.onComplete=o}return i(e,[{key:"run",value:function(e,t){var r=void 0,n=this.listeners;for(this.augmentEvent(e),this.index=0;this.index<n.length&&!this.immediatelyStopped;this.index++)r=n[this.index],r.call(t,e);this.clearEvent(e),this.onComplete(this)}},{key:"augmentEvent",value:function(e){var t=e;t.stopPropagation=this.onStopped,t.stopImmediatePropagation=this.stopImmediatePropagation}},{key:"clearEvent",value:function(e){var t=e;delete t.stopPropagation,delete t.stopImmediatePropagation}},{key:"listenerRemoved",value:function(e,t){e===this.listeners&&t<=this.index&&this.index--}}]),e}(),c=function(){function e(){var t=this;n(this,e),this._listeners={},this._runners=[],this.removeRunner=function(e){t._runners.splice(t._runners.indexOf(e),1)}}return i(e,[{key:"createList",value:function(e,t){var r=parseInt(t,10),n=this.getPrioritiesByKey(e),o=String(r),i=void 0;return u(n,o)?i=n[o]:(i=[],n[o]=i),i}},{key:"getPrioritiesByKey",value:function(e){var t=void 0;return u(this._listeners,e)?t=this._listeners[e]:(t={},this._listeners[e]=t),t}},{key:"add",value:function(e,t,r){var n=this.createList(e,r);n.indexOf(t)<0&&n.push(t)}},{key:"has",value:function(e){var t=void 0,r=!1,n=this.getPrioritiesByKey(e);if(n)for(t in n)if(u(n,t)){r=!0;break}return r}},{key:"remove",value:function(e,t){var r=this,n=this.getPrioritiesByKey(e);if(n)for(var o=Object.getOwnPropertyNames(n),i=o.length,u=0;u<i;u++)!function(e){var i=o[e],u=n[i],s=u.indexOf(t);s>=0&&(u.splice(s,1),u.length||delete n[i],r._runners.forEach(function(e){e.listenerRemoved(u,s)}))}(u)}},{key:"removeAll",value:function(e){delete this._listeners[e]}},{key:"createRunner",value:function(e,t){var r=new a(e,t,this.removeRunner);return this._runners.push(r),r}},{key:"call",value:function(e,t){var r=this.getPrioritiesByKey(e.type),n=!1,o=function(){n=!0};if(r)for(var i=Object.getOwnPropertyNames(r).sort(function(e,t){return e-t}),u=i.length,s=0;s<u&&!n;s++){var a=r[i[s]];if(a){var c=this.createRunner(a,o);if(c.run(e,t),c.immediatelyStopped)break}}}}]),e}(),l=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(this,e),r||this.initialize(t)}return i(e,[{key:"initialize",value:function(e){this._eventPreprocessor=e,this._listeners=new c}},{key:"addEventListener",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._listeners.add(e,t,-r||0)}},{key:"hasEventListener",value:function(e){return this._listeners.has(e)}},{key:"removeEventListener",value:function(e,t){this._listeners.remove(e,t)}},{key:"removeAllEventListeners",value:function(e){this._listeners.removeAll(e)}},{key:"dispatchEvent",value:function(t,r){var n=e.getEvent(t,r);this._eventPreprocessor&&(n=this._eventPreprocessor.call(this,n)),this._listeners.call(n)}}],[{key:"isObject",value:function(e){return"object"===(void 0===e?"undefined":o(e))&&null!==e}},{key:"getEvent",value:function(t,r){var n=t;return e.isObject(t)||(n=new e.Event(String(t),r)),n}},{key:"create",value:function(t){return new e(t)}}]),e}();l.Event=s,t.default=l}])})},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.createTargetResource=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(0),a=function(e){return e?e.id:null},c=function(){function e(t,r,i,u){var c,l=this;o(this,e),this.toJSON=function(){return n({},s.TARGET_DATA,{id:l.id,type:l.type,poolId:l.poolId})},Object.defineProperties(this,(c={},n(c,s.TARGET_INTERNALS,{value:{pool:t,resource:r,type:i,id:u,active:!0,poolId:a(t)}}),n(c,s.TARGET_DATA,{get:this.toJSON}),c))}return u(e,[{key:"destroy",value:function(){var e=this.id,t=this.pool,r=this[s.TARGET_INTERNALS];if(r.active){r.active=!1,t.remove(e);for(var n in r)delete r[n]}}},{key:"active",get:function(){return Boolean(this[s.TARGET_INTERNALS].active)}},{key:"resource",get:function(){return this[s.TARGET_INTERNALS].resource}},{key:"type",get:function(){return this[s.TARGET_INTERNALS].type||i(this[s.TARGET_INTERNALS].resource)}},{key:"id",get:function(){return this[s.TARGET_INTERNALS].id}},{key:"poolId",get:function(){return this[s.TARGET_INTERNALS].poolId}}]),e}();t.createTargetResource=function(e,t,r,n){return new c(e,t,r,n||(0,s.getId)())};t.default=c},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),u=r(3),s=r(2),a=function(e,t,r,n,o){function s(e,s){var f=void 0,d=void 0;if(this[i.TARGET_INTERNALS]){for(var y=arguments.length,h=Array(y>2?y-2:0),p=2;p<y;p++)h[p-2]=arguments[p];var v=(0,u.createRequestPackage)(r,[e,s].concat(h),this[i.TARGET_INTERNALS].id),R=l(t,v,o);f=R.child,R.deferred&&(d=this[i.TARGET_INTERNALS].sendRequest(t,v,R.deferred,f),d?n&&c(d,n,this,f,v):(f=null,d=Promise.reject(new Error("Initial request failed and didn't result in promise."))))}else d=Promise.reject(new Error("Target object is not a resource, so cannot be used for calls."));return f||a.create(d)}var a=e.factory,c=e.checkState,l=e.getChildRequest;return s},c=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n(this,e),this.members=new Map,this.factory=null,this.getChildRequest=function(e,r,n){var o=void 0,u=void 0;return n&&(o=t.factory.getCached(e,r)),o||(u=(0,i.createDeferred)(),o=n?t.factory.createCached(u.promise,e,r):t.factory.create(u.promise,e,r)),{child:o,deferred:u}},this.checkState=function(e,t,r,n,o){e&&e.then(function(e){var i=Boolean(t(r,n,o,e));(0,s.setTemporary)(n,i)})},this.setFactory(r)}return o(e,[{key:"get",value:function(e){var t=e.name;return this.members.has(t)||this.members.set(t,this.create(e.name,e.type,e.isTemporary,e.cacheable)),this.members.get(t)}},{key:"create",value:function(e,t,r,n){return a(this,e,t,r,n)}},{key:"setFactory",value:function(e){this.factory=e}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultResourcePool=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(9),a=function(e){return e&&e.__esModule?e:{default:e}}(s),c=t.DefaultResourcePool=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"destroy",value:function(){throw new Error("Default ResourcePool cannot be destroyed.")}}]),t}(a.default),l=new c;t.default=l},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.isResourceConvertible=void 0;var o=r(15),i=function e(){n(this,e)};t.isResourceConvertible=function(e){return(0,o.isResource)(e)||"function"==typeof e||e instanceof i};t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.areSameResource=t.createForeignResource=t.getResourceData=t.getRawResource=t.getResourceType=t.getResourcePoolId=t.getResourceId=t.isResource=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(1),u=r(3),s=r(13),a=n(s),c=r(14),l=n(c),f=r(11),d=n(f),y=t.isResource=function(e){return e instanceof d.default||e instanceof u.RequestTarget||e&&("object"===o(e[i.TARGET_INTERNALS])||"object"===o(e[i.TARGET_DATA]))},h=t.getResourceId=function(e){return"object"===o(e[i.TARGET_INTERNALS])?e[i.TARGET_INTERNALS]:y(e)?e[i.TARGET_DATA].id:null},p=t.getResourcePoolId=function(e){return"object"===o(e[i.TARGET_INTERNALS])?e[i.TARGET_INTERNALS].poolId:y(e)?e[i.TARGET_DATA].poolId:null},v=(t.getResourceType=function(e){return"object"===o(e[i.TARGET_INTERNALS])?e[i.TARGET_INTERNALS].type:y(e)?e[i.TARGET_DATA].type:null},t.getRawResource=function(e,t){return t=t||a.default,e instanceof d.default?e.toJSON():"object"===o(e[i.TARGET_INTERNALS])?u.RequestTarget.toJSON(e):e instanceof l.default||"function"==typeof e?t.set(e).toJSON():y(e)?e:null});t.getResourceData=function(e){var t=v(e);return t?t[i.TARGET_DATA]:null},t.createForeignResource=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t[i.TARGET_DATA]={id:"foreign-id-"+(0,i.getId)(),type:e||(void 0===t?"undefined":o(t)),poolId:"foreign-poolId-"+(0,i.getId)()},t},t.areSameResource=function(e,t){return y(e)&&y(t)&&h(e)===h(t)&&p(e)===p(t)}},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,s=e[Symbol.iterator]();!(n=(u=s.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(0),a=r(5),c=r(1),l=r(2),f=r(17),d=function(){function e(t,r,n){var i=this;o(this,e),this.handlePromiseResolve=function(e){i.status=s.TargetStatus.RESOLVED,(0,c.isResource)(e)?(i.link=(0,c.getResourceData)(e),e={target:i.requestTarget},i.sendQueue(),i.temporary&&i.destroy()):i.rejectQueue("Target of the call is not a resource and call cannot be sent."),i.deferred.resolve(e),delete i.deferred},this.handlePromiseReject=function(e){i.status=s.TargetStatus.REJECTED,i.rejectQueue("Target of the call was rejected and call cannot be sent."),i.deferred.reject(e),delete i.deferred},this.requestHandlers=n,this.requestTarget=t,this.link={},this.temporary,this.hadChildPromises=!1,this.status=s.TargetStatus.PENDING,this.queue=[],this.children=[],this.deferred=(0,s.createDeferred)(),this.promise=this.deferred.promise.then(this.handlePromiseResolve,this.handlePromiseReject)}return u(e,[{key:"sendQueue",value:function(){for(;this.queue&&this.queue.length;){var e=this.queue.shift(),t=i(e,4),r=t[0],n=t[1],o=t[2],u=t[3];n.target=this.link.id,this.handleRequest(r,n,o,u)}this.queue=null}},{key:"rejectQueue",value:function(e){for(var t=new Error(e||"This request was rejected before sending.");this.queue&&this.queue.length;){var r=this.queue.shift();i(r,3)[2].reject(t)}this.queue=null}},{key:"sendRequest",value:function(e,t,r,n){var o=null;if(!this.requestHandlers.hasHandler(e))throw new Error('Request handler for "'+e+'" is not registered.');return o=this.applyRequest(e,t,r||(0,s.createDeferred)(),n),n&&this.registerChild(n),o}},{key:"addToQueue",value:function(e,t,r,n){this.queue.push([e,t,r,n])}},{key:"applyRequest",value:function(e,t,r,n){var o=r.promise;switch(this.status){case s.TargetStatus.PENDING:this.addToQueue(e,t,r,n);break;case s.TargetStatus.REJECTED:o=Promise.reject(new Error("Target object was rejected and cannot be used for calls."));break;case s.TargetStatus.DESTROYED:o=Promise.reject(new Error("Target object was destroyed and cannot be used for calls."));break;case s.TargetStatus.RESOLVED:this.handleRequest(e,t,r,n)}return o}},{key:"handleRequest",value:function(e,t,r,n){this.requestHandlers.handle(this.requestTarget,e,t,r,n)}},{key:"registerChild",value:function(e){var t=this,r=function(){if(t.children){var r=t.children.indexOf(e);r>=0&&t.children.splice(r,1)}};this.children.push(e),(0,l.getRawPromise)(e).then(r,r)}},{key:"isActive",value:function(){return this.status===s.TargetStatus.PENDING||this.status===s.TargetStatus.RESOLVED}},{key:"canBeDestroyed",value:function(){return this.status===s.TargetStatus.RESOLVED||this.status===s.TargetStatus.REJECTED}},{key:"destroy",value:function(){var e=null;return this.canBeDestroyed()?(e=this.status===s.TargetStatus.RESOLVED?this.sendRequest(f.RequestTargetCommandFields.DESTROY,(0,a.createRequestPackage)(f.RequestTargetCommandNames.DESTROY,[null,null],this.id)):Promise.resolve(),this.status=s.TargetStatus.DESTROYED):e=Promise.reject(new Error("Invalid or already destroyed target.")),e}},{key:"then",value:function(e,t){var r=this.promise.then(e,t);return this.hadChildPromises=!0,r}},{key:"catch",value:function(e){var t=this.promise.catch(e);return this.hadChildPromises=!0,t}},{key:"toJSON",value:function(){return n({},s.TARGET_DATA,{id:this.link.id,type:this.link.type,poolId:this.link.poolId})}},{key:"poolId",get:function(){return this.link.poolId||null}},{key:"type",get:function(){return this.link.type||null}},{key:"id",get:function(){return this.link.id||null}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.RequestTargetCommandFields=t.RequestTargetCommandNames=void 0;var o=r(7),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u=t.RequestTargetCommandNames=Object.freeze({DESTROY:"::destroy.resource"}),s=t.RequestTargetCommandFields=Object.freeze({DESTROY:Symbol("::destroy.resource")}),a=function e(){n(this,e),this.createDESTROYDescriptor=function(e,t){var r=new i.default(u.DESTROY,e,s.DESTROY);return r.virtual=!0,(0,o.addDescriptorTo)(r,t),Object.freeze(r)},Object.freeze(this)};t.default=new a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.createRequestTargetDecorator=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(12),u=function(e){return e&&e.__esModule?e:{default:e}}(i),s=r(4),a=function(){function e(t,r){n(this,e),this.handlers=r,this.members=new u.default(t)}return o(e,[{key:"apply",value:function(e){var t=void 0;if(this.handlers.available){for(var r=this.handlers.getHandlers((0,s.getResourceType)(e));!(t=r.next()).done;){var n=t.value;e[n.name]=this.members.get(n)}return e}}},{key:"setFactory",value:function(e){e&&this.members.setFactory(e)}}]),e}();t.createRequestTargetDecorator=function(e,t){return new a(e,t)};t.default=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.createRequestFactory=t.FACTORY_HANDLERS_FIELD=t.FACTORY_DECORATOR_FIELD=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(18),u=r(2),s=t.FACTORY_DECORATOR_FIELD=Symbol("request.factory::decorator"),a=t.FACTORY_HANDLERS_FIELD=Symbol("request.factory::handlers"),c=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n(this,e),o||(this.cache=r,this[a]=t,this[s]=(0,i.createRequestTargetDecorator)(this,t))}return o(e,[{key:"create",value:function(e){var t=(0,u.createRequestTarget)(e,this[a]);return this[a].available&&this[s].apply(t),t}},{key:"getCached",value:function(e,t){return this.cache&&this.cache.get(e,t)}},{key:"createCached",value:function(e,t,r){var n=null;return this.cache&&(n=this.create(e),this.cache.set(t,r,n)),n}}]),e}();t.createRequestFactory=function(e,t){return new c(e,t)};t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isResource=t.getResourceType=t.getResourcePoolId=t.getResourceId=t.getResourceData=t.getRawResource=t.isResourceConvertible=t.IConvertible=t.ResourceConverter=t.ResourcePoolRegistry=t.ResourcePool=t.RequestTarget=t.ProxyCommands=t.RequestTargetCommands=t.Reserved=t.CommandDescriptor=t.Deferred=t.createDeferred=t.dummy=t.create=void 0;var n=r(21),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=r(0),u=r(6),s=r(3),a=r(4),c=r(1);t.default=o.default,t.create=n.create,t.dummy=n.dummy,t.createDeferred=i.createDeferred,t.Deferred=i.Deferred,t.CommandDescriptor=u.CommandDescriptor,t.Reserved=u.Reserved,t.RequestTargetCommands=u.RequestTargetCommands,t.ProxyCommands=u.ProxyCommands,t.RequestTarget=s.RequestTarget,t.ResourcePool=a.ResourcePool,t.ResourcePoolRegistry=a.ResourcePoolRegistry,t.ResourceConverter=a.ResourceConverter,t.IConvertible=c.IConvertible,t.isResourceConvertible=c.isResourceConvertible,t.getRawResource=c.getRawResource,t.getResourceData=c.getResourceData,t.getResourceId=c.getResourceId,t.getResourcePoolId=c.getResourcePoolId,t.getResourceType=c.getResourceType,t.isResource=c.isResource},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.dummy=t.create=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),u=r(3),s=r(4),a=r(1),c=function(){function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;n(this,e),this.poolRegistry=o,this.pool=i,this.cache=u,this.initialize(t,r)}return o(e,[{key:"initialize",value:function(e,t){var r=this;if(t&&!(0,i.areProxiesAvailable)())throw new Error("Proxies are not available in this environment");this.handlers=(0,u.createRequestHandlers)(t),this.resourceConverter=(0,s.createResourceConverter)(this.factory,this.poolRegistry,this.pool,this.handlers),this.factory=t?(0,u.createRequestProxyFactory)(this.handlers,this.cache):(0,u.createRequestFactory)(this.handlers,this.cache),this.poolRegistry||(this.poolRegistry=(0,s.createResourcePoolRegistry)()),this.pool?this.poolRegistry.register(this.pool):void 0!==this.pool?this.pool=this.poolRegistry.createPool():this.pool=a.defaultResourcePool;var n=function e(){r.pool.removeEventListener(s.ResourcePoolEvents.POOL_DESTROYED,e),r.pool=r.poolRegistry.createPool(),r.pool.addEventListener(s.ResourcePoolEvents.POOL_DESTROYED,e)};this.handlers.setHandlers(e),this.pool.addEventListener(s.ResourcePoolEvents.POOL_DESTROYED,n)}},{key:"parse",value:function(e){return this.resourceConverter.parse(e)}},{key:"toJSON",value:function(e){return this.resourceConverter.toJSON(e)}},{key:"isOwnResource",value:function(e){var t=void 0;return!!(0,a.isResource)(e)&&((t=this.poolRegistry.get((0,a.getResourcePoolId)(e)))&&t.has((0,a.getResourceId)(e)))}},{key:"proxyEnabled",get:function(){return this.handlers.proxyEnabled}}]),e}();t.create=function(e,t,r,n,o){return new c(e,t,r,n,o)},t.dummy=function(e,t,r,n,o){return new c(e,t,r,n,o).parse(e())};t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,r){var n={type:e,cmd:t[0],value:t[1],target:r};return Object.defineProperty(n,"args",{value:t}),n};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),o=function(e,t,r){var o=e.name;if(o in n.Reserved.names)throw new Error('Name "'+o+'" is reserved and cannot be used in descriptor.');if(Object.prototype.hasOwnProperty.call(t,o)&&t[o]instanceof n.CommandDescriptor)throw new Error('Field names should be unique, "'+String(o)+'" field has duplicates.');t[o]=e,e.virtual||r.push(e)},i=function(e,t,r){for(var i=e.length,u=0;u<i;u++){var s=e[u];s instanceof n.CommandDescriptor&&o(s,t,r)}},u=function(e,t,r){if(e)for(var i=Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)),u=i.length,s=0;s<u;s++){var a=i[s],c=e[a];"function"==typeof c&&(c=(0,n.createCommandDescriptor)(a,c)),c instanceof n.CommandDescriptor&&o(c,t,r)}},s=function(e,t,r){e instanceof Array?i(e,t,r):u(e,t,r)};t.default=s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createResourceConverter=t.ResourceConverterEvents=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(10),c=function(e){return e&&e.__esModule?e:{default:e}}(a),l=r(1),f=r(2),d=t.ResourceConverterEvents=Object.freeze({RESOURCE_CREATED:"resourceCreated",RESOURCE_CONVERTED:"resourceConverted"}),y=function(e){function t(e,r,i){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.factory=e,s.pool=i,s.registry=r,u&&u.setConverter(s),s}return i(t,e),s(t,[{key:"resourceToObject",value:function(e){var t=void 0;if((0,l.isResourceConvertible)(e))t=(0,l.getRawResource)(e,this.pool);else{if("function"!=typeof e.toJSON)return e;t=e.toJSON()}return this.hasEventListener(d.RESOURCE_CONVERTED)&&this.dispatchEvent(d.RESOURCE_CONVERTED,{data:e,result:t}),t}},{key:"objectToResource",value:function(e){var t=e;if((0,l.isResource)(e)){var r=(0,l.getResourcePoolId)(e);if(this.registry.isRegistered(r)){var n=this.registry.get(r).get((0,l.getResourceId)(e));n&&(t=n.resource)}else t=this.factory.create(Promise.resolve(e))}return t!==e&&this.hasEventListener(d.RESOURCE_CREATED)&&this.dispatchEvent(d.RESOURCE_CREATED,{data:e,result:t}),t}},{key:"lookupArray",value:function(e,t){for(var r=[],n=e.length,o=0;o<n;o++)r[o]=t.call(this,e[o]);return r}},{key:"lookupObject",value:function(e,t){var r={};for(var n in e)Object.property.hasOwnProperty.call(e,n)&&(r[n]=t.call(this,e[n]));return r}},{key:"toJSON",value:function(e){var t=e;return void 0!==e&&null!==e&&((0,l.isResourceConvertible)(e)?t=this.resourceToObject(e):e instanceof Array?t=this.lookupArray(e,this.resourceToObject):e.constructor===Object&&(t=this.lookupObject(e,this.resourceToObject))),t}},{key:"parse",value:function(e){var t=e;return void 0!==e&&null!==e&&((0,l.isResource)(e)?t=this.objectToResource(e):e instanceof Array?t=this.lookupArray(e,this.objectToResource):e.constructor===Object&&(t=this.lookupObject(e,this.objectToResource))),t}},{key:"lookupForPending",value:function(e){var t=[],r=function(e){return(0,f.isPending)(e)&&t.push(e),e};return"object"===(void 0===e?"undefined":u(e))&&null!==e&&((0,f.isPending)(e)?t.push(e):e instanceof Array?this.lookupArray(e,r):e.constructor===Object&&this.lookupObject(e,r)),t}}]),t}(c.default);t.createResourceConverter=function(e,t,r,n){return new y(e,t,r,n)};t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createResourcePoolRegistry=t.ResourcePoolRegistryEvents=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(10),c=n(a),l=r(1),f=n(l),d=r(9),y=n(d),h=t.ResourcePoolRegistryEvents=Object.freeze({RESOURCE_POOL_CREATED:"resourcePoolCreated",RESOURCE_POOL_REGISTERED:"resourcePoolRegistered",RESOURCE_POOL_REMOVED:"resourcePoolRemoved"}),p=Symbol("resource.pool.registry::pools"),v=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e[p]={},e.register(f.default),e}return u(t,e),s(t,[{key:"handlePoolDestroyed",value:function(e){this.remove(e.data)}},{key:"createPool",value:function(){var e=(0,d.createResourcePool)();return this.hasEventListener(h.RESOURCE_POOL_CREATED)&&this.dispatchEvent(h.RESOURCE_POOL_CREATED,e),this.register(e),e}},{key:"register",value:function(e){Object.prototype.hasOwnProperty.call(this[p],e.id)||(this[p][e.id]=e,e.addEventListener(d.ResourcePoolEvents.POOL_DESTROYED,this.handlePoolDestroyed),this.hasEventListener(h.RESOURCE_POOL_REGISTERED)&&this.dispatchEvent(h.RESOURCE_POOL_REGISTERED,e))}},{key:"get",value:function(e){return this[p][e]||null}},{key:"isRegistered",value:function(e){return Object.prototype.hasOwnProperty.call(this[p],e instanceof y.default?e.id:String(e))}},{key:"remove",value:function(e){var t=!1;return e=e instanceof y.default?e:this.get(e),e&&(e.removeEventListener(y.default.Events.POOL_DESTROYED,this.handlePoolDestroyed),t=delete this[p][e.id]),this.hasEventListener(h.RESOURCE_POOL_REMOVED)&&this.dispatchEvent(h.RESOURCE_POOL_REMOVED,e),t}}]),t}(c.default);t.createResourcePoolRegistry=function(){return new v};t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.freeze({names:Object.freeze({then:!0,catch:!0})});t.default=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.createRequestHandlers=t.RequestHandlersEvents=t.areProxyHandlersAvailable=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(6),u=r(5),s=r(1),a=t.areProxyHandlersAvailable=function(e,t){for(var r=!0,n=i.ProxyCommands.required,o=n.length,u=0;u<o;u++){var s=n[u];if(!(i.ProxyCommandFields[s]in e)&&(r=!1,t))throw new Error('For Proxy interface, handler "'+s+'" should be set.')}return r},c=(t.RequestHandlersEvents=Object.freeze({HANDLERS_UPDATED:"handlersUpdated"}),function(){function e(t){n(this,e),this.properties={},this.descriptors={},this.proxyEnabled=Boolean(t),this.converter=null}return o(e,[{key:"setConverter",value:function(e){this.converter=e}},{key:"setHandlers",value:function(e){var t=this;this.setHandlersByType("",e),Object.keys(e).forEach(function(r){var n=e[r];n&&(n.constructor===Object||n instanceof Array)&&t.setHandlersByType(r,n)}),this.proxyEnabled&&a(this.descriptors,!0)}},{key:"setHandlersByType",value:function(e,t){var r={},n=[];(0,u.filterRequestHandlers)(t,r,n),this.descriptors[e]=r,this.properties[e]=n}},{key:"hasHandler",value:function(e,t){return this.descriptors[t]&&Object.prototype.hasOwnProperty.call(this.descriptors[t],e)||this.descriptors[""]&&Object.prototype.hasOwnProperty.call(this.descriptors[""],e)}},{key:"getHandlers",value:function(e){var t=this.descriptors[e||""];return t||(t=this.descriptors[""]),t||null}},{key:"getHandler",value:function(e,t){return this.descriptors[t]&&this.descriptors[t][e]||this.descriptors[""]&&this.descriptors[""][e]||null}},{key:"handle",value:function(e,t,r,n,o){var i=this,u=this.converter?this.converter.lookupForPending(r.value):null;u&&u.length?Promise.all(u).then(function(){i.handleImmediately(e,t,r,n,o)}):this.handleImmediately(e,t,r,n,o)}},{key:"handleImmediately",value:function(e,t,r,n,o){var u=this.getHandler(t,(0,s.getResourceType)(e));if(!(u instanceof i.CommandDescriptor))throw new Error('Command descriptor for "'+t+'" was not found.');u.handler(e,r,n,o)}},{key:"available",get:function(){var e=Object.keys(this.properties).find(function(e){return Boolean(e&&e.length)});return Boolean(e)}}]),e}());t.createRequestHandlers=function(e){return new c(e)};t.default=c},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createRequestProxyFactory=t.applyProxyWithDefaultHandlers=t.createProxyHandlers=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=r(19),c=function(e){return e&&e.__esModule?e:{default:e}}(a),l=r(8),f=Symbol("request.proxy.factory::factory"),d={arguments:!0,caller:!0,prototype:!0},y=function(e,t){function r(){}return r.target=e,new Proxy(r,t)},h=function(e,t){var r=e.target;return t in r||t in d||"symbol"===(void 0===t?"undefined":s(t))?r[t]:r[l.ProxyCommandFields.get](t)},p=function(e,t,r){return e.target[l.ProxyCommandFields.apply](null,r)},v=function(e,t,r){var n=e.target;return t in n||t in d||"symbol"===(void 0===t?"undefined":s(t))?(n[t]=r,r):n[l.ProxyCommandFields.set](t,r)},R=function(e,t){return Object.prototype.hasOwnProperty.call(e.target,t)},E=function(e,t){var r=e.target;return l.ProxyCommandFields.deleteProperty in r&&(r[l.ProxyCommandFields.deleteProperty](t),!0)},m=function(){return Object.getOwnPropertyNames(d)},g=function(){return Object.getOwnPropertyNames(d)[Symbol.iterator]()},T=function(e,t){return Object.prototype.hasOwnProperty.call(d,t)?Object.getOwnPropertyDescriptor(e,t):Object.getOwnPropertyDescriptor(e.target,t)},b=t.createProxyHandlers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({get:h,apply:p,set:v,has:R,deleteProperty:E,ownKeys:m,enumerate:g,getOwnPropertyDescriptor:T},e)},O=b(),P=function(e){function t(e,r){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,null,!0));return i[a.FACTORY_HANDLERS_FIELD]=e,i[f]=c.default.create(e,r),i[f][a.FACTORY_DECORATOR_FIELD].setFactory(i),i}return i(t,e),u(t,[{key:"create",value:function(e){var t=this[f].create(e);return this[a.FACTORY_HANDLERS_FIELD].available?y(t,O):t}},{key:"getCached",value:function(e,t){return this[f].getCached(e,t)}},{key:"createCached",value:function(e,t,r){var n=this[f].createCached(e,t,r);return this[a.FACTORY_HANDLERS_FIELD].available?y(n,O):n}}]),t}(c.default);t.applyProxyWithDefaultHandlers=function(e){return y(e,O)},t.createRequestProxyFactory=function(e,t){return new P(e,t)}}])});
//# sourceMappingURL=deferred-data-access.min.js.map