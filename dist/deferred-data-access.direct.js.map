{"version":3,"sources":["webpack:///deferred-data-access.direct.js","webpack:///webpack/bootstrap 68ed696d3600ed23922e","webpack:///./source/utils/isResource.js","webpack:///./source/utils/TARGET_INTERNALS.js","webpack:///./source/utils/TARGET_DATA.js","webpack:///./source/request/target/getInternals.js","webpack:///./source/command/Descriptor.js","webpack:///./source/utils/hasOwnProperty.js","webpack:///./source/request/Target.js","webpack:///./source/resource/ResourcePool.js","webpack:///./source/utils/reject.js","webpack:///./source/utils/TargetStatus.js","webpack:///./source/utils/Deferred.js","webpack:///./source/request/target/toJSON.js","webpack:///./source/resource/Resource.js","webpack:///./source/utils/getId.js","webpack:///./source/utils/getResourcePoolId.js","webpack:///./source/utils/getResourceId.js","webpack:///./source/command/internal/ProxyCommands.js","webpack:///./source/utils/getResourceType.js","webpack:///./node_modules/event-dispatcher/dist/event-dispatcher.js","webpack:///./source/utils/IConvertible.js","webpack:///./source/utils/getRawResource.js","webpack:///./source/utils/createRequestPackage.js","webpack:///./source/command/internal/RequestCommands.js","webpack:///./source/command/Reserved.js","webpack:///./source/request/Factory.js","webpack:///./source/resource/Converter.js","webpack:///./source/utils/isResourceConvertible.js","webpack:///./source/resource/PoolRegistry.js","webpack:///./source/direct.js","webpack:///./source/index.js","webpack:///./source/DataAccessInterface.js","webpack:///./source/utils/areProxiesAvailable.js","webpack:///./source/request/target/Internals.js","webpack:///./source/request/target/SubTargets.js","webpack:///./source/request/target/Queue.js","webpack:///./source/request/target/Children.js","webpack:///./source/request/target/getRawPromise.js","webpack:///./source/utils/createForeignResource.js","webpack:///./source/request/Handlers.js","webpack:///./source/utils/filterRequestHandlers.js","webpack:///./source/request/ProxyFactory.js","webpack:///./source/request/Decorator.js","webpack:///./source/command/CallbackFactory.js","webpack:///./source/command/Flow.js","webpack:///./source/request/target/setTemporary.js","webpack:///(webpack)/buildin/module.js","webpack:///./source/request/target/isRequest.js","webpack:///./source/request/target/isPending.js","webpack:///./source/request/target/getStatus.js","webpack:///./source/utils/getResourceData.js"],"names":["DataAccessInterface","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__","__WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__","__WEBPACK_IMPORTED_MODULE_2__request_Target__","__WEBPACK_IMPORTED_MODULE_3__resource_Resource__","isResource","Symbol","__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__","target","_classCallCheck","instance","Constructor","TypeError","createDescriptor","addDescriptorTo","descriptorGeneratorFactory","__WEBPACK_IMPORTED_MODULE_0__utils_isResource__","DEFAULT_IS_TEMPORARY","parent","child","Descriptor","command","handler","propertyName","arguments","length","undefined","this","isTemporary","cacheable","virtual","resourceType","descriptor","freeze","Array","push","createRequestTarget","__WEBPACK_IMPORTED_MODULE_1__target_Internals__","_createClass","defineProperties","props","writable","key","protoProps","staticProps","Target","promise","requestHandlers","value","_TARGET_INTERNALS","then","apply","_TARGET_INTERNALS2","catch","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","ResourcePoolEvents","defaultResourcePool","createResourcePool","__WEBPACK_IMPORTED_MODULE_0_event_dispatcher__","__WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default","__WEBPACK_IMPORTED_MODULE_1__utils_getId__","__WEBPACK_IMPORTED_MODULE_2__utils_isResource__","__WEBPACK_IMPORTED_MODULE_3__Resource__","__WEBPACK_IMPORTED_MODULE_4__request_target_isRequest__","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","iterator","next","done","err","isArray","_typeof","obj","RESOURCE_ADDED","RESOURCE_REMOVED","POOL_CLEAR","POOL_CLEARED","POOL_DESTROYED","MAP_FIELD","validTargets","isValidTarget","Boolean","ResourcePool","_EventDispatcher","_this","getPrototypeOf","Map","id","type","map","resource","has","set","hasEventListener","dispatchEvent","delete","destroy","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_ref","_ref2","return","clear","a","events","DefaultResourcePool","_ResourcePool","Error","list","reduce","message","Promise","reject","PENDING","RESOLVED","REJECTED","DESTROYED","createDeferred","Deferred","resolve","__WEBPACK_IMPORTED_MODULE_0__getInternals__","internals","toJSON","_defineProperty","createResource","__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_DATA__","__WEBPACK_IMPORTED_MODULE_1__utils_TARGET_INTERNALS__","__WEBPACK_IMPORTED_MODULE_2__request_target_getInternals__","__WEBPACK_IMPORTED_MODULE_3__utils_getId__","getPoolId","pool","Resource","_Object$definePropert","$id","$type","$poolId","poolId","active","remove","keys","base","Date","now","index","__WEBPACK_IMPORTED_MODULE_2__isResource__","ProxyCommandFields","__WEBPACK_IMPORTED_MODULE_0__Descriptor__","ProxyCommandNames","GET","SET","APPLY","DELETE_PROPERTY","deleteProperty","ProxyCommandsClass","names","fields","createGETDescriptor","createSETDescriptor","createAPPLYDescriptor","ProxyCommands","getResourceType","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","_typeof2","root","factory","Event","_EventDispatcher2","default","hasOwnProp","data","defaultPrevented","ListenersRunner","listeners","onStopped","onComplete","immediatelyStopped","stopImmediatePropagation","event","listener","augmentEvent","clearEvent","eventObject","stopPropagation","EventListeners","_this2","_listeners","_runners","removeRunner","runner","splice","indexOf","eventType","priorityOpt","priority","parseInt","getPrioritiesByKey","String","handlers","createList","result","priorities","_this3","getOwnPropertyNames","handlerIndex","forEach","listenerRemoved","stopped","sort","b","_handlers","_runner","createRunner","run","EventDispatcher","eventPreprocessor","noInit","initialize","_eventPreprocessor","add","removeAll","getEvent","eventOrType","optionalData","isObject","IConvertible","__WEBPACK_IMPORTED_MODULE_1__IConvertible__","__WEBPACK_IMPORTED_MODULE_3__request_target_toJSON__","__WEBPACK_IMPORTED_MODULE_4__resource_ResourcePool__","__WEBPACK_IMPORTED_MODULE_5__resource_Resource__","args","RequestCommandNames","RequestCommandFields","DESTROY","RequestCommands","createDESTROYDescriptor","NO_INIT","createRequestFactory","__WEBPACK_IMPORTED_MODULE_0__Decorator__","__WEBPACK_IMPORTED_MODULE_1__Target__","Factory","cacheImpl","cache","decorator","pack","request","available","createResourceConverter","__WEBPACK_IMPORTED_MODULE_1__utils_hasOwnProperty__","__WEBPACK_IMPORTED_MODULE_2__utils_getResourcePoolId__","__WEBPACK_IMPORTED_MODULE_3__utils_getResourceId__","__WEBPACK_IMPORTED_MODULE_4__utils_isResource__","__WEBPACK_IMPORTED_MODULE_5__utils_isResourceConvertible__","__WEBPACK_IMPORTED_MODULE_6__utils_getRawResource__","__WEBPACK_IMPORTED_MODULE_7__request_target_isPending__","ConverterEvents","RESOURCE_CREATED","RESOURCE_CONVERTED","Converter","registry","setConverter","isRegistered","linkConvertHandler","item","resourceToObject","lookupArray","lookupObject","objectToResource","__WEBPACK_IMPORTED_MODULE_0__isResource__","createPoolRegistry","__WEBPACK_IMPORTED_MODULE_2__ResourcePool__","PoolRegistryEvents","RESOURCE_POOL_CREATED","RESOURCE_POOL_REGISTERED","RESOURCE_POOL_REMOVED","POOLS_FIELD","PoolRegistry","handlePoolDestroyed","register","addEventListener","removeEventListener","api","assign","__WEBPACK_IMPORTED_MODULE_0__DataAccessInterface__","__WEBPACK_IMPORTED_MODULE_1__utils_Deferred__","__WEBPACK_IMPORTED_MODULE_2__command_Descriptor__","__WEBPACK_IMPORTED_MODULE_3__command_Reserved__","__WEBPACK_IMPORTED_MODULE_4__command_internal_RequestCommands__","__WEBPACK_IMPORTED_MODULE_5__command_internal_ProxyCommands__","__WEBPACK_IMPORTED_MODULE_6__request_Target__","__WEBPACK_IMPORTED_MODULE_7__resource_ResourcePool__","__WEBPACK_IMPORTED_MODULE_8__resource_PoolRegistry__","__WEBPACK_IMPORTED_MODULE_9__resource_Converter__","__WEBPACK_IMPORTED_MODULE_10__utils_IConvertible__","__WEBPACK_IMPORTED_MODULE_11__utils_isResourceConvertible__","__WEBPACK_IMPORTED_MODULE_12__utils_getRawResource__","__WEBPACK_IMPORTED_MODULE_13__utils_getResourceData__","__WEBPACK_IMPORTED_MODULE_14__utils_getResourceId__","__WEBPACK_IMPORTED_MODULE_15__utils_getResourcePoolId__","__WEBPACK_IMPORTED_MODULE_16__utils_getResourceType__","__WEBPACK_IMPORTED_MODULE_17__utils_isResource__","__WEBPACK_IMPORTED_MODULE_0__utils_areProxiesAvailable__","__WEBPACK_IMPORTED_MODULE_1__utils_isResource__","__WEBPACK_IMPORTED_MODULE_4__utils_createForeignResource__","__WEBPACK_IMPORTED_MODULE_5__request_Handlers__","__WEBPACK_IMPORTED_MODULE_6__request_ProxyFactory__","__WEBPACK_IMPORTED_MODULE_7__request_Factory__","__WEBPACK_IMPORTED_MODULE_8__resource_ResourcePool__","__WEBPACK_IMPORTED_MODULE_10__resource_PoolRegistry__","descriptors","proxyEnabled","poolRegistry","createPool","resourceConverter","poolDestroyedHandler","setCommands","parse","Proxy","__WEBPACK_IMPORTED_MODULE_0__utils_reject__","__WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__","__WEBPACK_IMPORTED_MODULE_2__utils_TARGET_DATA__","__WEBPACK_IMPORTED_MODULE_3__utils_createRequestPackage__","__WEBPACK_IMPORTED_MODULE_5__SubTargets__","Internals","_SubTargets","handlePromiseResolve","status","parentResolved","temporary","handlePromiseReject","parentRejected","hadChildPromises","setParent","canBeDestroyed","send","handleResolve","handleReject","__WEBPACK_IMPORTED_MODULE_2__utils_TargetStatus__","__WEBPACK_IMPORTED_MODULE_3__Queue__","__WEBPACK_IMPORTED_MODULE_4__Children__","SubTargets","_Children","children","handleSubRequest","_this$parent","handle","queue","hasQueue","hasCommand","handleSend","_toConsumableArray","arr2","from","createQueue","__WEBPACK_IMPORTED_MODULE_0__utils_Deferred__","__WEBPACK_IMPORTED_MODULE_1__toJSON__","Queue","deferred","concat","callback","targetJSON","error","_ref3","__WEBPACK_IMPORTED_MODULE_0__getRawPromise__","Children","__WEBPACK_IMPORTED_MODULE_0__TARGET_DATA__","__WEBPACK_IMPORTED_MODULE_1__getId__","createHandlers","__WEBPACK_IMPORTED_MODULE_0__command_Descriptor__","__WEBPACK_IMPORTED_MODULE_1__command_internal_ProxyCommands__","__WEBPACK_IMPORTED_MODULE_2__utils_hasOwnProperty__","__WEBPACK_IMPORTED_MODULE_3__utils_filterRequestHandlers__","__WEBPACK_IMPORTED_MODULE_4__utils_getResourceType__","DEFAULT_KEY","areProxyHandlersAvailable","throwError","required","HandlersEvents","HANDLERS_UPDATED","Handlers","properties","converter","setCommandsByType","descrs","getPropertyCommands","parentRequest","resultRequest","lookupForPending","all","callImmediately","getCommand","findIndex","__WEBPACK_IMPORTED_MODULE_0__hasOwnProperty__","__WEBPACK_IMPORTED_MODULE_1__command_Descriptor__","__WEBPACK_IMPORTED_MODULE_2__command_Reserved__","applyDescriptor","filterArray","filterHash","getOwnPropertySymbols","createProxyFactory","__WEBPACK_IMPORTED_MODULE_0__Factory__","__WEBPACK_IMPORTED_MODULE_2__command_internal_ProxyCommands__","EXCLUSIONS","caller","createFunctionWrapper","requestTargetProxy","wrapWithProxy","proxyGet","wrapper","proxyApply","thisValue","proxySet","proxyHas","proxyDeleteProperty","proxyOwnKeys","proxyEnumerate","proxyGetOwnPropertyDescriptor","getOwnPropertyDescriptor","proxyGetPrototypeOf","PROXY_HANDLERS","ownKeys","enumerate","ProxyFactory","_Factory","setFactory","getCached","createDecorator","__WEBPACK_IMPORTED_MODULE_0__command_CallbackFactory__","__WEBPACK_IMPORTED_MODULE_1__utils_getResourceType__","Decorator","members","__WEBPACK_IMPORTED_MODULE_0__Flow__","createHandlerFor","flow","isTemporaryFn","commandHandler","_len","_key","CallbackFactory","__WEBPACK_IMPORTED_MODULE_0__request_target_getInternals__","__WEBPACK_IMPORTED_MODULE_1__request_target_toJSON__","__WEBPACK_IMPORTED_MODULE_2__utils_reject__","__WEBPACK_IMPORTED_MODULE_4__request_target_setTemporary__","Flow","makeChildReqest","rejectCall","checkState","childRequest","webpackPolyfill","deprecate","paths","__WEBPACK_IMPORTED_MODULE_0__getStatus__","__WEBPACK_IMPORTED_MODULE_1__getRawResource__"],"mappings":"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","file":"deferred-data-access.direct.js","sourcesContent":["var DataAccessInterface =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"http://localhost:8081/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 28);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__request_Target__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__resource_Resource__ = __webpack_require__(12);\n\n\n/* in case of circular dependency make empty base classes\r\n   for both Target and Resource and check for them:\r\n\r\n   Target will have:\r\ns    class Target extends TargetBase {\r\n\r\n   this function will have:\r\n    object instanceof TargetBase\r\n */\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (object) {\n  if (!object) return false;\n\n  if (object instanceof __WEBPACK_IMPORTED_MODULE_3__resource_Resource__[\"b\" /* default */]\n  // this case for RAW resources passed via JSON conversion,\n  // look like {'resource::data': {$id: '1111', $poolId: '22222'}}\n  || object[__WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__[\"a\" /* default */]] // (object[TARGET_DATA] && typeof object[TARGET_DATA] === 'object')\n  ) {\n      return true;\n    } else if (object instanceof __WEBPACK_IMPORTED_MODULE_2__request_Target__[\"b\" /* default */] || object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]] // (object[TARGET_INTERNALS] && typeof object[TARGET_INTERNALS] === 'object')\n  ) {\n      // now all targets have internals in them, so we have to check if id and poolId are valid\n      // to treat target as resource. In case of Proxy enabled instanceof will be Function,\n      // so we have to check for internals.\n      return object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]].isResource();\n    }\n\n  return false;\n});\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (Symbol('request.target:internals'));\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ('resource::data');\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__ = __webpack_require__(1);\n/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (target) {\n  return target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]];\n});\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export DEFAULT_IS_TEMPORARY */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return createDescriptor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return addDescriptorTo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return descriptorGeneratorFactory; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_isResource__ = __webpack_require__(0);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n// It will make all resources temporary and user must explicitly set resource permanent\nvar DEFAULT_IS_TEMPORARY = function DEFAULT_IS_TEMPORARY(parent, child) {\n  return Object(__WEBPACK_IMPORTED_MODULE_0__utils_isResource__[\"a\" /* default */])(child);\n};\n\nvar Descriptor =\n// FIXME type > command; name > propertyName\nfunction Descriptor(command, handler) {\n  var propertyName = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n\n  _classCallCheck(this, Descriptor);\n\n  this.propertyName = propertyName !== undefined ? propertyName : command;\n  this.command = command;\n  this.handler = handler;\n  /**\r\n   * @type {function(): boolean}\r\n   */\n  this.isTemporary = DEFAULT_IS_TEMPORARY;\n  this.cacheable = true;\n  // FIXME no need to pass virtual, check for propertyName is null -- its virtual then\n  this.virtual = false;\n  this.resourceType = null;\n};\n\nvar createDescriptor = function createDescriptor(command, handler, propertyName) {\n  var isTemporary = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : DEFAULT_IS_TEMPORARY;\n  var resourceType = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n  var cacheable = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n  var virtual = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n\n  var descriptor = new Descriptor(command, handler, propertyName);\n  descriptor.resourceType = resourceType;\n  descriptor.cacheable = cacheable;\n  descriptor.virtual = virtual;\n  if (isTemporary) {\n    descriptor.isTemporary = isTemporary;\n  }\n  // We can use Object.freeze(), it keeps class/constructor information\n  return Object.freeze(descriptor);\n};\n\nvar addDescriptorTo = function addDescriptorTo(descriptor, target) {\n  if (target instanceof Array) {\n    target.push(descriptor);\n  } else if (target) {\n    target[descriptor.propertyName] = descriptor;\n  }\n};\n\nvar descriptorGeneratorFactory = function descriptorGeneratorFactory(command, propertyName) {\n  return function (handler, target) {\n    var isTemporary = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_IS_TEMPORARY;\n    var resourceType = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    var cacheable = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n    var virtual = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n\n    var descriptor = createDescriptor(command, handler, propertyName, isTemporary, resourceType, cacheable, virtual);\n    addDescriptorTo(descriptor, target);\n    return Object.freeze(descriptor);\n  };\n};\n\n/* harmony default export */ __webpack_exports__[\"c\"] = (Descriptor);\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ((function (hasOwnProperty) {\n  return function (target, property) {\n    return hasOwnProperty.call(target, property);\n  };\n})(Object.prototype.hasOwnProperty));\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createRequestTarget; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__target_Internals__ = __webpack_require__(32);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n/**\r\n * The object that will be available on other side\r\n * @class DataAccessInterface.RequestTarget\r\n * @param _promise {Promise}\r\n * @param _requestHandlers {Handlers}\r\n */\n\nvar Target = function () {\n  function Target(promise, requestHandlers) {\n    _classCallCheck(this, Target);\n\n    this[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]] = new __WEBPACK_IMPORTED_MODULE_1__target_Internals__[\"a\" /* default */](this, promise, requestHandlers);\n  }\n\n  _createClass(Target, [{\n    key: 'then',\n    value: function then() {\n      var _TARGET_INTERNALS;\n\n      return (_TARGET_INTERNALS = this[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]]).then.apply(_TARGET_INTERNALS, arguments);\n    }\n  }, {\n    key: 'catch',\n    value: function _catch() {\n      var _TARGET_INTERNALS2;\n\n      return (_TARGET_INTERNALS2 = this[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]]).catch.apply(_TARGET_INTERNALS2, arguments);\n    }\n  }]);\n\n  return Target;\n}();\n\nvar createRequestTarget = function createRequestTarget(promise, requestHandlers) {\n  return new Target(promise, requestHandlers);\n};\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (Target);\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ResourcePoolEvents; });\n/* unused harmony export MAP_FIELD */\n/* unused harmony export isValidTarget */\n/* unused harmony export setValidTargets */\n/* unused harmony export getDefaultValidTargets */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return defaultResourcePool; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return createResourcePool; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_event_dispatcher__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_event_dispatcher__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_getId__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_isResource__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Resource__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__request_target_isRequest__ = __webpack_require__(46);\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\nvar ResourcePoolEvents = Object.freeze({\n  RESOURCE_ADDED: 'resourceAdded',\n  RESOURCE_REMOVED: 'resourceRemoved',\n  POOL_CLEAR: 'poolClear',\n  POOL_CLEARED: 'poolCleared',\n  POOL_DESTROYED: 'poolDestroyed'\n});\n\nvar MAP_FIELD = Symbol('ResourcePool::map');\n\nvar validTargets = {};\n\nvar isValidTarget = function isValidTarget(target) {\n  return !Object(__WEBPACK_IMPORTED_MODULE_2__utils_isResource__[\"a\" /* default */])(target) && !Object(__WEBPACK_IMPORTED_MODULE_4__request_target_isRequest__[\"a\" /* default */])(target) && Boolean(validTargets[typeof target === 'undefined' ? 'undefined' : _typeof(target)]);\n};\n\nvar setValidTargets = function setValidTargets(list) {\n  validTargets = list.reduce(function (validTargets, target) {\n    validTargets[target] = true;\n\n    return validTargets;\n  }, {});\n};\n\nvar getDefaultValidTargets = function getDefaultValidTargets() {\n  return ['object', 'function'];\n};\n\nvar ResourcePool = function (_EventDispatcher) {\n  _inherits(ResourcePool, _EventDispatcher);\n\n  function ResourcePool() {\n    _classCallCheck(this, ResourcePool);\n\n    var _this = _possibleConstructorReturn(this, (ResourcePool.__proto__ || Object.getPrototypeOf(ResourcePool)).call(this));\n\n    _this[MAP_FIELD] = new Map();\n    Object.defineProperties(_this, {\n      id: {\n        value: Object(__WEBPACK_IMPORTED_MODULE_1__utils_getId__[\"a\" /* default */])()\n      }\n    });\n    return _this;\n  }\n\n  _createClass(ResourcePool, [{\n    key: 'set',\n    value: function set(value) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      var map = this[MAP_FIELD];\n      var resource = null;\n      if (isValidTarget(value)) {\n        if (map.has(value)) {\n          resource = map.get(value);\n        } else {\n          resource = Object(__WEBPACK_IMPORTED_MODULE_3__Resource__[\"a\" /* createResource */])(this, value, type || (typeof value === 'undefined' ? 'undefined' : _typeof(value)));\n          map.set(resource.id, resource);\n          map.set(value, resource);\n          if (this.hasEventListener(ResourcePoolEvents.RESOURCE_ADDED)) {\n            this.dispatchEvent(ResourcePoolEvents.RESOURCE_ADDED, resource);\n          }\n        }\n      }\n\n      return resource;\n    }\n  }, {\n    key: 'has',\n    value: function has(target) {\n      return this[MAP_FIELD].has(target);\n    }\n  }, {\n    key: 'get',\n    value: function get(target) {\n      return this[MAP_FIELD].get(target);\n    }\n  }, {\n    key: 'remove',\n    value: function remove(value) {\n      var map = this[MAP_FIELD];\n      var resource = map.get(value);\n      if (resource) {\n        map.delete(resource.id);\n        map.delete(resource.value);\n        if (this.hasEventListener(ResourcePoolEvents.RESOURCE_REMOVED)) {\n          this.dispatchEvent(ResourcePoolEvents.RESOURCE_REMOVED, resource);\n        }\n        resource.destroy();\n      }\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      var map = this[MAP_FIELD];\n      if (this.hasEventListener(ResourcePoolEvents.POOL_CLEAR)) {\n        this.dispatchEvent(ResourcePoolEvents.POOL_CLEAR, this);\n      }\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = map[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _ref = _step.value;\n\n          var _ref2 = _slicedToArray(_ref, 2);\n\n          var key = _ref2[0];\n          var resource = _ref2[1];\n\n          if (typeof key === 'string' && key === resource.id) {\n            resource.destroy();\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      map.clear();\n\n      if (this.hasEventListener(ResourcePoolEvents.POOL_CLEARED)) {\n        this.dispatchEvent(ResourcePoolEvents.POOL_CLEARED, this);\n      }\n    }\n  }, {\n    key: 'isActive',\n    value: function isActive() {\n      return Boolean(this[MAP_FIELD]);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this.clear();\n      // intentionally make it not usable after its destroyed\n      delete this[MAP_FIELD];\n      if (this.hasEventListener(ResourcePoolEvents.POOL_DESTROYED)) {\n        // FIXME why for second parameter?\n        this.dispatchEvent(ResourcePoolEvents.POOL_DESTROYED, this);\n      }\n    }\n  }]);\n\n  return ResourcePool;\n}(__WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default.a);\n\nResourcePool.events = ResourcePoolEvents;\n\nvar DefaultResourcePool = function (_ResourcePool) {\n  _inherits(DefaultResourcePool, _ResourcePool);\n\n  function DefaultResourcePool() {\n    _classCallCheck(this, DefaultResourcePool);\n\n    return _possibleConstructorReturn(this, (DefaultResourcePool.__proto__ || Object.getPrototypeOf(DefaultResourcePool)).apply(this, arguments));\n  }\n\n  _createClass(DefaultResourcePool, [{\n    key: 'destroy',\n\n    // INFO default ResourcePool should not be destroyable;\n    value: function destroy() {\n      throw new Error('Default ResourcePool cannot be destroyed.');\n    }\n  }]);\n\n  return DefaultResourcePool;\n}(ResourcePool);\n\nvar defaultResourcePool = new DefaultResourcePool();\n\nvar createResourcePool = function createResourcePool() {\n  return new ResourcePool();\n};\n\nsetValidTargets(getDefaultValidTargets());\n\n/* harmony default export */ __webpack_exports__[\"c\"] = (ResourcePool);\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (message) {\n  return Promise.reject(new Error(message));\n});\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object.freeze({\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n  DESTROYED: 'destroyed'\n}));\n\n/***/ }),\n/* 10 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createDeferred; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Deferred = function Deferred() {\n  var _this = this;\n\n  _classCallCheck(this, Deferred);\n\n  this.promise = new Promise(function (resolve, reject) {\n    _this.resolve = resolve;\n    _this.reject = reject;\n  });\n};\n\nvar createDeferred = function createDeferred() {\n  return new Deferred();\n};\n/* harmony default export */ __webpack_exports__[\"b\"] = (Deferred);\n\n/***/ }),\n/* 11 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__getInternals__ = __webpack_require__(3);\n/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (target) {\n  var internals = Object(__WEBPACK_IMPORTED_MODULE_0__getInternals__[\"a\" /* default */])(target);\n  return internals ? internals.toJSON() : undefined;\n});\n\n/***/ }),\n/* 12 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createResource; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__request_target_getInternals__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_getId__ = __webpack_require__(13);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\nvar getPoolId = function getPoolId(pool) {\n  return pool ? pool.id : null;\n};\n\n/**\r\n * @exports Resource\r\n */\n\nvar Resource = function () {\n  function Resource(pool, value, type, id) {\n    var _this = this,\n        _Object$definePropert;\n\n    _classCallCheck(this, Resource);\n\n    this.toJSON = function () {\n      return _defineProperty({}, __WEBPACK_IMPORTED_MODULE_0__utils_TARGET_DATA__[\"a\" /* default */], {\n        $id: _this.id,\n        $type: _this.type,\n        $poolId: _this.poolId\n      });\n    };\n\n    Object.defineProperties(this, (_Object$definePropert = {}, _defineProperty(_Object$definePropert, __WEBPACK_IMPORTED_MODULE_1__utils_TARGET_INTERNALS__[\"a\" /* default */], {\n      value: {\n        pool: pool,\n        value: value,\n        type: type,\n        id: id,\n        active: true,\n        poolId: getPoolId(pool)\n      }\n    }), _defineProperty(_Object$definePropert, __WEBPACK_IMPORTED_MODULE_0__utils_TARGET_DATA__[\"a\" /* default */], {\n      get: this.toJSON\n    }), _Object$definePropert));\n  }\n\n  _createClass(Resource, [{\n    key: 'destroy',\n    value: function destroy() {\n      var internals = Object(__WEBPACK_IMPORTED_MODULE_2__request_target_getInternals__[\"a\" /* default */])(this);\n      var id = internals.id,\n          pool = internals.pool;\n\n\n      if (!internals.active) {\n        return;\n      }\n\n      internals.active = false;\n      pool.remove(id);\n\n      Object.keys(internals).map(function (name) {\n        return delete internals[name];\n      });\n    }\n  }, {\n    key: 'active',\n    get: function get() {\n      return Boolean(Object(__WEBPACK_IMPORTED_MODULE_2__request_target_getInternals__[\"a\" /* default */])(this).active);\n    }\n  }, {\n    key: 'value',\n    get: function get() {\n      return Object(__WEBPACK_IMPORTED_MODULE_2__request_target_getInternals__[\"a\" /* default */])(this).value;\n    }\n  }, {\n    key: 'type',\n    get: function get() {\n      return Object(__WEBPACK_IMPORTED_MODULE_2__request_target_getInternals__[\"a\" /* default */])(this).type || _typeof(Object(__WEBPACK_IMPORTED_MODULE_2__request_target_getInternals__[\"a\" /* default */])(this).value);\n    }\n  }, {\n    key: 'id',\n    get: function get() {\n      return Object(__WEBPACK_IMPORTED_MODULE_2__request_target_getInternals__[\"a\" /* default */])(this).id;\n    }\n  }, {\n    key: 'poolId',\n    get: function get() {\n      return Object(__WEBPACK_IMPORTED_MODULE_2__request_target_getInternals__[\"a\" /* default */])(this).poolId;\n    }\n  }]);\n\n  return Resource;\n}();\n\nvar createResource = function createResource(pool, value, resourceType) {\n  var id = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  return new Resource(pool, value, resourceType, id || Object(__WEBPACK_IMPORTED_MODULE_3__utils_getId__[\"a\" /* default */])());\n};\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (Resource);\n\n/***/ }),\n/* 13 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar base = \"DA/\" + Date.now() + \"/\";\nvar index = 0;\n/* harmony default export */ __webpack_exports__[\"a\"] = (function () {\n  return \"\" + base + ++index + \"/\" + Date.now();\n});\n\n/***/ }),\n/* 14 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__isResource__ = __webpack_require__(0);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (object) {\n  if (_typeof(object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]]) === 'object') {\n    return object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]].poolId;\n  } else if (Object(__WEBPACK_IMPORTED_MODULE_2__isResource__[\"a\" /* default */])(object)) {\n    return object[__WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__[\"a\" /* default */]].$poolId;\n  }\n  return null;\n});\n\n/***/ }),\n/* 15 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__isResource__ = __webpack_require__(0);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (object) {\n  // if (object instanceof Resource || object instanceof Target) {\n  if (_typeof(object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]]) === 'object') {\n    return object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]].id;\n  } else if (Object(__WEBPACK_IMPORTED_MODULE_2__isResource__[\"a\" /* default */])(object)) {\n    return object[__WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__[\"a\" /* default */]].$id;\n  }\n\n  return null;\n});\n\n/***/ }),\n/* 16 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export ProxyCommandNames */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ProxyCommandFields; });\n/* unused harmony export createDescriptors */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Descriptor__ = __webpack_require__(4);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar ProxyCommandNames = Object.freeze({\n  GET: 'get',\n  SET: 'set',\n  APPLY: 'apply',\n  DELETE_PROPERTY: 'deleteProperty'\n});\n\nvar ProxyCommandFields = Object.freeze({\n  get: Symbol('proxy.commands::get'),\n  set: Symbol('proxy.commands::set'),\n  apply: Symbol('proxy.commands::apply'),\n  deleteProperty: Symbol('proxy.commands::deleteProperty')\n});\n\nvar ProxyCommandsClass = function () {\n  function ProxyCommandsClass() {\n    _classCallCheck(this, ProxyCommandsClass);\n\n    this.names = ProxyCommandNames;\n    this.fields = ProxyCommandFields;\n    this.createGETDescriptor = Object(__WEBPACK_IMPORTED_MODULE_0__Descriptor__[\"d\" /* descriptorGeneratorFactory */])(ProxyCommandNames.GET, ProxyCommandFields.get);\n    this.createSETDescriptor = Object(__WEBPACK_IMPORTED_MODULE_0__Descriptor__[\"d\" /* descriptorGeneratorFactory */])(ProxyCommandNames.SET, ProxyCommandFields.set);\n    this.createAPPLYDescriptor = Object(__WEBPACK_IMPORTED_MODULE_0__Descriptor__[\"d\" /* descriptorGeneratorFactory */])(ProxyCommandNames.APPLY, ProxyCommandFields.apply);\n\n    Object.freeze(this);\n  }\n\n  _createClass(ProxyCommandsClass, [{\n    key: 'list',\n    get: function get() {\n      return [ProxyCommandNames.GET, ProxyCommandNames.SET, ProxyCommandNames.APPLY, ProxyCommandNames.DELETE_PROPERTY];\n    }\n  }, {\n    key: 'required',\n    get: function get() {\n      return [ProxyCommandNames.GET, ProxyCommandNames.SET, ProxyCommandNames.APPLY];\n    }\n  }]);\n\n  return ProxyCommandsClass;\n}();\n\nvar ProxyCommands = new ProxyCommandsClass();\n\nvar createDescriptors = function createDescriptors(handlers) {\n  var target = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var isTemporary = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n  var resourceType = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  var cacheable = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n  var virtual = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n\n  var args = [isTemporary, resourceType, cacheable, virtual];\n  ProxyCommands.list.forEach(function (name) {\n    var handler = handlers[name];\n    var field = ProxyCommandFields[name];\n\n    if (handler instanceof Function) {\n      var descriptor = __WEBPACK_IMPORTED_MODULE_0__Descriptor__[\"b\" /* createDescriptor */].apply(undefined, [name, handler, field].concat(args));\n      descriptor = Object.freeze(descriptor);\n\n      if (target instanceof Array) {\n        target.push(descriptor);\n      } else if (target) {\n        target[field] = descriptor;\n      }\n    }\n  });\n\n  return target;\n};\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (ProxyCommands);\n\n/***/ }),\n/* 17 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__isResource__ = __webpack_require__(0);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\n\n\n\nvar getResourceType = function getResourceType(object) {\n  if (_typeof(object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]]) === 'object') {\n    return object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]].type;\n  } else if (Object(__WEBPACK_IMPORTED_MODULE_2__isResource__[\"a\" /* default */])(object)) {\n    return object[__WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__[\"a\" /* default */]].$type;\n  }\n\n  return null;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (getResourceType);\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var _typeof2 = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function webpackUniversalModuleDefinition(root, factory) {\n  if (( false ? 'undefined' : _typeof2(exports)) === 'object' && ( false ? 'undefined' : _typeof2(module)) === 'object') module.exports = factory();else if (true) !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));else if ((typeof exports === 'undefined' ? 'undefined' : _typeof2(exports)) === 'object') exports[\"EventDispatcher\"] = factory();else root[\"EventDispatcher\"] = factory();\n})(this, function () {\n  return (/******/function (modules) {\n      // webpackBootstrap\n      /******/ // The module cache\n      /******/var installedModules = {};\n      /******/\n      /******/ // The require function\n      /******/function __webpack_require__(moduleId) {\n        /******/\n        /******/ // Check if module is in cache\n        /******/if (installedModules[moduleId]) {\n          /******/return installedModules[moduleId].exports;\n          /******/\n        }\n        /******/ // Create a new module (and put it into the cache)\n        /******/var module = installedModules[moduleId] = {\n          /******/i: moduleId,\n          /******/l: false,\n          /******/exports: {}\n          /******/ };\n        /******/\n        /******/ // Execute the module function\n        /******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        /******/\n        /******/ // Flag the module as loaded\n        /******/module.l = true;\n        /******/\n        /******/ // Return the exports of the module\n        /******/return module.exports;\n        /******/\n      }\n      /******/\n      /******/\n      /******/ // expose the modules object (__webpack_modules__)\n      /******/__webpack_require__.m = modules;\n      /******/\n      /******/ // expose the module cache\n      /******/__webpack_require__.c = installedModules;\n      /******/\n      /******/ // define getter function for harmony exports\n      /******/__webpack_require__.d = function (exports, name, getter) {\n        /******/if (!__webpack_require__.o(exports, name)) {\n          /******/Object.defineProperty(exports, name, {\n            /******/configurable: false,\n            /******/enumerable: true,\n            /******/get: getter\n            /******/ });\n          /******/\n        }\n        /******/\n      };\n      /******/\n      /******/ // getDefaultExport function for compatibility with non-harmony modules\n      /******/__webpack_require__.n = function (module) {\n        /******/var getter = module && module.__esModule ?\n        /******/function getDefault() {\n          return module['default'];\n        } :\n        /******/function getModuleExports() {\n          return module;\n        };\n        /******/__webpack_require__.d(getter, 'a', getter);\n        /******/return getter;\n        /******/\n      };\n      /******/\n      /******/ // Object.prototype.hasOwnProperty.call\n      /******/__webpack_require__.o = function (object, property) {\n        return Object.prototype.hasOwnProperty.call(object, property);\n      };\n      /******/\n      /******/ // __webpack_public_path__\n      /******/__webpack_require__.p = \"http://localhost:8081/dist/\";\n      /******/\n      /******/ // Load entry module and return exports\n      /******/return __webpack_require__(__webpack_require__.s = 0);\n      /******/\n    }(\n    /************************************************************************/\n    /******/[\n    /* 0 */\n    /***/function (module, exports, __webpack_require__) {\n\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Event = undefined;\n\n      var _EventDispatcher = __webpack_require__(1);\n\n      var _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\n\n      function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : { default: obj };\n      }\n\n      exports.default = _EventDispatcher2.default;\n      exports.Event = _EventDispatcher.Event;\n\n      /***/\n    },\n    /* 1 */\n    /***/function (module, exports, __webpack_require__) {\n\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var _typeof = typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\" ? function (obj) {\n        return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);\n      } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);\n      };\n\n      var _createClass = function () {\n        function defineProperties(target, props) {\n          for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n          }\n        }return function (Constructor, protoProps, staticProps) {\n          if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n        };\n      }();\n\n      function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n          throw new TypeError(\"Cannot call a class as a function\");\n        }\n      }\n\n      var hasOwnProp = function hasOwnProp(target, name) {\n        return Object.prototype.hasOwnProperty.call(target, name);\n      }; /**\r\n          * Created by Oleg Galaburda on 09.02.16.\r\n          * \r\n          */\n\n      var Event = exports.Event = function () {\n        function Event(type) {\n          var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n          _classCallCheck(this, Event);\n\n          this.type = type;\n          this.data = data;\n          this.defaultPrevented = false;\n        }\n\n        _createClass(Event, [{\n          key: 'toJSON',\n          value: function toJSON() {\n            return { type: this.type, data: this.data };\n          }\n        }, {\n          key: 'isDefaultPrevented',\n          value: function isDefaultPrevented() {\n            return this.defaultPrevented;\n          }\n        }, {\n          key: 'preventDefault',\n          value: function preventDefault() {\n            this.defaultPrevented = true;\n          }\n        }]);\n\n        return Event;\n      }();\n\n      var ListenersRunner = function () {\n        function ListenersRunner(listeners, onStopped, onComplete) {\n          var _this = this;\n\n          _classCallCheck(this, ListenersRunner);\n\n          this.index = -1;\n          this.immediatelyStopped = false;\n\n          this.stopImmediatePropagation = function () {\n            _this.immediatelyStopped = true;\n          };\n\n          this.listeners = listeners;\n          this.onStopped = onStopped;\n          this.onComplete = onComplete;\n        }\n\n        _createClass(ListenersRunner, [{\n          key: 'run',\n          value: function run(event, target) {\n            var listener = void 0;\n            var listeners = this.listeners;\n\n            this.augmentEvent(event);\n            // TODO this has to be handled in separate object ListenersRunner that should be\n            // created for each call() call and asked for index validation on each listener remove.\n            for (this.index = 0; this.index < listeners.length; this.index++) {\n              if (this.immediatelyStopped) break;\n              listener = listeners[this.index];\n              listener.call(target, event);\n            }\n            this.clearEvent(event);\n            this.onComplete(this);\n          }\n        }, {\n          key: 'augmentEvent',\n          value: function augmentEvent(eventObject) {\n            var event = eventObject;\n            event.stopPropagation = this.onStopped;\n            event.stopImmediatePropagation = this.stopImmediatePropagation;\n          }\n\n          /* eslint class-methods-use-this: \"off\" */\n\n        }, {\n          key: 'clearEvent',\n          value: function clearEvent(eventObject) {\n            var event = eventObject;\n            delete event.stopPropagation;\n            delete event.stopImmediatePropagation;\n          }\n        }, {\n          key: 'listenerRemoved',\n          value: function listenerRemoved(listeners, index) {\n            if (listeners === this.listeners && index <= this.index) {\n              this.index--;\n            }\n          }\n        }]);\n\n        return ListenersRunner;\n      }();\n\n      var EventListeners = function () {\n        function EventListeners() {\n          var _this2 = this;\n\n          _classCallCheck(this, EventListeners);\n\n          this._listeners = {};\n          this._runners = [];\n\n          this.removeRunner = function (runner) {\n            _this2._runners.splice(_this2._runners.indexOf(runner), 1);\n          };\n        }\n        /**\r\n         * key - event Type\r\n         * value - hash of priorities\r\n         *    key - priority\r\n         *    value - list of handlers\r\n         * @type {Object<string, Object.<string, Array<number, Function>>>}\r\n         * @private\r\n         */\n\n        _createClass(EventListeners, [{\n          key: 'createList',\n          value: function createList(eventType, priorityOpt) {\n            var priority = parseInt(priorityOpt, 10);\n            var target = this.getPrioritiesByKey(eventType);\n            var key = String(priority);\n            var value = void 0;\n            if (hasOwnProp(target, key)) {\n              value = target[key];\n            } else {\n              value = [];\n              target[key] = value;\n            }\n            return value;\n          }\n        }, {\n          key: 'getPrioritiesByKey',\n          value: function getPrioritiesByKey(key) {\n            var value = void 0;\n            if (hasOwnProp(this._listeners, key)) {\n              value = this._listeners[key];\n            } else {\n              value = {};\n              this._listeners[key] = value;\n            }\n            return value;\n          }\n        }, {\n          key: 'add',\n          value: function add(eventType, handler, priority) {\n            var handlers = this.createList(eventType, priority);\n            if (handlers.indexOf(handler) < 0) {\n              handlers.push(handler);\n            }\n          }\n        }, {\n          key: 'has',\n          value: function has(eventType) {\n            var priority = void 0;\n            var result = false;\n            var priorities = this.getPrioritiesByKey(eventType);\n            if (priorities) {\n              for (priority in priorities) {\n                if (hasOwnProp(priorities, priority)) {\n                  result = true;\n                  break;\n                }\n              }\n            }\n            return result;\n          }\n        }, {\n          key: 'remove',\n          value: function remove(eventType, handler) {\n            var _this3 = this;\n\n            var priorities = this.getPrioritiesByKey(eventType);\n            if (priorities) {\n              var list = Object.getOwnPropertyNames(priorities);\n              var length = list.length;\n\n              var _loop = function _loop(index) {\n                var priority = list[index];\n                var handlers = priorities[priority];\n                var handlerIndex = handlers.indexOf(handler);\n                if (handlerIndex >= 0) {\n                  handlers.splice(handlerIndex, 1);\n                  if (!handlers.length) {\n                    delete priorities[priority];\n                  }\n                  _this3._runners.forEach(function (runner) {\n                    runner.listenerRemoved(handlers, handlerIndex);\n                  });\n                }\n              };\n\n              for (var index = 0; index < length; index++) {\n                _loop(index);\n              }\n            }\n          }\n        }, {\n          key: 'removeAll',\n          value: function removeAll(eventType) {\n            delete this._listeners[eventType];\n          }\n        }, {\n          key: 'createRunner',\n          value: function createRunner(handlers, onStopped) {\n            var runner = new ListenersRunner(handlers, onStopped, this.removeRunner);\n            this._runners.push(runner);\n            return runner;\n          }\n        }, {\n          key: 'call',\n          value: function call(event, target) {\n            var priorities = this.getPrioritiesByKey(event.type);\n            var stopped = false;\n            var stopPropagation = function stopPropagation() {\n              stopped = true;\n            };\n            if (priorities) {\n              // getOwnPropertyNames() or keys()?\n              var list = Object.getOwnPropertyNames(priorities).sort(function (a, b) {\n                return a - b;\n              });\n              var length = list.length;\n\n              for (var index = 0; index < length; index++) {\n                if (stopped) break;\n                var _handlers = priorities[list[index]];\n                // in case if all handlers of priority were removed while event\n                // was dispatched and handlers become undefined.\n                if (_handlers) {\n                  var _runner = this.createRunner(_handlers, stopPropagation);\n                  _runner.run(event, target);\n                  if (_runner.immediatelyStopped) break;\n                }\n              }\n            }\n          }\n        }]);\n\n        return EventListeners;\n      }();\n\n      var EventDispatcher = function () {\n        function EventDispatcher() {\n          var eventPreprocessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n          var noInit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n          _classCallCheck(this, EventDispatcher);\n\n          if (!noInit) {\n            this.initialize(eventPreprocessor);\n          }\n        }\n\n        /**\r\n         * @private\r\n         */\n\n        _createClass(EventDispatcher, [{\n          key: 'initialize',\n          value: function initialize() {\n            var eventPreprocessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n            this._eventPreprocessor = eventPreprocessor;\n            this._listeners = new EventListeners();\n          }\n        }, {\n          key: 'addEventListener',\n          value: function addEventListener(eventType, listener) {\n            var priority = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n            this._listeners.add(eventType, listener, -priority || 0);\n          }\n        }, {\n          key: 'hasEventListener',\n          value: function hasEventListener(eventType) {\n            return this._listeners.has(eventType);\n          }\n        }, {\n          key: 'removeEventListener',\n          value: function removeEventListener(eventType, listener) {\n            this._listeners.remove(eventType, listener);\n          }\n        }, {\n          key: 'removeAllEventListeners',\n          value: function removeAllEventListeners(eventType) {\n            this._listeners.removeAll(eventType);\n          }\n        }, {\n          key: 'dispatchEvent',\n          value: function dispatchEvent(event, data) {\n            var eventObject = EventDispatcher.getEvent(event, data);\n            if (this._eventPreprocessor) {\n              eventObject = this._eventPreprocessor.call(this, eventObject);\n            }\n            this._listeners.call(eventObject);\n          }\n        }], [{\n          key: 'isObject',\n          value: function isObject(value) {\n            return (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value !== null;\n          }\n        }, {\n          key: 'getEvent',\n          value: function getEvent(eventOrType, optionalData) {\n            var event = eventOrType;\n            if (!EventDispatcher.isObject(eventOrType)) {\n              event = new EventDispatcher.Event(String(eventOrType), optionalData);\n            }\n            return event;\n          }\n        }, {\n          key: 'create',\n          value: function create(eventPreprocessor) {\n            return new EventDispatcher(eventPreprocessor);\n          }\n\n          /* eslint no-undef: \"off\" */\n\n        }]);\n\n        return EventDispatcher;\n      }();\n\n      EventDispatcher.Event = Event;\n\n      exports.default = EventDispatcher;\n\n      /***/\n    }]\n    /******/)\n  );\n});\n//# sourceMappingURL=event-dispatcher.js.map\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(45)(module)))\n\n/***/ }),\n/* 19 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * Interface for all resource types, these will be treated as resources automatically\r\n * @interface\r\n */\nvar IConvertible = function IConvertible() {\n  _classCallCheck(this, IConvertible);\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (IConvertible);\n\n/***/ }),\n/* 20 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__IConvertible__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__isResource__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__request_target_toJSON__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__resource_ResourcePool__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__resource_Resource__ = __webpack_require__(12);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (object, pool) {\n  pool = pool || __WEBPACK_IMPORTED_MODULE_4__resource_ResourcePool__[\"d\" /* defaultResourcePool */];\n\n  if (object instanceof __WEBPACK_IMPORTED_MODULE_5__resource_Resource__[\"b\" /* default */]) {\n    return object.toJSON();\n  } else if (_typeof(object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]]) === 'object') {\n    return Object(__WEBPACK_IMPORTED_MODULE_3__request_target_toJSON__[\"a\" /* default */])(object);\n  } else if (object instanceof __WEBPACK_IMPORTED_MODULE_1__IConvertible__[\"a\" /* default */] || typeof object === 'function') {\n    return pool.set(object).toJSON();\n  } else if (Object(__WEBPACK_IMPORTED_MODULE_2__isResource__[\"a\" /* default */])(object)) {\n    return object;\n  }\n\n  return null;\n});\n\n/***/ }),\n/* 21 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * All arguments are required\r\n * @param command Command name, Descriptor's name\r\n * @param propertyName Property name, this is the name of the handler called against target object\r\n * @param args Arguments passed to handler\r\n * @param target JSON object representing resource or target, its raw value\r\n * @returns {{command: *, args: *, target: *}}\r\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (propertyName, command, args, target) {\n  return {\n    propertyName: propertyName,\n    command: command,\n    args: args,\n    target: target\n  };\n});\n\n/***/ }),\n/* 22 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return RequestCommandNames; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RequestCommandFields; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Descriptor__ = __webpack_require__(4);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar RequestCommandNames = Object.freeze({\n  DESTROY: '::destroy.resource'\n});\n\nvar RequestCommandFields = Object.freeze({\n  DESTROY: Symbol('::destroy.resource')\n});\n\n/**\r\n * Destroy is unique type that exists for every Target\r\n * and does not have a method on its instances. This type will\r\n * be send each time Target.destroy() is applied to\r\n * Target in stance.\r\n */\n\nvar RequestCommands = function RequestCommands() {\n  _classCallCheck(this, RequestCommands);\n\n  this.names = RequestCommandNames;\n  this.fields = RequestCommandFields;\n\n  this.createDESTROYDescriptor = function (handler, target) {\n    var descriptor = new __WEBPACK_IMPORTED_MODULE_0__Descriptor__[\"c\" /* default */](RequestCommandNames.DESTROY, handler, RequestCommandFields.DESTROY);\n    descriptor.cacheable = false;\n    descriptor.virtual = true;\n    Object(__WEBPACK_IMPORTED_MODULE_0__Descriptor__[\"a\" /* addDescriptorTo */])(descriptor, target);\n    return Object.freeze(descriptor);\n  };\n\n  Object.freeze(this);\n};\n\n/* harmony default export */ __webpack_exports__[\"c\"] = (new RequestCommands());\n\n/***/ }),\n/* 23 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Reserved words\r\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object.freeze({\n  /**\r\n   * Contains property names that cannot be used for Descriptor's\r\n   */\n  names: Object.freeze({\n    // INFO Exposed Promise method, cannot be overwritten by type\n    then: true,\n    // INFO Exposed Promise method, cannot be overwritten by type\n    catch: true\n  })\n}));\n\n/***/ }),\n/* 24 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return NO_INIT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return createRequestFactory; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Decorator__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Target__ = __webpack_require__(6);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar NO_INIT = {};\n\nvar Factory = function () {\n  /*\r\n   function DummyCacheImpl() {\r\n   this.get = function(name, pack) {\r\n     };\r\n   this.set = function(name, pack, request) {\r\n     };\r\n   }\r\n   */\n  function Factory(handlers) {\n    var cacheImpl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    _classCallCheck(this, Factory);\n\n    this.cache = cacheImpl;\n    this.handlers = handlers;\n\n    if (handlers !== NO_INIT) {\n      this.decorator = Object(__WEBPACK_IMPORTED_MODULE_0__Decorator__[\"a\" /* createDecorator */])(this, handlers);\n    }\n  }\n\n  _createClass(Factory, [{\n    key: 'create',\n    value: function create(promise) {\n      var pack = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var cacheable = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      var request = Object(__WEBPACK_IMPORTED_MODULE_1__Target__[\"a\" /* createRequestTarget */])(promise, this.handlers);\n      if (this.handlers.available) {\n        this.decorator.apply(request);\n      }\n\n      if (this.cache && cacheable) {\n        this.cache.set(pack, request);\n      }\n\n      return request;\n    }\n  }, {\n    key: 'getCached',\n    value: function getCached(pack) {\n      return this.cache && this.cache.get(pack);\n    }\n  }]);\n\n  return Factory;\n}();\n\nvar createRequestFactory = function createRequestFactory(handlers, cacheImpl) {\n  return new Factory(handlers, cacheImpl);\n};\n\n/* harmony default export */ __webpack_exports__[\"c\"] = (Factory);\n\n/***/ }),\n/* 25 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export ConverterEvents */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createResourceConverter; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_event_dispatcher__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_event_dispatcher__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_hasOwnProperty__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_getResourcePoolId__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_getResourceId__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_isResource__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_isResourceConvertible__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils_getRawResource__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__request_target_isPending__ = __webpack_require__(47);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\nvar ConverterEvents = Object.freeze({\n  RESOURCE_CREATED: 'resourceCreated',\n  RESOURCE_CONVERTED: 'resourceConverted'\n});\n\n/**\r\n * Resource converter contains bunch of methods to lookup for resources\r\n * and registering them, converting them into RAWResource or into\r\n * Targets, depending on their origin.\r\n * Before sending data, bundled resources should be registered in ResourcePool\r\n * and then converted to RAWResource objects.\r\n * After data received, its RAWResources should be converted to Targets\r\n * for not resolved resources or to resource target values otherwise.\r\n * Resource can be resolved by its `id` and `poolId`, if Converter\r\n * can find ResourcePool with id from poolId, it will try to get target\r\n * resource value and replace with it RAWResource object.\r\n * If ResourcePool not found, Converter assumes that resource come from\r\n * other origin/environment and creates Target object that can be target\r\n * object for commands.\r\n * Converter while handling data does not look deeply, so its developer\r\n * responsibility to convert deeply nested resource targets.\r\n */\n\nvar Converter = function (_EventDispatcher) {\n  _inherits(Converter, _EventDispatcher);\n\n  function Converter(factory, registry, pool) {\n    var handlers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n    _classCallCheck(this, Converter);\n\n    var _this = _possibleConstructorReturn(this, (Converter.__proto__ || Object.getPrototypeOf(Converter)).call(this));\n\n    _this.factory = factory;\n    _this.pool = pool;\n    _this.registry = registry;\n\n    if (handlers) {\n      handlers.setConverter(_this);\n    }\n    return _this;\n  }\n\n  _createClass(Converter, [{\n    key: 'resourceToObject',\n    value: function resourceToObject(data) {\n      var result = void 0;\n\n      if (Object(__WEBPACK_IMPORTED_MODULE_5__utils_isResourceConvertible__[\"a\" /* default */])(data)) {\n        result = Object(__WEBPACK_IMPORTED_MODULE_6__utils_getRawResource__[\"a\" /* default */])(data, this.pool);\n      } else if (typeof data.toJSON === 'function') {\n        result = data.toJSON();\n      } else {\n        return data;\n      }\n\n      if (this.hasEventListener(ConverterEvents.RESOURCE_CONVERTED)) {\n        this.dispatchEvent(ConverterEvents.RESOURCE_CONVERTED, {\n          data: data,\n          result: result\n        });\n      }\n\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#objectToResource\r\n     * @param {*} data\r\n     * @returns {*}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'objectToResource',\n    value: function objectToResource(data) {\n      var result = data;\n\n      if (Object(__WEBPACK_IMPORTED_MODULE_4__utils_isResource__[\"a\" /* default */])(data)) {\n        var poolId = Object(__WEBPACK_IMPORTED_MODULE_2__utils_getResourcePoolId__[\"a\" /* default */])(data);\n\n        if (this.registry.isRegistered(poolId)) {\n          // target object is stored in current pool\n          var target = this.registry.get(poolId).get(Object(__WEBPACK_IMPORTED_MODULE_3__utils_getResourceId__[\"a\" /* default */])(data));\n\n          if (target) {\n            result = target.value;\n          }\n        } else {\n          // target object has another origin, should be wrapped\n          result = this.factory.create(Promise.resolve(data));\n        }\n      }\n\n      if (result !== data && this.hasEventListener(ConverterEvents.RESOURCE_CREATED)) {\n        this.dispatchEvent(ConverterEvents.RESOURCE_CREATED, {\n          data: data,\n          result: result\n        });\n      }\n\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#lookupArray\r\n     * @param list\r\n     * @param linkConvertHandler\r\n     * @returns {Array}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'lookupArray',\n    value: function lookupArray(list, linkConvertHandler) {\n      var _this2 = this;\n\n      return list.map(function (item) {\n        return linkConvertHandler.call(_this2, item);\n      });\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#lookupObject\r\n     * @param {*} data\r\n     * @param {Function} linkConvertHandler\r\n     * @returns {*}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'lookupObject',\n    value: function lookupObject(data, linkConvertHandler) {\n      var _this3 = this;\n\n      return Object.getOwnPropertyNames(data).reduce(function (result, name) {\n        if (Object(__WEBPACK_IMPORTED_MODULE_1__utils_hasOwnProperty__[\"a\" /* default */])(data, name)) {\n          result[name] = linkConvertHandler.call(_this3, data[name]);\n        }\n\n        return result;\n      }, {});\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#toJSON\r\n     * @param {*} data\r\n     * @returns {*}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON(data) {\n      var result = data;\n\n      if (data !== undefined && data !== null) {\n        if (Object(__WEBPACK_IMPORTED_MODULE_5__utils_isResourceConvertible__[\"a\" /* default */])(data)) {\n          // if data is Target, Resource, IConvertible, Function or RAW resource data\n          result = this.resourceToObject(data);\n        } else if (data instanceof Array) {\n          // if data is Array of values, check its\n          result = this.lookupArray(data, this.resourceToObject);\n        } else if (data.constructor === Object) {\n          // only Object instances can be looked up, other object types must be converted by hand\n          result = this.lookupObject(data, this.resourceToObject);\n        }\n      }\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#parse\r\n     * @param {*} data\r\n     * @returns {*}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'parse',\n    value: function parse(data) {\n      var result = data;\n\n      if (data !== undefined && data !== null) {\n        if (Object(__WEBPACK_IMPORTED_MODULE_4__utils_isResource__[\"a\" /* default */])(data)) {\n          // if data is RAW resource data\n          result = this.objectToResource(data);\n        } else if (data instanceof Array) {\n          // if data is Array of values, check its\n          result = this.lookupArray(data, this.objectToResource);\n        } else if (data.constructor === Object) {\n          result = this.lookupObject(data, this.objectToResource);\n        }\n      }\n\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#lookupForPending\r\n     * @param {*} data\r\n     * @returns {Array}\r\n     */\n    // FIXME for now data is always array\n\n  }, {\n    key: 'lookupForPending',\n    value: function lookupForPending(data) {\n      var result = [];\n\n      var add = function add(value) {\n        if (Object(__WEBPACK_IMPORTED_MODULE_7__request_target_isPending__[\"a\" /* default */])(value)) {\n          result.push(value);\n        }\n        return value;\n      };\n\n      if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) === 'object' && data !== null) {\n        if (Object(__WEBPACK_IMPORTED_MODULE_7__request_target_isPending__[\"a\" /* default */])(data)) {\n          result.push(data);\n        } else if (data instanceof Array) {\n          this.lookupArray(data, add);\n        } else if (data.constructor === Object) {\n          this.lookupObject(data, add);\n        }\n      }\n      return result;\n    }\n  }]);\n\n  return Converter;\n}(__WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default.a);\n\n/**\r\n * @param {RequestFactory} factory\r\n * @param {DataAccessInterface.ResourcePoolRegistry} registry\r\n * @param {DataAccessInterface.ResourcePool} pool\r\n * @param {Handlers} handlers\r\n * @returns {ResourceConverter}\r\n */\n\n\nConverter.events = ConverterEvents;\nvar createResourceConverter = function createResourceConverter(factory, registry, pool, handlers) {\n  return new Converter(factory, registry, pool, handlers);\n};\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (Converter);\n\n/***/ }),\n/* 26 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__isResource__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__IConvertible__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__request_Target__ = __webpack_require__(6);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (data) {\n  return Object(__WEBPACK_IMPORTED_MODULE_0__isResource__[\"a\" /* default */])(data) || data instanceof __WEBPACK_IMPORTED_MODULE_2__request_Target__[\"b\" /* default */] || typeof data === 'function' || data instanceof __WEBPACK_IMPORTED_MODULE_1__IConvertible__[\"a\" /* default */];\n});\n\n/***/ }),\n/* 27 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export PoolRegistryEvents */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createPoolRegistry; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_event_dispatcher__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_event_dispatcher__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_hasOwnProperty__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ResourcePool__ = __webpack_require__(7);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\nvar PoolRegistryEvents = Object.freeze({\n  RESOURCE_POOL_CREATED: 'resourcePoolCreated',\n  RESOURCE_POOL_REGISTERED: 'resourcePoolRegistered',\n  RESOURCE_POOL_REMOVED: 'resourcePoolRemoved'\n});\n\nvar POOLS_FIELD = Symbol('resource.pool.registry::pools');\n\n/**\r\n * @classdesc Collection of ResourcePool instances. Allows lookup for ResourcePool by its Id.\r\n * When ResourcePool is registered in PoolRegistry, it subscribes to\r\n * ResourcePool POOL_DESTROYED event and removes pool from registry after its destroyed.\r\n */\n\nvar PoolRegistry = function (_EventDispatcher) {\n  _inherits(PoolRegistry, _EventDispatcher);\n\n  function PoolRegistry() {\n    _classCallCheck(this, PoolRegistry);\n\n    var _this = _possibleConstructorReturn(this, (PoolRegistry.__proto__ || Object.getPrototypeOf(PoolRegistry)).call(this));\n\n    _this.handlePoolDestroyed = function (event) {\n      _this.remove(event.data);\n    };\n\n    _this[POOLS_FIELD] = {};\n\n    // every registry should keep default pool, so you can have access from anywhere\n    _this.register(__WEBPACK_IMPORTED_MODULE_2__ResourcePool__[\"d\" /* defaultResourcePool */]);\n    return _this;\n  }\n\n  _createClass(PoolRegistry, [{\n    key: 'createPool',\n\n\n    /**\r\n     * Create and register ResourcePool\r\n     * @returns {DataAccessInterface.ResourcePool} New ResourcePool instance\r\n     */\n    value: function createPool() {\n      var pool = Object(__WEBPACK_IMPORTED_MODULE_2__ResourcePool__[\"b\" /* createResourcePool */])();\n      if (this.hasEventListener(PoolRegistryEvents.RESOURCE_POOL_CREATED)) {\n        this.dispatchEvent(PoolRegistryEvents.RESOURCE_POOL_CREATED, pool);\n      }\n      this.register(pool);\n      return pool;\n    }\n\n    /**\r\n     * Register ResourcePool instance.\r\n     * @param pool {DataAccessInterface.ResourcePool} ResourcePool instance to be registered\r\n     */\n\n  }, {\n    key: 'register',\n    value: function register(pool) {\n      if (Object(__WEBPACK_IMPORTED_MODULE_1__utils_hasOwnProperty__[\"a\" /* default */])(this[POOLS_FIELD], pool.id)) return;\n      this[POOLS_FIELD][pool.id] = pool;\n      pool.addEventListener(__WEBPACK_IMPORTED_MODULE_2__ResourcePool__[\"a\" /* ResourcePoolEvents */].POOL_DESTROYED, this.handlePoolDestroyed);\n      if (this.hasEventListener(PoolRegistryEvents.RESOURCE_POOL_REGISTERED)) {\n        this.dispatchEvent(PoolRegistryEvents.RESOURCE_POOL_REGISTERED, pool);\n      }\n    }\n\n    /**\r\n     * Retrieve ResourcePool instance from registry by its Id.\r\n     * @param poolId {String} ResourcePool instance Id\r\n     * @returns {DataAccessInterface.ResourcePool|null}\r\n     */\n\n  }, {\n    key: 'get',\n    value: function get(poolId) {\n      return this[POOLS_FIELD][poolId] || null;\n    }\n\n    /**\r\n     * Check if ResourcePool registered in this registry instance.\r\n     * @param pool {DataAccessInterface.ResourcePool|String} ResourcePool instance or its Id.\r\n     * @returns {Boolean}\r\n     */\n\n  }, {\n    key: 'isRegistered',\n    value: function isRegistered(pool) {\n      return Object(__WEBPACK_IMPORTED_MODULE_1__utils_hasOwnProperty__[\"a\" /* default */])(this[POOLS_FIELD], pool instanceof __WEBPACK_IMPORTED_MODULE_2__ResourcePool__[\"c\" /* default */] ? pool.id : String(pool));\n    }\n\n    /**\r\n     * Remove ResourcePool from current registry instance.\r\n     * @param pool {DataAccessInterface.ResourcePool|String} ResourcePool instance or its Id.\r\n     * @returns {Boolean}\r\n     */\n\n  }, {\n    key: 'remove',\n    value: function remove(pool) {\n      var result = false;\n      pool = pool instanceof __WEBPACK_IMPORTED_MODULE_2__ResourcePool__[\"c\" /* default */] ? pool : this.get(pool);\n      if (pool) {\n        pool.removeEventListener(__WEBPACK_IMPORTED_MODULE_2__ResourcePool__[\"a\" /* ResourcePoolEvents */].POOL_DESTROYED, this.handlePoolDestroyed);\n        result = delete this[POOLS_FIELD][pool.id];\n      }\n      if (this.hasEventListener(PoolRegistryEvents.RESOURCE_POOL_REMOVED)) {\n        this.dispatchEvent(PoolRegistryEvents.RESOURCE_POOL_REMOVED, pool);\n      }\n      return result;\n    }\n  }]);\n\n  return PoolRegistry;\n}(__WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default.a);\n\nPoolRegistry.events = PoolRegistryEvents;\n\n\nvar createPoolRegistry = function createPoolRegistry() {\n  return new PoolRegistry();\n};\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (PoolRegistry);\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(29);\n\nmodule.exports = Object.assign(api.default, api);\n\n/***/ }),\n/* 29 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__DataAccessInterface__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_Deferred__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__command_Descriptor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__command_Reserved__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__command_internal_RequestCommands__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__command_internal_ProxyCommands__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__request_Target__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__resource_ResourcePool__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__resource_PoolRegistry__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__resource_Converter__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__utils_IConvertible__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__utils_isResourceConvertible__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__utils_getRawResource__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__utils_getResourceData__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__utils_getResourceId__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__utils_getResourcePoolId__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__utils_getResourceType__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__utils_isResource__ = __webpack_require__(0);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"create\", function() { return __WEBPACK_IMPORTED_MODULE_0__DataAccessInterface__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"dummy\", function() { return __WEBPACK_IMPORTED_MODULE_0__DataAccessInterface__[\"dummy\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"createDeferred\", function() { return __WEBPACK_IMPORTED_MODULE_1__utils_Deferred__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Deferred\", function() { return __WEBPACK_IMPORTED_MODULE_1__utils_Deferred__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Descriptor\", function() { return __WEBPACK_IMPORTED_MODULE_2__command_Descriptor__[\"c\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Reserved\", function() { return __WEBPACK_IMPORTED_MODULE_3__command_Reserved__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"RequestCommands\", function() { return __WEBPACK_IMPORTED_MODULE_4__command_internal_RequestCommands__[\"c\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"ProxyCommands\", function() { return __WEBPACK_IMPORTED_MODULE_5__command_internal_ProxyCommands__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Target\", function() { return __WEBPACK_IMPORTED_MODULE_6__request_Target__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"ResourcePool\", function() { return __WEBPACK_IMPORTED_MODULE_7__resource_ResourcePool__[\"c\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"PoolRegistry\", function() { return __WEBPACK_IMPORTED_MODULE_8__resource_PoolRegistry__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Converter\", function() { return __WEBPACK_IMPORTED_MODULE_9__resource_Converter__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"IConvertible\", function() { return __WEBPACK_IMPORTED_MODULE_10__utils_IConvertible__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"isResourceConvertible\", function() { return __WEBPACK_IMPORTED_MODULE_11__utils_isResourceConvertible__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"getRawResource\", function() { return __WEBPACK_IMPORTED_MODULE_12__utils_getRawResource__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"getResourceData\", function() { return __WEBPACK_IMPORTED_MODULE_13__utils_getResourceData__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"getResourceId\", function() { return __WEBPACK_IMPORTED_MODULE_14__utils_getResourceId__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"getResourcePoolId\", function() { return __WEBPACK_IMPORTED_MODULE_15__utils_getResourcePoolId__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"getResourceType\", function() { return __WEBPACK_IMPORTED_MODULE_16__utils_getResourceType__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"isResource\", function() { return __WEBPACK_IMPORTED_MODULE_17__utils_isResource__[\"a\"]; });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (__WEBPACK_IMPORTED_MODULE_0__DataAccessInterface__[\"b\" /* default */]);\n\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return create; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_areProxiesAvailable__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_isResource__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_getResourcePoolId__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_getResourceId__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_createForeignResource__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__request_Handlers__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__request_ProxyFactory__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__request_Factory__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__resource_ResourcePool__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__resource_Converter__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__resource_PoolRegistry__ = __webpack_require__(27);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * @exports DataAccessInterface\r\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar DataAccessInterface = function () {\n\n  /**\r\n   * @class DataAccessInterface\r\n   * @classdesc Facade of Deferred Data Access library, it holds all\r\n   * of public API -- objects like ResourcePool and methods to work\r\n   * with resources.\r\n   * @param {Descriptor[]|Object.<string, Function|Descriptor>} descriptors\r\n   * @param {boolean} [proxyEnabled=false]\r\n   * @param {ResourcePoolRegistry} [poolRegistry]\r\n   * @param {ResourcePool} [pool]\r\n   * @param {ICacheImpl} [cacheImpl]\r\n   */\n  function DataAccessInterface(descriptors) {\n    var proxyEnabled = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var poolRegistry = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var pool = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    var cacheImpl = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n\n    _classCallCheck(this, DataAccessInterface);\n\n    this.poolRegistry = poolRegistry;\n    this.pool = pool;\n    this.cache = cacheImpl;\n    this.initialize(descriptors, proxyEnabled);\n  }\n\n  _createClass(DataAccessInterface, [{\n    key: 'initialize',\n    value: function initialize(descriptors, proxyEnabled) {\n      var _this = this;\n\n      if (proxyEnabled && !Object(__WEBPACK_IMPORTED_MODULE_0__utils_areProxiesAvailable__[\"a\" /* default */])()) {\n        throw new Error('Proxies are not available in this environment');\n      }\n\n      this.handlers = Object(__WEBPACK_IMPORTED_MODULE_5__request_Handlers__[\"a\" /* createHandlers */])(proxyEnabled);\n\n      if (proxyEnabled) {\n        this.factory = Object(__WEBPACK_IMPORTED_MODULE_6__request_ProxyFactory__[\"a\" /* createProxyFactory */])(this.handlers, this.cache);\n      } else {\n        this.factory = Object(__WEBPACK_IMPORTED_MODULE_7__request_Factory__[\"b\" /* createRequestFactory */])(this.handlers, this.cache);\n      }\n\n      if (!this.poolRegistry) {\n        this.poolRegistry = Object(__WEBPACK_IMPORTED_MODULE_10__resource_PoolRegistry__[\"a\" /* createPoolRegistry */])();\n      }\n\n      if (this.pool) {\n        this.poolRegistry.register(this.pool);\n      } else if (this.pool !== undefined) {\n        this.pool = this.poolRegistry.createPool();\n      } else {\n        this.pool = __WEBPACK_IMPORTED_MODULE_8__resource_ResourcePool__[\"d\" /* defaultResourcePool */];\n      }\n\n      this.resourceConverter = Object(__WEBPACK_IMPORTED_MODULE_9__resource_Converter__[\"a\" /* createResourceConverter */])(this.factory, this.poolRegistry, this.pool, this.handlers);\n\n      var poolDestroyedHandler = function poolDestroyedHandler() {\n        _this.pool.removeEventListener(__WEBPACK_IMPORTED_MODULE_8__resource_ResourcePool__[\"a\" /* ResourcePoolEvents */].POOL_DESTROYED, poolDestroyedHandler);\n        _this.pool = _this.poolRegistry.createPool();\n        _this.pool.addEventListener(__WEBPACK_IMPORTED_MODULE_8__resource_ResourcePool__[\"a\" /* ResourcePoolEvents */].POOL_DESTROYED, poolDestroyedHandler);\n      };\n\n      this.handlers.setCommands(descriptors);\n      this.pool.addEventListener(__WEBPACK_IMPORTED_MODULE_8__resource_ResourcePool__[\"a\" /* ResourcePoolEvents */].POOL_DESTROYED, poolDestroyedHandler);\n    }\n  }, {\n    key: 'send',\n    value: function send(command, args) {\n      var target = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      return;\n    }\n  }, {\n    key: 'parse',\n    value: function parse(data) {\n      return this.resourceConverter.parse(data);\n    }\n  }, {\n    key: 'dummy',\n    value: function dummy() {\n      return this.parse(Object(__WEBPACK_IMPORTED_MODULE_4__utils_createForeignResource__[\"a\" /* default */])());\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON(data) {\n      return this.resourceConverter.toJSON(data);\n    }\n  }, {\n    key: 'isOwnResource',\n    value: function isOwnResource(resource) {\n      /**\r\n       * @type {DataAccessInterface.ResourcePool}\r\n       */\n      var pool = void 0;\n      if (Object(__WEBPACK_IMPORTED_MODULE_1__utils_isResource__[\"a\" /* default */])(resource)) {\n        pool = this.poolRegistry.get(Object(__WEBPACK_IMPORTED_MODULE_2__utils_getResourcePoolId__[\"a\" /* default */])(resource));\n        return pool && pool.has(Object(__WEBPACK_IMPORTED_MODULE_3__utils_getResourceId__[\"a\" /* default */])(resource));\n      }\n      return false;\n    }\n  }, {\n    key: 'proxyEnabled',\n    get: function get() {\n      return this.handlers.proxyEnabled;\n    }\n  }]);\n\n  return DataAccessInterface;\n}();\n\nvar create = function create(handlers) {\n  var proxyEnabled = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var poolRegistry = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var pool = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  var cacheImpl = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n  return new DataAccessInterface(handlers, proxyEnabled, poolRegistry, pool, cacheImpl);\n};\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (DataAccessInterface);\n\n/***/ }),\n/* 31 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (function () {\n  return typeof Proxy === 'function';\n});\n\n/***/ }),\n/* 32 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_reject__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_createRequestPackage__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__command_internal_RequestCommands__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__SubTargets__ = __webpack_require__(33);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\nvar Internals = function (_SubTargets) {\n  _inherits(Internals, _SubTargets);\n\n  function Internals(target, promise, handlers) {\n    _classCallCheck(this, Internals);\n\n    var _this = _possibleConstructorReturn(this, (Internals.__proto__ || Object.getPrototypeOf(Internals)).call(this));\n\n    _this.handlePromiseResolve = function (value) {\n      var result = { target: _this.target, value: value };\n      _this.data = value;\n      _this.status = __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].RESOLVED;\n      if (_this.isResource()) {\n        /*\r\n         INFO Sending \"this\" as result of resolve() handler, causes infinite\r\n         loop of this.then(), so I've used wrapper object\r\n        */\n        result.value = _this.target;\n      }\n\n      _this.parentResolved();\n\n      // FIXME isTemporary() was not called yet, as solution can move destruction out\n      if (_this.temporary) {\n        _this.destroy();\n      }\n\n      return result;\n    };\n\n    _this.handlePromiseReject = function (value) {\n      _this.status = __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].REJECTED;\n      _this.parentRejected('Target of the call was rejected and call cannot be sent.');\n      return Promise.reject(value);\n    };\n\n    _this.handlers = handlers;\n    _this.target = target;\n    // INFO this should be not initialized i.e. keep it undefined, this will be checked later\n    _this.data = undefined;\n    _this.temporary = undefined;\n    _this.hadChildPromises = false;\n    _this.status = __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].PENDING;\n    _this.promise = promise.then(_this.handlePromiseResolve).catch(_this.handlePromiseReject);\n    _this.setParent(_this);\n    return _this;\n  }\n\n  _createClass(Internals, [{\n    key: 'isResource',\n    value: function isResource() {\n      if (_typeof(this.data) === 'object' && this.data[__WEBPACK_IMPORTED_MODULE_2__utils_TARGET_DATA__[\"a\" /* default */]]) {\n        var data = this.data[__WEBPACK_IMPORTED_MODULE_2__utils_TARGET_DATA__[\"a\" /* default */]];\n        return Boolean(data.$poolId && data.$id);\n      }\n\n      return false;\n    }\n  }, {\n    key: 'isActive',\n    value: function isActive() {\n      return this.status === __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].PENDING || this.status === __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].RESOLVED;\n    }\n  }, {\n    key: 'canBeDestroyed',\n    value: function canBeDestroyed() {\n      return this.status === __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].RESOLVED || this.status === __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].REJECTED;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      var promise = null;\n      if (this.canBeDestroyed()) {\n        // INFO I should not clear children list, since they are pending and requests already sent.\n        if (this.status === __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].RESOLVED) {\n          promise = this.send(__WEBPACK_IMPORTED_MODULE_4__command_internal_RequestCommands__[\"a\" /* RequestCommandFields */].DESTROY, Object(__WEBPACK_IMPORTED_MODULE_3__utils_createRequestPackage__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_4__command_internal_RequestCommands__[\"b\" /* RequestCommandNames */].DESTROY, [], this.toJSON()));\n        } else {\n          promise = Promise.resolve();\n        }\n        this.status = __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].DESTROYED;\n      } else {\n        promise = Object(__WEBPACK_IMPORTED_MODULE_0__utils_reject__[\"a\" /* default */])('Invalid or already destroyed target.');\n      }\n\n      return promise;\n    }\n  }, {\n    key: 'then',\n    value: function then(handleResolve, handleReject) {\n      var child = this.promise.then(handleResolve, handleReject);\n      this.hadChildPromises = true;\n      return child;\n    }\n  }, {\n    key: 'catch',\n    value: function _catch(handleReject) {\n      var child = this.promise.catch(handleReject);\n      this.hadChildPromises = true;\n      return child;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.data;\n    }\n  }, {\n    key: 'poolId',\n    get: function get() {\n      return this.isResource() ? this.data[__WEBPACK_IMPORTED_MODULE_2__utils_TARGET_DATA__[\"a\" /* default */]].$poolId : null;\n    }\n  }, {\n    key: 'type',\n    get: function get() {\n      return this.isResource() ? this.data[__WEBPACK_IMPORTED_MODULE_2__utils_TARGET_DATA__[\"a\" /* default */]].$type : null;\n    }\n  }, {\n    key: 'id',\n    get: function get() {\n      return this.isResource() ? this.data[__WEBPACK_IMPORTED_MODULE_2__utils_TARGET_DATA__[\"a\" /* default */]].$id : null;\n    }\n  }]);\n\n  return Internals;\n}(__WEBPACK_IMPORTED_MODULE_5__SubTargets__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Internals);\n\n/***/ }),\n/* 33 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_reject__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_Deferred__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_TargetStatus__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Queue__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__Children__ = __webpack_require__(35);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\nvar SubTargets = function (_Children) {\n  _inherits(SubTargets, _Children);\n\n  function SubTargets() {\n    var parent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var children = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    _classCallCheck(this, SubTargets);\n\n    var _this = _possibleConstructorReturn(this, (SubTargets.__proto__ || Object.getPrototypeOf(SubTargets)).call(this, children));\n\n    _this.handleSubRequest = function (pack, child) {\n      var _this$parent = _this.parent,\n          handlers = _this$parent.handlers,\n          target = _this$parent.target;\n\n      return handlers.handle(target, pack, child);\n    };\n\n    _this.queue = null;\n    _this.setParent(parent);\n    return _this;\n  }\n\n  _createClass(SubTargets, [{\n    key: 'setParent',\n    value: function setParent(parent) {\n      this.parent = parent;\n    }\n  }, {\n    key: 'parentResolved',\n    value: function parentResolved() {\n      if (this.hasQueue()) {\n        this.queue.send(this.parent, this.handleSubRequest);\n        this.queue = null;\n      }\n    }\n  }, {\n    key: 'parentRejected',\n    value: function parentRejected() {\n      var message = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      this.queue.reject(new Error(message || 'This request was rejected before sending.'));\n      this.queue = null;\n    }\n  }, {\n    key: 'hasQueue',\n    value: function hasQueue() {\n      return Boolean(this.queue && this.queue.length);\n    }\n  }, {\n    key: 'send',\n    value: function send(pack) {\n      var child = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var propertyName = pack.propertyName;\n      var handlers = this.parent.handlers;\n\n      var promise = void 0;\n\n      if (!handlers.hasCommand(propertyName)) {\n        return Object(__WEBPACK_IMPORTED_MODULE_0__utils_reject__[\"a\" /* default */])('Request handler for \"' + propertyName + '\" is not registered.');\n      }\n\n      promise = this.handleSend(pack, child);\n\n      if (child) {\n        promise = this.register(child);\n      }\n\n      return promise;\n    }\n  }, {\n    key: 'handleSend',\n    value: function handleSend(pack) {\n      var child = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var status = this.parent.status;\n\n\n      switch (status) {\n        case __WEBPACK_IMPORTED_MODULE_2__utils_TargetStatus__[\"a\" /* default */].PENDING:\n          if (!this.queue) {\n            this.queue = Object(__WEBPACK_IMPORTED_MODULE_3__Queue__[\"a\" /* createQueue */])();\n          }\n\n          return this.queue.add(pack, child);\n        case __WEBPACK_IMPORTED_MODULE_2__utils_TargetStatus__[\"a\" /* default */].REJECTED:\n          return Object(__WEBPACK_IMPORTED_MODULE_0__utils_reject__[\"a\" /* default */])('Target object was rejected and cannot be used for calls.');\n        case __WEBPACK_IMPORTED_MODULE_2__utils_TargetStatus__[\"a\" /* default */].DESTROYED:\n          return Object(__WEBPACK_IMPORTED_MODULE_0__utils_reject__[\"a\" /* default */])('Target object was destroyed and cannot be used for calls.');\n        case __WEBPACK_IMPORTED_MODULE_2__utils_TargetStatus__[\"a\" /* default */].RESOLVED:\n          return this.handleSubRequest(pack, child);\n        default:\n          return Object(__WEBPACK_IMPORTED_MODULE_0__utils_reject__[\"a\" /* default */])('Target object is in unknown status \"' + status + '\".');\n      }\n    }\n  }]);\n\n  return SubTargets;\n}(__WEBPACK_IMPORTED_MODULE_4__Children__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (SubTargets);\n\n/***/ }),\n/* 34 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createQueue; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_Deferred__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__toJSON__ = __webpack_require__(11);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar Queue = function () {\n  function Queue() {\n    var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    _classCallCheck(this, Queue);\n\n    this.list = list;\n  }\n\n  _createClass(Queue, [{\n    key: 'add',\n    value: function add(pack, child) {\n      var deferred = Object(__WEBPACK_IMPORTED_MODULE_0__utils_Deferred__[\"a\" /* createDeferred */])();\n      this.list.push({\n        pack: pack,\n        deferred: deferred,\n        child: child\n      });\n\n      return deferred.promise;\n    }\n  }, {\n    key: 'getList',\n    value: function getList() {\n      return [].concat(_toConsumableArray(this.list));\n    }\n  }, {\n    key: 'getCommands',\n    value: function getCommands() {\n      // return this.list.map(([name, pack]) => pack.type);\n      return this.list.map(function (_ref) {\n        var propertyName = _ref.pack.propertyName;\n        return propertyName;\n      });\n    }\n  }, {\n    key: 'send',\n    value: function send(target, callback) {\n      // target reset is needed because, when request was made, target probably was in\n      // pending mode and may be didn't have proper data\n      var targetJSON = Object(__WEBPACK_IMPORTED_MODULE_1__toJSON__[\"a\" /* default */])(target);\n      this.list.forEach(function (_ref2) {\n        var pack = _ref2.pack,\n            deferred = _ref2.deferred,\n            child = _ref2.child;\n\n        pack.target = targetJSON;\n        deferred.resolve(callback(pack, child));\n      });\n      this.list = [];\n    }\n  }, {\n    key: 'reject',\n    value: function reject(message) {\n      var error = new Error(message || 'This request was rejected before sending.');\n      this.list.forEach(function (_ref3) {\n        var deferred = _ref3.deferred;\n        return deferred.reject(error);\n      });\n      this.list = [];\n    }\n  }, {\n    key: 'length',\n    get: function get() {\n      return this.list.length;\n    }\n  }]);\n\n  return Queue;\n}();\n\nvar createQueue = function createQueue() {\n  var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return new Queue(list);\n};\n\n/* unused harmony default export */ var _unused_webpack_default_export = (Queue);\n\n/***/ }),\n/* 35 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__getRawPromise__ = __webpack_require__(36);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar Children = function () {\n  function Children() {\n    var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    _classCallCheck(this, Children);\n\n    this.list = list;\n  }\n\n  _createClass(Children, [{\n    key: 'register',\n    value: function register(child) {\n      var _this = this;\n\n      var handler = function handler() {\n        var index = _this.list.indexOf(child);\n        if (index >= 0) {\n          _this.list.splice(index, 1);\n        }\n      };\n\n      this.list.push(child);\n      // getRawPromise() is needed to capture promise resolution directly,\n      // otherwise this .then() call will be counted in child.hadChildPromises.\n      return Object(__WEBPACK_IMPORTED_MODULE_0__getRawPromise__[\"a\" /* default */])(child).then(handler, handler);\n    }\n  }, {\n    key: 'getList',\n    value: function getList() {\n      return [].concat(_toConsumableArray(this.list));\n    }\n  }, {\n    key: 'contains',\n    value: function contains(item) {\n      return this.list.indexOf(item) >= 0;\n    }\n  }, {\n    key: 'length',\n    get: function get() {\n      return this.list.length;\n    }\n  }, {\n    key: 'lastItem',\n    get: function get() {\n      var length = this.list.length;\n\n      return length ? this.list[length - 1] : null;\n    }\n  }]);\n\n  return Children;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Children);\n\n/***/ }),\n/* 36 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__getInternals__ = __webpack_require__(3);\n/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (target) {\n  var internals = Object(__WEBPACK_IMPORTED_MODULE_0__getInternals__[\"a\" /* default */])(target);\n  return internals ? internals.promise : undefined;\n});\n\n/***/ }),\n/* 37 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__getId__ = __webpack_require__(13);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function () {\n  var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var resource = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  resource[__WEBPACK_IMPORTED_MODULE_0__TARGET_DATA__[\"a\" /* default */]] = {\n    $id: 'foreign-id-' + Object(__WEBPACK_IMPORTED_MODULE_1__getId__[\"a\" /* default */])(),\n    $type: type || (typeof resource === 'undefined' ? 'undefined' : _typeof(resource)),\n    $poolId: 'foreign-poolId-' + Object(__WEBPACK_IMPORTED_MODULE_1__getId__[\"a\" /* default */])()\n  };\n\n  return resource;\n});\n\n/***/ }),\n/* 38 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export areProxyHandlersAvailable */\n/* unused harmony export HandlersEvents */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createHandlers; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__command_Descriptor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__command_internal_ProxyCommands__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_hasOwnProperty__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_filterRequestHandlers__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_getResourceType__ = __webpack_require__(17);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n\n/**\r\n * Key for default type for handlers that will be applied to any\r\n * resource that does not have type-specific handlers registered\r\n * @type {string}\r\n */\nvar DEFAULT_KEY = '';\n\nvar areProxyHandlersAvailable = function areProxyHandlersAvailable(handlers) {\n  var throwError = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var result = true;\n  __WEBPACK_IMPORTED_MODULE_1__command_internal_ProxyCommands__[\"b\" /* default */].required.forEach(function (name) {\n    if (!(__WEBPACK_IMPORTED_MODULE_1__command_internal_ProxyCommands__[\"a\" /* ProxyCommandFields */][name] in handlers)) {\n      result = false;\n      if (throwError) {\n        throw new Error('For Proxy interface, handler \"' + name + '\" should be set.');\n      }\n    }\n  });\n\n  return result;\n};\n\nvar HandlersEvents = Object.freeze({\n  HANDLERS_UPDATED: 'handlersUpdated'\n});\n\nvar Handlers = function () {\n  function Handlers() {\n    var proxyEnabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    _classCallCheck(this, Handlers);\n\n    // named collection of Descriptor lists that may be applied\n    this.properties = _defineProperty({}, DEFAULT_KEY, []);\n    this.descriptors = _defineProperty({}, DEFAULT_KEY, []);\n    this.proxyEnabled = Boolean(proxyEnabled);\n    this.converter = null;\n  }\n\n  _createClass(Handlers, [{\n    key: 'setConverter',\n    value: function setConverter(converter) {\n      this.converter = converter;\n    }\n  }, {\n    key: 'setCommands',\n    value: function setCommands(handlers) {\n      var _this = this;\n\n      this.setCommandsByType(DEFAULT_KEY, handlers);\n\n      Object.keys(handlers).forEach(function (name) {\n        var handler = handlers[name];\n        if (handler && (handler.constructor === Object || handler instanceof Array)) {\n          _this.setCommandsByType(name, handler);\n        }\n      });\n\n      if (this.proxyEnabled) {\n        areProxyHandlersAvailable(this.descriptors[DEFAULT_KEY], true);\n      }\n    }\n  }, {\n    key: 'setCommandsByType',\n    value: function setCommandsByType(type, handlers) {\n      var descrs = {};\n      var props = [];\n      Object(__WEBPACK_IMPORTED_MODULE_3__utils_filterRequestHandlers__[\"a\" /* default */])(handlers, descrs, props);\n      this.descriptors[type] = descrs;\n      this.properties[type] = props;\n    }\n\n    // FIXME Not quite obvious that it checks against property name, not command name\n\n  }, {\n    key: 'hasCommand',\n    value: function hasCommand(propertyName) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_KEY;\n\n      return type && this.descriptors[type] && Object(__WEBPACK_IMPORTED_MODULE_2__utils_hasOwnProperty__[\"a\" /* default */])(this.descriptors[type], propertyName) || this.descriptors[DEFAULT_KEY] && Object(__WEBPACK_IMPORTED_MODULE_2__utils_hasOwnProperty__[\"a\" /* default */])(this.descriptors[DEFAULT_KEY], propertyName);\n    }\n  }, {\n    key: 'getPropertyCommands',\n    value: function getPropertyCommands() {\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n      var list = this.properties[type || DEFAULT_KEY] || [];\n      return [].concat(_toConsumableArray(list));\n    }\n  }, {\n    key: 'getPropertyNames',\n    value: function getPropertyNames() {\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n      return this.getPropertyCommands(type).map(function (descriptor) {\n        return descriptor.propertyName;\n      });\n    }\n  }, {\n    key: 'getCommands',\n    value: function getCommands() {\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_KEY;\n\n      if (type && this.descriptors[type]) {\n        return Object.assign({}, this.descriptors[DEFAULT_KEY], this.descriptors[type]);\n      }\n\n      return this.descriptors[DEFAULT_KEY];\n    }\n  }, {\n    key: 'getCommand',\n    value: function getCommand(propertyName) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_KEY;\n\n      var descriptor = this.descriptors[type] && this.descriptors[type][propertyName] || this.descriptors[DEFAULT_KEY] && this.descriptors[DEFAULT_KEY][propertyName];\n\n      return descriptor || null;\n    }\n  }, {\n    key: 'call',\n    value: function call(parentRequest, pack, resultRequest) {\n      var _this2 = this;\n\n      // FIXME should it also check for resultRequest to not appear in the list?\n      var list = this.converter ? this.converter.lookupForPending(pack.args) : null;\n\n      if (list && list.length) {\n        // FIXME Need to test on all platforms: might not work because may need list of\n        // Promise objects, not Targets\n        return Promise.all(list).then(function () {\n          return _this2.callImmediately(parentRequest, pack, resultRequest);\n        });\n      }\n\n      return this.callImmediately(parentRequest, pack, resultRequest);\n    }\n  }, {\n    key: 'callImmediately',\n    value: function callImmediately(parentRequest, pack, resultRequest) {\n      var propertyName = pack.propertyName;\n\n      var descriptor = this.getCommand(propertyName, Object(__WEBPACK_IMPORTED_MODULE_4__utils_getResourceType__[\"a\" /* default */])(parentRequest));\n      if (descriptor instanceof __WEBPACK_IMPORTED_MODULE_0__command_Descriptor__[\"c\" /* default */]) {\n        return new Promise(function (resolve) {\n          resolve(descriptor.handler(parentRequest, pack, resultRequest));\n        });\n      }\n\n      return reject('Command descriptor for \"' + name + '\" was not found.');\n    }\n  }, {\n    key: 'available',\n    get: function get() {\n      var _this3 = this;\n\n      var nonEmptyListIndex = Object.getOwnPropertyNames(this.properties).findIndex(function (name) {\n        var list = _this3.properties[name];\n        return Boolean(list && list.length);\n      });\n      return nonEmptyListIndex >= 0;\n    }\n  }]);\n\n  return Handlers;\n}();\n\nHandlers.events = HandlersEvents;\n\n\nvar createHandlers = function createHandlers(proxyEnabled) {\n  return new Handlers(proxyEnabled);\n};\n\n/* unused harmony default export */ var _unused_webpack_default_export = (Handlers);\n\n/***/ }),\n/* 39 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__hasOwnProperty__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__command_Descriptor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__command_Reserved__ = __webpack_require__(23);\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\n\n\n\n/**\r\n * Checks for Descriptor uniqueness and reserved words usage.\r\n * @param {DataAccessInterface.Descriptor} descriptor\r\n * @param {Object.<string, DataAccessInterface.Descriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.Descriptor>} properties\r\n * @private\r\n */\nvar applyDescriptor = function applyDescriptor(descriptor, descriptors, properties) {\n  var propertyName = descriptor.propertyName;\n\n  if (propertyName in __WEBPACK_IMPORTED_MODULE_2__command_Reserved__[\"a\" /* default */].names) {\n    throw new Error('Name \"' + propertyName + '\" is reserved and cannot be used in descriptor.');\n  }\n  if (Object(__WEBPACK_IMPORTED_MODULE_0__hasOwnProperty__[\"a\" /* default */])(descriptors, propertyName) && descriptors[propertyName] instanceof __WEBPACK_IMPORTED_MODULE_1__command_Descriptor__[\"c\" /* default */]) {\n    throw new Error('Field names should be unique, \"' + String(propertyName) + '\" field has duplicates.');\n  }\n  descriptors[propertyName] = descriptor;\n  // FIXME Check if new implementation uses virtual commands properly\n  if (!descriptor.virtual) {\n    properties.push(descriptor);\n  }\n};\n\n/**\r\n * @param {Array} handlers\r\n * @param {Object} descriptors\r\n * @private\r\n */\nvar filterArray = function filterArray(handlers, descriptors, properties) {\n  handlers.forEach(function (value) {\n    if (value instanceof __WEBPACK_IMPORTED_MODULE_1__command_Descriptor__[\"c\" /* default */]) {\n      applyDescriptor(value, descriptors, properties);\n    }\n  });\n};\n\n/**\r\n * @param {Object} handlers\r\n * @param {Object.<string, DataAccessInterface.Descriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.Descriptor>} properties\r\n * @private\r\n */\nvar filterHash = function filterHash(handlers, descriptors, properties) {\n  if (!handlers) return;\n  [].concat(_toConsumableArray(Object.getOwnPropertyNames(handlers)), _toConsumableArray(Object.getOwnPropertySymbols(handlers))).forEach(function (propertyName) {\n    var value = handlers[propertyName];\n    // FIXME unnecessary typeof(value is defined), could be replaced with instanceof\n    if (typeof value === 'function') {\n      value = Object(__WEBPACK_IMPORTED_MODULE_1__command_Descriptor__[\"b\" /* createDescriptor */])(propertyName, value);\n    }\n    if (value instanceof __WEBPACK_IMPORTED_MODULE_1__command_Descriptor__[\"c\" /* default */]) {\n      applyDescriptor(value, descriptors, properties);\n    }\n  });\n};\n\n/**\r\n * @method Handlers.filterHandlers\r\n * @param {Array|Object} handlers\r\n * @param {Object.<string, DataAccessInterface.Descriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.Descriptor>} properties\r\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (handlers, descriptors, properties) {\n  if (handlers instanceof Array) {\n    filterArray(handlers, descriptors, properties);\n  } else {\n    filterHash(handlers, descriptors, properties);\n  }\n});\n\n/***/ }),\n/* 40 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export createProxyHandlers */\n/* unused harmony export applyProxyWithDefaultHandlers */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createProxyFactory; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Factory__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_hasOwnProperty__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__command_internal_ProxyCommands__ = __webpack_require__(16);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\n\n\n\nvar EXCLUSIONS = {\n  /*\r\n   INFO arguments and caller were included because they are required function properties\r\n   */\n  arguments: true,\n  caller: true,\n  prototype: true\n};\n\nvar createFunctionWrapper = function createFunctionWrapper(target) {\n  // INFO Target must be a function so I could use Proxy.call() interceptor.\n  function requestTargetProxy() {}\n\n  requestTargetProxy.target = target;\n\n  return requestTargetProxy;\n};\n\nvar wrapWithProxy = function wrapWithProxy(target, handlers) {\n  return new Proxy(createFunctionWrapper(target), handlers);\n};\n\nvar proxyGet = function proxyGet(wrapper, name) {\n  var target = wrapper.target;\n\n  if (name in target || name in EXCLUSIONS || (typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'symbol') {\n    return target[name];\n  }\n  // INFO Proxy should be already applied, so no need in additional wrapping\n  return target[__WEBPACK_IMPORTED_MODULE_2__command_internal_ProxyCommands__[\"a\" /* ProxyCommandFields */].get](name);\n};\n\n// INFO Proxy should be already applied, so no need in additional wrapping\nvar proxyApply = function proxyApply(wrapper, thisValue, args) {\n  return wrapper.target[__WEBPACK_IMPORTED_MODULE_2__command_internal_ProxyCommands__[\"a\" /* ProxyCommandFields */].apply](null, args);\n};\n\nvar proxySet = function proxySet(wrapper, name, value) {\n  var target = wrapper.target;\n\n\n  if (name in target || name in EXCLUSIONS || (typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'symbol') {\n    target[name] = value;\n    return value;\n  }\n\n  if (__WEBPACK_IMPORTED_MODULE_2__command_internal_ProxyCommands__[\"a\" /* ProxyCommandFields */].set in target) {\n    target[__WEBPACK_IMPORTED_MODULE_2__command_internal_ProxyCommands__[\"a\" /* ProxyCommandFields */].set](name, value);\n    return true;\n  }\n\n  return false;\n};\n\nvar proxyHas = function proxyHas(wrapper, name) {\n  return Object(__WEBPACK_IMPORTED_MODULE_1__utils_hasOwnProperty__[\"a\" /* default */])(wrapper.target, name);\n};\n\nvar proxyDeleteProperty = function proxyDeleteProperty(wrapper, name) {\n  var target = wrapper.target;\n\n  if (__WEBPACK_IMPORTED_MODULE_2__command_internal_ProxyCommands__[\"a\" /* ProxyCommandFields */].deleteProperty in target) {\n    target[__WEBPACK_IMPORTED_MODULE_2__command_internal_ProxyCommands__[\"a\" /* ProxyCommandFields */].deleteProperty](name);\n    return true;\n  }\n\n  return false;\n};\n\nvar proxyOwnKeys = function proxyOwnKeys(wrapper) {\n  var target = wrapper.target;\n\n  return [].concat(_toConsumableArray(Object.getOwnPropertyNames(target)), _toConsumableArray(Object.getOwnPropertyNames(EXCLUSIONS)));\n};\n\nvar proxyEnumerate = function proxyEnumerate(wrapper) {\n  var target = wrapper.target;\n\n  return [].concat(_toConsumableArray(Object.getOwnPropertyNames(target)), _toConsumableArray(Object.getOwnPropertyNames(EXCLUSIONS)))[Symbol.iterator]();\n};\n\nvar proxyGetOwnPropertyDescriptor = function proxyGetOwnPropertyDescriptor(wrapper, name) {\n  if (Object(__WEBPACK_IMPORTED_MODULE_1__utils_hasOwnProperty__[\"a\" /* default */])(EXCLUSIONS, name)) {\n    return Object.getOwnPropertyDescriptor(wrapper, name);\n  }\n  return Object.getOwnPropertyDescriptor(wrapper.target, name);\n};\n\nvar proxyGetPrototypeOf = function proxyGetPrototypeOf(wrapper) {\n  return Object.getPrototypeOf(wrapper.target);\n};\n\n/**\r\n * Builds proper handlers hash for Proxy\r\n * @returns {Function}\r\n */\nvar createProxyHandlers = function createProxyHandlers() {\n  var handlers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return Object.assign({\n    get: proxyGet,\n    apply: proxyApply,\n    set: proxySet,\n    has: proxyHas,\n    deleteProperty: proxyDeleteProperty,\n    ownKeys: proxyOwnKeys,\n    enumerate: proxyEnumerate,\n    getOwnPropertyDescriptor: proxyGetOwnPropertyDescriptor,\n    getPrototypeOf: proxyGetPrototypeOf\n  }, handlers);\n};\n\nvar PROXY_HANDLERS = createProxyHandlers();\n\nvar ProxyFactory = function (_Factory) {\n  _inherits(ProxyFactory, _Factory);\n\n  function ProxyFactory(handlers, cacheImpl) {\n    _classCallCheck(this, ProxyFactory);\n\n    var _this = _possibleConstructorReturn(this, (ProxyFactory.__proto__ || Object.getPrototypeOf(ProxyFactory)).call(this, __WEBPACK_IMPORTED_MODULE_0__Factory__[\"a\" /* NO_INIT */]));\n\n    _this.handlers = handlers;\n    _this.factory = Object(__WEBPACK_IMPORTED_MODULE_0__Factory__[\"b\" /* createRequestFactory */])(handlers, cacheImpl);\n    _this.factory.decorator.setFactory(_this);\n    return _this;\n  }\n\n  _createClass(ProxyFactory, [{\n    key: 'create',\n    value: function create(promise) {\n      var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var pack = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var cacheable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      var instance = this.factory.create(promise, name, pack, cacheable);\n\n      if (this.handlers.available) {\n        return wrapWithProxy(instance, PROXY_HANDLERS);\n      }\n\n      return instance;\n    }\n  }, {\n    key: 'getCached',\n    value: function getCached(name, pack) {\n      return this.factory.getCached(name, pack);\n    }\n  }]);\n\n  return ProxyFactory;\n}(__WEBPACK_IMPORTED_MODULE_0__Factory__[\"c\" /* default */]);\n\nvar applyProxyWithDefaultHandlers = function applyProxyWithDefaultHandlers(target) {\n  return wrapWithProxy(target, PROXY_HANDLERS);\n};\n\nvar createProxyFactory = function createProxyFactory(handlers, cacheImpl) {\n  return new ProxyFactory(handlers, cacheImpl);\n};\n\n/* unused harmony default export */ var _unused_webpack_default_export = (ProxyFactory);\n\n/***/ }),\n/* 41 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createDecorator; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__command_CallbackFactory__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_getResourceType__ = __webpack_require__(17);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar Decorator = function () {\n  function Decorator(factory, handlers) {\n    _classCallCheck(this, Decorator);\n\n    this.handlers = handlers;\n    this.members = new __WEBPACK_IMPORTED_MODULE_0__command_CallbackFactory__[\"a\" /* default */](factory);\n  }\n\n  _createClass(Decorator, [{\n    key: 'apply',\n    value: function apply(request) {\n      var _this = this;\n\n      if (!this.handlers.available) {\n        return request;\n      }\n\n      var descriptors = this.handlers.getPropertyCommands(Object(__WEBPACK_IMPORTED_MODULE_1__utils_getResourceType__[\"a\" /* default */])(request));\n      return descriptors.forEach(function (descriptor) {\n        request[descriptor.propertyName] = _this.members.get(descriptor);\n      });\n    }\n  }, {\n    key: 'setFactory',\n    value: function setFactory(factory) {\n      if (factory) {\n        this.members.setFactory(factory);\n      }\n    }\n  }]);\n\n  return Decorator;\n}();\n\nvar createDecorator = function createDecorator(factory, handlers) {\n  return new Decorator(factory, handlers);\n};\n\n/* unused harmony default export */ var _unused_webpack_default_export = (Decorator);\n\n/***/ }),\n/* 42 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Flow__ = __webpack_require__(43);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar createHandlerFor = function createHandlerFor(flow, propertyName, command, isTemporaryFn, cacheable) {\n  function commandHandler() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return flow.apply(this, propertyName, command, args, isTemporaryFn, cacheable);\n  }\n\n  return commandHandler;\n};\n\nvar CallbackFactory = function () {\n  function CallbackFactory() {\n    var factory = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n    _classCallCheck(this, CallbackFactory);\n\n    this.members = new Map();\n    this.flow = null;\n\n    this.setFactory(factory);\n  }\n\n  /**\r\n   * @param {Descriptor} descriptor\r\n   * @returns {Function}\r\n   * @private\r\n   */\n\n\n  _createClass(CallbackFactory, [{\n    key: 'get',\n    value: function get(descriptor) {\n      var propertyName = descriptor.propertyName;\n\n      if (!this.members.has(propertyName)) {\n        this.members.set(propertyName, this.create(propertyName, descriptor.command, descriptor.isTemporary, descriptor.cacheable));\n      }\n\n      return this.members.get(propertyName);\n    }\n  }, {\n    key: 'create',\n    value: function create(propertyName, command, isTemporaryFn) {\n      var cacheable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      return createHandlerFor(this.flow, propertyName, command, isTemporaryFn, cacheable);\n    }\n  }, {\n    key: 'setFactory',\n    value: function setFactory(factory) {\n      this.flow = null;\n\n      if (factory) {\n        this.flow = new __WEBPACK_IMPORTED_MODULE_0__Flow__[\"a\" /* default */](factory);\n      }\n    }\n  }]);\n\n  return CallbackFactory;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (CallbackFactory);\n\n/***/ }),\n/* 43 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__request_target_getInternals__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__request_target_toJSON__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_reject__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_createRequestPackage__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__request_target_setTemporary__ = __webpack_require__(44);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n\nvar Flow = function () {\n  function Flow(factory) {\n    _classCallCheck(this, Flow);\n\n    this.factory = factory;\n  }\n\n  _createClass(Flow, [{\n    key: 'apply',\n    value: function apply(target, propertyName, command, args, isTemporaryFn) {\n      var cacheable = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n\n      var internals = Object(__WEBPACK_IMPORTED_MODULE_0__request_target_getInternals__[\"a\" /* default */])(target);\n\n      // call target must be a request target\n      if (internals) {\n        var pack = Object(__WEBPACK_IMPORTED_MODULE_3__utils_createRequestPackage__[\"a\" /* default */])(propertyName, command, args, Object(__WEBPACK_IMPORTED_MODULE_1__request_target_toJSON__[\"a\" /* default */])(target));\n\n        if (cacheable) {\n          var child = this.factory.getCached(pack);\n\n          if (child) {\n            return child;\n          }\n        }\n\n        return this.makeChildReqest(target, pack, isTemporaryFn, cacheable);\n      }\n\n      return this.rejectCall();\n    }\n  }, {\n    key: 'rejectCall',\n    value: function rejectCall() {\n      return this.factory.create(Object(__WEBPACK_IMPORTED_MODULE_2__utils_reject__[\"a\" /* default */])('Target object is not an instance of Target, so cannot be used for calls.'));\n    }\n  }, {\n    key: 'makeChildReqest',\n    value: function makeChildReqest(target, propertyName, pack, isTemporaryFn) {\n      var cacheable = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n      // this wil be populated on internals.send() call and passed into target's\n      // promise when it will be executed on next tick, so there are no need in deferred anymore\n      var promise = void 0;\n      var internals = Object(__WEBPACK_IMPORTED_MODULE_0__request_target_getInternals__[\"a\" /* default */])(target);\n      var child = this.factory.create(Promise.resolve().then(function () {\n        return promise;\n      }), propertyName, pack, cacheable);\n\n      promise = internals.send(propertyName, pack, child);\n      this.checkState(promise, isTemporaryFn, target, child, pack);\n      return child;\n    }\n  }, {\n    key: 'checkState',\n    value: function checkState(promise, isTemporaryFn, parentRequest, childRequest, pack) {\n      return promise.then(function (data) {\n        var isTemporary = Boolean(isTemporaryFn(parentRequest, childRequest, pack, data));\n        Object(__WEBPACK_IMPORTED_MODULE_4__request_target_setTemporary__[\"a\" /* default */])(childRequest, isTemporary);\n      });\n    }\n  }]);\n\n  return Flow;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Flow);\n\n/***/ }),\n/* 44 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__getInternals__ = __webpack_require__(3);\n/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (target, value) {\n  return Object(__WEBPACK_IMPORTED_MODULE_0__getInternals__[\"a\" /* default */])(target).temporary = Boolean(value);\n});\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(module) {\n\tif(!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif(!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__ = __webpack_require__(1);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (target) {\n  return Boolean(target && target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]]);\n});\n\n/***/ }),\n/* 47 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__getStatus__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__ = __webpack_require__(9);\n/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (value) {\n  var status = Object(__WEBPACK_IMPORTED_MODULE_0__getStatus__[\"a\" /* default */])(value);\n  return status ? status === __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].PENDING : undefined;\n});\n\n/***/ }),\n/* 48 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__getInternals__ = __webpack_require__(3);\n/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (target) {\n  var internals = Object(__WEBPACK_IMPORTED_MODULE_0__getInternals__[\"a\" /* default */])(target);\n  return internals ? internals.status : undefined;\n});\n\n/***/ }),\n/* 49 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__getRawResource__ = __webpack_require__(20);\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (object) {\n  var data = Object(__WEBPACK_IMPORTED_MODULE_1__getRawResource__[\"a\" /* default */])(object);\n  return data ? data[__WEBPACK_IMPORTED_MODULE_0__TARGET_DATA__[\"a\" /* default */]] : null;\n});\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// deferred-data-access.direct.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"http://localhost:8081/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 28);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 68ed696d3600ed23922e","import TARGET_INTERNALS from './TARGET_INTERNALS';\r\nimport TARGET_DATA from './TARGET_DATA';\r\n/* in case of circular dependency make empty base classes\r\n   for both Target and Resource and check for them:\r\n\r\n   Target will have:\r\ns    class Target extends TargetBase {\r\n\r\n   this function will have:\r\n    object instanceof TargetBase\r\n */\r\nimport Target from '../request/Target';\r\nimport Resource from '../resource/Resource';\r\n\r\nexport default (object) => {\r\n  if (!object) return false;\r\n\r\n  if (\r\n    object instanceof Resource\r\n    // this case for RAW resources passed via JSON conversion,\r\n    // look like {'resource::data': {$id: '1111', $poolId: '22222'}}\r\n    || object[TARGET_DATA] // (object[TARGET_DATA] && typeof object[TARGET_DATA] === 'object')\r\n  ) {\r\n    return true;\r\n  } else if (\r\n    object instanceof Target\r\n    || object[TARGET_INTERNALS] // (object[TARGET_INTERNALS] && typeof object[TARGET_INTERNALS] === 'object')\r\n  ) {\r\n    // now all targets have internals in them, so we have to check if id and poolId are valid\r\n    // to treat target as resource. In case of Proxy enabled instanceof will be Function,\r\n    // so we have to check for internals.\r\n    return object[TARGET_INTERNALS].isResource();\r\n  }\r\n\r\n  return false;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/isResource.js","export default Symbol('request.target:internals');\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/TARGET_INTERNALS.js","export default 'resource::data';\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/TARGET_DATA.js","/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\r\n\r\nimport TARGET_INTERNALS from '../../utils/TARGET_INTERNALS';\r\n\r\nexport default (target) => target[TARGET_INTERNALS];\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/getInternals.js","import isResource from '../utils/isResource';\r\n\r\n// It will make all resources temporary and user must explicitly set resource permanent\r\nexport const DEFAULT_IS_TEMPORARY = (parent, child) => isResource(child);\r\n\r\nclass Descriptor {\r\n  // FIXME type > command; name > propertyName\r\n  constructor(command, handler, propertyName = undefined) {\r\n    this.propertyName = propertyName !== undefined ? propertyName : command;\r\n    this.command = command;\r\n    this.handler = handler;\r\n    /**\r\n     * @type {function(): boolean}\r\n     */\r\n    this.isTemporary = DEFAULT_IS_TEMPORARY;\r\n    this.cacheable = true;\r\n    // FIXME no need to pass virtual, check for propertyName is null -- its virtual then\r\n    this.virtual = false;\r\n    this.resourceType = null;\r\n  }\r\n}\r\n\r\nexport const createDescriptor = (\r\n  command,\r\n  handler,\r\n  propertyName,\r\n  isTemporary = DEFAULT_IS_TEMPORARY,\r\n  resourceType = null,\r\n  cacheable = true,\r\n  virtual = false,\r\n) => {\r\n  const descriptor = new Descriptor(command, handler, propertyName);\r\n  descriptor.resourceType = resourceType;\r\n  descriptor.cacheable = cacheable;\r\n  descriptor.virtual = virtual;\r\n  if (isTemporary) {\r\n    descriptor.isTemporary = isTemporary;\r\n  }\r\n  // We can use Object.freeze(), it keeps class/constructor information\r\n  return Object.freeze(descriptor);\r\n};\r\n\r\nexport const addDescriptorTo = (descriptor, target) => {\r\n  if (target instanceof Array) {\r\n    target.push(descriptor);\r\n  } else if (target) {\r\n    target[descriptor.propertyName] = descriptor;\r\n  }\r\n};\r\n\r\nexport const descriptorGeneratorFactory = (command, propertyName) =>\r\n  (\r\n    handler,\r\n    target,\r\n    isTemporary = DEFAULT_IS_TEMPORARY,\r\n    resourceType = null,\r\n    cacheable = true,\r\n    virtual = false,\r\n  ) => {\r\n    const descriptor = createDescriptor(\r\n      command,\r\n      handler,\r\n      propertyName,\r\n      isTemporary,\r\n      resourceType,\r\n      cacheable,\r\n      virtual,\r\n    );\r\n    addDescriptorTo(descriptor, target);\r\n    return Object.freeze(descriptor);\r\n  };\r\n\r\nexport default Descriptor;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/command/Descriptor.js","export default ((hasOwnProperty) =>\r\n    (target, property) =>\r\n      hasOwnProperty.call(target, property))(Object.prototype.hasOwnProperty);\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/hasOwnProperty.js","import TARGET_INTERNALS from '../utils/TARGET_INTERNALS';\r\nimport Internals from './target/Internals';\r\n\r\n/**\r\n * The object that will be available on other side\r\n * @class DataAccessInterface.RequestTarget\r\n * @param _promise {Promise}\r\n * @param _requestHandlers {Handlers}\r\n */\r\nclass Target {\r\n  constructor(promise, requestHandlers) {\r\n    this[TARGET_INTERNALS] = new Internals(this, promise, requestHandlers);\r\n  }\r\n\r\n  then(...args) {\r\n    return this[TARGET_INTERNALS].then(...args);\r\n  }\r\n\r\n  catch(...args) {\r\n    return this[TARGET_INTERNALS].catch(...args);\r\n  }\r\n}\r\n\r\nexport const createRequestTarget = (promise, requestHandlers) => (\r\n  new Target(promise, requestHandlers)\r\n);\r\n\r\nexport default Target;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/Target.js","import EventDispatcher from 'event-dispatcher';\r\nimport getId from '../utils/getId';\r\nimport isResource from '../utils/isResource';\r\nimport { createResource } from './Resource';\r\nimport isRequest from '../request/target/isRequest';\r\n\r\nexport const ResourcePoolEvents = Object.freeze({\r\n  RESOURCE_ADDED: 'resourceAdded',\r\n  RESOURCE_REMOVED: 'resourceRemoved',\r\n  POOL_CLEAR: 'poolClear',\r\n  POOL_CLEARED: 'poolCleared',\r\n  POOL_DESTROYED: 'poolDestroyed',\r\n});\r\n\r\nexport const MAP_FIELD = Symbol('ResourcePool::map');\r\n\r\nlet validTargets = {};\r\n\r\nexport const isValidTarget = (target) => (\r\n  !isResource(target)\r\n  && !isRequest(target)\r\n  && Boolean(validTargets[typeof target])\r\n);\r\n\r\nexport const setValidTargets = (list) => {\r\n  validTargets = list.reduce((validTargets, target) => {\r\n    validTargets[target] = true;\r\n\r\n    return validTargets;\r\n  }, {});\r\n};\r\n\r\nexport const getDefaultValidTargets = () => ['object', 'function'];\r\n\r\nclass ResourcePool extends EventDispatcher {\r\n  constructor() {\r\n    super();\r\n    this[MAP_FIELD] = new Map();\r\n    Object.defineProperties(this, {\r\n      id: {\r\n        value: getId(),\r\n      },\r\n    });\r\n  }\r\n\r\n  set(value, type = null) {\r\n    const map = this[MAP_FIELD];\r\n    let resource = null;\r\n    if (isValidTarget(value)) {\r\n      if (map.has(value)) {\r\n        resource = map.get(value);\r\n      } else {\r\n        resource = createResource(this, value, type || typeof value);\r\n        map.set(resource.id, resource);\r\n        map.set(value, resource);\r\n        if (this.hasEventListener(ResourcePoolEvents.RESOURCE_ADDED)) {\r\n          this.dispatchEvent(ResourcePoolEvents.RESOURCE_ADDED, resource);\r\n        }\r\n      }\r\n    }\r\n\r\n    return resource;\r\n  }\r\n\r\n  has(target) {\r\n    return this[MAP_FIELD].has(target);\r\n  }\r\n\r\n  get(target) {\r\n    return this[MAP_FIELD].get(target);\r\n  }\r\n\r\n  remove(value) {\r\n    const map = this[MAP_FIELD];\r\n    const resource = map.get(value);\r\n    if (resource) {\r\n      map.delete(resource.id);\r\n      map.delete(resource.value);\r\n      if (this.hasEventListener(ResourcePoolEvents.RESOURCE_REMOVED)) {\r\n        this.dispatchEvent(ResourcePoolEvents.RESOURCE_REMOVED, resource);\r\n      }\r\n      resource.destroy();\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    const map = this[MAP_FIELD];\r\n    if (this.hasEventListener(ResourcePoolEvents.POOL_CLEAR)) {\r\n      this.dispatchEvent(ResourcePoolEvents.POOL_CLEAR, this);\r\n    }\r\n\r\n    for (const [key, resource] of map) {\r\n      if (typeof key === 'string' && key === resource.id) {\r\n        resource.destroy();\r\n      }\r\n    }\r\n\r\n    map.clear();\r\n\r\n    if (this.hasEventListener(ResourcePoolEvents.POOL_CLEARED)) {\r\n      this.dispatchEvent(ResourcePoolEvents.POOL_CLEARED, this);\r\n    }\r\n  }\r\n\r\n  isActive() {\r\n    return Boolean(this[MAP_FIELD]);\r\n  }\r\n\r\n  destroy() {\r\n    this.clear();\r\n    // intentionally make it not usable after its destroyed\r\n    delete this[MAP_FIELD];\r\n    if (this.hasEventListener(ResourcePoolEvents.POOL_DESTROYED)) {\r\n      // FIXME why for second parameter?\r\n      this.dispatchEvent(ResourcePoolEvents.POOL_DESTROYED, this);\r\n    }\r\n  }\r\n\r\n  static events = ResourcePoolEvents;\r\n}\r\n\r\nclass DefaultResourcePool extends ResourcePool {\r\n  // INFO default ResourcePool should not be destroyable;\r\n  destroy() {\r\n    throw new Error('Default ResourcePool cannot be destroyed.');\r\n  }\r\n}\r\n\r\nexport const defaultResourcePool = new DefaultResourcePool();\r\n\r\nexport const createResourcePool = () => new ResourcePool();\r\n\r\nsetValidTargets(getDefaultValidTargets());\r\n\r\nexport default ResourcePool;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/ResourcePool.js","export default (message) => Promise.reject(new Error(message));\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/reject.js","export default Object.freeze({\r\n  PENDING: 'pending',\r\n  RESOLVED: 'resolved',\r\n  REJECTED: 'rejected',\r\n  DESTROYED: 'destroyed',\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/TargetStatus.js","class Deferred {\r\n  constructor() {\r\n    this.promise = new Promise((resolve, reject) => {\r\n      this.resolve = resolve;\r\n      this.reject = reject;\r\n    });\r\n  }\r\n}\r\n\r\nexport const createDeferred = () => new Deferred();\r\nexport default Deferred;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/Deferred.js","/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\r\n\r\nimport getInternals from './getInternals';\r\n\r\nexport default (target) => {\r\n  const internals = getInternals(target);\r\n  return internals ? internals.toJSON() : undefined;\r\n};\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/toJSON.js","import TARGET_DATA from '../utils/TARGET_DATA';\r\nimport TARGET_INTERNALS from '../utils/TARGET_INTERNALS';\r\nimport getInternals from '../request/target/getInternals';\r\nimport getId from '../utils/getId';\r\n\r\nconst getPoolId = (pool) => (pool ? pool.id : null);\r\n\r\n/**\r\n * @exports Resource\r\n */\r\nclass Resource {\r\n  constructor(pool, value, type, id) {\r\n    Object.defineProperties(this, {\r\n      [TARGET_INTERNALS]: {\r\n        value: {\r\n          pool,\r\n          value,\r\n          type,\r\n          id,\r\n          active: true,\r\n          poolId: getPoolId(pool),\r\n        },\r\n      },\r\n      [TARGET_DATA]: {\r\n        get: this.toJSON,\r\n      },\r\n    });\r\n  }\r\n\r\n\r\n  get active() {\r\n    return Boolean(getInternals(this).active);\r\n  }\r\n\r\n  get value() {\r\n    return getInternals(this).value;\r\n  }\r\n\r\n  get type() {\r\n    return getInternals(this).type || typeof getInternals(this).value;\r\n  }\r\n\r\n  get id() {\r\n    return getInternals(this).id;\r\n  }\r\n\r\n  get poolId() {\r\n    return getInternals(this).poolId;\r\n  }\r\n\r\n  toJSON = () => ({\r\n    [TARGET_DATA]: {\r\n      $id: this.id,\r\n      $type: this.type,\r\n      $poolId: this.poolId,\r\n    },\r\n  });\r\n\r\n  destroy() {\r\n    const internals = getInternals(this);\r\n    const { id, pool } = internals;\r\n\r\n    if (!internals.active) {\r\n      return;\r\n    }\r\n\r\n    internals.active = false;\r\n    pool.remove(id);\r\n\r\n    Object.keys(internals).map((name) => delete internals[name]);\r\n  }\r\n}\r\n\r\nexport const createResource = (pool, value, resourceType, id = null) => (\r\n  new Resource(pool, value, resourceType, id || getId())\r\n);\r\n\r\nexport default Resource;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/Resource.js","const base = `DA/${Date.now()}/`;\r\nlet index = 0;\r\nexport default () => `${base}${++index}/${Date.now()}`;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getId.js","import TARGET_INTERNALS from './TARGET_INTERNALS';\r\nimport TARGET_DATA from './TARGET_DATA';\r\nimport isResource from './isResource';\r\n\r\nexport default (object) => {\r\n  if (typeof object[TARGET_INTERNALS] === 'object') {\r\n    return object[TARGET_INTERNALS].poolId;\r\n  } else if (isResource(object)) {\r\n    return object[TARGET_DATA].$poolId;\r\n  }\r\n  return null;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getResourcePoolId.js","import TARGET_INTERNALS from './TARGET_INTERNALS';\r\nimport TARGET_DATA from './TARGET_DATA';\r\nimport isResource from './isResource';\r\n\r\nexport default (object) => {\r\n  // if (object instanceof Resource || object instanceof Target) {\r\n  if (typeof object[TARGET_INTERNALS] === 'object') {\r\n    return object[TARGET_INTERNALS].id;\r\n  } else if (isResource(object)) {\r\n    return object[TARGET_DATA].$id;\r\n  }\r\n\r\n  return null;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getResourceId.js","import {\r\n  createDescriptor,\r\n  descriptorGeneratorFactory,\r\n} from '../Descriptor';\r\n\r\nexport const ProxyCommandNames = Object.freeze({\r\n  GET: 'get',\r\n  SET: 'set',\r\n  APPLY: 'apply',\r\n  DELETE_PROPERTY: 'deleteProperty',\r\n});\r\n\r\nexport const ProxyCommandFields = Object.freeze({\r\n  get: Symbol('proxy.commands::get'),\r\n  set: Symbol('proxy.commands::set'),\r\n  apply: Symbol('proxy.commands::apply'),\r\n  deleteProperty: Symbol('proxy.commands::deleteProperty'),\r\n});\r\n\r\nclass ProxyCommandsClass {\r\n  constructor() {\r\n    Object.freeze(this);\r\n  }\r\n\r\n  names = ProxyCommandNames;\r\n  fields = ProxyCommandFields;\r\n\r\n  get list() {\r\n    return [\r\n      ProxyCommandNames.GET,\r\n      ProxyCommandNames.SET,\r\n      ProxyCommandNames.APPLY,\r\n      ProxyCommandNames.DELETE_PROPERTY,\r\n    ];\r\n  }\r\n\r\n  get required() {\r\n    return [\r\n      ProxyCommandNames.GET,\r\n      ProxyCommandNames.SET,\r\n      ProxyCommandNames.APPLY,\r\n    ];\r\n  }\r\n\r\n  createGETDescriptor = descriptorGeneratorFactory(\r\n    ProxyCommandNames.GET,\r\n    ProxyCommandFields.get,\r\n  );\r\n  createSETDescriptor = descriptorGeneratorFactory(\r\n    ProxyCommandNames.SET,\r\n    ProxyCommandFields.set,\r\n  );\r\n  createAPPLYDescriptor = descriptorGeneratorFactory(\r\n    ProxyCommandNames.APPLY,\r\n    ProxyCommandFields.apply,\r\n  );\r\n}\r\n\r\nconst ProxyCommands = new ProxyCommandsClass();\r\n\r\nexport const createDescriptors = (\r\n  handlers,\r\n  target = {},\r\n  isTemporary = undefined,\r\n  resourceType = null,\r\n  cacheable = true,\r\n  virtual = false,\r\n) => {\r\n  const args = [isTemporary, resourceType, cacheable, virtual];\r\n  ProxyCommands.list.forEach((name) => {\r\n    const handler = handlers[name];\r\n    const field = ProxyCommandFields[name];\r\n\r\n    if (handler instanceof Function) {\r\n      let descriptor = createDescriptor(name, handler, field, ...args);\r\n      descriptor = Object.freeze(descriptor);\r\n\r\n      if (target instanceof Array) {\r\n        target.push(descriptor);\r\n      } else if (target) {\r\n        target[field] = descriptor;\r\n      }\r\n    }\r\n  });\r\n\r\n  return target;\r\n};\r\n\r\nexport default ProxyCommands;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/command/internal/ProxyCommands.js","import TARGET_INTERNALS from './TARGET_INTERNALS';\r\nimport TARGET_DATA from './TARGET_DATA';\r\nimport isResource from './isResource';\r\n\r\nconst getResourceType = (object) => {\r\n  if (typeof object[TARGET_INTERNALS] === 'object') {\r\n    return object[TARGET_INTERNALS].type;\r\n  } else if (isResource(object)) {\r\n    return object[TARGET_DATA].$type;\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport default getResourceType;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getResourceType.js","(function webpackUniversalModuleDefinition(root, factory) {\r\n\tif(typeof exports === 'object' && typeof module === 'object')\r\n\t\tmodule.exports = factory();\r\n\telse if(typeof define === 'function' && define.amd)\r\n\t\tdefine([], factory);\r\n\telse if(typeof exports === 'object')\r\n\t\texports[\"EventDispatcher\"] = factory();\r\n\telse\r\n\t\troot[\"EventDispatcher\"] = factory();\r\n})(this, function() {\r\nreturn /******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {};\r\n/******/\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n/******/\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId]) {\r\n/******/ \t\t\treturn installedModules[moduleId].exports;\r\n/******/ \t\t}\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\ti: moduleId,\r\n/******/ \t\t\tl: false,\r\n/******/ \t\t\texports: {}\r\n/******/ \t\t};\r\n/******/\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n/******/\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.l = true;\r\n/******/\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n/******/\r\n/******/\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__webpack_require__.m = modules;\r\n/******/\r\n/******/ \t// expose the module cache\r\n/******/ \t__webpack_require__.c = installedModules;\r\n/******/\r\n/******/ \t// define getter function for harmony exports\r\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\r\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\r\n/******/ \t\t\tObject.defineProperty(exports, name, {\r\n/******/ \t\t\t\tconfigurable: false,\r\n/******/ \t\t\t\tenumerable: true,\r\n/******/ \t\t\t\tget: getter\r\n/******/ \t\t\t});\r\n/******/ \t\t}\r\n/******/ \t};\r\n/******/\r\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\r\n/******/ \t__webpack_require__.n = function(module) {\r\n/******/ \t\tvar getter = module && module.__esModule ?\r\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\r\n/******/ \t\t\tfunction getModuleExports() { return module; };\r\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\r\n/******/ \t\treturn getter;\r\n/******/ \t};\r\n/******/\r\n/******/ \t// Object.prototype.hasOwnProperty.call\r\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\r\n/******/\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__webpack_require__.p = \"http://localhost:8081/dist/\";\r\n/******/\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ([\r\n/* 0 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.Event = undefined;\r\n\r\nvar _EventDispatcher = __webpack_require__(1);\r\n\r\nvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\nexports.default = _EventDispatcher2.default;\r\nexports.Event = _EventDispatcher.Event;\r\n\r\n/***/ }),\r\n/* 1 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\n\r\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar hasOwnProp = function hasOwnProp(target, name) {\r\n  return Object.prototype.hasOwnProperty.call(target, name);\r\n}; /**\r\n    * Created by Oleg Galaburda on 09.02.16.\r\n    * \r\n    */\r\n\r\nvar Event = exports.Event = function () {\r\n  function Event(type) {\r\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\r\n\r\n    _classCallCheck(this, Event);\r\n\r\n    this.type = type;\r\n    this.data = data;\r\n    this.defaultPrevented = false;\r\n  }\r\n\r\n  _createClass(Event, [{\r\n    key: 'toJSON',\r\n    value: function toJSON() {\r\n      return { type: this.type, data: this.data };\r\n    }\r\n  }, {\r\n    key: 'isDefaultPrevented',\r\n    value: function isDefaultPrevented() {\r\n      return this.defaultPrevented;\r\n    }\r\n  }, {\r\n    key: 'preventDefault',\r\n    value: function preventDefault() {\r\n      this.defaultPrevented = true;\r\n    }\r\n  }]);\r\n\r\n  return Event;\r\n}();\r\n\r\nvar ListenersRunner = function () {\r\n  function ListenersRunner(listeners, onStopped, onComplete) {\r\n    var _this = this;\r\n\r\n    _classCallCheck(this, ListenersRunner);\r\n\r\n    this.index = -1;\r\n    this.immediatelyStopped = false;\r\n\r\n    this.stopImmediatePropagation = function () {\r\n      _this.immediatelyStopped = true;\r\n    };\r\n\r\n    this.listeners = listeners;\r\n    this.onStopped = onStopped;\r\n    this.onComplete = onComplete;\r\n  }\r\n\r\n  _createClass(ListenersRunner, [{\r\n    key: 'run',\r\n    value: function run(event, target) {\r\n      var listener = void 0;\r\n      var listeners = this.listeners;\r\n\r\n      this.augmentEvent(event);\r\n      // TODO this has to be handled in separate object ListenersRunner that should be\r\n      // created for each call() call and asked for index validation on each listener remove.\r\n      for (this.index = 0; this.index < listeners.length; this.index++) {\r\n        if (this.immediatelyStopped) break;\r\n        listener = listeners[this.index];\r\n        listener.call(target, event);\r\n      }\r\n      this.clearEvent(event);\r\n      this.onComplete(this);\r\n    }\r\n  }, {\r\n    key: 'augmentEvent',\r\n    value: function augmentEvent(eventObject) {\r\n      var event = eventObject;\r\n      event.stopPropagation = this.onStopped;\r\n      event.stopImmediatePropagation = this.stopImmediatePropagation;\r\n    }\r\n\r\n    /* eslint class-methods-use-this: \"off\" */\r\n\r\n  }, {\r\n    key: 'clearEvent',\r\n    value: function clearEvent(eventObject) {\r\n      var event = eventObject;\r\n      delete event.stopPropagation;\r\n      delete event.stopImmediatePropagation;\r\n    }\r\n  }, {\r\n    key: 'listenerRemoved',\r\n    value: function listenerRemoved(listeners, index) {\r\n      if (listeners === this.listeners && index <= this.index) {\r\n        this.index--;\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return ListenersRunner;\r\n}();\r\n\r\nvar EventListeners = function () {\r\n  function EventListeners() {\r\n    var _this2 = this;\r\n\r\n    _classCallCheck(this, EventListeners);\r\n\r\n    this._listeners = {};\r\n    this._runners = [];\r\n\r\n    this.removeRunner = function (runner) {\r\n      _this2._runners.splice(_this2._runners.indexOf(runner), 1);\r\n    };\r\n  }\r\n  /**\r\n   * key - event Type\r\n   * value - hash of priorities\r\n   *    key - priority\r\n   *    value - list of handlers\r\n   * @type {Object<string, Object.<string, Array<number, Function>>>}\r\n   * @private\r\n   */\r\n\r\n\r\n  _createClass(EventListeners, [{\r\n    key: 'createList',\r\n    value: function createList(eventType, priorityOpt) {\r\n      var priority = parseInt(priorityOpt, 10);\r\n      var target = this.getPrioritiesByKey(eventType);\r\n      var key = String(priority);\r\n      var value = void 0;\r\n      if (hasOwnProp(target, key)) {\r\n        value = target[key];\r\n      } else {\r\n        value = [];\r\n        target[key] = value;\r\n      }\r\n      return value;\r\n    }\r\n  }, {\r\n    key: 'getPrioritiesByKey',\r\n    value: function getPrioritiesByKey(key) {\r\n      var value = void 0;\r\n      if (hasOwnProp(this._listeners, key)) {\r\n        value = this._listeners[key];\r\n      } else {\r\n        value = {};\r\n        this._listeners[key] = value;\r\n      }\r\n      return value;\r\n    }\r\n  }, {\r\n    key: 'add',\r\n    value: function add(eventType, handler, priority) {\r\n      var handlers = this.createList(eventType, priority);\r\n      if (handlers.indexOf(handler) < 0) {\r\n        handlers.push(handler);\r\n      }\r\n    }\r\n  }, {\r\n    key: 'has',\r\n    value: function has(eventType) {\r\n      var priority = void 0;\r\n      var result = false;\r\n      var priorities = this.getPrioritiesByKey(eventType);\r\n      if (priorities) {\r\n        for (priority in priorities) {\r\n          if (hasOwnProp(priorities, priority)) {\r\n            result = true;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n  }, {\r\n    key: 'remove',\r\n    value: function remove(eventType, handler) {\r\n      var _this3 = this;\r\n\r\n      var priorities = this.getPrioritiesByKey(eventType);\r\n      if (priorities) {\r\n        var list = Object.getOwnPropertyNames(priorities);\r\n        var length = list.length;\r\n\r\n        var _loop = function _loop(index) {\r\n          var priority = list[index];\r\n          var handlers = priorities[priority];\r\n          var handlerIndex = handlers.indexOf(handler);\r\n          if (handlerIndex >= 0) {\r\n            handlers.splice(handlerIndex, 1);\r\n            if (!handlers.length) {\r\n              delete priorities[priority];\r\n            }\r\n            _this3._runners.forEach(function (runner) {\r\n              runner.listenerRemoved(handlers, handlerIndex);\r\n            });\r\n          }\r\n        };\r\n\r\n        for (var index = 0; index < length; index++) {\r\n          _loop(index);\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: 'removeAll',\r\n    value: function removeAll(eventType) {\r\n      delete this._listeners[eventType];\r\n    }\r\n  }, {\r\n    key: 'createRunner',\r\n    value: function createRunner(handlers, onStopped) {\r\n      var runner = new ListenersRunner(handlers, onStopped, this.removeRunner);\r\n      this._runners.push(runner);\r\n      return runner;\r\n    }\r\n  }, {\r\n    key: 'call',\r\n    value: function call(event, target) {\r\n      var priorities = this.getPrioritiesByKey(event.type);\r\n      var stopped = false;\r\n      var stopPropagation = function stopPropagation() {\r\n        stopped = true;\r\n      };\r\n      if (priorities) {\r\n        // getOwnPropertyNames() or keys()?\r\n        var list = Object.getOwnPropertyNames(priorities).sort(function (a, b) {\r\n          return a - b;\r\n        });\r\n        var length = list.length;\r\n\r\n        for (var index = 0; index < length; index++) {\r\n          if (stopped) break;\r\n          var _handlers = priorities[list[index]];\r\n          // in case if all handlers of priority were removed while event\r\n          // was dispatched and handlers become undefined.\r\n          if (_handlers) {\r\n            var _runner = this.createRunner(_handlers, stopPropagation);\r\n            _runner.run(event, target);\r\n            if (_runner.immediatelyStopped) break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return EventListeners;\r\n}();\r\n\r\nvar EventDispatcher = function () {\r\n  function EventDispatcher() {\r\n    var eventPreprocessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\r\n    var noInit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\r\n\r\n    _classCallCheck(this, EventDispatcher);\r\n\r\n    if (!noInit) {\r\n      this.initialize(eventPreprocessor);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n\r\n\r\n  _createClass(EventDispatcher, [{\r\n    key: 'initialize',\r\n    value: function initialize() {\r\n      var eventPreprocessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\r\n\r\n      this._eventPreprocessor = eventPreprocessor;\r\n      this._listeners = new EventListeners();\r\n    }\r\n  }, {\r\n    key: 'addEventListener',\r\n    value: function addEventListener(eventType, listener) {\r\n      var priority = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\r\n\r\n      this._listeners.add(eventType, listener, -priority || 0);\r\n    }\r\n  }, {\r\n    key: 'hasEventListener',\r\n    value: function hasEventListener(eventType) {\r\n      return this._listeners.has(eventType);\r\n    }\r\n  }, {\r\n    key: 'removeEventListener',\r\n    value: function removeEventListener(eventType, listener) {\r\n      this._listeners.remove(eventType, listener);\r\n    }\r\n  }, {\r\n    key: 'removeAllEventListeners',\r\n    value: function removeAllEventListeners(eventType) {\r\n      this._listeners.removeAll(eventType);\r\n    }\r\n  }, {\r\n    key: 'dispatchEvent',\r\n    value: function dispatchEvent(event, data) {\r\n      var eventObject = EventDispatcher.getEvent(event, data);\r\n      if (this._eventPreprocessor) {\r\n        eventObject = this._eventPreprocessor.call(this, eventObject);\r\n      }\r\n      this._listeners.call(eventObject);\r\n    }\r\n  }], [{\r\n    key: 'isObject',\r\n    value: function isObject(value) {\r\n      return (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value !== null;\r\n    }\r\n  }, {\r\n    key: 'getEvent',\r\n    value: function getEvent(eventOrType, optionalData) {\r\n      var event = eventOrType;\r\n      if (!EventDispatcher.isObject(eventOrType)) {\r\n        event = new EventDispatcher.Event(String(eventOrType), optionalData);\r\n      }\r\n      return event;\r\n    }\r\n  }, {\r\n    key: 'create',\r\n    value: function create(eventPreprocessor) {\r\n      return new EventDispatcher(eventPreprocessor);\r\n    }\r\n\r\n    /* eslint no-undef: \"off\" */\r\n\r\n  }]);\r\n\r\n  return EventDispatcher;\r\n}();\r\n\r\nEventDispatcher.Event = Event;\r\n\r\nexports.default = EventDispatcher;\r\n\r\n/***/ })\r\n/******/ ]);\r\n});\r\n//# sourceMappingURL=event-dispatcher.js.map\n\n\n// WEBPACK FOOTER //\n// ./node_modules/event-dispatcher/dist/event-dispatcher.js","/**\r\n * Interface for all resource types, these will be treated as resources automatically\r\n * @interface\r\n */\r\nclass IConvertible {\r\n\r\n}\r\n\r\nexport default IConvertible;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/IConvertible.js","import TARGET_INTERNALS from './TARGET_INTERNALS';\r\nimport IConvertible from './IConvertible';\r\nimport isResource from './isResource';\r\nimport toJSON from '../request/target/toJSON';\r\nimport { defaultResourcePool } from '../resource/ResourcePool';\r\nimport Resource from '../resource/Resource';\r\n\r\nexport default (object, pool) => {\r\n  pool = pool || defaultResourcePool;\r\n\r\n  if (object instanceof Resource) {\r\n    return object.toJSON();\r\n  } else if (typeof object[TARGET_INTERNALS] === 'object') {\r\n    return toJSON(object);\r\n  } else if (object instanceof IConvertible || typeof object === 'function') {\r\n    return pool.set(object).toJSON();\r\n  } else if (isResource(object)) {\r\n    return object;\r\n  }\r\n\r\n  return null;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getRawResource.js","/**\r\n * All arguments are required\r\n * @param command Command name, Descriptor's name\r\n * @param propertyName Property name, this is the name of the handler called against target object\r\n * @param args Arguments passed to handler\r\n * @param target JSON object representing resource or target, its raw value\r\n * @returns {{command: *, args: *, target: *}}\r\n */\r\nexport default (propertyName, command, args, target) => ({\r\n  propertyName,\r\n  command,\r\n  args,\r\n  target,\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/createRequestPackage.js","import Descriptor, { addDescriptorTo } from '../Descriptor';\r\n\r\nexport const RequestCommandNames = Object.freeze({\r\n  DESTROY: '::destroy.resource',\r\n});\r\n\r\nexport const RequestCommandFields = Object.freeze({\r\n  DESTROY: Symbol('::destroy.resource'),\r\n});\r\n\r\n/**\r\n * Destroy is unique type that exists for every Target\r\n * and does not have a method on its instances. This type will\r\n * be send each time Target.destroy() is applied to\r\n * Target in stance.\r\n */\r\nclass RequestCommands {\r\n  constructor() {\r\n    Object.freeze(this);\r\n  }\r\n\r\n  names = RequestCommandNames;\r\n  fields = RequestCommandFields;\r\n\r\n  createDESTROYDescriptor = (handler, target) => {\r\n    const descriptor = new Descriptor(\r\n      RequestCommandNames.DESTROY,\r\n      handler,\r\n      RequestCommandFields.DESTROY,\r\n    );\r\n    descriptor.cacheable = false;\r\n    descriptor.virtual = true;\r\n    addDescriptorTo(descriptor, target);\r\n    return Object.freeze(descriptor);\r\n  };\r\n\r\n}\r\n\r\nexport default new RequestCommands();\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/command/internal/RequestCommands.js","/**\r\n * Reserved words\r\n */\r\nexport default Object.freeze({\r\n  /**\r\n   * Contains property names that cannot be used for Descriptor's\r\n   */\r\n  names: Object.freeze({\r\n    // INFO Exposed Promise method, cannot be overwritten by type\r\n    then: true,\r\n    // INFO Exposed Promise method, cannot be overwritten by type\r\n    catch: true,\r\n  }),\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/command/Reserved.js","import { createDecorator } from './Decorator';\r\nimport { createRequestTarget } from './Target';\r\n\r\nexport const NO_INIT = {};\r\n\r\nclass Factory {\r\n  /*\r\n   function DummyCacheImpl() {\r\n   this.get = function(name, pack) {\r\n\r\n   };\r\n   this.set = function(name, pack, request) {\r\n\r\n   };\r\n   }\r\n   */\r\n  constructor(handlers, cacheImpl = null) {\r\n    this.cache = cacheImpl;\r\n    this.handlers = handlers;\r\n\r\n    if (handlers !== NO_INIT) {\r\n      this.decorator = createDecorator(this, handlers);\r\n    }\r\n  }\r\n\r\n  create(promise, pack = null, cacheable = false) {\r\n    const request = createRequestTarget(promise, this.handlers);\r\n    if (this.handlers.available) {\r\n      this.decorator.apply(request);\r\n    }\r\n\r\n    if (this.cache && cacheable) {\r\n      this.cache.set(pack, request);\r\n    }\r\n\r\n    return request;\r\n  }\r\n\r\n  getCached(pack) {\r\n    return this.cache && this.cache.get(pack);\r\n  }\r\n}\r\n\r\nexport const createRequestFactory = (handlers, cacheImpl) => (\r\n  new Factory(handlers, cacheImpl)\r\n);\r\n\r\nexport default Factory;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/Factory.js","import EventDispatcher from 'event-dispatcher';\r\nimport hasOwnProperty from '../utils/hasOwnProperty';\r\nimport getResourcePoolId from '../utils/getResourcePoolId';\r\nimport getResourceId from '../utils/getResourceId';\r\nimport isResource from '../utils/isResource';\r\nimport isResourceConvertible from '../utils/isResourceConvertible';\r\nimport getRawResource from '../utils/getRawResource';\r\nimport isPending from '../request/target/isPending';\r\n\r\nexport const ConverterEvents = Object.freeze({\r\n  RESOURCE_CREATED: 'resourceCreated',\r\n  RESOURCE_CONVERTED: 'resourceConverted',\r\n});\r\n\r\n/**\r\n * Resource converter contains bunch of methods to lookup for resources\r\n * and registering them, converting them into RAWResource or into\r\n * Targets, depending on their origin.\r\n * Before sending data, bundled resources should be registered in ResourcePool\r\n * and then converted to RAWResource objects.\r\n * After data received, its RAWResources should be converted to Targets\r\n * for not resolved resources or to resource target values otherwise.\r\n * Resource can be resolved by its `id` and `poolId`, if Converter\r\n * can find ResourcePool with id from poolId, it will try to get target\r\n * resource value and replace with it RAWResource object.\r\n * If ResourcePool not found, Converter assumes that resource come from\r\n * other origin/environment and creates Target object that can be target\r\n * object for commands.\r\n * Converter while handling data does not look deeply, so its developer\r\n * responsibility to convert deeply nested resource targets.\r\n */\r\nclass Converter extends EventDispatcher {\r\n  constructor(factory, registry, pool, handlers = null) {\r\n    super();\r\n    this.factory = factory;\r\n    this.pool = pool;\r\n    this.registry = registry;\r\n\r\n    if (handlers) {\r\n      handlers.setConverter(this);\r\n    }\r\n  }\r\n\r\n  resourceToObject(data) {\r\n    let result;\r\n\r\n    if (isResourceConvertible(data)) {\r\n      result = getRawResource(data, this.pool);\r\n    } else if (typeof data.toJSON === 'function') {\r\n      result = data.toJSON();\r\n    } else {\r\n      return data;\r\n    }\r\n\r\n    if (this.hasEventListener(ConverterEvents.RESOURCE_CONVERTED)) {\r\n      this.dispatchEvent(ConverterEvents.RESOURCE_CONVERTED, {\r\n        data,\r\n        result,\r\n      });\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#objectToResource\r\n   * @param {*} data\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  objectToResource(data) {\r\n    let result = data;\r\n\r\n    if (isResource(data)) {\r\n      const poolId = getResourcePoolId(data);\r\n\r\n      if (this.registry.isRegistered(poolId)) { // target object is stored in current pool\r\n        const target = this.registry.get(poolId).get(getResourceId(data));\r\n\r\n        if (target) {\r\n          result = target.value;\r\n        }\r\n\r\n      } else { // target object has another origin, should be wrapped\r\n        result = this.factory.create(Promise.resolve(data));\r\n      }\r\n    }\r\n\r\n    if (result !== data && this.hasEventListener(ConverterEvents.RESOURCE_CREATED)) {\r\n      this.dispatchEvent(ConverterEvents.RESOURCE_CREATED, {\r\n        data,\r\n        result,\r\n      });\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#lookupArray\r\n   * @param list\r\n   * @param linkConvertHandler\r\n   * @returns {Array}\r\n   * @private\r\n   */\r\n  lookupArray(list, linkConvertHandler) {\r\n    return list.map((item) => linkConvertHandler.call(this, item));\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#lookupObject\r\n   * @param {*} data\r\n   * @param {Function} linkConvertHandler\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  lookupObject(data, linkConvertHandler) {\r\n    return Object.getOwnPropertyNames(data)\r\n      .reduce((result, name) => {\r\n        if (hasOwnProperty(data, name)) {\r\n          result[name] = linkConvertHandler.call(this, data[name]);\r\n        }\r\n\r\n        return result;\r\n      }, {});\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#toJSON\r\n   * @param {*} data\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  toJSON(data) {\r\n    let result = data;\r\n\r\n    if (data !== undefined && data !== null) {\r\n      if (isResourceConvertible(data)) {\r\n        // if data is Target, Resource, IConvertible, Function or RAW resource data\r\n        result = this.resourceToObject(data);\r\n      } else if (data instanceof Array) {\r\n        // if data is Array of values, check its\r\n        result = this.lookupArray(data, this.resourceToObject);\r\n      } else if (data.constructor === Object) {\r\n        // only Object instances can be looked up, other object types must be converted by hand\r\n        result = this.lookupObject(data, this.resourceToObject);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#parse\r\n   * @param {*} data\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  parse(data) {\r\n    let result = data;\r\n\r\n    if (data !== undefined && data !== null) {\r\n      if (isResource(data)) { // if data is RAW resource data\r\n        result = this.objectToResource(data);\r\n      } else if (data instanceof Array) { // if data is Array of values, check its\r\n        result = this.lookupArray(data, this.objectToResource);\r\n      } else if (data.constructor === Object) {\r\n        result = this.lookupObject(data, this.objectToResource);\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#lookupForPending\r\n   * @param {*} data\r\n   * @returns {Array}\r\n   */\r\n  // FIXME for now data is always array\r\n  lookupForPending(data) {\r\n    const result = [];\r\n\r\n    const add = (value) => {\r\n      if (isPending(value)) {\r\n        result.push(value);\r\n      }\r\n      return value;\r\n    };\r\n\r\n    if (typeof data === 'object' && data !== null) {\r\n      if (isPending(data)) {\r\n        result.push(data);\r\n      } else if (data instanceof Array) {\r\n        this.lookupArray(data, add);\r\n      } else if (data.constructor === Object) {\r\n        this.lookupObject(data, add);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  static events = ConverterEvents;\r\n}\r\n\r\n/**\r\n * @param {RequestFactory} factory\r\n * @param {DataAccessInterface.ResourcePoolRegistry} registry\r\n * @param {DataAccessInterface.ResourcePool} pool\r\n * @param {Handlers} handlers\r\n * @returns {ResourceConverter}\r\n */\r\nexport const createResourceConverter = (factory, registry, pool, handlers) => (\r\n  new Converter(factory, registry, pool, handlers)\r\n);\r\n\r\nexport default Converter;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/Converter.js","import isResource from './isResource';\r\nimport IConvertible from './IConvertible';\r\nimport Target from '../request/Target';\r\n\r\nexport default (data) => (\r\n  isResource(data)\r\n  || data instanceof Target\r\n  || typeof data === 'function'\r\n  || data instanceof IConvertible\r\n);\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/isResourceConvertible.js","import EventDispatcher from 'event-dispatcher';\r\nimport hasOwnProperty from '../utils/hasOwnProperty';\r\nimport ResourcePool, {\r\n  createResourcePool,\r\n  ResourcePoolEvents,\r\n  defaultResourcePool,\r\n} from './ResourcePool';\r\n\r\nexport const PoolRegistryEvents = Object.freeze({\r\n  RESOURCE_POOL_CREATED: 'resourcePoolCreated',\r\n  RESOURCE_POOL_REGISTERED: 'resourcePoolRegistered',\r\n  RESOURCE_POOL_REMOVED: 'resourcePoolRemoved',\r\n});\r\n\r\nconst POOLS_FIELD = Symbol('resource.pool.registry::pools');\r\n\r\n/**\r\n * @classdesc Collection of ResourcePool instances. Allows lookup for ResourcePool by its Id.\r\n * When ResourcePool is registered in PoolRegistry, it subscribes to\r\n * ResourcePool POOL_DESTROYED event and removes pool from registry after its destroyed.\r\n */\r\nclass PoolRegistry extends EventDispatcher {\r\n  constructor() {\r\n    super();\r\n    this[POOLS_FIELD] = {};\r\n\r\n    // every registry should keep default pool, so you can have access from anywhere\r\n    this.register(defaultResourcePool);\r\n  }\r\n\r\n  handlePoolDestroyed = (event) => {\r\n    this.remove(event.data);\r\n  }\r\n\r\n  /**\r\n   * Create and register ResourcePool\r\n   * @returns {DataAccessInterface.ResourcePool} New ResourcePool instance\r\n   */\r\n  createPool() {\r\n    const pool = createResourcePool();\r\n    if (this.hasEventListener(PoolRegistryEvents.RESOURCE_POOL_CREATED)) {\r\n      this.dispatchEvent(PoolRegistryEvents.RESOURCE_POOL_CREATED, pool);\r\n    }\r\n    this.register(pool);\r\n    return pool;\r\n  }\r\n\r\n  /**\r\n   * Register ResourcePool instance.\r\n   * @param pool {DataAccessInterface.ResourcePool} ResourcePool instance to be registered\r\n   */\r\n  register(pool) {\r\n    if (hasOwnProperty(this[POOLS_FIELD], pool.id)) return;\r\n    this[POOLS_FIELD][pool.id] = pool;\r\n    pool.addEventListener(ResourcePoolEvents.POOL_DESTROYED, this.handlePoolDestroyed);\r\n    if (this.hasEventListener(PoolRegistryEvents.RESOURCE_POOL_REGISTERED)) {\r\n      this.dispatchEvent(PoolRegistryEvents.RESOURCE_POOL_REGISTERED, pool);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Retrieve ResourcePool instance from registry by its Id.\r\n   * @param poolId {String} ResourcePool instance Id\r\n   * @returns {DataAccessInterface.ResourcePool|null}\r\n   */\r\n  get(poolId) {\r\n    return this[POOLS_FIELD][poolId] || null;\r\n  }\r\n\r\n  /**\r\n   * Check if ResourcePool registered in this registry instance.\r\n   * @param pool {DataAccessInterface.ResourcePool|String} ResourcePool instance or its Id.\r\n   * @returns {Boolean}\r\n   */\r\n  isRegistered(pool) {\r\n    return hasOwnProperty(\r\n      this[POOLS_FIELD],\r\n      pool instanceof ResourcePool ? pool.id : String(pool),\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Remove ResourcePool from current registry instance.\r\n   * @param pool {DataAccessInterface.ResourcePool|String} ResourcePool instance or its Id.\r\n   * @returns {Boolean}\r\n   */\r\n  remove(pool) {\r\n    let result = false;\r\n    pool = pool instanceof ResourcePool ? pool : this.get(pool);\r\n    if (pool) {\r\n      pool.removeEventListener(ResourcePoolEvents.POOL_DESTROYED, this.handlePoolDestroyed);\r\n      result = delete this[POOLS_FIELD][pool.id];\r\n    }\r\n    if (this.hasEventListener(PoolRegistryEvents.RESOURCE_POOL_REMOVED)) {\r\n      this.dispatchEvent(PoolRegistryEvents.RESOURCE_POOL_REMOVED, pool);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  static events = PoolRegistryEvents;\r\n}\r\n\r\nexport const createPoolRegistry = () => new PoolRegistry();\r\n\r\nexport default PoolRegistry;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/PoolRegistry.js","const api = require('./index');\r\n\r\nmodule.exports = Object.assign(api.default, api);\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/direct.js","import DataAccessInterface, { create, dummy } from './DataAccessInterface';\r\nimport Deferred, { createDeferred } from './utils/Deferred';\r\nimport Descriptor from './command/Descriptor';\r\nimport Reserved from './command/Reserved';\r\nimport RequestCommands from './command/internal/RequestCommands';\r\nimport ProxyCommands from './command/internal/ProxyCommands';\r\nimport Target from './request/Target';\r\nimport ResourcePool from './resource/ResourcePool';\r\nimport PoolRegistry from './resource/PoolRegistry';\r\nimport Converter from './resource/Converter';\r\nimport IConvertible from './utils/IConvertible';\r\nimport isResourceConvertible from './utils/isResourceConvertible';\r\nimport getRawResource from './utils/getRawResource';\r\nimport getResourceData from './utils/getResourceData';\r\nimport getResourceId from './utils/getResourceId';\r\nimport getResourcePoolId from './utils/getResourcePoolId';\r\nimport getResourceType from './utils/getResourceType';\r\nimport isResource from './utils/isResource';\r\n\r\nexport default DataAccessInterface;\r\n\r\nexport {\r\n  create,\r\n  dummy,\r\n  createDeferred,\r\n  Deferred,\r\n  Descriptor,\r\n  Reserved,\r\n  RequestCommands,\r\n  ProxyCommands,\r\n  Target,\r\n  ResourcePool,\r\n  PoolRegistry,\r\n  Converter,\r\n  IConvertible,\r\n  isResourceConvertible,\r\n  getRawResource,\r\n  getResourceData,\r\n  getResourceId,\r\n  getResourcePoolId,\r\n  getResourceType,\r\n  isResource,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/index.js","/**\r\n * @exports DataAccessInterface\r\n */\r\n\r\nimport areProxiesAvailable from './utils/areProxiesAvailable';\r\nimport isResource from './utils/isResource';\r\nimport getResourcePoolId from './utils/getResourcePoolId';\r\nimport getResourceId from './utils/getResourceId';\r\nimport createForeignResource from './utils/createForeignResource';\r\nimport { createHandlers } from './request/Handlers';\r\nimport { createProxyFactory } from './request/ProxyFactory';\r\nimport { createRequestFactory } from './request/Factory';\r\nimport { defaultResourcePool, ResourcePoolEvents } from './resource/ResourcePool';\r\nimport { createResourceConverter } from './resource/Converter';\r\nimport { createPoolRegistry } from './resource/PoolRegistry';\r\n\r\nclass DataAccessInterface {\r\n\r\n  /**\r\n   * @class DataAccessInterface\r\n   * @classdesc Facade of Deferred Data Access library, it holds all\r\n   * of public API -- objects like ResourcePool and methods to work\r\n   * with resources.\r\n   * @param {Descriptor[]|Object.<string, Function|Descriptor>} descriptors\r\n   * @param {boolean} [proxyEnabled=false]\r\n   * @param {ResourcePoolRegistry} [poolRegistry]\r\n   * @param {ResourcePool} [pool]\r\n   * @param {ICacheImpl} [cacheImpl]\r\n   */\r\n  constructor(\r\n    descriptors,\r\n    proxyEnabled = true,\r\n    poolRegistry = null,\r\n    pool = null,\r\n    cacheImpl = null,\r\n  ) {\r\n    this.poolRegistry = poolRegistry;\r\n    this.pool = pool;\r\n    this.cache = cacheImpl;\r\n    this.initialize(descriptors, proxyEnabled);\r\n  }\r\n\r\n  initialize(descriptors, proxyEnabled) {\r\n    if (proxyEnabled && !areProxiesAvailable()) {\r\n      throw new Error('Proxies are not available in this environment');\r\n    }\r\n\r\n    this.handlers = createHandlers(proxyEnabled);\r\n\r\n    if (proxyEnabled) {\r\n      this.factory = createProxyFactory(this.handlers, this.cache);\r\n    } else {\r\n      this.factory = createRequestFactory(this.handlers, this.cache);\r\n    }\r\n\r\n    if (!this.poolRegistry) {\r\n      this.poolRegistry = createPoolRegistry();\r\n    }\r\n\r\n    if (this.pool) {\r\n      this.poolRegistry.register(this.pool);\r\n    } else if (this.pool !== undefined) {\r\n      this.pool = this.poolRegistry.createPool();\r\n    } else {\r\n      this.pool = defaultResourcePool;\r\n    }\r\n\r\n    this.resourceConverter = createResourceConverter(\r\n      this.factory,\r\n      this.poolRegistry,\r\n      this.pool,\r\n      this.handlers,\r\n    );\r\n\r\n    const poolDestroyedHandler = () => {\r\n      this.pool.removeEventListener(ResourcePoolEvents.POOL_DESTROYED, poolDestroyedHandler);\r\n      this.pool = this.poolRegistry.createPool();\r\n      this.pool.addEventListener(ResourcePoolEvents.POOL_DESTROYED, poolDestroyedHandler);\r\n    };\r\n\r\n    this.handlers.setCommands(descriptors);\r\n    this.pool.addEventListener(ResourcePoolEvents.POOL_DESTROYED, poolDestroyedHandler);\r\n  }\r\n\r\n  get proxyEnabled() {\r\n    return this.handlers.proxyEnabled;\r\n  }\r\n\r\n  send(command, args, target = null) {\r\n    return\r\n  }\r\n\r\n  parse(data) {\r\n    return this.resourceConverter.parse(data);\r\n  }\r\n\r\n  dummy() {\r\n    return this.parse(createForeignResource());\r\n  };\r\n\r\n  toJSON(data) {\r\n    return this.resourceConverter.toJSON(data);\r\n  }\r\n\r\n  isOwnResource(resource) {\r\n    /**\r\n     * @type {DataAccessInterface.ResourcePool}\r\n     */\r\n    let pool;\r\n    if (isResource(resource)) {\r\n      pool = this.poolRegistry.get(getResourcePoolId(resource));\r\n      return pool && pool.has(getResourceId(resource));\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nexport const create = (handlers, proxyEnabled = true, poolRegistry = null, pool = null, cacheImpl = null) =>\r\n  new DataAccessInterface(handlers, proxyEnabled, poolRegistry, pool, cacheImpl);\r\n\r\nexport default DataAccessInterface;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/DataAccessInterface.js","export default () => (typeof Proxy === 'function');\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/areProxiesAvailable.js","import reject from '../../utils/reject';\r\nimport TargetStatus from '../../utils/TargetStatus';\r\nimport TARGET_DATA from '../../utils/TARGET_DATA';\r\nimport createRequestPackage from '../../utils/createRequestPackage';\r\nimport {\r\n  RequestCommandFields,\r\n  RequestCommandNames,\r\n} from '../../command//internal/RequestCommands';\r\nimport SubTargets from './SubTargets';\r\n\r\nclass Internals extends SubTargets {\r\n  constructor(target, promise, handlers) {\r\n    super();\r\n    this.handlers = handlers;\r\n    this.target = target;\r\n    // INFO this should be not initialized i.e. keep it undefined, this will be checked later\r\n    this.data = undefined;\r\n    this.temporary = undefined;\r\n    this.hadChildPromises = false;\r\n    this.status = TargetStatus.PENDING;\r\n    this.promise = promise\r\n      .then(this.handlePromiseResolve)\r\n      .catch(this.handlePromiseReject);\r\n    this.setParent(this);\r\n  }\r\n\r\n  isResource() {\r\n    if (typeof this.data === 'object' && this.data[TARGET_DATA]) {\r\n      const data = this.data[TARGET_DATA];\r\n      return Boolean(data.$poolId && data.$id);\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  get poolId() {\r\n    return this.isResource() ? this.data[TARGET_DATA].$poolId : null;\r\n  }\r\n\r\n  get type() {\r\n    return this.isResource() ? this.data[TARGET_DATA].$type : null;\r\n  }\r\n\r\n  get id() {\r\n    return this.isResource() ? this.data[TARGET_DATA].$id : null;\r\n  }\r\n\r\n  handlePromiseResolve = (value) => {\r\n    const result = { target: this.target, value };\r\n    this.data = value;\r\n    this.status = TargetStatus.RESOLVED;\r\n    if (this.isResource()) {\r\n      /*\r\n       INFO Sending \"this\" as result of resolve() handler, causes infinite\r\n       loop of this.then(), so I've used wrapper object\r\n      */\r\n      result.value = this.target;\r\n    }\r\n\r\n    this.parentResolved();\r\n\r\n    // FIXME isTemporary() was not called yet, as solution can move destruction out\r\n    if (this.temporary) {\r\n      this.destroy();\r\n    }\r\n\r\n    return result;\r\n  };\r\n\r\n  handlePromiseReject = (value) => {\r\n    this.status = TargetStatus.REJECTED;\r\n    this.parentRejected('Target of the call was rejected and call cannot be sent.');\r\n    return Promise.reject(value);\r\n  };\r\n\r\n  isActive() {\r\n    return this.status === TargetStatus.PENDING || this.status === TargetStatus.RESOLVED;\r\n  }\r\n\r\n  canBeDestroyed() {\r\n    return this.status === TargetStatus.RESOLVED || this.status === TargetStatus.REJECTED;\r\n  }\r\n\r\n  destroy() {\r\n    let promise = null;\r\n    if (this.canBeDestroyed()) {\r\n      // INFO I should not clear children list, since they are pending and requests already sent.\r\n      if (this.status === TargetStatus.RESOLVED) {\r\n        promise = this.send(\r\n          RequestCommandFields.DESTROY,\r\n          createRequestPackage(\r\n            RequestCommandNames.DESTROY,\r\n            [],\r\n            this.toJSON(),\r\n          ),\r\n        );\r\n      } else {\r\n        promise = Promise.resolve();\r\n      }\r\n      this.status = TargetStatus.DESTROYED;\r\n    } else {\r\n      promise = reject('Invalid or already destroyed target.');\r\n    }\r\n\r\n    return promise;\r\n  }\r\n\r\n  then(handleResolve, handleReject) {\r\n    const child = this.promise.then(handleResolve, handleReject);\r\n    this.hadChildPromises = true;\r\n    return child;\r\n  }\r\n\r\n  catch(handleReject) {\r\n    const child = this.promise.catch(handleReject);\r\n    this.hadChildPromises = true;\r\n    return child;\r\n  }\r\n\r\n  toJSON() {\r\n    return this.data;\r\n  }\r\n}\r\n\r\nexport default Internals;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/Internals.js","import reject from '../../utils/reject';\r\nimport { createDeferred } from '../../utils/Deferred';\r\nimport TargetStatus from '../../utils/TargetStatus';\r\nimport { createQueue } from './Queue';\r\nimport Children from './Children';\r\n\r\nclass SubTargets extends Children {\r\n  constructor(parent = null, children = []) {\r\n    super(children);\r\n    this.queue = null;\r\n    this.setParent(parent);\r\n  }\r\n\r\n  setParent(parent) {\r\n    this.parent = parent;\r\n  }\r\n\r\n  parentResolved() {\r\n    if (this.hasQueue()) {\r\n      this.queue.send(this.parent, this.handleSubRequest);\r\n      this.queue = null;\r\n    }\r\n  }\r\n\r\n  parentRejected(message = null) {\r\n    this.queue.reject(new Error(message || 'This request was rejected before sending.'));\r\n    this.queue = null;\r\n  }\r\n\r\n  hasQueue() {\r\n    return Boolean(this.queue && this.queue.length);\r\n  }\r\n\r\n  send(pack, child = null) {\r\n    const { propertyName } = pack;\r\n    const { handlers } = this.parent;\r\n    let promise;\r\n\r\n    if (!handlers.hasCommand(propertyName)) {\r\n      return reject(`Request handler for \"${propertyName}\" is not registered.`);\r\n    }\r\n\r\n    promise = this.handleSend(pack, child);\r\n\r\n    if (child) {\r\n      promise = this.register(child);\r\n    }\r\n\r\n    return promise;\r\n  }\r\n\r\n  handleSend(pack, child = null) {\r\n    const { status } = this.parent;\r\n\r\n    switch (status) {\r\n      case TargetStatus.PENDING:\r\n        if (!this.queue) {\r\n          this.queue = createQueue();\r\n        }\r\n\r\n        return this.queue.add(pack, child);\r\n      case TargetStatus.REJECTED:\r\n        return reject('Target object was rejected and cannot be used for calls.');\r\n      case TargetStatus.DESTROYED:\r\n        return reject('Target object was destroyed and cannot be used for calls.');\r\n      case TargetStatus.RESOLVED:\r\n        return this.handleSubRequest(pack, child);\r\n      default:\r\n        return reject(`Target object is in unknown status \"${status}\".`);\r\n    }\r\n  }\r\n\r\n  handleSubRequest = (pack, child) => {\r\n    const { handlers, target } = this.parent;\r\n    return handlers.handle(target, pack, child);\r\n  };\r\n}\r\n\r\nexport default SubTargets;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/SubTargets.js","import { createDeferred } from '../../utils/Deferred';\r\nimport toJSON from './toJSON';\r\n\r\nclass Queue {\r\n  constructor(list = []) {\r\n    this.list = list;\r\n  }\r\n\r\n  add(pack, child) {\r\n    const deferred = createDeferred();\r\n    this.list.push({\r\n      pack,\r\n      deferred,\r\n      child,\r\n    });\r\n\r\n    return deferred.promise;\r\n  }\r\n\r\n  get length() {\r\n    return this.list.length;\r\n  }\r\n\r\n  getList() {\r\n    return [...this.list];\r\n  }\r\n\r\n  getCommands() {\r\n    // return this.list.map(([name, pack]) => pack.type);\r\n    return this.list.map(({ pack: { propertyName } }) => propertyName);\r\n  }\r\n\r\n  send(target, callback) {\r\n    // target reset is needed because, when request was made, target probably was in\r\n    // pending mode and may be didn't have proper data\r\n    const targetJSON = toJSON(target);\r\n    this.list.forEach(({\r\n      pack,\r\n      deferred,\r\n      child,\r\n    }) => {\r\n      pack.target = targetJSON;\r\n      deferred.resolve(callback(pack, child));\r\n    });\r\n    this.list = [];\r\n  }\r\n\r\n  reject(message) {\r\n    const error = new Error(message || 'This request was rejected before sending.');\r\n    this.list.forEach(({ deferred }) => deferred.reject(error));\r\n    this.list = [];\r\n  }\r\n}\r\n\r\nexport const createQueue = (list = []) => new Queue(list);\r\n\r\nexport default Queue;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/Queue.js","import getRawPromise from './getRawPromise';\r\n\r\nclass Children {\r\n  constructor(list = []) {\r\n    this.list = list;\r\n  }\r\n\r\n  register(child) {\r\n    const handler = () => {\r\n      const index = this.list.indexOf(child);\r\n      if (index >= 0) {\r\n        this.list.splice(index, 1);\r\n      }\r\n    };\r\n\r\n    this.list.push(child);\r\n    // getRawPromise() is needed to capture promise resolution directly,\r\n    // otherwise this .then() call will be counted in child.hadChildPromises.\r\n    return getRawPromise(child).then(handler, handler);\r\n  }\r\n\r\n  get length() {\r\n    return this.list.length;\r\n  }\r\n\r\n  getList() {\r\n    return [...this.list];\r\n  }\r\n\r\n  contains(item) {\r\n    return this.list.indexOf(item) >= 0;\r\n  }\r\n\r\n  get lastItem() {\r\n    const { length } = this.list;\r\n    return length ? this.list[length - 1] : null;\r\n  }\r\n}\r\n\r\nexport default Children;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/Children.js","/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\r\n\r\nimport getInternals from './getInternals';\r\n\r\nexport default (target) => {\r\n  const internals = getInternals(target);\r\n  return internals ? internals.promise : undefined;\r\n};\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/getRawPromise.js","import TARGET_DATA from './TARGET_DATA';\r\nimport getId from './getId';\r\n\r\nexport default (type = '', resource = {}) => {\r\n  resource[TARGET_DATA] = {\r\n    $id: `foreign-id-${getId()}`,\r\n    $type: type || typeof resource,\r\n    $poolId: `foreign-poolId-${getId()}`,\r\n  };\r\n\r\n  return resource;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/createForeignResource.js","import Descriptor from '../command/Descriptor';\r\nimport ProxyCommands, { ProxyCommandFields } from '../command/internal/ProxyCommands';\r\nimport hasOwnProperty from '../utils/hasOwnProperty';\r\nimport filterHandlers from '../utils/filterRequestHandlers';\r\nimport getResourceType from '../utils/getResourceType';\r\n\r\n/**\r\n * Key for default type for handlers that will be applied to any\r\n * resource that does not have type-specific handlers registered\r\n * @type {string}\r\n */\r\nconst DEFAULT_KEY = '';\r\n\r\nexport const areProxyHandlersAvailable = (handlers, throwError = false) => {\r\n  let result = true;\r\n  ProxyCommands.required.forEach((name) => {\r\n    if (!(ProxyCommandFields[name] in handlers)) {\r\n      result = false;\r\n      if (throwError) {\r\n        throw new Error(`For Proxy interface, handler \"${name}\" should be set.`);\r\n      }\r\n    }\r\n  });\r\n\r\n  return result;\r\n};\r\n\r\nexport const HandlersEvents = Object.freeze({\r\n  HANDLERS_UPDATED: 'handlersUpdated',\r\n});\r\n\r\nclass Handlers {\r\n  constructor(proxyEnabled = false) {\r\n    // named collection of Descriptor lists that may be applied\r\n    this.properties = { [DEFAULT_KEY]: [] };\r\n    this.descriptors = { [DEFAULT_KEY]: [] };\r\n    this.proxyEnabled = Boolean(proxyEnabled);\r\n    this.converter = null;\r\n  }\r\n\r\n  get available() {\r\n    const nonEmptyListIndex = Object.getOwnPropertyNames(this.properties).findIndex((name) => {\r\n      const list = this.properties[name];\r\n      return Boolean(list && list.length);\r\n    });\r\n    return nonEmptyListIndex >= 0;\r\n  }\r\n\r\n  setConverter(converter) {\r\n    this.converter = converter;\r\n  }\r\n\r\n  setCommands(handlers) {\r\n    this.setCommandsByType(DEFAULT_KEY, handlers);\r\n\r\n    Object.keys(handlers).forEach((name) => {\r\n      const handler = handlers[name];\r\n      if (handler && (handler.constructor === Object || handler instanceof Array)) {\r\n        this.setCommandsByType(name, handler);\r\n      }\r\n    });\r\n\r\n    if (this.proxyEnabled) {\r\n      areProxyHandlersAvailable(this.descriptors[DEFAULT_KEY], true);\r\n    }\r\n  }\r\n\r\n  setCommandsByType(type, handlers) {\r\n    const descrs = {};\r\n    const props = [];\r\n    filterHandlers(handlers, descrs, props);\r\n    this.descriptors[type] = descrs;\r\n    this.properties[type] = props;\r\n  }\r\n\r\n  // FIXME Not quite obvious that it checks against property name, not command name\r\n  hasCommand(propertyName, type = DEFAULT_KEY) {\r\n    return (\r\n        type\r\n        && this.descriptors[type]\r\n        && hasOwnProperty(this.descriptors[type], propertyName)\r\n      )\r\n      || (\r\n        this.descriptors[DEFAULT_KEY]\r\n        && hasOwnProperty(this.descriptors[DEFAULT_KEY], propertyName)\r\n      );\r\n  }\r\n\r\n  getPropertyCommands(type = '') {\r\n    const list = this.properties[type || DEFAULT_KEY] || [];\r\n    return [...list];\r\n  }\r\n\r\n  getPropertyNames(type = '') {\r\n    return this.getPropertyCommands(type)\r\n      .map((descriptor) => descriptor.propertyName);\r\n  }\r\n\r\n  getCommands(type = DEFAULT_KEY) {\r\n    if (type && this.descriptors[type]) {\r\n      return {\r\n        ...this.descriptors[DEFAULT_KEY],\r\n        ...this.descriptors[type],\r\n      };\r\n    }\r\n\r\n    return this.descriptors[DEFAULT_KEY];\r\n  }\r\n\r\n  getCommand(propertyName, type = DEFAULT_KEY) {\r\n    const descriptor = (\r\n        this.descriptors[type]\r\n        && this.descriptors[type][propertyName]\r\n      )\r\n      || (\r\n        this.descriptors[DEFAULT_KEY]\r\n        && this.descriptors[DEFAULT_KEY][propertyName]\r\n      );\r\n\r\n    return descriptor || null;\r\n  }\r\n\r\n  call(parentRequest, pack, resultRequest) {\r\n    // FIXME should it also check for resultRequest to not appear in the list?\r\n    const list = this.converter ? this.converter.lookupForPending(pack.args) : null;\r\n\r\n    if (list && list.length) {\r\n      // FIXME Need to test on all platforms: might not work because may need list of\r\n      // Promise objects, not Targets\r\n      return Promise.all(list)\r\n        .then(() => this.callImmediately(parentRequest, pack, resultRequest));\r\n    }\r\n\r\n    return this.callImmediately(parentRequest, pack, resultRequest);\r\n  }\r\n\r\n  callImmediately(parentRequest, pack, resultRequest) {\r\n    const { propertyName } = pack;\r\n    const descriptor = this.getCommand(propertyName, getResourceType(parentRequest));\r\n    if (descriptor instanceof Descriptor) {\r\n      return new Promise((resolve) => {\r\n        resolve(descriptor.handler(parentRequest, pack, resultRequest));\r\n      });\r\n    }\r\n\r\n    return reject(`Command descriptor for \"${name}\" was not found.`);\r\n  }\r\n\r\n  static events = HandlersEvents;\r\n}\r\n\r\nexport const createHandlers = (proxyEnabled) => new Handlers(proxyEnabled);\r\n\r\nexport default Handlers;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/Handlers.js","import hasOwnProperty from './hasOwnProperty';\r\nimport Descriptor, { createDescriptor } from '../command/Descriptor';\r\nimport Reserved from '../command/Reserved';\r\n\r\n\r\n/**\r\n * Checks for Descriptor uniqueness and reserved words usage.\r\n * @param {DataAccessInterface.Descriptor} descriptor\r\n * @param {Object.<string, DataAccessInterface.Descriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.Descriptor>} properties\r\n * @private\r\n */\r\nconst applyDescriptor = (descriptor, descriptors, properties) => {\r\n  const { propertyName } = descriptor;\r\n  if (propertyName in Reserved.names) {\r\n    throw new Error(`Name \"${propertyName}\" is reserved and cannot be used in descriptor.`);\r\n  }\r\n  if (\r\n    hasOwnProperty(descriptors, propertyName)\r\n    && descriptors[propertyName] instanceof Descriptor\r\n  ) {\r\n    throw new Error(`Field names should be unique, \"${String(propertyName)}\" field has duplicates.`);\r\n  }\r\n  descriptors[propertyName] = descriptor;\r\n  // FIXME Check if new implementation uses virtual commands properly\r\n  if (!descriptor.virtual) {\r\n    properties.push(descriptor);\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Array} handlers\r\n * @param {Object} descriptors\r\n * @private\r\n */\r\nconst filterArray = (handlers, descriptors, properties) => {\r\n  handlers.forEach((value) => {\r\n    if (value instanceof Descriptor) {\r\n      applyDescriptor(value, descriptors, properties);\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * @param {Object} handlers\r\n * @param {Object.<string, DataAccessInterface.Descriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.Descriptor>} properties\r\n * @private\r\n */\r\nconst filterHash = (handlers, descriptors, properties) => {\r\n  if (!handlers) return;\r\n  ([\r\n    ...Object.getOwnPropertyNames(handlers),\r\n    ...Object.getOwnPropertySymbols(handlers),\r\n  ]).forEach((propertyName) => {\r\n    let value = handlers[propertyName];\r\n    // FIXME unnecessary typeof(value is defined), could be replaced with instanceof\r\n    if (typeof value === 'function') {\r\n      value = createDescriptor(propertyName, value);\r\n    }\r\n    if (value instanceof Descriptor) {\r\n      applyDescriptor(value, descriptors, properties);\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * @method Handlers.filterHandlers\r\n * @param {Array|Object} handlers\r\n * @param {Object.<string, DataAccessInterface.Descriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.Descriptor>} properties\r\n */\r\nexport default (handlers, descriptors, properties) => {\r\n  if (handlers instanceof Array) {\r\n    filterArray(handlers, descriptors, properties);\r\n  } else {\r\n    filterHash(handlers, descriptors, properties);\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/filterRequestHandlers.js","import Factory, { NO_INIT, createRequestFactory } from './Factory';\r\nimport hasOwnProperty from '../utils/hasOwnProperty';\r\nimport { ProxyCommandFields } from '../command/internal/ProxyCommands';\r\n\r\nconst EXCLUSIONS = {\r\n  /*\r\n   INFO arguments and caller were included because they are required function properties\r\n   */\r\n  arguments: true,\r\n  caller: true,\r\n  prototype: true,\r\n};\r\n\r\nconst createFunctionWrapper = (target) => {\r\n  // INFO Target must be a function so I could use Proxy.call() interceptor.\r\n  function requestTargetProxy() {\r\n  }\r\n\r\n  requestTargetProxy.target = target;\r\n\r\n  return requestTargetProxy;\r\n};\r\n\r\nconst wrapWithProxy = (target, handlers) => new Proxy(createFunctionWrapper(target), handlers);\r\n\r\nconst proxyGet = (wrapper, name) => {\r\n  const { target } = wrapper;\r\n  if (name in target || name in EXCLUSIONS || typeof name === 'symbol') {\r\n    return target[name];\r\n  }\r\n  // INFO Proxy should be already applied, so no need in additional wrapping\r\n  return target[ProxyCommandFields.get](name);\r\n};\r\n\r\n// INFO Proxy should be already applied, so no need in additional wrapping\r\nconst proxyApply = (wrapper, thisValue, args) => (\r\n  wrapper.target[ProxyCommandFields.apply](null, args)\r\n);\r\n\r\nconst proxySet = (wrapper, name, value) => {\r\n  const { target } = wrapper;\r\n\r\n  if (name in target || name in EXCLUSIONS || typeof name === 'symbol') {\r\n    target[name] = value;\r\n    return value;\r\n  }\r\n\r\n  if (ProxyCommandFields.set in target) {\r\n    target[ProxyCommandFields.set](name, value);\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nconst proxyHas = (wrapper, name) => hasOwnProperty(wrapper.target, name);\r\n\r\nconst proxyDeleteProperty = (wrapper, name) => {\r\n  const { target } = wrapper;\r\n  if (ProxyCommandFields.deleteProperty in target) {\r\n    target[ProxyCommandFields.deleteProperty](name);\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nconst proxyOwnKeys = (wrapper) => {\r\n  const { target } = wrapper;\r\n  return [...Object.getOwnPropertyNames(target), ...Object.getOwnPropertyNames(EXCLUSIONS)];\r\n};\r\n\r\nconst proxyEnumerate = (wrapper) => {\r\n  const { target } = wrapper;\r\n  return [\r\n    ...Object.getOwnPropertyNames(target),\r\n    ...Object.getOwnPropertyNames(EXCLUSIONS),\r\n  ][Symbol.iterator]();\r\n};\r\n\r\nconst proxyGetOwnPropertyDescriptor = (wrapper, name) => {\r\n  if (hasOwnProperty(EXCLUSIONS, name)) {\r\n    return Object.getOwnPropertyDescriptor(wrapper, name);\r\n  }\r\n  return Object.getOwnPropertyDescriptor(wrapper.target, name);\r\n};\r\n\r\nconst proxyGetPrototypeOf = (wrapper) => Object.getPrototypeOf(wrapper.target);\r\n\r\n/**\r\n * Builds proper handlers hash for Proxy\r\n * @returns {Function}\r\n */\r\nexport const createProxyHandlers = (handlers = {}) => ({\r\n  get: proxyGet,\r\n  apply: proxyApply,\r\n  set: proxySet,\r\n  has: proxyHas,\r\n  deleteProperty: proxyDeleteProperty,\r\n  ownKeys: proxyOwnKeys,\r\n  enumerate: proxyEnumerate,\r\n  getOwnPropertyDescriptor: proxyGetOwnPropertyDescriptor,\r\n  getPrototypeOf: proxyGetPrototypeOf,\r\n  ...handlers,\r\n});\r\n\r\nconst PROXY_HANDLERS = createProxyHandlers();\r\n\r\nclass ProxyFactory extends Factory {\r\n  constructor(handlers, cacheImpl) {\r\n    super(NO_INIT);\r\n\r\n    this.handlers = handlers;\r\n    this.factory = createRequestFactory(handlers, cacheImpl);\r\n    this.factory.decorator.setFactory(this);\r\n  }\r\n\r\n  create(promise, name = null, pack = null, cacheable = false) {\r\n    const instance = this.factory.create(promise, name, pack, cacheable);\r\n\r\n    if (this.handlers.available) {\r\n      return wrapWithProxy(instance, PROXY_HANDLERS);\r\n    }\r\n\r\n    return instance;\r\n  }\r\n\r\n  getCached(name, pack) {\r\n    return this.factory.getCached(name, pack);\r\n  }\r\n}\r\n\r\nexport const applyProxyWithDefaultHandlers = (target) => wrapWithProxy(target, PROXY_HANDLERS);\r\n\r\nexport const createProxyFactory = (handlers, cacheImpl) => (\r\n  new ProxyFactory(handlers, cacheImpl)\r\n);\r\n\r\nexport default ProxyFactory;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/ProxyFactory.js","import CallbackFactory from '../command/CallbackFactory';\r\nimport getResourceType from '../utils/getResourceType';\r\n\r\nclass Decorator {\r\n  constructor(factory, handlers) {\r\n    this.handlers = handlers;\r\n    this.members = new CallbackFactory(factory);\r\n  }\r\n\r\n  apply(request) {\r\n    if (!this.handlers.available) {\r\n      return request;\r\n    }\r\n\r\n    const descriptors = this.handlers.getPropertyCommands(getResourceType(request));\r\n    return descriptors.forEach((descriptor) => {\r\n      request[descriptor.propertyName] = this.members.get(descriptor);\r\n    });\r\n  }\r\n\r\n  setFactory(factory) {\r\n    if (factory) {\r\n      this.members.setFactory(factory);\r\n    }\r\n  }\r\n}\r\n\r\nexport const createDecorator = (factory, handlers) => (\r\n  new Decorator(factory, handlers)\r\n);\r\n\r\nexport default Decorator;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/Decorator.js","import Flow from './Flow';\r\n\r\nconst createHandlerFor = (\r\n  flow,\r\n  propertyName,\r\n  command,\r\n  isTemporaryFn,\r\n  cacheable,\r\n) => {\r\n  function commandHandler(...args) {\r\n    return flow.apply(\r\n      this,\r\n      propertyName,\r\n      command,\r\n      args,\r\n      isTemporaryFn,\r\n      cacheable,\r\n    );\r\n  }\r\n\r\n  return commandHandler;\r\n};\r\n\r\nclass CallbackFactory {\r\n  members = new Map();\r\n  flow = null;\r\n\r\n  constructor(factory = null) {\r\n    this.setFactory(factory);\r\n  }\r\n\r\n  /**\r\n   * @param {Descriptor} descriptor\r\n   * @returns {Function}\r\n   * @private\r\n   */\r\n  get(descriptor) {\r\n    const { propertyName } = descriptor;\r\n    if (!this.members.has(propertyName)) {\r\n      this.members.set(\r\n        propertyName,\r\n        this.create(\r\n          propertyName,\r\n          descriptor.command,\r\n          descriptor.isTemporary,\r\n          descriptor.cacheable,\r\n        ),\r\n      );\r\n    }\r\n\r\n    return this.members.get(propertyName);\r\n  }\r\n\r\n  create(propertyName, command, isTemporaryFn, cacheable = false) {\r\n    return createHandlerFor(this.flow, propertyName, command, isTemporaryFn, cacheable);\r\n  }\r\n\r\n  setFactory(factory) {\r\n    this.flow = null;\r\n\r\n    if (factory) {\r\n      this.flow = new Flow(factory);\r\n    }\r\n  }\r\n}\r\n\r\nexport default CallbackFactory;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/command/CallbackFactory.js","import getInternals from '../request/target/getInternals';\r\nimport toJSON from '../request/target/toJSON';\r\nimport reject from '../utils/reject';\r\nimport createRequestPackage from '../utils/createRequestPackage';\r\nimport setTemporary from '../request/target/setTemporary';\r\n\r\nclass Flow {\r\n  constructor(factory) {\r\n    this.factory = factory;\r\n  }\r\n\r\n  apply(target, propertyName, command, args, isTemporaryFn, cacheable = false) {\r\n    const internals = getInternals(target);\r\n\r\n    // call target must be a request target\r\n    if (internals) {\r\n      const pack = createRequestPackage(propertyName, command, args, toJSON(target));\r\n\r\n      if (cacheable) {\r\n        const child = this.factory.getCached(pack);\r\n\r\n        if (child) {\r\n          return child;\r\n        }\r\n      }\r\n\r\n      return this.makeChildReqest(target, pack, isTemporaryFn, cacheable);\r\n    }\r\n\r\n    return this.rejectCall();\r\n  }\r\n\r\n  rejectCall() {\r\n    return this.factory.create(reject(\r\n      'Target object is not an instance of Target, so cannot be used for calls.',\r\n    ));\r\n  }\r\n\r\n  makeChildReqest(target, propertyName, pack, isTemporaryFn, cacheable = false) {\r\n    // this wil be populated on internals.send() call and passed into target's\r\n    // promise when it will be executed on next tick, so there are no need in deferred anymore\r\n    let promise;\r\n    const internals = getInternals(target);\r\n    const child = this.factory.create(\r\n      Promise.resolve().then(() => promise),\r\n      propertyName,\r\n      pack,\r\n      cacheable,\r\n    );\r\n\r\n    promise = internals.send(propertyName, pack, child);\r\n    this.checkState(promise, isTemporaryFn, target, child, pack);\r\n    return child;\r\n  }\r\n\r\n  checkState(promise, isTemporaryFn, parentRequest, childRequest, pack) {\r\n    return promise.then((data) => {\r\n      const isTemporary = Boolean(isTemporaryFn(parentRequest, childRequest, pack, data));\r\n      setTemporary(childRequest, isTemporary);\r\n    });\r\n  }\r\n}\r\n\r\nexport default Flow;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/command/Flow.js","/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\r\n\r\nimport getInternals from './getInternals';\r\n\r\nexport default (target, value) => getInternals(target).temporary = Boolean(value);\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/setTemporary.js","module.exports = function(module) {\n\tif(!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif(!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 45\n// module chunks = 0","import TARGET_INTERNALS from '../../utils/TARGET_INTERNALS';\r\n\r\nexport default (target) => Boolean(target && target[TARGET_INTERNALS]);\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/isRequest.js","/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\r\n\r\nimport getStatus from './getStatus';\r\nimport TargetStatus from '../../utils/TargetStatus';\r\n\r\nexport default (value) => {\r\n  const status = getStatus(value);\r\n  return status ? status === TargetStatus.PENDING : undefined;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/isPending.js","/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\r\n\r\nimport getInternals from './getInternals';\r\n\r\nexport default (target) => {\r\n  const internals = getInternals(target);\r\n  return internals ? internals.status : undefined;\r\n};\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/getStatus.js","import TARGET_DATA from './TARGET_DATA';\r\nimport getRawResource from './getRawResource';\r\n\r\nexport default (object) => {\r\n  const data = getRawResource(object);\r\n  return data ? data[TARGET_DATA] : null;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getResourceData.js"],"sourceRoot":""}