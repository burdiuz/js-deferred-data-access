{"version":3,"sources":["webpack:///deferred-data-access.direct.js","webpack:///webpack/bootstrap 2aff3bcdf72b61997646","webpack:///./source/utils/isResource.js","webpack:///./source/utils/TARGET_INTERNALS.js","webpack:///./source/utils/TARGET_DATA.js","webpack:///./source/request/RequestTarget.js","webpack:///./source/commands/CommandDescriptor.js","webpack:///./source/resource/ResourcePool.js","webpack:///./source/utils/Deferred.js","webpack:///./source/utils/getRawResource.js","webpack:///./source/utils/IConvertible.js","webpack:///./node_modules/event-dispatcher/dist/event-dispatcher.js","webpack:///./source/resource/TargetResource.js","webpack:///./source/utils/getResourcePoolId.js","webpack:///./source/utils/getResourceId.js","webpack:///./source/commands/ProxyCommands.js","webpack:///./source/utils/getResourceType.js","webpack:///./source/utils/TargetStatus.js","webpack:///./source/utils/createRequestPackage.js","webpack:///./source/utils/getResourceData.js","webpack:///./source/utils/getId.js","webpack:///./source/commands/RequestTargetCommands.js","webpack:///./source/commands/Reserved.js","webpack:///./source/request/RequestFactory.js","webpack:///./source/resource/ResourceConverter.js","webpack:///./source/utils/isResourceConvertible.js","webpack:///./source/resource/ResourcePoolRegistry.js","webpack:///./source/direct.js","webpack:///(webpack)/buildin/harmony-module.js","webpack:///./source/index.js","webpack:///./source/DataAccessInterface.js","webpack:///./source/utils/areProxiesAvailable.js","webpack:///./source/request/RequestTargetInternals.js","webpack:///(webpack)/buildin/module.js","webpack:///./source/request/RequestHandlers.js","webpack:///./source/utils/filterRequestHandlers.js","webpack:///./source/request/RequestProxyFactory.js","webpack:///./source/request/RequestTargetDecorator.js","webpack:///./source/commands/CommandHandlerFactory.js"],"names":["DataAccessInterface","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__","__WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__","__WEBPACK_IMPORTED_MODULE_2__request_RequestTarget__","__WEBPACK_IMPORTED_MODULE_3__resource_TargetResource__","_typeof","Symbol","iterator","obj","constructor","_classCallCheck","instance","Constructor","TypeError","toJSON","setTemporary","isPending","getRawPromise","createRequestTarget","__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__","__WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__","__WEBPACK_IMPORTED_MODULE_2__utils_isResource__","__WEBPACK_IMPORTED_MODULE_3__RequestTargetInternals__","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","PROMISE_FIELD","getRequestPromise","request","RequestTarget","promise","requestHandlers","_this","this","handlePromise","data","then","value","apply","arguments","catch","temporary","Boolean","getStatus","status","PENDING","createCommandDescriptor","addDescriptorTo","descriptorGeneratorFactory","CommandDescriptor","type","handler","undefined","isTemporary","cacheable","virtual","resourceType","String","command","freeze","Array","push","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","ResourcePoolEvents","defaultResourcePool","createResourcePool","__WEBPACK_IMPORTED_MODULE_0_event_dispatcher__","__WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default","__WEBPACK_IMPORTED_MODULE_1__utils_getId__","__WEBPACK_IMPORTED_MODULE_3__TargetResource__","RESOURCE_ADDED","RESOURCE_REMOVED","POOL_CLEAR","POOL_CLEARED","POOL_DESTROYED","MAP_FIELD","validTargets","isValidTarget","ResourcePool","_EventDispatcher","getPrototypeOf","Map","id","link","has","set","hasEventListener","dispatchEvent","delete","resource","destroy","keys","next","done","clear","a","DefaultResourcePool","_ResourcePool","Error","list","index","createDeferred","Deferred","Promise","resolve","reject","__WEBPACK_IMPORTED_MODULE_1__IConvertible__","__WEBPACK_IMPORTED_MODULE_2__isResource__","__WEBPACK_IMPORTED_MODULE_3__request_RequestTarget__","__WEBPACK_IMPORTED_MODULE_4__resource_ResourcePool__","__WEBPACK_IMPORTED_MODULE_5__resource_TargetResource__","pool","IConvertible","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","_typeof2","root","factory","Event","_EventDispatcher2","default","hasOwnProp","defaultPrevented","ListenersRunner","listeners","onStopped","onComplete","immediatelyStopped","stopImmediatePropagation","event","listener","augmentEvent","clearEvent","eventObject","stopPropagation","EventListeners","_this2","_listeners","_runners","removeRunner","runner","splice","indexOf","eventType","priorityOpt","priority","parseInt","getPrioritiesByKey","handlers","createList","result","priorities","_this3","getOwnPropertyNames","handlerIndex","forEach","listenerRemoved","stopped","sort","b","_handlers","_runner","createRunner","run","EventDispatcher","eventPreprocessor","noInit","initialize","_eventPreprocessor","add","remove","removeAll","getEvent","eventOrType","optionalData","isObject","_defineProperty","createTargetResource","__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_DATA__","__WEBPACK_IMPORTED_MODULE_1__utils_TARGET_INTERNALS__","__WEBPACK_IMPORTED_MODULE_2__utils_getId__","getPoolId","TargetResource","_Object$definePropert","poolId","active","internals","ProxyCommandFields","__WEBPACK_IMPORTED_MODULE_0__CommandDescriptor__","ProxyCommandNames","GET","SET","APPLY","DELETE_PROPERTY","deleteProperty","ProxyCommandsClass","createGETDescriptor","createSETDescriptor","createAPPLYDescriptor","ProxyCommands","getResourceType","RESOLVED","REJECTED","DESTROYED","args","targetId","cmd","__WEBPACK_IMPORTED_MODULE_0__TARGET_DATA__","__WEBPACK_IMPORTED_MODULE_1__getRawResource__","base","Date","now","RequestTargetCommandNames","RequestTargetCommandFields","DESTROY","RequestTargetCommands","createDESTROYDescriptor","names","FACTORY_DECORATOR_FIELD","FACTORY_HANDLERS_FIELD","createRequestFactory","__WEBPACK_IMPORTED_MODULE_0__RequestTargetDecorator__","__WEBPACK_IMPORTED_MODULE_1__RequestTarget__","RequestFactory","cacheImpl","cache","available","pack","createResourceConverter","__WEBPACK_IMPORTED_MODULE_1__utils_getResourcePoolId__","__WEBPACK_IMPORTED_MODULE_2__utils_getResourceId__","__WEBPACK_IMPORTED_MODULE_3__utils_isResource__","__WEBPACK_IMPORTED_MODULE_4__utils_isResourceConvertible__","__WEBPACK_IMPORTED_MODULE_5__utils_getRawResource__","__WEBPACK_IMPORTED_MODULE_6__request_RequestTarget__","ResourceConverterEvents","RESOURCE_CREATED","RESOURCE_CONVERTED","ResourceConverter","registry","setConverter","isRegistered","linkConvertHandler","resourceToObject","lookupArray","lookupObject","objectToResource","__WEBPACK_IMPORTED_MODULE_0__isResource__","createResourcePoolRegistry","__WEBPACK_IMPORTED_MODULE_1__ResourcePool__","ResourcePoolRegistryEvents","RESOURCE_POOL_CREATED","RESOURCE_POOL_REGISTERED","RESOURCE_POOL_REMOVED","POOLS_FIELD","ResourcePoolRegistry","handlePoolDestroyed","register","addEventListener","removeEventListener","__WEBPACK_IMPORTED_MODULE_0__index__","assign","originalModule","webpackPolyfill","children","__WEBPACK_IMPORTED_MODULE_0__DataAccessInterface__","__WEBPACK_IMPORTED_MODULE_1__utils_Deferred__","__WEBPACK_IMPORTED_MODULE_2__commands_CommandDescriptor__","__WEBPACK_IMPORTED_MODULE_3__commands_Reserved__","__WEBPACK_IMPORTED_MODULE_4__commands_RequestTargetCommands__","__WEBPACK_IMPORTED_MODULE_5__commands_ProxyCommands__","__WEBPACK_IMPORTED_MODULE_7__resource_ResourcePool__","__WEBPACK_IMPORTED_MODULE_8__resource_ResourcePoolRegistry__","__WEBPACK_IMPORTED_MODULE_9__resource_ResourceConverter__","__WEBPACK_IMPORTED_MODULE_10__utils_IConvertible__","__WEBPACK_IMPORTED_MODULE_11__utils_isResourceConvertible__","__WEBPACK_IMPORTED_MODULE_12__utils_getRawResource__","__WEBPACK_IMPORTED_MODULE_13__utils_getResourceData__","__WEBPACK_IMPORTED_MODULE_14__utils_getResourceId__","__WEBPACK_IMPORTED_MODULE_15__utils_getResourcePoolId__","__WEBPACK_IMPORTED_MODULE_16__utils_getResourceType__","__WEBPACK_IMPORTED_MODULE_17__utils_isResource__","dummy","__WEBPACK_IMPORTED_MODULE_0__utils_areProxiesAvailable__","__WEBPACK_IMPORTED_MODULE_1__utils_isResource__","__WEBPACK_IMPORTED_MODULE_2__utils_getResourcePoolId__","__WEBPACK_IMPORTED_MODULE_3__utils_getResourceId__","__WEBPACK_IMPORTED_MODULE_4__request_RequestHandlers__","__WEBPACK_IMPORTED_MODULE_5__request_RequestProxyFactory__","__WEBPACK_IMPORTED_MODULE_6__request_RequestFactory__","__WEBPACK_IMPORTED_MODULE_8__resource_ResourceConverter__","__WEBPACK_IMPORTED_MODULE_9__resource_ResourcePoolRegistry__","descriptors","proxyEnabled","poolRegistry","resourceConverter","createPool","poolDestroyedHandler","setHandlers","parse","Proxy","__WEBPACK_IMPORTED_MODULE_0__utils_TargetStatus__","__WEBPACK_IMPORTED_MODULE_2__utils_TARGET_DATA__","__WEBPACK_IMPORTED_MODULE_3__utils_createRequestPackage__","__WEBPACK_IMPORTED_MODULE_4__utils_isResource__","__WEBPACK_IMPORTED_MODULE_5__utils_getResourceData__","__WEBPACK_IMPORTED_MODULE_6__RequestTarget__","__WEBPACK_IMPORTED_MODULE_7__commands_RequestTargetCommands__","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","err","isArray","RequestTargetInternals","requestTarget","handlePromiseResolve","sendQueue","rejectQueue","deferred","handlePromiseReject","hadChildPromises","queue","_queue$shift","shift","_queue$shift2","child","handleRequest","message","error","_queue$shift3","hasHandler","applyRequest","registerChild","addToQueue","handle","childRequestTarget","handleChildRequest","canBeDestroyed","sendRequest","handleResolve","handleReject","deprecate","paths","createRequestHandlers","__WEBPACK_IMPORTED_MODULE_0__commands_CommandDescriptor__","__WEBPACK_IMPORTED_MODULE_1__commands_ProxyCommands__","__WEBPACK_IMPORTED_MODULE_2__utils_filterRequestHandlers__","__WEBPACK_IMPORTED_MODULE_3__utils_getResourceType__","areProxyHandlersAvailable","throwError","required","RequestHandlers","HANDLERS_UPDATED","properties","converter","setHandlersByType","descrs","parentRequest","resultRequest","lookupForPending","all","handleImmediately","getHandler","nonEmptyList","find","item","__WEBPACK_IMPORTED_MODULE_1__commands_Reserved__","applyDescriptor","filterArray","filterHash","concat","getOwnPropertySymbols","createRequestProxyFactory","__WEBPACK_IMPORTED_MODULE_0__RequestFactory__","FACTORY_FIELD","EXCLUSIONS","caller","wrapWithProxy","requestTargetProxy","proxyGet","wrapper","proxyApply","thisValue","proxySet","proxyHas","proxyDeleteProperty","proxyOwnKeys","proxyEnumerate","proxyGetOwnPropertyDescriptor","getOwnPropertyDescriptor","PROXY_HANDLERS","ownKeys","enumerate","RequestProxyFactory","_RequestFactory","setFactory","getCached","createCached","createRequestTargetDecorator","__WEBPACK_IMPORTED_MODULE_0__commands_CommandHandlerFactory__","__WEBPACK_IMPORTED_MODULE_1__utils_getResourceType__","RequestTargetDecorator","members","getHandlers","__WEBPACK_IMPORTED_MODULE_2__utils_createRequestPackage__","createCommandHandlerFor","factoryWrapper","propertyName","commandType","commandHandler","_len","_key","getChildRequest","checkState","CommandHandlerFactory","isTemporaryFn","childRequest"],"mappings":"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","file":"deferred-data-access.direct.js","sourcesContent":["var DataAccessInterface =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"http://localhost:8081/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 25);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__request_RequestTarget__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__resource_TargetResource__ = __webpack_require__(10);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (object) {\n  return object instanceof __WEBPACK_IMPORTED_MODULE_3__resource_TargetResource__[\"b\" /* default */] || object instanceof __WEBPACK_IMPORTED_MODULE_2__request_RequestTarget__[\"b\" /* default */] || object && (\n  // this case for RequestTargets and TargetResources which contain\n  // data in TARGET_INTERNALS Symbol\n  // We check for their types above but in cases when Proxies are enabled\n  // their type will be Function and verification will come to this case\n  _typeof(object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]]) === 'object' ||\n  // this case for RAW resources passed via JSON conversion,\n  // look like {'resource::data': {id: '1111', poolId: '22222'}}\n  _typeof(object[__WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__[\"a\" /* default */]]) === 'object');\n});\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (Symbol('request.target:internals'));\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ('resource::data');\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export isActive */\n/* unused harmony export canBeDestroyed */\n/* unused harmony export destroy */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return toJSON; });\n/* unused harmony export isTemporary */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return setTemporary; });\n/* unused harmony export getStatus */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return isPending; });\n/* unused harmony export getQueueLength */\n/* unused harmony export getQueueCommands */\n/* unused harmony export hadChildPromises */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return getRawPromise; });\n/* unused harmony export getChildren */\n/* unused harmony export getLastChild */\n/* unused harmony export getChildrenCount */\n/* unused harmony export sendRequest */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createRequestTarget; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_isResource__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__RequestTargetInternals__ = __webpack_require__(30);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\nvar PROMISE_FIELD = Symbol('request.target::promise');\n\nvar getRequestPromise = function getRequestPromise(request) {\n  return request[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]] || request[PROMISE_FIELD];\n};\n\n/**\r\n * The object that will be available on other side\r\n * @class DataAccessInterface.RequestTarget\r\n * @param _promise {Promise}\r\n * @param _requestHandlers {RequestHandlers}\r\n */\n\nvar RequestTarget = function () {\n  function RequestTarget(promise, requestHandlers) {\n    var _this = this;\n\n    _classCallCheck(this, RequestTarget);\n\n    this[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]] = new __WEBPACK_IMPORTED_MODULE_3__RequestTargetInternals__[\"a\" /* default */](this, promise, requestHandlers);\n\n    var handlePromise = function handlePromise(data) {\n      if (!Object(__WEBPACK_IMPORTED_MODULE_2__utils_isResource__[\"a\" /* default */])(data)) {\n        _this[PROMISE_FIELD] = promise;\n        delete _this[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]];\n      }\n    };\n\n    promise.then(handlePromise, handlePromise);\n  }\n\n  _createClass(RequestTarget, [{\n    key: 'then',\n    value: function then() {\n      var target = getRequestPromise(this);\n      return target.then.apply(target, arguments);\n    }\n  }, {\n    key: 'catch',\n    value: function _catch() {\n      var target = getRequestPromise(this);\n      return target.catch.apply(target, arguments);\n    }\n  }]);\n\n  return RequestTarget;\n}();\n\nvar isActive = function isActive(target) {\n  return target && target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]] ? target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]].isActive() : false;\n};\n\nvar canBeDestroyed = function canBeDestroyed(target) {\n  return target && target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]] ? target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]].canBeDestroyed() : false;\n};\n\nvar destroy = function destroy(target) {\n  return target && target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]] ? target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]].destroy() : null;\n};\n\nvar toJSON = function toJSON(target) {\n  return target && target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]] ? target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]].toJSON() : null;\n};\n\nvar isTemporary = function isTemporary(target) {\n  return target && target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]] && target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]].temporary;\n};\n\nvar setTemporary = function setTemporary(target, value) {\n  if (target && target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]]) {\n    target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]].temporary = Boolean(value);\n  }\n};\n\nvar getStatus = function getStatus(target) {\n  return target && target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]] ? target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]].status : null;\n};\n\nvar isPending = function isPending(value) {\n  return getStatus(value) === __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].PENDING;\n};\n\nvar getQueueLength = function getQueueLength(target) {\n  var list = target && target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]] ? target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]].queue : null;\n  return list ? list.length : 0;\n};\n\nvar getQueueCommands = function getQueueCommands(target) {\n  var result = [];\n  var queue = target && target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]] ? target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]].queue : null;\n  if (queue) {\n    var length = queue.length;\n    // FIXME use Array.map()\n\n    for (var index = 0; index < length; index++) {\n      result.push(queue[index][0].type);\n    }\n  }\n  return result;\n};\n\nvar hadChildPromises = function hadChildPromises(target) {\n  return Boolean(target && target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]] && target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]].hadChildPromises);\n};\n\nvar getRawPromise = function getRawPromise(target) {\n  return target && target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]] ? target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]].promise : null;\n};\n\nvar getRequestChildren = function getRequestChildren(target) {\n  return target && target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]] ? target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]].children : null;\n};\n\nvar getChildren = function getChildren(target) {\n  var list = getRequestChildren(target);\n  return list ? [].concat(_toConsumableArray(list)) : [];\n};\n\nvar getLastChild = function getLastChild(target) {\n  var list = getRequestChildren(target);\n  return list && list.length ? list[list.length - 1] : null;\n};\n\nvar getChildrenCount = function getChildrenCount(target) {\n  var list = getRequestChildren(target);\n  return list ? list.length : 0;\n};\n\n// FIXME Is it used? Why its similar to getChildrenCount()?\nvar sendRequest = function sendRequest(target) {\n  var list = getRequestChildren(target);\n  return list ? list.length : 0;\n};\n\nvar createRequestTarget = function createRequestTarget(promise, requestHandlers) {\n  return new RequestTarget(promise, requestHandlers);\n};\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (RequestTarget);\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return createCommandDescriptor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return addDescriptorTo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return descriptorGeneratorFactory; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CommandDescriptor = function () {\n  function CommandDescriptor(type, handler, name) {\n    _classCallCheck(this, CommandDescriptor);\n\n    this.name = name !== undefined ? name : type;\n    this.type = type;\n    this.handler = handler;\n    this.isTemporary = null;\n    this.cacheable = false;\n    this.virtual = false;\n    this.resourceType = null;\n  }\n\n  _createClass(CommandDescriptor, [{\n    key: \"toString\",\n    value: function toString() {\n      return \"[CommandDescriptor(name=\\\"\" + String(this.name) + \"\\\", \" + (\"type=\\\"\" + String(this.type) + \"\\\", virtual=\\\"\" + this.virtual + \"\\\")]\");\n    }\n  }]);\n\n  return CommandDescriptor;\n}();\n\nvar createCommandDescriptor = function createCommandDescriptor(command, handler, name) {\n  var descriptor = new CommandDescriptor(command, handler, name);\n  // We can use Object.freeze(), it keeps class/constructor information\n  return Object.freeze(descriptor);\n};\n\nvar addDescriptorTo = function addDescriptorTo(descriptor, target) {\n  if (target instanceof Array) {\n    target.push(descriptor);\n  } else if (target) {\n    target[descriptor.name] = descriptor;\n  }\n};\n\nvar descriptorGeneratorFactory = function descriptorGeneratorFactory(command, name) {\n  return function (handler, target, isTemporary, resourceType, cacheable) {\n    var descriptor = new CommandDescriptor(command, handler, name);\n    descriptor.isTemporary = isTemporary;\n    descriptor.resourceType = resourceType;\n    descriptor.cacheable = cacheable;\n    addDescriptorTo(descriptor, target);\n    return Object.freeze(descriptor);\n  };\n};\n\n/* harmony default export */ __webpack_exports__[\"c\"] = (CommandDescriptor);\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ResourcePoolEvents; });\n/* unused harmony export isValidTarget */\n/* unused harmony export setValidTargets */\n/* unused harmony export getDefaultValidTargets */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return defaultResourcePool; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return createResourcePool; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_event_dispatcher__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_event_dispatcher__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_getId__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_isResource__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__TargetResource__ = __webpack_require__(10);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\nvar ResourcePoolEvents = Object.freeze({\n  RESOURCE_ADDED: 'resourceAdded',\n  RESOURCE_REMOVED: 'resourceRemoved',\n  POOL_CLEAR: 'poolClear',\n  POOL_CLEARED: 'poolCleared',\n  POOL_DESTROYED: 'poolDestroyed'\n});\n\nvar MAP_FIELD = Symbol('ResourcePool::map');\n\nvar validTargets = {};\n\nvar isValidTarget = function isValidTarget(target) {\n  return !Object(__WEBPACK_IMPORTED_MODULE_2__utils_isResource__[\"a\" /* default */])(target) && Boolean(validTargets[typeof target === 'undefined' ? 'undefined' : _typeof(target)]);\n};\n\nvar setValidTargets = function setValidTargets(list) {\n  validTargets = {};\n  var length = list.length;\n\n  for (var index = 0; index < length; index++) {\n    validTargets[list[index]] = true;\n  }\n};\n\nvar getDefaultValidTargets = function getDefaultValidTargets() {\n  return ['object', 'function'];\n};\n\nvar ResourcePool = function (_EventDispatcher) {\n  _inherits(ResourcePool, _EventDispatcher);\n\n  function ResourcePool() {\n    _classCallCheck(this, ResourcePool);\n\n    var _this = _possibleConstructorReturn(this, (ResourcePool.__proto__ || Object.getPrototypeOf(ResourcePool)).call(this));\n\n    _this[MAP_FIELD] = new Map();\n\n    Object.defineProperties(_this, {\n      id: {\n        value: Object(__WEBPACK_IMPORTED_MODULE_1__utils_getId__[\"a\" /* default */])()\n      }\n    });\n    return _this;\n  }\n\n  _createClass(ResourcePool, [{\n    key: 'set',\n    value: function set(target, type) {\n      var link = null;\n      if (isValidTarget(target)) {\n        if (this[MAP_FIELD].has(target)) {\n          link = this[MAP_FIELD].get(target);\n        } else {\n          link = Object(__WEBPACK_IMPORTED_MODULE_3__TargetResource__[\"a\" /* createTargetResource */])(this, target, type || (typeof target === 'undefined' ? 'undefined' : _typeof(target)));\n          this[MAP_FIELD].set(link.id, link);\n          this[MAP_FIELD].set(target, link);\n          if (this.hasEventListener(ResourcePoolEvents.RESOURCE_ADDED)) {\n            this.dispatchEvent(ResourcePoolEvents.RESOURCE_ADDED, link);\n          }\n        }\n      }\n      return link;\n    }\n  }, {\n    key: 'has',\n    value: function has(target) {\n      return this[MAP_FIELD].has(target);\n    }\n  }, {\n    key: 'get',\n    value: function get(target) {\n      return this[MAP_FIELD].get(target);\n    }\n  }, {\n    key: 'remove',\n    value: function remove(target) {\n      var link = this[MAP_FIELD].get(target);\n      if (link) {\n        this[MAP_FIELD].delete(link.id);\n        this[MAP_FIELD].delete(link.resource);\n        if (this.hasEventListener(ResourcePoolEvents.RESOURCE_REMOVED)) {\n          this.dispatchEvent(ResourcePoolEvents.RESOURCE_REMOVED, link);\n        }\n        link.destroy();\n      }\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      if (this.hasEventListener(ResourcePoolEvents.POOL_CLEAR)) {\n        this.dispatchEvent(ResourcePoolEvents.POOL_CLEAR, this);\n      }\n      var key = void 0;\n      var keys = this[MAP_FIELD].keys();\n      // FIXME update to for...of loop when it comes to browsers\n      while (!(key = keys.next()).done) {\n        if (typeof key.value === 'string') {\n          var link = this[MAP_FIELD].get(key.value);\n          link.destroy();\n        }\n      }\n      this[MAP_FIELD].clear();\n      if (this.hasEventListener(ResourcePoolEvents.POOL_CLEARED)) {\n        this.dispatchEvent(ResourcePoolEvents.POOL_CLEARED, this);\n      }\n    }\n  }, {\n    key: 'isActive',\n    value: function isActive() {\n      return Boolean(this[MAP_FIELD]);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this.clear();\n      // intentionally make it not usable after its destroyed\n      delete this[MAP_FIELD];\n      if (this.hasEventListener(ResourcePoolEvents.POOL_DESTROYED)) {\n        // FIXME why for second parameter?\n        this.dispatchEvent(ResourcePoolEvents.POOL_DESTROYED, this);\n      }\n    }\n  }]);\n\n  return ResourcePool;\n}(__WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default.a);\n\nvar DefaultResourcePool = function (_ResourcePool) {\n  _inherits(DefaultResourcePool, _ResourcePool);\n\n  function DefaultResourcePool() {\n    _classCallCheck(this, DefaultResourcePool);\n\n    return _possibleConstructorReturn(this, (DefaultResourcePool.__proto__ || Object.getPrototypeOf(DefaultResourcePool)).apply(this, arguments));\n  }\n\n  _createClass(DefaultResourcePool, [{\n    key: 'destroy',\n\n    // INFO default ResourcePool should not be destroyable;\n    value: function destroy() {\n      throw new Error('Default ResourcePool cannot be destroyed.');\n    }\n  }]);\n\n  return DefaultResourcePool;\n}(ResourcePool);\n\nvar defaultResourcePool = new DefaultResourcePool();\n\nvar createResourcePool = function createResourcePool() {\n  return new ResourcePool();\n};\n\nsetValidTargets(getDefaultValidTargets());\n\n/* harmony default export */ __webpack_exports__[\"c\"] = (ResourcePool);\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createDeferred; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Deferred = function Deferred() {\n  var _this = this;\n\n  _classCallCheck(this, Deferred);\n\n  this.promise = new Promise(function (resolve, reject) {\n    _this.resolve = resolve;\n    _this.reject = reject;\n  });\n};\n\nvar createDeferred = function createDeferred() {\n  return new Deferred();\n};\n/* harmony default export */ __webpack_exports__[\"b\"] = (Deferred);\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__IConvertible__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__isResource__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__request_RequestTarget__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__resource_ResourcePool__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__resource_TargetResource__ = __webpack_require__(10);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (object, pool) {\n  pool = pool || __WEBPACK_IMPORTED_MODULE_4__resource_ResourcePool__[\"d\" /* defaultResourcePool */];\n\n  if (object instanceof __WEBPACK_IMPORTED_MODULE_5__resource_TargetResource__[\"b\" /* default */]) {\n    return object.toJSON();\n  } else if (_typeof(object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]]) === 'object') {\n    return Object(__WEBPACK_IMPORTED_MODULE_3__request_RequestTarget__[\"f\" /* toJSON */])(object);\n  } else if (object instanceof __WEBPACK_IMPORTED_MODULE_1__IConvertible__[\"a\" /* default */] || typeof object === 'function') {\n    return pool.set(object).toJSON();\n  } else if (Object(__WEBPACK_IMPORTED_MODULE_2__isResource__[\"a\" /* default */])(object)) {\n    return object;\n  }\n\n  return null;\n});\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * Interface for all resource types, these will be treated as resources automatically\r\n * @interface\r\n * @alias DataAccessInterface.IConvertible\r\n */\nvar IConvertible = function IConvertible() {\n  _classCallCheck(this, IConvertible);\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (IConvertible);\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var _typeof2 = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function webpackUniversalModuleDefinition(root, factory) {\n  if (( false ? 'undefined' : _typeof2(exports)) === 'object' && ( false ? 'undefined' : _typeof2(module)) === 'object') module.exports = factory();else if (true) !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));else if ((typeof exports === 'undefined' ? 'undefined' : _typeof2(exports)) === 'object') exports[\"EventDispatcher\"] = factory();else root[\"EventDispatcher\"] = factory();\n})(this, function () {\n  return (/******/function (modules) {\n      // webpackBootstrap\n      /******/ // The module cache\n      /******/var installedModules = {};\n      /******/\n      /******/ // The require function\n      /******/function __webpack_require__(moduleId) {\n        /******/\n        /******/ // Check if module is in cache\n        /******/if (installedModules[moduleId]) {\n          /******/return installedModules[moduleId].exports;\n          /******/\n        }\n        /******/ // Create a new module (and put it into the cache)\n        /******/var module = installedModules[moduleId] = {\n          /******/i: moduleId,\n          /******/l: false,\n          /******/exports: {}\n          /******/ };\n        /******/\n        /******/ // Execute the module function\n        /******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        /******/\n        /******/ // Flag the module as loaded\n        /******/module.l = true;\n        /******/\n        /******/ // Return the exports of the module\n        /******/return module.exports;\n        /******/\n      }\n      /******/\n      /******/\n      /******/ // expose the modules object (__webpack_modules__)\n      /******/__webpack_require__.m = modules;\n      /******/\n      /******/ // expose the module cache\n      /******/__webpack_require__.c = installedModules;\n      /******/\n      /******/ // define getter function for harmony exports\n      /******/__webpack_require__.d = function (exports, name, getter) {\n        /******/if (!__webpack_require__.o(exports, name)) {\n          /******/Object.defineProperty(exports, name, {\n            /******/configurable: false,\n            /******/enumerable: true,\n            /******/get: getter\n            /******/ });\n          /******/\n        }\n        /******/\n      };\n      /******/\n      /******/ // getDefaultExport function for compatibility with non-harmony modules\n      /******/__webpack_require__.n = function (module) {\n        /******/var getter = module && module.__esModule ?\n        /******/function getDefault() {\n          return module['default'];\n        } :\n        /******/function getModuleExports() {\n          return module;\n        };\n        /******/__webpack_require__.d(getter, 'a', getter);\n        /******/return getter;\n        /******/\n      };\n      /******/\n      /******/ // Object.prototype.hasOwnProperty.call\n      /******/__webpack_require__.o = function (object, property) {\n        return Object.prototype.hasOwnProperty.call(object, property);\n      };\n      /******/\n      /******/ // __webpack_public_path__\n      /******/__webpack_require__.p = \"http://localhost:8081/dist/\";\n      /******/\n      /******/ // Load entry module and return exports\n      /******/return __webpack_require__(__webpack_require__.s = 0);\n      /******/\n    }(\n    /************************************************************************/\n    /******/[\n    /* 0 */\n    /***/function (module, exports, __webpack_require__) {\n\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Event = undefined;\n\n      var _EventDispatcher = __webpack_require__(1);\n\n      var _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\n\n      function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : { default: obj };\n      }\n\n      exports.default = _EventDispatcher2.default;\n      exports.Event = _EventDispatcher.Event;\n\n      /***/\n    },\n    /* 1 */\n    /***/function (module, exports, __webpack_require__) {\n\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var _typeof = typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\" ? function (obj) {\n        return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);\n      } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);\n      };\n\n      var _createClass = function () {\n        function defineProperties(target, props) {\n          for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n          }\n        }return function (Constructor, protoProps, staticProps) {\n          if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n        };\n      }();\n\n      function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n          throw new TypeError(\"Cannot call a class as a function\");\n        }\n      }\n\n      var hasOwnProp = function hasOwnProp(target, name) {\n        return Object.prototype.hasOwnProperty.call(target, name);\n      }; /**\r\n          * Created by Oleg Galaburda on 09.02.16.\r\n          * \r\n          */\n\n      var Event = exports.Event = function () {\n        function Event(type) {\n          var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n          _classCallCheck(this, Event);\n\n          this.type = type;\n          this.data = data;\n          this.defaultPrevented = false;\n        }\n\n        _createClass(Event, [{\n          key: 'toJSON',\n          value: function toJSON() {\n            return { type: this.type, data: this.data };\n          }\n        }, {\n          key: 'isDefaultPrevented',\n          value: function isDefaultPrevented() {\n            return this.defaultPrevented;\n          }\n        }, {\n          key: 'preventDefault',\n          value: function preventDefault() {\n            this.defaultPrevented = true;\n          }\n        }]);\n\n        return Event;\n      }();\n\n      var ListenersRunner = function () {\n        function ListenersRunner(listeners, onStopped, onComplete) {\n          var _this = this;\n\n          _classCallCheck(this, ListenersRunner);\n\n          this.index = -1;\n          this.immediatelyStopped = false;\n\n          this.stopImmediatePropagation = function () {\n            _this.immediatelyStopped = true;\n          };\n\n          this.listeners = listeners;\n          this.onStopped = onStopped;\n          this.onComplete = onComplete;\n        }\n\n        _createClass(ListenersRunner, [{\n          key: 'run',\n          value: function run(event, target) {\n            var listener = void 0;\n            var listeners = this.listeners;\n\n            this.augmentEvent(event);\n            // TODO this has to be handled in separate object ListenersRunner that should be\n            // created for each call() call and asked for index validation on each listener remove.\n            for (this.index = 0; this.index < listeners.length; this.index++) {\n              if (this.immediatelyStopped) break;\n              listener = listeners[this.index];\n              listener.call(target, event);\n            }\n            this.clearEvent(event);\n            this.onComplete(this);\n          }\n        }, {\n          key: 'augmentEvent',\n          value: function augmentEvent(eventObject) {\n            var event = eventObject;\n            event.stopPropagation = this.onStopped;\n            event.stopImmediatePropagation = this.stopImmediatePropagation;\n          }\n\n          /* eslint class-methods-use-this: \"off\" */\n\n        }, {\n          key: 'clearEvent',\n          value: function clearEvent(eventObject) {\n            var event = eventObject;\n            delete event.stopPropagation;\n            delete event.stopImmediatePropagation;\n          }\n        }, {\n          key: 'listenerRemoved',\n          value: function listenerRemoved(listeners, index) {\n            if (listeners === this.listeners && index <= this.index) {\n              this.index--;\n            }\n          }\n        }]);\n\n        return ListenersRunner;\n      }();\n\n      var EventListeners = function () {\n        function EventListeners() {\n          var _this2 = this;\n\n          _classCallCheck(this, EventListeners);\n\n          this._listeners = {};\n          this._runners = [];\n\n          this.removeRunner = function (runner) {\n            _this2._runners.splice(_this2._runners.indexOf(runner), 1);\n          };\n        }\n        /**\r\n         * key - event Type\r\n         * value - hash of priorities\r\n         *    key - priority\r\n         *    value - list of handlers\r\n         * @type {Object<string, Object.<string, Array<number, Function>>>}\r\n         * @private\r\n         */\n\n        _createClass(EventListeners, [{\n          key: 'createList',\n          value: function createList(eventType, priorityOpt) {\n            var priority = parseInt(priorityOpt, 10);\n            var target = this.getPrioritiesByKey(eventType);\n            var key = String(priority);\n            var value = void 0;\n            if (hasOwnProp(target, key)) {\n              value = target[key];\n            } else {\n              value = [];\n              target[key] = value;\n            }\n            return value;\n          }\n        }, {\n          key: 'getPrioritiesByKey',\n          value: function getPrioritiesByKey(key) {\n            var value = void 0;\n            if (hasOwnProp(this._listeners, key)) {\n              value = this._listeners[key];\n            } else {\n              value = {};\n              this._listeners[key] = value;\n            }\n            return value;\n          }\n        }, {\n          key: 'add',\n          value: function add(eventType, handler, priority) {\n            var handlers = this.createList(eventType, priority);\n            if (handlers.indexOf(handler) < 0) {\n              handlers.push(handler);\n            }\n          }\n        }, {\n          key: 'has',\n          value: function has(eventType) {\n            var priority = void 0;\n            var result = false;\n            var priorities = this.getPrioritiesByKey(eventType);\n            if (priorities) {\n              for (priority in priorities) {\n                if (hasOwnProp(priorities, priority)) {\n                  result = true;\n                  break;\n                }\n              }\n            }\n            return result;\n          }\n        }, {\n          key: 'remove',\n          value: function remove(eventType, handler) {\n            var _this3 = this;\n\n            var priorities = this.getPrioritiesByKey(eventType);\n            if (priorities) {\n              var list = Object.getOwnPropertyNames(priorities);\n              var length = list.length;\n\n              var _loop = function _loop(index) {\n                var priority = list[index];\n                var handlers = priorities[priority];\n                var handlerIndex = handlers.indexOf(handler);\n                if (handlerIndex >= 0) {\n                  handlers.splice(handlerIndex, 1);\n                  if (!handlers.length) {\n                    delete priorities[priority];\n                  }\n                  _this3._runners.forEach(function (runner) {\n                    runner.listenerRemoved(handlers, handlerIndex);\n                  });\n                }\n              };\n\n              for (var index = 0; index < length; index++) {\n                _loop(index);\n              }\n            }\n          }\n        }, {\n          key: 'removeAll',\n          value: function removeAll(eventType) {\n            delete this._listeners[eventType];\n          }\n        }, {\n          key: 'createRunner',\n          value: function createRunner(handlers, onStopped) {\n            var runner = new ListenersRunner(handlers, onStopped, this.removeRunner);\n            this._runners.push(runner);\n            return runner;\n          }\n        }, {\n          key: 'call',\n          value: function call(event, target) {\n            var priorities = this.getPrioritiesByKey(event.type);\n            var stopped = false;\n            var stopPropagation = function stopPropagation() {\n              stopped = true;\n            };\n            if (priorities) {\n              // getOwnPropertyNames() or keys()?\n              var list = Object.getOwnPropertyNames(priorities).sort(function (a, b) {\n                return a - b;\n              });\n              var length = list.length;\n\n              for (var index = 0; index < length; index++) {\n                if (stopped) break;\n                var _handlers = priorities[list[index]];\n                // in case if all handlers of priority were removed while event\n                // was dispatched and handlers become undefined.\n                if (_handlers) {\n                  var _runner = this.createRunner(_handlers, stopPropagation);\n                  _runner.run(event, target);\n                  if (_runner.immediatelyStopped) break;\n                }\n              }\n            }\n          }\n        }]);\n\n        return EventListeners;\n      }();\n\n      var EventDispatcher = function () {\n        function EventDispatcher() {\n          var eventPreprocessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n          var noInit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n          _classCallCheck(this, EventDispatcher);\n\n          if (!noInit) {\n            this.initialize(eventPreprocessor);\n          }\n        }\n\n        /**\r\n         * @private\r\n         */\n\n        _createClass(EventDispatcher, [{\n          key: 'initialize',\n          value: function initialize() {\n            var eventPreprocessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n            this._eventPreprocessor = eventPreprocessor;\n            this._listeners = new EventListeners();\n          }\n        }, {\n          key: 'addEventListener',\n          value: function addEventListener(eventType, listener) {\n            var priority = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n            this._listeners.add(eventType, listener, -priority || 0);\n          }\n        }, {\n          key: 'hasEventListener',\n          value: function hasEventListener(eventType) {\n            return this._listeners.has(eventType);\n          }\n        }, {\n          key: 'removeEventListener',\n          value: function removeEventListener(eventType, listener) {\n            this._listeners.remove(eventType, listener);\n          }\n        }, {\n          key: 'removeAllEventListeners',\n          value: function removeAllEventListeners(eventType) {\n            this._listeners.removeAll(eventType);\n          }\n        }, {\n          key: 'dispatchEvent',\n          value: function dispatchEvent(event, data) {\n            var eventObject = EventDispatcher.getEvent(event, data);\n            if (this._eventPreprocessor) {\n              eventObject = this._eventPreprocessor.call(this, eventObject);\n            }\n            this._listeners.call(eventObject);\n          }\n        }], [{\n          key: 'isObject',\n          value: function isObject(value) {\n            return (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value !== null;\n          }\n        }, {\n          key: 'getEvent',\n          value: function getEvent(eventOrType, optionalData) {\n            var event = eventOrType;\n            if (!EventDispatcher.isObject(eventOrType)) {\n              event = new EventDispatcher.Event(String(eventOrType), optionalData);\n            }\n            return event;\n          }\n        }, {\n          key: 'create',\n          value: function create(eventPreprocessor) {\n            return new EventDispatcher(eventPreprocessor);\n          }\n\n          /* eslint no-undef: \"off\" */\n\n        }]);\n\n        return EventDispatcher;\n      }();\n\n      EventDispatcher.Event = Event;\n\n      exports.default = EventDispatcher;\n\n      /***/\n    }]\n    /******/)\n  );\n});\n//# sourceMappingURL=event-dispatcher.js.map\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(31)(module)))\n\n/***/ }),\n/* 10 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createTargetResource; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_getId__ = __webpack_require__(18);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\nvar getPoolId = function getPoolId(pool) {\n  return pool ? pool.id : null;\n};\n\n/**\r\n * @exports TargetResource\r\n */\n\nvar TargetResource = function () {\n  function TargetResource(pool, resource, type, id) {\n    var _this = this,\n        _Object$definePropert;\n\n    _classCallCheck(this, TargetResource);\n\n    this.toJSON = function () {\n      return _defineProperty({}, __WEBPACK_IMPORTED_MODULE_0__utils_TARGET_DATA__[\"a\" /* default */], {\n        id: _this.id,\n        type: _this.type,\n        poolId: _this.poolId\n      });\n    };\n\n    Object.defineProperties(this, (_Object$definePropert = {}, _defineProperty(_Object$definePropert, __WEBPACK_IMPORTED_MODULE_1__utils_TARGET_INTERNALS__[\"a\" /* default */], {\n      value: {\n        pool: pool,\n        resource: resource,\n        type: type,\n        id: id,\n        active: true,\n        poolId: getPoolId(pool)\n      }\n    }), _defineProperty(_Object$definePropert, __WEBPACK_IMPORTED_MODULE_0__utils_TARGET_DATA__[\"a\" /* default */], {\n      get: this.toJSON\n    }), _Object$definePropert));\n  }\n\n  _createClass(TargetResource, [{\n    key: 'destroy',\n    value: function destroy() {\n      var internals = this[__WEBPACK_IMPORTED_MODULE_1__utils_TARGET_INTERNALS__[\"a\" /* default */]];\n      var id = internals.id,\n          pool = internals.pool;\n\n\n      if (!internals.active) {\n        return;\n      }\n\n      internals.active = false;\n      pool.remove(id);\n\n      for (var name in internals) {\n        delete internals[name];\n      }\n    }\n  }, {\n    key: 'active',\n    get: function get() {\n      return Boolean(this[__WEBPACK_IMPORTED_MODULE_1__utils_TARGET_INTERNALS__[\"a\" /* default */]].active);\n    }\n  }, {\n    key: 'resource',\n    get: function get() {\n      return this[__WEBPACK_IMPORTED_MODULE_1__utils_TARGET_INTERNALS__[\"a\" /* default */]].resource;\n    }\n  }, {\n    key: 'type',\n    get: function get() {\n      return this[__WEBPACK_IMPORTED_MODULE_1__utils_TARGET_INTERNALS__[\"a\" /* default */]].type || _typeof(this[__WEBPACK_IMPORTED_MODULE_1__utils_TARGET_INTERNALS__[\"a\" /* default */]].resource);\n    }\n  }, {\n    key: 'id',\n    get: function get() {\n      return this[__WEBPACK_IMPORTED_MODULE_1__utils_TARGET_INTERNALS__[\"a\" /* default */]].id;\n    }\n  }, {\n    key: 'poolId',\n    get: function get() {\n      return this[__WEBPACK_IMPORTED_MODULE_1__utils_TARGET_INTERNALS__[\"a\" /* default */]].poolId;\n    }\n  }]);\n\n  return TargetResource;\n}();\n\nvar createTargetResource = function createTargetResource(pool, resource, resourceType, id) {\n  return new TargetResource(pool, resource, resourceType, id || Object(__WEBPACK_IMPORTED_MODULE_2__utils_getId__[\"a\" /* default */])());\n};\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (TargetResource);\n\n/***/ }),\n/* 11 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__isResource__ = __webpack_require__(0);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (object) {\n  if (_typeof(object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]]) === 'object') {\n    return object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]].poolId;\n  } else if (Object(__WEBPACK_IMPORTED_MODULE_2__isResource__[\"a\" /* default */])(object)) {\n    return object[__WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__[\"a\" /* default */]].poolId;\n  }\n  return null;\n});\n\n/***/ }),\n/* 12 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__isResource__ = __webpack_require__(0);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (object) {\n  // if (object instanceof TargetResource || object instanceof RequestTarget) {\n  if (_typeof(object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]]) === 'object') {\n    return object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]].id;\n  } else if (Object(__WEBPACK_IMPORTED_MODULE_2__isResource__[\"a\" /* default */])(object)) {\n    return object[__WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__[\"a\" /* default */]].id;\n  }\n\n  return null;\n});\n\n/***/ }),\n/* 13 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export ProxyCommandNames */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ProxyCommandFields; });\n/* unused harmony export createDescriptors */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__CommandDescriptor__ = __webpack_require__(4);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar ProxyCommandNames = Object.freeze({\n  GET: 'get',\n  SET: 'set',\n  APPLY: 'apply',\n  DELETE_PROPERTY: 'deleteProperty'\n});\n\nvar ProxyCommandFields = Object.freeze({\n  get: Symbol('proxy.commands::get'),\n  set: Symbol('proxy.commands::set'),\n  apply: Symbol('proxy.commands::apply'),\n  deleteProperty: Symbol('proxy.commands::deleteProperty')\n});\n\nvar ProxyCommandsClass = function () {\n  function ProxyCommandsClass() {\n    _classCallCheck(this, ProxyCommandsClass);\n\n    this.createGETDescriptor = Object(__WEBPACK_IMPORTED_MODULE_0__CommandDescriptor__[\"d\" /* descriptorGeneratorFactory */])(ProxyCommandNames.GET, ProxyCommandFields.get);\n    this.createSETDescriptor = Object(__WEBPACK_IMPORTED_MODULE_0__CommandDescriptor__[\"d\" /* descriptorGeneratorFactory */])(ProxyCommandNames.SET, ProxyCommandFields.set);\n    this.createAPPLYDescriptor = Object(__WEBPACK_IMPORTED_MODULE_0__CommandDescriptor__[\"d\" /* descriptorGeneratorFactory */])(ProxyCommandNames.APPLY, ProxyCommandFields.apply);\n\n    Object.freeze(this);\n  }\n\n  _createClass(ProxyCommandsClass, [{\n    key: 'list',\n    get: function get() {\n      return [ProxyCommandNames.GET, ProxyCommandNames.SET, ProxyCommandNames.APPLY, ProxyCommandNames.DELETE_PROPERTY];\n    }\n  }, {\n    key: 'required',\n    get: function get() {\n      return [ProxyCommandNames.GET, ProxyCommandNames.SET, ProxyCommandNames.APPLY];\n    }\n  }]);\n\n  return ProxyCommandsClass;\n}();\n\nvar ProxyCommands = new ProxyCommandsClass();\n\nvar createDescriptors = function createDescriptors(handlers) {\n  var target = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var isTemporary = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var resourceType = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  var cacheable = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n  var list = ProxyCommands.list;\n  var length = list.length;\n\n  for (var index = 0; index < length; index++) {\n    var name = list[index];\n    var handler = handlers[name];\n    var field = ProxyCommandFields[name];\n\n    if (handler instanceof Function) {\n      var descriptor = new __WEBPACK_IMPORTED_MODULE_0__CommandDescriptor__[\"c\" /* default */](name, handler, field);\n      descriptor.isTemporary = isTemporary;\n      descriptor.resourceType = resourceType;\n      descriptor.cacheable = cacheable;\n      descriptor = Object.freeze(descriptor);\n\n      if (target instanceof Array) {\n        target.push(descriptor);\n      } else if (target) {\n        target[field] = descriptor;\n      }\n    }\n  }\n  return target;\n};\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (ProxyCommands);\n\n/***/ }),\n/* 14 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__isResource__ = __webpack_require__(0);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\n\n\n\nvar getResourceType = function getResourceType(object) {\n  if (_typeof(object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]]) === 'object') {\n    return object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]].type;\n  } else if (Object(__WEBPACK_IMPORTED_MODULE_2__isResource__[\"a\" /* default */])(object)) {\n    return object[__WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__[\"a\" /* default */]].type;\n  }\n\n  return null;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (getResourceType);\n\n/***/ }),\n/* 15 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object.freeze({\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n  DESTROYED: 'destroyed'\n}));\n\n/***/ }),\n/* 16 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (type, args, targetId) {\n  var result = {\n    type: type,\n    cmd: args[0], // cmd,\n    value: args[1], // value,\n    target: targetId\n  };\n\n  // FIXME why? mprobably to make it not enumerable?.. fuck, dunno\n  Object.defineProperty(result, 'args', {\n    value: args\n  });\n\n  return result;\n});\n\n/***/ }),\n/* 17 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__getRawResource__ = __webpack_require__(7);\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (object) {\n  var data = Object(__WEBPACK_IMPORTED_MODULE_1__getRawResource__[\"a\" /* default */])(object);\n  return data ? data[__WEBPACK_IMPORTED_MODULE_0__TARGET_DATA__[\"a\" /* default */]] : null;\n});\n\n/***/ }),\n/* 18 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar base = \"DA/\" + Date.now() + \"/\";\nvar index = 0;\n/* harmony default export */ __webpack_exports__[\"a\"] = (function () {\n  return \"\" + base + ++index + \"/\" + Date.now();\n});\n\n/***/ }),\n/* 19 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return RequestTargetCommandNames; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RequestTargetCommandFields; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__CommandDescriptor__ = __webpack_require__(4);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar RequestTargetCommandNames = Object.freeze({\n  DESTROY: '::destroy.resource'\n});\n\nvar RequestTargetCommandFields = Object.freeze({\n  DESTROY: Symbol('::destroy.resource')\n});\n\n/**\r\n * Destroy is unique type that exists for every RequestTarget\r\n * and does not have a method on its instances. This type will\r\n * be send each time RequestTarget.destroy() is applied to\r\n * RequestTarget in stance.\r\n */\n\nvar RequestTargetCommands = function RequestTargetCommands() {\n  _classCallCheck(this, RequestTargetCommands);\n\n  this.createDESTROYDescriptor = function (handler, target) {\n    var descriptor = new __WEBPACK_IMPORTED_MODULE_0__CommandDescriptor__[\"c\" /* default */](RequestTargetCommandNames.DESTROY, handler, RequestTargetCommandFields.DESTROY);\n    descriptor.virtual = true;\n    Object(__WEBPACK_IMPORTED_MODULE_0__CommandDescriptor__[\"a\" /* addDescriptorTo */])(descriptor, target);\n    return Object.freeze(descriptor);\n  };\n\n  Object.freeze(this);\n};\n\n/* harmony default export */ __webpack_exports__[\"c\"] = (new RequestTargetCommands());\n\n/***/ }),\n/* 20 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Reserved words\r\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object.freeze({\n  /**\r\n   * Contains property names that cannot be used for CommandDescriptor's\r\n   */\n  names: Object.freeze({\n    // INFO Exposed Promise method, cannot be overwritten by type\n    then: true,\n    // INFO Exposed Promise method, cannot be overwritten by type\n    catch: true\n  })\n}));\n\n/***/ }),\n/* 21 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return FACTORY_DECORATOR_FIELD; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return FACTORY_HANDLERS_FIELD; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return createRequestFactory; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__RequestTargetDecorator__ = __webpack_require__(35);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__RequestTarget__ = __webpack_require__(3);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar FACTORY_DECORATOR_FIELD = Symbol('request.factory::decorator');\nvar FACTORY_HANDLERS_FIELD = Symbol('request.factory::handlers');\n\nvar RequestFactory = function () {\n  /*\r\n   function DummyCacheImpl() {\r\n   this.get = function(name, pack) {\r\n     };\r\n   this.set = function(name, pack, request) {\r\n     };\r\n   }\r\n   */\n  function RequestFactory(handlers) {\n    var cacheImpl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var noInit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    _classCallCheck(this, RequestFactory);\n\n    if (noInit) {\n      return;\n    }\n\n    this.cache = cacheImpl;\n    this[FACTORY_HANDLERS_FIELD] = handlers;\n    this[FACTORY_DECORATOR_FIELD] = Object(__WEBPACK_IMPORTED_MODULE_0__RequestTargetDecorator__[\"a\" /* createRequestTargetDecorator */])(this, handlers);\n  }\n\n  _createClass(RequestFactory, [{\n    key: 'create',\n    value: function create(promise) {\n      var request = Object(__WEBPACK_IMPORTED_MODULE_1__RequestTarget__[\"a\" /* createRequestTarget */])(promise, this[FACTORY_HANDLERS_FIELD]);\n      if (this[FACTORY_HANDLERS_FIELD].available) {\n        this[FACTORY_DECORATOR_FIELD].apply(request);\n      }\n      return request;\n    }\n  }, {\n    key: 'getCached',\n    value: function getCached(name, pack) {\n      return this.cache && this.cache.get(name, pack);\n    }\n  }, {\n    key: 'createCached',\n    value: function createCached(promise, name, pack) {\n      var request = null;\n      if (this.cache) {\n        request = this.create(promise);\n        this.cache.set(name, pack, request);\n      }\n      return request;\n    }\n  }]);\n\n  return RequestFactory;\n}();\n\nvar createRequestFactory = function createRequestFactory(handlers, cacheImpl) {\n  return new RequestFactory(handlers, cacheImpl);\n};\n\n/* harmony default export */ __webpack_exports__[\"d\"] = (RequestFactory);\n\n/***/ }),\n/* 22 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export ResourceConverterEvents */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createResourceConverter; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_event_dispatcher__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_event_dispatcher__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_getResourcePoolId__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_getResourceId__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_isResource__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_isResourceConvertible__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_getRawResource__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__request_RequestTarget__ = __webpack_require__(3);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\nvar ResourceConverterEvents = Object.freeze({\n  RESOURCE_CREATED: 'resourceCreated',\n  RESOURCE_CONVERTED: 'resourceConverted'\n});\n\n/**\r\n * Resource converter contains bunch of methods to lookup for resources\r\n * and registering them, converting them into RAWResource or into\r\n * RequestTargets, depending on their origin.\r\n * Before sending data, bundled resources should be registered in ResourcePool\r\n * and then converted to RAWResource objects.\r\n * After data received, its RAWResources should be converted to RequestTargets\r\n * for not resolved resources or to resource target values otherwise.\r\n * Resource can be resolved by its `id` and `poolId`, if ResourceConverter\r\n * can find ResourcePool with id from poolId, it will try to get target\r\n * resource value and replace with it RAWResource object.\r\n * If ResourcePool not found, ResourceConverter assumes that resource come from\r\n * other origin/environment and creates RequestTarget object that can be target\r\n * object for commands.\r\n * ResourceConverter while handling data does not look deeply, so its developer\r\n * responsibility to convert deeply nested resource targets.\r\n * @param {RequestFactory} factory\r\n * @param {ResourcePoolRegistry} registry\r\n * @param {ResourcePool} pool\r\n * @param {RequestHandlers} handlers\r\n * @extends EventDispatcher\r\n */\n\nvar ResourceConverter = function (_EventDispatcher) {\n  _inherits(ResourceConverter, _EventDispatcher);\n\n  function ResourceConverter(factory, registry, pool) {\n    var handlers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n    _classCallCheck(this, ResourceConverter);\n\n    var _this = _possibleConstructorReturn(this, (ResourceConverter.__proto__ || Object.getPrototypeOf(ResourceConverter)).call(this));\n\n    _this.factory = factory;\n    _this.pool = pool;\n    _this.registry = registry;\n\n    if (handlers) {\n      handlers.setConverter(_this);\n    }\n    return _this;\n  }\n\n  _createClass(ResourceConverter, [{\n    key: 'resourceToObject',\n    value: function resourceToObject(data) {\n      var result = void 0;\n\n      if (Object(__WEBPACK_IMPORTED_MODULE_4__utils_isResourceConvertible__[\"a\" /* default */])(data)) {\n        result = Object(__WEBPACK_IMPORTED_MODULE_5__utils_getRawResource__[\"a\" /* default */])(data, this.pool);\n      } else if (typeof data.toJSON === 'function') {\n        result = data.toJSON();\n      } else {\n        return data;\n      }\n\n      if (this.hasEventListener(ResourceConverterEvents.RESOURCE_CONVERTED)) {\n        this.dispatchEvent(ResourceConverterEvents.RESOURCE_CONVERTED, {\n          data: data,\n          result: result\n        });\n      }\n\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#objectToResource\r\n     * @param {*} data\r\n     * @returns {*}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'objectToResource',\n    value: function objectToResource(data) {\n      var result = data;\n\n      if (Object(__WEBPACK_IMPORTED_MODULE_3__utils_isResource__[\"a\" /* default */])(data)) {\n        var poolId = Object(__WEBPACK_IMPORTED_MODULE_1__utils_getResourcePoolId__[\"a\" /* default */])(data);\n\n        if (this.registry.isRegistered(poolId)) {\n          // target object is stored in current pool\n          var target = this.registry.get(poolId).get(Object(__WEBPACK_IMPORTED_MODULE_2__utils_getResourceId__[\"a\" /* default */])(data));\n\n          if (target) {\n            result = target.resource;\n          }\n        } else {\n          // target object has another origin, should be wrapped\n          result = this.factory.create(Promise.resolve(data));\n        }\n      }\n\n      if (result !== data && this.hasEventListener(ResourceConverterEvents.RESOURCE_CREATED)) {\n        this.dispatchEvent(ResourceConverterEvents.RESOURCE_CREATED, {\n          data: data,\n          result: result\n        });\n      }\n\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#lookupArray\r\n     * @param list\r\n     * @param linkConvertHandler\r\n     * @returns {Array}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'lookupArray',\n    value: function lookupArray(list, linkConvertHandler) {\n      var result = [];\n      var length = list.length;\n\n      for (var index = 0; index < length; index++) {\n        // FIXME Array.map()\n        result[index] = linkConvertHandler.call(this, list[index]);\n      }\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#lookupObject\r\n     * @param {*} data\r\n     * @param {Function} linkConvertHandler\r\n     * @returns {*}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'lookupObject',\n    value: function lookupObject(data, linkConvertHandler) {\n      var result = {};\n      for (var name in data) {\n        if (Object.prototype.hasOwnProperty.call(data, name)) {\n          result[name] = linkConvertHandler.call(this, data[name]);\n        }\n      }\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#toJSON\r\n     * @param {*} data\r\n     * @returns {*}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON(data) {\n      var result = data;\n\n      if (data !== undefined && data !== null) {\n        if (Object(__WEBPACK_IMPORTED_MODULE_4__utils_isResourceConvertible__[\"a\" /* default */])(data)) {\n          // if data is RequestTarget, TargetResource, IConvertible, Function or RAW resource data\n          result = this.resourceToObject(data);\n        } else if (data instanceof Array) {\n          // if data is Array of values, check its\n          result = this.lookupArray(data, this.resourceToObject);\n        } else if (data.constructor === Object) {\n          // only Object instances can be looked up, other object types must be converted by hand\n          result = this.lookupObject(data, this.resourceToObject);\n        }\n      }\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#parse\r\n     * @param {*} data\r\n     * @returns {*}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'parse',\n    value: function parse(data) {\n      var result = data;\n\n      if (data !== undefined && data !== null) {\n        if (Object(__WEBPACK_IMPORTED_MODULE_3__utils_isResource__[\"a\" /* default */])(data)) {\n          // if data is RAW resource data\n          result = this.objectToResource(data);\n        } else if (data instanceof Array) {\n          // if data is Array of values, check its\n          result = this.lookupArray(data, this.objectToResource);\n        } else if (data.constructor === Object) {\n          result = this.lookupObject(data, this.objectToResource);\n        }\n      }\n\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#lookupForPending\r\n     * @param {*} data\r\n     * @returns {Array}\r\n     */\n\n  }, {\n    key: 'lookupForPending',\n    value: function lookupForPending(data) {\n      var result = [];\n\n      var add = function add(value) {\n        if (Object(__WEBPACK_IMPORTED_MODULE_6__request_RequestTarget__[\"d\" /* isPending */])(value)) {\n          result.push(value);\n        }\n        return value;\n      };\n\n      if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) === 'object' && data !== null) {\n        if (Object(__WEBPACK_IMPORTED_MODULE_6__request_RequestTarget__[\"d\" /* isPending */])(data)) {\n          result.push(data);\n        } else if (data instanceof Array) {\n          this.lookupArray(data, add);\n        } else if (data.constructor === Object) {\n          this.lookupObject(data, add);\n        }\n      }\n      return result;\n    }\n  }]);\n\n  return ResourceConverter;\n}(__WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default.a);\n\n/**\r\n * @param {RequestFactory} factory\r\n * @param {DataAccessInterface.ResourcePoolRegistry} registry\r\n * @param {DataAccessInterface.ResourcePool} pool\r\n * @param {RequestHandlers} handlers\r\n * @returns {ResourceConverter}\r\n */\n\n\nvar createResourceConverter = function createResourceConverter(factory, registry, pool, handlers) {\n  return new ResourceConverter(factory, registry, pool, handlers);\n};\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (ResourceConverter);\n\n/***/ }),\n/* 23 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__isResource__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__IConvertible__ = __webpack_require__(8);\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (data) {\n  return Object(__WEBPACK_IMPORTED_MODULE_0__isResource__[\"a\" /* default */])(data) || typeof data === 'function' || data instanceof __WEBPACK_IMPORTED_MODULE_1__IConvertible__[\"a\" /* default */];\n});\n\n/***/ }),\n/* 24 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export ResourcePoolRegistryEvents */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createResourcePoolRegistry; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_event_dispatcher__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_event_dispatcher__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ResourcePool__ = __webpack_require__(5);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\nvar ResourcePoolRegistryEvents = Object.freeze({\n  RESOURCE_POOL_CREATED: 'resourcePoolCreated',\n  RESOURCE_POOL_REGISTERED: 'resourcePoolRegistered',\n  RESOURCE_POOL_REMOVED: 'resourcePoolRemoved'\n});\n\nvar POOLS_FIELD = Symbol('resource.pool.registry::pools');\n\n/**\r\n * @classdesc Collection of ResourcePool instances. Allows lookup for ResourcePool by its Id.\r\n * When ResourcePool is registered in ResourcePoolRegistry, it subscribes to\r\n * ResourcePool POOL_DESTROYED event and removes pool from registry after its destroyed.\r\n */\n\nvar ResourcePoolRegistry = function (_EventDispatcher) {\n  _inherits(ResourcePoolRegistry, _EventDispatcher);\n\n  function ResourcePoolRegistry() {\n    _classCallCheck(this, ResourcePoolRegistry);\n\n    var _this = _possibleConstructorReturn(this, (ResourcePoolRegistry.__proto__ || Object.getPrototypeOf(ResourcePoolRegistry)).call(this));\n\n    _this.handlePoolDestroyed = function (event) {\n      _this.remove(event.data);\n    };\n\n    _this[POOLS_FIELD] = {};\n\n    // every registry should keep default pool, so you can have access from anywhere\n    _this.register(__WEBPACK_IMPORTED_MODULE_1__ResourcePool__[\"d\" /* defaultResourcePool */]);\n    return _this;\n  }\n\n  _createClass(ResourcePoolRegistry, [{\n    key: 'createPool',\n\n\n    /**\r\n     * Create and register ResourcePool\r\n     * @returns {DataAccessInterface.ResourcePool} New ResourcePool instance\r\n     */\n    value: function createPool() {\n      var pool = Object(__WEBPACK_IMPORTED_MODULE_1__ResourcePool__[\"b\" /* createResourcePool */])();\n      if (this.hasEventListener(ResourcePoolRegistryEvents.RESOURCE_POOL_CREATED)) {\n        this.dispatchEvent(ResourcePoolRegistryEvents.RESOURCE_POOL_CREATED, pool);\n      }\n      this.register(pool);\n      return pool;\n    }\n\n    /**\r\n     * Register ResourcePool instance.\r\n     * @param pool {DataAccessInterface.ResourcePool} ResourcePool instance to be registered\r\n     */\n\n  }, {\n    key: 'register',\n    value: function register(pool) {\n      if (Object.prototype.hasOwnProperty.call(this[POOLS_FIELD], pool.id)) return;\n      this[POOLS_FIELD][pool.id] = pool;\n      pool.addEventListener(__WEBPACK_IMPORTED_MODULE_1__ResourcePool__[\"a\" /* ResourcePoolEvents */].POOL_DESTROYED, this.handlePoolDestroyed);\n      if (this.hasEventListener(ResourcePoolRegistryEvents.RESOURCE_POOL_REGISTERED)) {\n        this.dispatchEvent(ResourcePoolRegistryEvents.RESOURCE_POOL_REGISTERED, pool);\n      }\n    }\n\n    /**\r\n     * Retrieve ResourcePool instance from registry by its Id.\r\n     * @param poolId {String} ResourcePool instance Id\r\n     * @returns {DataAccessInterface.ResourcePool|null}\r\n     */\n\n  }, {\n    key: 'get',\n    value: function get(poolId) {\n      return this[POOLS_FIELD][poolId] || null;\n    }\n\n    /**\r\n     * Check if ResourcePool registered in this registry instance.\r\n     * @param pool {DataAccessInterface.ResourcePool|String} ResourcePool instance or its Id.\r\n     * @returns {Boolean}\r\n     */\n\n  }, {\n    key: 'isRegistered',\n    value: function isRegistered(pool) {\n      return Object.prototype.hasOwnProperty.call(this[POOLS_FIELD], pool instanceof __WEBPACK_IMPORTED_MODULE_1__ResourcePool__[\"c\" /* default */] ? pool.id : String(pool));\n    }\n\n    /**\r\n     * Remove ResourcePool from current registry instance.\r\n     * @param pool {DataAccessInterface.ResourcePool|String} ResourcePool instance or its Id.\r\n     * @returns {Boolean}\r\n     */\n\n  }, {\n    key: 'remove',\n    value: function remove(pool) {\n      var result = false;\n      pool = pool instanceof __WEBPACK_IMPORTED_MODULE_1__ResourcePool__[\"c\" /* default */] ? pool : this.get(pool);\n      if (pool) {\n        pool.removeEventListener(__WEBPACK_IMPORTED_MODULE_1__ResourcePool__[\"a\" /* ResourcePoolEvents */].POOL_DESTROYED, this.handlePoolDestroyed);\n        result = delete this[POOLS_FIELD][pool.id];\n      }\n      if (this.hasEventListener(ResourcePoolRegistryEvents.RESOURCE_POOL_REMOVED)) {\n        this.dispatchEvent(ResourcePoolRegistryEvents.RESOURCE_POOL_REMOVED, pool);\n      }\n      return result;\n    }\n  }]);\n\n  return ResourcePoolRegistry;\n}(__WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default.a);\n\nvar createResourcePoolRegistry = function createResourcePoolRegistry() {\n  return new ResourcePoolRegistry();\n};\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (ResourcePoolRegistry);\n\n/***/ }),\n/* 25 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* WEBPACK VAR INJECTION */(function(module) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__index__ = __webpack_require__(27);\n\n\nmodule.exports = Object.assign(__WEBPACK_IMPORTED_MODULE_0__index__[\"default\"], __WEBPACK_IMPORTED_MODULE_0__index__);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(26)(module)))\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(originalModule) {\n\tif(!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif(!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true,\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__DataAccessInterface__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_Deferred__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__commands_CommandDescriptor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__commands_Reserved__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__commands_RequestTargetCommands__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__commands_ProxyCommands__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__request_RequestTarget__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__resource_ResourcePool__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__resource_ResourcePoolRegistry__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__resource_ResourceConverter__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__utils_IConvertible__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__utils_isResourceConvertible__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__utils_getRawResource__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__utils_getResourceData__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__utils_getResourceId__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__utils_getResourcePoolId__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__utils_getResourceType__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__utils_isResource__ = __webpack_require__(0);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"create\", function() { return __WEBPACK_IMPORTED_MODULE_0__DataAccessInterface__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"dummy\", function() { return __WEBPACK_IMPORTED_MODULE_0__DataAccessInterface__[\"c\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"createDeferred\", function() { return __WEBPACK_IMPORTED_MODULE_1__utils_Deferred__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Deferred\", function() { return __WEBPACK_IMPORTED_MODULE_1__utils_Deferred__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"CommandDescriptor\", function() { return __WEBPACK_IMPORTED_MODULE_2__commands_CommandDescriptor__[\"c\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Reserved\", function() { return __WEBPACK_IMPORTED_MODULE_3__commands_Reserved__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"RequestTargetCommands\", function() { return __WEBPACK_IMPORTED_MODULE_4__commands_RequestTargetCommands__[\"c\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"ProxyCommands\", function() { return __WEBPACK_IMPORTED_MODULE_5__commands_ProxyCommands__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"RequestTarget\", function() { return __WEBPACK_IMPORTED_MODULE_6__request_RequestTarget__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"ResourcePool\", function() { return __WEBPACK_IMPORTED_MODULE_7__resource_ResourcePool__[\"c\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"ResourcePoolRegistry\", function() { return __WEBPACK_IMPORTED_MODULE_8__resource_ResourcePoolRegistry__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"ResourceConverter\", function() { return __WEBPACK_IMPORTED_MODULE_9__resource_ResourceConverter__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"IConvertible\", function() { return __WEBPACK_IMPORTED_MODULE_10__utils_IConvertible__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"isResourceConvertible\", function() { return __WEBPACK_IMPORTED_MODULE_11__utils_isResourceConvertible__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"getRawResource\", function() { return __WEBPACK_IMPORTED_MODULE_12__utils_getRawResource__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"getResourceData\", function() { return __WEBPACK_IMPORTED_MODULE_13__utils_getResourceData__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"getResourceId\", function() { return __WEBPACK_IMPORTED_MODULE_14__utils_getResourceId__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"getResourcePoolId\", function() { return __WEBPACK_IMPORTED_MODULE_15__utils_getResourcePoolId__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"getResourceType\", function() { return __WEBPACK_IMPORTED_MODULE_16__utils_getResourceType__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"isResource\", function() { return __WEBPACK_IMPORTED_MODULE_17__utils_isResource__[\"a\"]; });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (__WEBPACK_IMPORTED_MODULE_0__DataAccessInterface__[\"b\" /* default */]);\n\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return create; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return dummy; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_areProxiesAvailable__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_isResource__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_getResourcePoolId__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_getResourceId__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__request_RequestHandlers__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__request_RequestProxyFactory__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__request_RequestFactory__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__resource_ResourcePool__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__resource_ResourceConverter__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__resource_ResourcePoolRegistry__ = __webpack_require__(24);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * @exports DataAccessInterface\r\n */\n\n\n\n\n\n\n\n\n\n\n\n\nvar DataAccessInterface = function () {\n\n  /**\r\n   * @class DataAccessInterface\r\n   * @classdesc Facade of Deferred Data Access library, it holds all\r\n   * of public API -- objects like ResourcePool and methods to work\r\n   * with resources.\r\n   * @param {CommandDescriptor[]|Object.<string, Function|CommandDescriptor>} descriptors\r\n   * @param {boolean} [proxyEnabled=false]\r\n   * @param {ResourcePoolRegistry} [poolRegistry]\r\n   * @param {ResourcePool} [pool]\r\n   * @param {ICacheImpl} [cacheImpl]\r\n   */\n  function DataAccessInterface(descriptors) {\n    var proxyEnabled = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var poolRegistry = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var pool = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    var cacheImpl = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n\n    _classCallCheck(this, DataAccessInterface);\n\n    this.poolRegistry = poolRegistry;\n    this.pool = pool;\n    this.cache = cacheImpl;\n    this.initialize(descriptors, proxyEnabled);\n  }\n\n  _createClass(DataAccessInterface, [{\n    key: 'initialize',\n    value: function initialize(descriptors, proxyEnabled) {\n      var _this = this;\n\n      if (proxyEnabled && !Object(__WEBPACK_IMPORTED_MODULE_0__utils_areProxiesAvailable__[\"a\" /* default */])()) {\n        throw new Error('Proxies are not available in this environment');\n      }\n\n      this.handlers = Object(__WEBPACK_IMPORTED_MODULE_4__request_RequestHandlers__[\"a\" /* createRequestHandlers */])(proxyEnabled);\n      this.resourceConverter = Object(__WEBPACK_IMPORTED_MODULE_8__resource_ResourceConverter__[\"a\" /* createResourceConverter */])(this.factory, this.poolRegistry, this.pool, this.handlers);\n\n      if (proxyEnabled) {\n        this.factory = Object(__WEBPACK_IMPORTED_MODULE_5__request_RequestProxyFactory__[\"a\" /* createRequestProxyFactory */])(this.handlers, this.cache);\n      } else {\n        this.factory = Object(__WEBPACK_IMPORTED_MODULE_6__request_RequestFactory__[\"c\" /* createRequestFactory */])(this.handlers, this.cache);\n      }\n\n      if (!this.poolRegistry) {\n        this.poolRegistry = Object(__WEBPACK_IMPORTED_MODULE_9__resource_ResourcePoolRegistry__[\"a\" /* createResourcePoolRegistry */])();\n      }\n\n      if (this.pool) {\n        this.poolRegistry.register(this.pool);\n      } else if (this.pool !== undefined) {\n        this.pool = this.poolRegistry.createPool();\n      } else {\n        this.pool = __WEBPACK_IMPORTED_MODULE_7__resource_ResourcePool__[\"d\" /* defaultResourcePool */];\n      }\n\n      var poolDestroyedHandler = function poolDestroyedHandler() {\n        _this.pool.removeEventListener(__WEBPACK_IMPORTED_MODULE_7__resource_ResourcePool__[\"a\" /* ResourcePoolEvents */].POOL_DESTROYED, poolDestroyedHandler);\n        _this.pool = _this.poolRegistry.createPool();\n        _this.pool.addEventListener(__WEBPACK_IMPORTED_MODULE_7__resource_ResourcePool__[\"a\" /* ResourcePoolEvents */].POOL_DESTROYED, poolDestroyedHandler);\n      };\n\n      this.handlers.setHandlers(descriptors);\n      this.pool.addEventListener(__WEBPACK_IMPORTED_MODULE_7__resource_ResourcePool__[\"a\" /* ResourcePoolEvents */].POOL_DESTROYED, poolDestroyedHandler);\n    }\n  }, {\n    key: 'parse',\n    value: function parse(data) {\n      return this.resourceConverter.parse(data);\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON(data) {\n      return this.resourceConverter.toJSON(data);\n    }\n  }, {\n    key: 'isOwnResource',\n    value: function isOwnResource(resource) {\n      /**\r\n       * @type {DataAccessInterface.ResourcePool}\r\n       */\n      var pool = void 0;\n      if (Object(__WEBPACK_IMPORTED_MODULE_1__utils_isResource__[\"a\" /* default */])(resource)) {\n        pool = this.poolRegistry.get(Object(__WEBPACK_IMPORTED_MODULE_2__utils_getResourcePoolId__[\"a\" /* default */])(resource));\n        return pool && pool.has(Object(__WEBPACK_IMPORTED_MODULE_3__utils_getResourceId__[\"a\" /* default */])(resource));\n      }\n      return false;\n    }\n  }, {\n    key: 'proxyEnabled',\n    get: function get() {\n      return this.handlers.proxyEnabled;\n    }\n  }]);\n\n  return DataAccessInterface;\n}();\n\nvar create = function create(handlers, proxyEnabled, poolRegistry, pool, cacheImpl) {\n  return new DataAccessInterface(handlers, proxyEnabled, poolRegistry, pool, cacheImpl);\n};\n\nvar dummy = function dummy(handlers, proxyEnabled, poolRegistry, pool, cacheImpl) {\n  var api = new DataAccessInterface(handlers, proxyEnabled, poolRegistry, pool, cacheImpl);\n  return api.parse(handlers());\n};\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (DataAccessInterface);\n\n/***/ }),\n/* 29 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (function () {\n  return typeof Proxy === 'function';\n});\n\n/***/ }),\n/* 30 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_TargetStatus__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_Deferred__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_createRequestPackage__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_isResource__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_getResourceData__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__RequestTarget__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__commands_RequestTargetCommands__ = __webpack_require__(19);\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n\n\n\n\n/**\r\n * @exports RequestTargetInternals\r\n */\n\nvar RequestTargetInternals = function () {\n\n  /**\r\n   * @class RequestTargetInternals\r\n   * @param {DataAccessInterface.RequestTarget} _requestTarget\r\n   * @param {Promise} _promise\r\n   * @param {RequestHandlers} _requestHandlers\r\n   * @mixin Promise\r\n   */\n  function RequestTargetInternals(requestTarget, promise, requestHandlers) {\n    var _this = this;\n\n    _classCallCheck(this, RequestTargetInternals);\n\n    this.handlePromiseResolve = function (value) {\n      _this.status = __WEBPACK_IMPORTED_MODULE_0__utils_TargetStatus__[\"a\" /* default */].RESOLVED;\n      if (Object(__WEBPACK_IMPORTED_MODULE_4__utils_isResource__[\"a\" /* default */])(value)) {\n        _this.link = Object(__WEBPACK_IMPORTED_MODULE_5__utils_getResourceData__[\"a\" /* default */])(value);\n        /*\r\n         INFO Sending \"this\" as result of resolve() handler, causes infinite\r\n         loop of this.then(), so I've used wrapper object\r\n        */\n        // FIXME Check if Proxy wrapper will work with promise result, probably not\n        value = { target: _this.requestTarget };\n        _this.sendQueue();\n        /*\r\n        In theory, at time of these lines executing, \"temporary\" property should be\r\n        already set via _commandHandler() set from RequestTargetDecorator\r\n         */\n        if (_this.temporary) {\n          _this.destroy();\n        }\n      } else {\n        // else { value must be passed as is }\n        _this.rejectQueue('Target of the call is not a resource and call cannot be sent.');\n      }\n      _this.deferred.resolve(value);\n      delete _this.deferred;\n    };\n\n    this.handlePromiseReject = function (value) {\n      _this.status = __WEBPACK_IMPORTED_MODULE_0__utils_TargetStatus__[\"a\" /* default */].REJECTED;\n      _this.rejectQueue('Target of the call was rejected and call cannot be sent.');\n      _this.deferred.reject(value);\n      delete _this.deferred;\n    };\n\n    this.requestHandlers = requestHandlers;\n    this.requestTarget = requestTarget;\n    this.link = {};\n    // INFO this should be not initialized i.e. keep it undefined, this will be checked later\n    this.temporary = undefined;\n    this.hadChildPromises = false;\n    this.status = __WEBPACK_IMPORTED_MODULE_0__utils_TargetStatus__[\"a\" /* default */].PENDING;\n    this.queue = [];\n    this.children = [];\n    this.deferred = Object(__WEBPACK_IMPORTED_MODULE_1__utils_Deferred__[\"a\" /* createDeferred */])();\n    this.promise = this.deferred.promise;\n    promise.then(this.handlePromiseResolve).catch(this.handlePromiseReject);\n  }\n\n  _createClass(RequestTargetInternals, [{\n    key: 'sendQueue',\n    value: function sendQueue() {\n      while (this.queue && this.queue.length) {\n        var _queue$shift = this.queue.shift(),\n            _queue$shift2 = _slicedToArray(_queue$shift, 4),\n            name = _queue$shift2[0],\n            pack = _queue$shift2[1],\n            deferred = _queue$shift2[2],\n            child = _queue$shift2[3];\n\n        pack.target = this.link.id;\n        this.handleRequest(name, pack, deferred, child);\n      }\n      this.queue = null;\n    }\n  }, {\n    key: 'rejectQueue',\n    value: function rejectQueue(message) {\n      var error = new Error(message || 'This request was rejected before sending.');\n      while (this.queue && this.queue.length) {\n        /**\r\n         * @type {Array.<string, CommandDataPack, DataAccessInterface.Deferred>}\r\n         */\n        // FIXME [string, {type:string, cmd:string, value:*, target:string}, Deferred]\n        var _queue$shift3 = this.queue.shift(),\n            _queue$shift4 = _slicedToArray(_queue$shift3, 3),\n            deferred = _queue$shift4[2];\n\n        deferred.reject(error);\n      }\n      this.queue = null;\n    }\n  }, {\n    key: 'sendRequest',\n    value: function sendRequest(name, pack, deferred, child) {\n      var promise = null;\n\n      if (this.requestHandlers.hasHandler(name)) {\n        promise = this.applyRequest(name, pack, deferred || Object(__WEBPACK_IMPORTED_MODULE_1__utils_Deferred__[\"a\" /* createDeferred */])(), child);\n      } else {\n        throw new Error('Request handler for \"' + name + '\" is not registered.');\n      }\n\n      if (child) {\n        this.registerChild(child);\n      }\n\n      return promise;\n    }\n  }, {\n    key: 'addToQueue',\n    value: function addToQueue(name, pack, deferred, child) {\n      this.queue.push([name, pack, deferred, child]);\n    }\n  }, {\n    key: 'applyRequest',\n    value: function applyRequest(name, pack, deferred, child) {\n      var promise = deferred.promise;\n\n\n      switch (this.status) {\n        case __WEBPACK_IMPORTED_MODULE_0__utils_TargetStatus__[\"a\" /* default */].PENDING:\n          this.addToQueue(name, pack, deferred, child);\n          break;\n        case __WEBPACK_IMPORTED_MODULE_0__utils_TargetStatus__[\"a\" /* default */].REJECTED:\n          promise = Promise.reject(new Error('Target object was rejected and cannot be used for calls.'));\n          break;\n        case __WEBPACK_IMPORTED_MODULE_0__utils_TargetStatus__[\"a\" /* default */].DESTROYED:\n          promise = Promise.reject(new Error('Target object was destroyed and cannot be used for calls.'));\n          break;\n        case __WEBPACK_IMPORTED_MODULE_0__utils_TargetStatus__[\"a\" /* default */].RESOLVED:\n          this.handleRequest(name, pack, deferred, child);\n          break;\n        default:\n          break;\n      }\n\n      return promise;\n    }\n  }, {\n    key: 'handleRequest',\n    value: function handleRequest(name, pack, deferred, child) {\n      this.requestHandlers.handle(this.requestTarget, name, pack, deferred, child);\n    }\n  }, {\n    key: 'registerChild',\n    value: function registerChild(childRequestTarget) {\n      var _this2 = this;\n\n      var handleChildRequest = function handleChildRequest() {\n        if (_this2.children) {\n          var index = _this2.children.indexOf(childRequestTarget);\n          if (index >= 0) {\n            _this2.children.splice(index, 1);\n          }\n        }\n      };\n\n      this.children.push(childRequestTarget);\n      Object(__WEBPACK_IMPORTED_MODULE_6__RequestTarget__[\"c\" /* getRawPromise */])(childRequestTarget).then(handleChildRequest, handleChildRequest);\n    }\n  }, {\n    key: 'isActive',\n    value: function isActive() {\n      return this.status === __WEBPACK_IMPORTED_MODULE_0__utils_TargetStatus__[\"a\" /* default */].PENDING || this.status === __WEBPACK_IMPORTED_MODULE_0__utils_TargetStatus__[\"a\" /* default */].RESOLVED;\n    }\n  }, {\n    key: 'canBeDestroyed',\n    value: function canBeDestroyed() {\n      return this.status === __WEBPACK_IMPORTED_MODULE_0__utils_TargetStatus__[\"a\" /* default */].RESOLVED || this.status === __WEBPACK_IMPORTED_MODULE_0__utils_TargetStatus__[\"a\" /* default */].REJECTED;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      var promise = null;\n      if (this.canBeDestroyed()) {\n        // INFO I should not clear children list, since they are pending and requests already sent.\n        if (this.status === __WEBPACK_IMPORTED_MODULE_0__utils_TargetStatus__[\"a\" /* default */].RESOLVED) {\n          promise = this.sendRequest(__WEBPACK_IMPORTED_MODULE_7__commands_RequestTargetCommands__[\"a\" /* RequestTargetCommandFields */].DESTROY, Object(__WEBPACK_IMPORTED_MODULE_3__utils_createRequestPackage__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_7__commands_RequestTargetCommands__[\"b\" /* RequestTargetCommandNames */].DESTROY, [null, null], this.id));\n        } else {\n          promise = Promise.resolve();\n        }\n        this.status = __WEBPACK_IMPORTED_MODULE_0__utils_TargetStatus__[\"a\" /* default */].DESTROYED;\n      } else {\n        promise = Promise.reject(new Error('Invalid or already destroyed target.'));\n      }\n      return promise;\n    }\n  }, {\n    key: 'then',\n    value: function then(handleResolve, handleReject) {\n      var child = this.promise.then(handleResolve, handleReject);\n      this.hadChildPromises = true;\n      return child;\n    }\n  }, {\n    key: 'catch',\n    value: function _catch(handleReject) {\n      var child = this.promise.catch(handleReject);\n      this.hadChildPromises = true;\n      return child;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return _defineProperty({}, __WEBPACK_IMPORTED_MODULE_2__utils_TARGET_DATA__[\"a\" /* default */], {\n        id: this.link.id,\n        type: this.link.type,\n        poolId: this.link.poolId\n      });\n    }\n  }, {\n    key: 'poolId',\n    get: function get() {\n      return this.link.poolId || null;\n    }\n  }, {\n    key: 'type',\n    get: function get() {\n      return this.link.type || null;\n    }\n  }, {\n    key: 'id',\n    get: function get() {\n      return this.link.id || null;\n    }\n  }]);\n\n  return RequestTargetInternals;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (RequestTargetInternals);\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(module) {\n\tif(!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif(!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export areProxyHandlersAvailable */\n/* unused harmony export RequestHandlersEvents */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createRequestHandlers; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__commands_CommandDescriptor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__commands_ProxyCommands__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_filterRequestHandlers__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_getResourceType__ = __webpack_require__(14);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n/**\r\n * Key for default type for handlers that will be applied to any\r\n * resource that does not have type-specific handlers registered\r\n * @type {string}\r\n */\nvar DEFAULT_KEY = '';\n\nvar areProxyHandlersAvailable = function areProxyHandlersAvailable(handlers, throwError) {\n  var result = true;\n  var list = __WEBPACK_IMPORTED_MODULE_1__commands_ProxyCommands__[\"b\" /* default */].required;\n  var length = list.length;\n\n  for (var index = 0; index < length; index++) {\n    var name = list[index];\n    if (!(__WEBPACK_IMPORTED_MODULE_1__commands_ProxyCommands__[\"a\" /* ProxyCommandFields */][name] in handlers)) {\n      result = false;\n      if (throwError) {\n        throw new Error('For Proxy interface, handler \"' + name + '\" should be set.');\n      }\n    }\n  }\n  return result;\n};\n\nvar RequestHandlersEvents = Object.freeze({\n  HANDLERS_UPDATED: 'handlersUpdated'\n});\n\nvar RequestHandlers = function () {\n\n  /**\r\n   * @class RequestHandlers\r\n   * @param {boolean} proxyEnabled\r\n   * @private\r\n   */\n  function RequestHandlers() {\n    var proxyEnabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    _classCallCheck(this, RequestHandlers);\n\n    // named collection of CommandDescriptor lists that may be applied\n    this.properties = {};\n    this.descriptors = {};\n    this.proxyEnabled = Boolean(proxyEnabled);\n    this.converter = null;\n  }\n\n  _createClass(RequestHandlers, [{\n    key: 'setConverter',\n    value: function setConverter(converter) {\n      this.converter = converter;\n    }\n  }, {\n    key: 'setHandlers',\n    value: function setHandlers(handlers) {\n      var _this = this;\n\n      this.setHandlersByType(DEFAULT_KEY, handlers);\n\n      Object.keys(handlers).forEach(function (name) {\n        var type = handlers[name];\n        if (type && (type.constructor === Object || type instanceof Array)) {\n          _this.setHandlersByType(name, type);\n        }\n      });\n\n      if (this.proxyEnabled) {\n        areProxyHandlersAvailable(this.descriptors[DEFAULT_KEY], true);\n      }\n    }\n  }, {\n    key: 'setHandlersByType',\n    value: function setHandlersByType(type, handlers) {\n      var descrs = {};\n      var props = [];\n      Object(__WEBPACK_IMPORTED_MODULE_2__utils_filterRequestHandlers__[\"a\" /* default */])(handlers, descrs, props);\n      this.descriptors[type] = descrs;\n      this.properties[type] = props;\n    }\n\n    /**\r\n     * @method RequestHandlers#hasHandler\r\n     * @param {String|Symbol} name Property name of CommandDescriptor\r\n     * @param {String} [type] Resource type for type-specific handlers\r\n     * @returns {boolean}\r\n     */\n\n  }, {\n    key: 'hasHandler',\n    value: function hasHandler(name, type) {\n      return this.descriptors[type] && Object.prototype.hasOwnProperty.call(this.descriptors[type], name) || this.descriptors[DEFAULT_KEY] && Object.prototype.hasOwnProperty.call(this.descriptors[DEFAULT_KEY], name);\n    }\n\n    /**\r\n     * IMPORTANT: Returns original list of CommandDescriptors, changing it may cause\r\n     * unexpected result with newly decorated resources.\r\n     * @param {String} [type]\r\n     * @returns {CommandDescriptor[]|null}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'getHandlers',\n    value: function getHandlers(type) {\n      var descrs = this.descriptors[type || DEFAULT_KEY];\n      if (!descrs) {\n        descrs = this.descriptors[DEFAULT_KEY];\n      }\n\n      return descrs || null;\n    }\n\n    /**\r\n     * @method RequestHandlers#getHandler\r\n     * @param name\r\n     * @param {String} [type]\r\n     * @returns {*|null}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'getHandler',\n    value: function getHandler(name, type) {\n      var handler = this.descriptors[type] && this.descriptors[type][name] || this.descriptors[DEFAULT_KEY] && this.descriptors[DEFAULT_KEY][name];\n\n      return handler || null;\n    }\n\n    /**\r\n     * @method RequestHandlers#handle\r\n     * @param {DataAccessInterface.RequestTarget} parentRequest\r\n     * @param {String|Symbol} name\r\n     * @param {CommandDataPack} pack\r\n     * @param {DataAccessInterface.Deferred} deferred\r\n     * @param {DataAccessInterface.RequestTarget} [resultRequest]\r\n     * @private\r\n     */\n\n  }, {\n    key: 'handle',\n    value: function handle(parentRequest, name, pack, deferred, resultRequest) {\n      var _this2 = this;\n\n      var list = this.converter ? this.converter.lookupForPending(pack.value) : null;\n      if (list && list.length) {\n        // FIXME Need to test on all platforms: In other browsers this might not work\n        // because may need list of Promise objects, not RequestTargets\n        Promise.all(list).then(function () {\n          _this2.handleImmediately(parentRequest, name, pack, deferred, resultRequest);\n        });\n      } else {\n        this.handleImmediately(parentRequest, name, pack, deferred, resultRequest);\n      }\n    }\n\n    /**\r\n     *\r\n     * @param {DataAccessInterface.RequestTarget} parentRequest\r\n     * @param {String|Symbol} name\r\n     * @param {CommandDataPack} data\r\n     * @param {DataAccessInterface.Deferred} deferred\r\n     * @param {DataAccessInterface.RequestTarget} [resultRequest]\r\n     * @private\r\n     */\n\n  }, {\n    key: 'handleImmediately',\n    value: function handleImmediately(parentRequest, name, data, deferred, resultRequest) {\n      /**\r\n       * @type {DataAccessInterface.CommandDescriptor|null}\r\n       */\n      var handler = this.getHandler(name, Object(__WEBPACK_IMPORTED_MODULE_3__utils_getResourceType__[\"a\" /* default */])(parentRequest));\n      if (handler instanceof __WEBPACK_IMPORTED_MODULE_0__commands_CommandDescriptor__[\"c\" /* default */]) {\n        // INFO result should be applied to deferred.resolve() or deferred.reject()\n        handler.handler(parentRequest, data, deferred, resultRequest);\n      } else {\n        throw new Error('Command descriptor for \"' + name + '\" was not found.');\n      }\n    }\n  }, {\n    key: 'available',\n    get: function get() {\n      var nonEmptyList = Object.keys(this.properties).find(function (item) {\n        return Boolean(item && item.length);\n      });\n      return Boolean(nonEmptyList);\n    }\n  }]);\n\n  return RequestHandlers;\n}();\n\n/**\r\n * @member RequestHandlers.create\r\n * @param {Boolean} proxyEnabled\r\n * @returns {RequestHandlers}\r\n */\n\n\nvar createRequestHandlers = function createRequestHandlers(proxyEnabled) {\n  return new RequestHandlers(proxyEnabled);\n};\n\n/* unused harmony default export */ var _unused_webpack_default_export = (RequestHandlers);\n\n/***/ }),\n/* 33 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__commands_CommandDescriptor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__commands_Reserved__ = __webpack_require__(20);\n\n\n\n/**\r\n * Checks for CommandDescriptor uniqueness and reserved words usage.\r\n * @param {DataAccessInterface.CommandDescriptor} descriptor\r\n * @param {Object.<string, DataAccessInterface.CommandDescriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.CommandDescriptor>} properties\r\n * @private\r\n */\nvar applyDescriptor = function applyDescriptor(descriptor, descriptors, properties) {\n  var name = descriptor.name;\n\n  if (name in __WEBPACK_IMPORTED_MODULE_1__commands_Reserved__[\"a\" /* default */].names) {\n    throw new Error('Name \"' + name + '\" is reserved and cannot be used in descriptor.');\n  }\n  if (Object.prototype.hasOwnProperty.call(descriptors, name) && descriptors[name] instanceof __WEBPACK_IMPORTED_MODULE_0__commands_CommandDescriptor__[\"c\" /* default */]) {\n    throw new Error('Field names should be unique, \"' + String(name) + '\" field has duplicates.');\n  }\n  descriptors[name] = descriptor;\n  if (!descriptor.virtual) {\n    properties.push(descriptor);\n  }\n};\n\n/**\r\n * @param {Array} handlers\r\n * @param {Object} descriptors\r\n * @private\r\n */\nvar filterArray = function filterArray(handlers, descriptors, properties) {\n  var length = handlers.length;\n\n  for (var index = 0; index < length; index++) {\n    var value = handlers[index];\n    if (value instanceof __WEBPACK_IMPORTED_MODULE_0__commands_CommandDescriptor__[\"c\" /* default */]) {\n      applyDescriptor(value, descriptors, properties);\n    }\n  }\n};\n\n/**\r\n * @param {Object} handlers\r\n * @param {Object.<string, DataAccessInterface.CommandDescriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.CommandDescriptor>} properties\r\n * @private\r\n */\nvar filterHash = function filterHash(handlers, descriptors, properties) {\n  if (!handlers) return;\n  var keys = Object.getOwnPropertyNames(handlers).concat(Object.getOwnPropertySymbols(handlers));\n  var length = keys.length;\n\n  for (var index = 0; index < length; index++) {\n    var name = keys[index];\n    var value = handlers[name];\n    if (typeof value === 'function') {\n      value = Object(__WEBPACK_IMPORTED_MODULE_0__commands_CommandDescriptor__[\"b\" /* createCommandDescriptor */])(name, value);\n    }\n    if (value instanceof __WEBPACK_IMPORTED_MODULE_0__commands_CommandDescriptor__[\"c\" /* default */]) {\n      applyDescriptor(value, descriptors, properties);\n    }\n  }\n};\n\n/**\r\n * @method RequestHandlers.filterHandlers\r\n * @param {Array|Object} handlers\r\n * @param {Object.<string, DataAccessInterface.CommandDescriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.CommandDescriptor>} properties\r\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (handlers, descriptors, properties) {\n  if (handlers instanceof Array) {\n    filterArray(handlers, descriptors, properties);\n  } else {\n    filterHash(handlers, descriptors, properties);\n  }\n});\n\n/***/ }),\n/* 34 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export createProxyHandlers */\n/* unused harmony export applyProxyWithDefaultHandlers */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createRequestProxyFactory; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__RequestFactory__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__commands_ProxyCommands__ = __webpack_require__(13);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\nvar FACTORY_FIELD = Symbol('request.proxy.factory::factory');\n\nvar EXCLUSIONS = {\n  /*\r\n   INFO arguments and caller were included because they are required function properties\r\n   */\n  arguments: true,\n  caller: true,\n  prototype: true\n};\n\nvar wrapWithProxy = function wrapWithProxy(target, handlers) {\n  // INFO Target must be a function so I could use Proxy.call() interceptor.\n  function requestTargetProxy() {}\n\n  requestTargetProxy.target = target;\n  return new Proxy(requestTargetProxy, handlers);\n};\n\nvar proxyGet = function proxyGet(wrapper, name) {\n  var target = wrapper.target;\n\n  if (name in target || name in EXCLUSIONS || (typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'symbol') {\n    return target[name];\n  }\n  // INFO Proxy should be already applied, so no need in additional wrapping\n  return target[__WEBPACK_IMPORTED_MODULE_1__commands_ProxyCommands__[\"a\" /* ProxyCommandFields */].get](name);\n};\n\n// INFO Proxy should be already applied, so no need in additional wrapping\nvar proxyApply = function proxyApply(wrapper, thisValue, args) {\n  return wrapper.target[__WEBPACK_IMPORTED_MODULE_1__commands_ProxyCommands__[\"a\" /* ProxyCommandFields */].apply](null, args);\n};\n\nvar proxySet = function proxySet(wrapper, name, value) {\n  var target = wrapper.target;\n\n\n  if (name in target || name in EXCLUSIONS || (typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'symbol') {\n    target[name] = value;\n    return value;\n  }\n\n  return target[__WEBPACK_IMPORTED_MODULE_1__commands_ProxyCommands__[\"a\" /* ProxyCommandFields */].set](name, value);\n};\n\nvar proxyHas = function proxyHas(wrapper, name) {\n  return Object.prototype.hasOwnProperty.call(wrapper.target, name);\n};\n\nvar proxyDeleteProperty = function proxyDeleteProperty(wrapper, name) {\n  var target = wrapper.target;\n\n\n  if (__WEBPACK_IMPORTED_MODULE_1__commands_ProxyCommands__[\"a\" /* ProxyCommandFields */].deleteProperty in target) {\n    target[__WEBPACK_IMPORTED_MODULE_1__commands_ProxyCommands__[\"a\" /* ProxyCommandFields */].deleteProperty](name);\n    return true;\n  }\n\n  return false;\n};\n\nvar proxyOwnKeys = function proxyOwnKeys() {\n  return Object.getOwnPropertyNames(EXCLUSIONS);\n};\n\nvar proxyEnumerate = function proxyEnumerate() {\n  return Object.getOwnPropertyNames(EXCLUSIONS)[Symbol.iterator]();\n};\n\nvar proxyGetOwnPropertyDescriptor = function proxyGetOwnPropertyDescriptor(wrapper, name) {\n  if (Object.prototype.hasOwnProperty.call(EXCLUSIONS, name)) {\n    return Object.getOwnPropertyDescriptor(wrapper, name);\n  }\n  return Object.getOwnPropertyDescriptor(wrapper.target, name);\n};\n\n/**\r\n * Builds proper handlers hash for Proxy\r\n * @returns {Function}\r\n */\nvar createProxyHandlers = function createProxyHandlers() {\n  var handlers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return Object.assign({\n    get: proxyGet,\n    apply: proxyApply,\n    set: proxySet,\n    has: proxyHas,\n    deleteProperty: proxyDeleteProperty,\n    ownKeys: proxyOwnKeys,\n    enumerate: proxyEnumerate,\n    getOwnPropertyDescriptor: proxyGetOwnPropertyDescriptor\n  }, handlers);\n};\n\nvar PROXY_HANDLERS = createProxyHandlers();\n\nvar RequestProxyFactory = function (_RequestFactory) {\n  _inherits(RequestProxyFactory, _RequestFactory);\n\n  function RequestProxyFactory(handlers, cacheImpl) {\n    _classCallCheck(this, RequestProxyFactory);\n\n    var _this = _possibleConstructorReturn(this, (RequestProxyFactory.__proto__ || Object.getPrototypeOf(RequestProxyFactory)).call(this, null, null, true));\n\n    _this[__WEBPACK_IMPORTED_MODULE_0__RequestFactory__[\"b\" /* FACTORY_HANDLERS_FIELD */]] = handlers;\n    _this[FACTORY_FIELD] = Object(__WEBPACK_IMPORTED_MODULE_0__RequestFactory__[\"c\" /* createRequestFactory */])(handlers, cacheImpl);\n    _this[FACTORY_FIELD][__WEBPACK_IMPORTED_MODULE_0__RequestFactory__[\"a\" /* FACTORY_DECORATOR_FIELD */]].setFactory(_this);\n    return _this;\n  }\n\n  _createClass(RequestProxyFactory, [{\n    key: 'create',\n    value: function create(promise) {\n      var instance = this[FACTORY_FIELD].create(promise);\n\n      if (this[__WEBPACK_IMPORTED_MODULE_0__RequestFactory__[\"b\" /* FACTORY_HANDLERS_FIELD */]].available) {\n        return wrapWithProxy(instance, PROXY_HANDLERS);\n      }\n\n      return instance;\n    }\n  }, {\n    key: 'getCached',\n    value: function getCached(name, pack) {\n      return this[FACTORY_FIELD].getCached(name, pack);\n    }\n  }, {\n    key: 'createCached',\n    value: function createCached(promise, name, pack) {\n      var instance = this[FACTORY_FIELD].createCached(promise, name, pack);\n\n      if (this[__WEBPACK_IMPORTED_MODULE_0__RequestFactory__[\"b\" /* FACTORY_HANDLERS_FIELD */]].available) {\n        return wrapWithProxy(instance, PROXY_HANDLERS);\n      }\n\n      return instance;\n    }\n  }]);\n\n  return RequestProxyFactory;\n}(__WEBPACK_IMPORTED_MODULE_0__RequestFactory__[\"d\" /* default */]);\n\nvar applyProxyWithDefaultHandlers = function applyProxyWithDefaultHandlers(target) {\n  return wrapWithProxy(target, PROXY_HANDLERS);\n};\n\nvar createRequestProxyFactory = function createRequestProxyFactory(handlers, cacheImpl) {\n  return new RequestProxyFactory(handlers, cacheImpl);\n};\n\n/***/ }),\n/* 35 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createRequestTargetDecorator; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__commands_CommandHandlerFactory__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_getResourceType__ = __webpack_require__(14);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar RequestTargetDecorator = function () {\n\n  /**\r\n   * @param {RequestFactory} factory\r\n   * @param {RequestHandlers} handlers\r\n   * @private\r\n   */\n  function RequestTargetDecorator(factory, handlers) {\n    _classCallCheck(this, RequestTargetDecorator);\n\n    this.handlers = handlers;\n    this.members = new __WEBPACK_IMPORTED_MODULE_0__commands_CommandHandlerFactory__[\"a\" /* default */](factory);\n  }\n\n  _createClass(RequestTargetDecorator, [{\n    key: 'apply',\n    value: function apply(request) {\n      var result = void 0;\n\n      if (!this.handlers.available) {\n        return request;\n      }\n      /* FIXME revert change when ES6 will be supported widely\r\n       for (var descriptor of this.handlers) {\r\n       request[descriptor.name] = this.getMember(descriptor.name, descriptor.type);\r\n       }\r\n       */\n\n      var iterator = this.handlers.getHandlers(Object(__WEBPACK_IMPORTED_MODULE_1__utils_getResourceType__[\"a\" /* default */])(request));\n      while (!(result = iterator.next()).done) {\n        var descriptor = result.value;\n        request[descriptor.name] = this.members.get(descriptor);\n      }\n\n      return request;\n    }\n  }, {\n    key: 'setFactory',\n    value: function setFactory(factory) {\n      if (factory) {\n        this.members.setFactory(factory);\n      }\n    }\n  }]);\n\n  return RequestTargetDecorator;\n}();\n\nvar createRequestTargetDecorator = function createRequestTargetDecorator(factory, handlers) {\n  return new RequestTargetDecorator(factory, handlers);\n};\n\n/* unused harmony default export */ var _unused_webpack_default_export = (RequestTargetDecorator);\n\n/***/ }),\n/* 36 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_Deferred__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_createRequestPackage__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__request_RequestTarget__ = __webpack_require__(3);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\nvar createCommandHandlerFor = function createCommandHandlerFor(factoryWrapper, propertyName, commandType, isTemporary, cacheable) {\n  var factory = factoryWrapper.factory,\n      checkState = factoryWrapper.checkState,\n      getChildRequest = factoryWrapper.getChildRequest;\n\n\n  function commandHandler(command, value) {\n    var result = void 0;\n    var promise = void 0;\n    if (this[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]]) {\n      for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        args[_key - 2] = arguments[_key];\n      }\n\n      var pack = Object(__WEBPACK_IMPORTED_MODULE_2__utils_createRequestPackage__[\"a\" /* default */])(commandType, [command, value].concat(args), this[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]].id);\n      // FIXME Explicitly pass scope\n      var request = getChildRequest(propertyName, pack, cacheable);\n      result = request.child;\n      if (request.deferred) {\n        promise = this[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]].sendRequest(propertyName, pack, request.deferred, result);\n        if (promise) {\n          if (isTemporary) {\n            // FIXME isTemporary must be called before `result` was resolved\n            // FIXME remove default `isTemporary`, if not defined just skip\n            checkState(promise, isTemporary, this, result, pack);\n          }\n        } else {\n          result = null;\n          promise = Promise.reject(new Error('Initial request failed and didn\\'t result in promise.'));\n        }\n      }\n    } else {\n      promise = Promise.reject(new Error('Target object is not a resource, so cannot be used for calls.'));\n    }\n    return result || factory.create(promise);\n  }\n\n  return commandHandler;\n};\n\nvar CommandHandlerFactory = function () {\n  function CommandHandlerFactory() {\n    var _this = this;\n\n    var factory = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n    _classCallCheck(this, CommandHandlerFactory);\n\n    this.members = new Map();\n    this.factory = null;\n\n    this.getChildRequest = function (propertyName, pack, cacheable) {\n      var child = void 0;\n      var deferred = void 0;\n\n      if (cacheable) {\n        child = _this.factory.getCached(propertyName, pack);\n      }\n\n      if (!child) {\n        deferred = Object(__WEBPACK_IMPORTED_MODULE_1__utils_Deferred__[\"a\" /* createDeferred */])();\n        if (cacheable) {\n          child = _this.factory.createCached(deferred.promise, propertyName, pack);\n        } else {\n          child = _this.factory.create(deferred.promise, propertyName, pack);\n        }\n      }\n      return { child: child, deferred: deferred };\n    };\n\n    this.checkState = function (promise, isTemporaryFn, parentRequest, childRequest, pack) {\n      if (promise) {\n        promise.then(function (data) {\n          var isTemporary = Boolean(isTemporaryFn(parentRequest, childRequest, pack, data));\n          Object(__WEBPACK_IMPORTED_MODULE_3__request_RequestTarget__[\"e\" /* setTemporary */])(childRequest, isTemporary);\n        });\n      }\n    };\n\n    this.setFactory(factory);\n  }\n\n  /**\r\n   * @param {CommandDescriptor} descriptor\r\n   * @returns {Function}\r\n   * @private\r\n   */\n\n\n  _createClass(CommandHandlerFactory, [{\n    key: 'get',\n    value: function get(descriptor) {\n      var propertyName = descriptor.name;\n      if (!this.members.has(propertyName)) {\n        this.members.set(propertyName, this.create(descriptor.name, descriptor.type, descriptor.isTemporary, descriptor.cacheable));\n      }\n      return this.members.get(propertyName);\n    }\n  }, {\n    key: 'create',\n    value: function create(propertyName, commandType, isTemporary, cacheable) {\n      return createCommandHandlerFor(this, propertyName, commandType, isTemporary, cacheable);\n    }\n  }, {\n    key: 'setFactory',\n    value: function setFactory(factory) {\n      this.factory = factory;\n    }\n  }]);\n\n  return CommandHandlerFactory;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (CommandHandlerFactory);\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// deferred-data-access.direct.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"http://localhost:8081/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 25);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2aff3bcdf72b61997646","import TARGET_INTERNALS from './TARGET_INTERNALS';\r\nimport TARGET_DATA from './TARGET_DATA';\r\nimport RequestTarget from '../request/RequestTarget';\r\nimport TargetResource from '../resource/TargetResource';\r\n\r\nexport default (object) => object instanceof TargetResource ||\r\n  object instanceof RequestTarget ||\r\n  (object && (\r\n    // this case for RequestTargets and TargetResources which contain\r\n    // data in TARGET_INTERNALS Symbol\r\n    // We check for their types above but in cases when Proxies are enabled\r\n    // their type will be Function and verification will come to this case\r\n    typeof object[TARGET_INTERNALS] === 'object' ||\r\n    // this case for RAW resources passed via JSON conversion,\r\n    // look like {'resource::data': {id: '1111', poolId: '22222'}}\r\n    typeof object[TARGET_DATA] === 'object'\r\n  ));\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/isResource.js","export default Symbol('request.target:internals');\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/TARGET_INTERNALS.js","export default 'resource::data';\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/TARGET_DATA.js","import TARGET_INTERNALS from '../utils/TARGET_INTERNALS';\r\nimport TargetStatus from '../utils/TargetStatus';\r\nimport isResource from '../utils/isResource';\r\nimport RequestTargetInternals from './RequestTargetInternals';\r\n\r\nconst PROMISE_FIELD = Symbol('request.target::promise');\r\n\r\nconst getRequestPromise = (request) => (request[TARGET_INTERNALS] || request[PROMISE_FIELD]);\r\n\r\n/**\r\n * The object that will be available on other side\r\n * @class DataAccessInterface.RequestTarget\r\n * @param _promise {Promise}\r\n * @param _requestHandlers {RequestHandlers}\r\n */\r\nclass RequestTarget {\r\n  constructor(promise, requestHandlers) {\r\n    this[TARGET_INTERNALS] = new RequestTargetInternals(this, promise, requestHandlers);\r\n\r\n    const handlePromise = (data) => {\r\n      if (!isResource(data)) {\r\n        this[PROMISE_FIELD] = promise;\r\n        delete this[TARGET_INTERNALS];\r\n      }\r\n    };\r\n\r\n    promise.then(handlePromise, handlePromise);\r\n  }\r\n\r\n  then(...args) {\r\n    const target = getRequestPromise(this);\r\n    return target.then(...args);\r\n  }\r\n\r\n  catch(...args) {\r\n    const target = getRequestPromise(this);\r\n    return target.catch(...args);\r\n  }\r\n}\r\n\r\nexport const isActive = (target) => (\r\n  target\r\n  && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].isActive() : false\r\n);\r\n\r\nexport const canBeDestroyed = (target) => (\r\n  target\r\n  && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].canBeDestroyed() : false\r\n);\r\n\r\nexport const destroy = (target) => (\r\n  target &&\r\n  target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].destroy() : null\r\n);\r\n\r\nexport const toJSON = (target) => (\r\n  target\r\n  && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].toJSON() : null\r\n);\r\n\r\nexport const isTemporary = (target) => (\r\n  target\r\n  && target[TARGET_INTERNALS] && target[TARGET_INTERNALS].temporary\r\n);\r\n\r\nexport const setTemporary = (target, value) => {\r\n  if (target && target[TARGET_INTERNALS]) {\r\n    target[TARGET_INTERNALS].temporary = Boolean(value);\r\n  }\r\n};\r\n\r\nexport const getStatus = (target) => (\r\n  target &&\r\n  target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].status : null\r\n);\r\n\r\nexport const isPending = (value) => (\r\n  getStatus(value) === TargetStatus.PENDING\r\n);\r\n\r\nexport const getQueueLength = (target) => {\r\n  const list = target && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].queue : null;\r\n  return list ? list.length : 0;\r\n};\r\n\r\nexport const getQueueCommands = (target) => {\r\n  const result = [];\r\n  const queue = target && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].queue : null;\r\n  if (queue) {\r\n    const { length } = queue;\r\n    // FIXME use Array.map()\r\n    for (let index = 0; index < length; index++) {\r\n      result.push(queue[index][0].type);\r\n    }\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const hadChildPromises = (target) => Boolean(target\r\n  && target[TARGET_INTERNALS]\r\n  && target[TARGET_INTERNALS].hadChildPromises);\r\n\r\nexport const getRawPromise = (target) => (\r\n  target\r\n  && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].promise : null\r\n);\r\n\r\nconst getRequestChildren = (target) => (\r\n  target\r\n  && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].children : null\r\n);\r\n\r\nexport const getChildren = (target) => {\r\n  const list = getRequestChildren(target);\r\n  return list ? [...list] : [];\r\n};\r\n\r\nexport const getLastChild = (target) => {\r\n  const list = getRequestChildren(target);\r\n  return list && list.length ? list[list.length - 1] : null;\r\n};\r\n\r\nexport const getChildrenCount = (target) => {\r\n  const list = getRequestChildren(target);\r\n  return list ? list.length : 0;\r\n};\r\n\r\n// FIXME Is it used? Why its similar to getChildrenCount()?\r\nexport const sendRequest = (target) => {\r\n  const list = getRequestChildren(target);\r\n  return list ? list.length : 0;\r\n};\r\n\r\nexport const createRequestTarget = (promise, requestHandlers) => (\r\n  new RequestTarget(promise, requestHandlers)\r\n);\r\n\r\nexport default RequestTarget;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/RequestTarget.js","class CommandDescriptor {\r\n  constructor(type, handler, name) {\r\n    this.name = name !== undefined ? name : type;\r\n    this.type = type;\r\n    this.handler = handler;\r\n    this.isTemporary = null;\r\n    this.cacheable = false;\r\n    this.virtual = false;\r\n    this.resourceType = null;\r\n  }\r\n\r\n  toString() {\r\n    return `[CommandDescriptor(name=\"${String(this.name)}\", ` +\r\n      `type=\"${String(this.type)}\", virtual=\"${this.virtual}\")]`;\r\n  }\r\n}\r\n\r\nexport const createCommandDescriptor = (command, handler, name) => {\r\n  const descriptor = new CommandDescriptor(command, handler, name);\r\n  // We can use Object.freeze(), it keeps class/constructor information\r\n  return Object.freeze(descriptor);\r\n};\r\n\r\nexport const addDescriptorTo = (descriptor, target) => {\r\n  if (target instanceof Array) {\r\n    target.push(descriptor);\r\n  } else if (target) {\r\n    target[descriptor.name] = descriptor;\r\n  }\r\n};\r\n\r\nexport const descriptorGeneratorFactory = (command, name) =>\r\n  (handler, target, isTemporary, resourceType, cacheable) => {\r\n    const descriptor = new CommandDescriptor(command, handler, name);\r\n    descriptor.isTemporary = isTemporary;\r\n    descriptor.resourceType = resourceType;\r\n    descriptor.cacheable = cacheable;\r\n    addDescriptorTo(descriptor, target);\r\n    return Object.freeze(descriptor);\r\n  };\r\n\r\nexport default CommandDescriptor;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/commands/CommandDescriptor.js","import EventDispatcher from 'event-dispatcher';\r\nimport getId from '../utils/getId';\r\nimport isResource from '../utils/isResource';\r\nimport { createTargetResource } from './TargetResource';\r\n\r\nexport const ResourcePoolEvents = Object.freeze({\r\n  RESOURCE_ADDED: 'resourceAdded',\r\n  RESOURCE_REMOVED: 'resourceRemoved',\r\n  POOL_CLEAR: 'poolClear',\r\n  POOL_CLEARED: 'poolCleared',\r\n  POOL_DESTROYED: 'poolDestroyed',\r\n});\r\n\r\nconst MAP_FIELD = Symbol('ResourcePool::map');\r\n\r\nlet validTargets = {};\r\n\r\nexport const isValidTarget = (target) => (\r\n  !isResource(target)\r\n  && Boolean(validTargets[typeof target])\r\n);\r\n\r\nexport const setValidTargets = (list) => {\r\n  validTargets = {};\r\n  const { length } = list;\r\n  for (let index = 0; index < length; index++) {\r\n    validTargets[list[index]] = true;\r\n  }\r\n};\r\n\r\nexport const getDefaultValidTargets = () => ['object', 'function'];\r\n\r\nclass ResourcePool extends EventDispatcher {\r\n  [MAP_FIELD] = new Map();\r\n\r\n  constructor() {\r\n    super();\r\n    Object.defineProperties(this, {\r\n      id: {\r\n        value: getId(),\r\n      },\r\n    });\r\n  }\r\n\r\n  set(target, type) {\r\n    let link = null;\r\n    if (isValidTarget(target)) {\r\n      if (this[MAP_FIELD].has(target)) {\r\n        link = this[MAP_FIELD].get(target);\r\n      } else {\r\n        link = createTargetResource(this, target, type || typeof target);\r\n        this[MAP_FIELD].set(link.id, link);\r\n        this[MAP_FIELD].set(target, link);\r\n        if (this.hasEventListener(ResourcePoolEvents.RESOURCE_ADDED)) {\r\n          this.dispatchEvent(ResourcePoolEvents.RESOURCE_ADDED, link);\r\n        }\r\n      }\r\n    }\r\n    return link;\r\n  }\r\n\r\n  has(target) {\r\n    return this[MAP_FIELD].has(target);\r\n  }\r\n\r\n  get(target) {\r\n    return this[MAP_FIELD].get(target);\r\n  }\r\n\r\n  remove(target) {\r\n    const link = this[MAP_FIELD].get(target);\r\n    if (link) {\r\n      this[MAP_FIELD].delete(link.id);\r\n      this[MAP_FIELD].delete(link.resource);\r\n      if (this.hasEventListener(ResourcePoolEvents.RESOURCE_REMOVED)) {\r\n        this.dispatchEvent(ResourcePoolEvents.RESOURCE_REMOVED, link);\r\n      }\r\n      link.destroy();\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    if (this.hasEventListener(ResourcePoolEvents.POOL_CLEAR)) {\r\n      this.dispatchEvent(ResourcePoolEvents.POOL_CLEAR, this);\r\n    }\r\n    let key;\r\n    const keys = this[MAP_FIELD].keys();\r\n    // FIXME update to for...of loop when it comes to browsers\r\n    while (!(key = keys.next()).done) {\r\n      if (typeof key.value === 'string') {\r\n        const link = this[MAP_FIELD].get(key.value);\r\n        link.destroy();\r\n      }\r\n    }\r\n    this[MAP_FIELD].clear();\r\n    if (this.hasEventListener(ResourcePoolEvents.POOL_CLEARED)) {\r\n      this.dispatchEvent(ResourcePoolEvents.POOL_CLEARED, this);\r\n    }\r\n  }\r\n\r\n  isActive() {\r\n    return Boolean(this[MAP_FIELD]);\r\n  }\r\n\r\n  destroy() {\r\n    this.clear();\r\n    // intentionally make it not usable after its destroyed\r\n    delete this[MAP_FIELD];\r\n    if (this.hasEventListener(ResourcePoolEvents.POOL_DESTROYED)) {\r\n      // FIXME why for second parameter?\r\n      this.dispatchEvent(ResourcePoolEvents.POOL_DESTROYED, this);\r\n    }\r\n  }\r\n}\r\n\r\nclass DefaultResourcePool extends ResourcePool {\r\n  // INFO default ResourcePool should not be destroyable;\r\n  destroy() {\r\n    throw new Error('Default ResourcePool cannot be destroyed.');\r\n  }\r\n}\r\n\r\nexport const defaultResourcePool = new DefaultResourcePool();\r\n\r\nexport const createResourcePool = () => new ResourcePool();\r\n\r\nsetValidTargets(getDefaultValidTargets());\r\n\r\nexport default ResourcePool;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/ResourcePool.js","class Deferred {\r\n  constructor() {\r\n    this.promise = new Promise((resolve, reject) => {\r\n      this.resolve = resolve;\r\n      this.reject = reject;\r\n    });\r\n  }\r\n}\r\n\r\nexport const createDeferred = () => new Deferred();\r\nexport default Deferred;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/Deferred.js","import TARGET_INTERNALS from './TARGET_INTERNALS';\r\nimport IConvertible from './IConvertible';\r\nimport isResource from './isResource';\r\nimport { toJSON } from '../request/RequestTarget';\r\nimport { defaultResourcePool } from '../resource/ResourcePool';\r\nimport TargetResource from '../resource/TargetResource';\r\n\r\nexport default (object, pool) => {\r\n  pool = pool || defaultResourcePool;\r\n\r\n  if (object instanceof TargetResource) {\r\n    return object.toJSON();\r\n  } else if (typeof object[TARGET_INTERNALS] === 'object') {\r\n    return toJSON(object);\r\n  } else if (object instanceof IConvertible || typeof object === 'function') {\r\n    return pool.set(object).toJSON();\r\n  } else if (isResource(object)) {\r\n    return object;\r\n  }\r\n\r\n  return null;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getRawResource.js","/**\r\n * Interface for all resource types, these will be treated as resources automatically\r\n * @interface\r\n * @alias DataAccessInterface.IConvertible\r\n */\r\nclass IConvertible {\r\n\r\n}\r\n\r\nexport default IConvertible;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/IConvertible.js","(function webpackUniversalModuleDefinition(root, factory) {\r\n\tif(typeof exports === 'object' && typeof module === 'object')\r\n\t\tmodule.exports = factory();\r\n\telse if(typeof define === 'function' && define.amd)\r\n\t\tdefine([], factory);\r\n\telse if(typeof exports === 'object')\r\n\t\texports[\"EventDispatcher\"] = factory();\r\n\telse\r\n\t\troot[\"EventDispatcher\"] = factory();\r\n})(this, function() {\r\nreturn /******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {};\r\n/******/\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n/******/\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId]) {\r\n/******/ \t\t\treturn installedModules[moduleId].exports;\r\n/******/ \t\t}\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\ti: moduleId,\r\n/******/ \t\t\tl: false,\r\n/******/ \t\t\texports: {}\r\n/******/ \t\t};\r\n/******/\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n/******/\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.l = true;\r\n/******/\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n/******/\r\n/******/\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__webpack_require__.m = modules;\r\n/******/\r\n/******/ \t// expose the module cache\r\n/******/ \t__webpack_require__.c = installedModules;\r\n/******/\r\n/******/ \t// define getter function for harmony exports\r\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\r\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\r\n/******/ \t\t\tObject.defineProperty(exports, name, {\r\n/******/ \t\t\t\tconfigurable: false,\r\n/******/ \t\t\t\tenumerable: true,\r\n/******/ \t\t\t\tget: getter\r\n/******/ \t\t\t});\r\n/******/ \t\t}\r\n/******/ \t};\r\n/******/\r\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\r\n/******/ \t__webpack_require__.n = function(module) {\r\n/******/ \t\tvar getter = module && module.__esModule ?\r\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\r\n/******/ \t\t\tfunction getModuleExports() { return module; };\r\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\r\n/******/ \t\treturn getter;\r\n/******/ \t};\r\n/******/\r\n/******/ \t// Object.prototype.hasOwnProperty.call\r\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\r\n/******/\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__webpack_require__.p = \"http://localhost:8081/dist/\";\r\n/******/\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ([\r\n/* 0 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.Event = undefined;\r\n\r\nvar _EventDispatcher = __webpack_require__(1);\r\n\r\nvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\nexports.default = _EventDispatcher2.default;\r\nexports.Event = _EventDispatcher.Event;\r\n\r\n/***/ }),\r\n/* 1 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\n\r\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar hasOwnProp = function hasOwnProp(target, name) {\r\n  return Object.prototype.hasOwnProperty.call(target, name);\r\n}; /**\r\n    * Created by Oleg Galaburda on 09.02.16.\r\n    * \r\n    */\r\n\r\nvar Event = exports.Event = function () {\r\n  function Event(type) {\r\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\r\n\r\n    _classCallCheck(this, Event);\r\n\r\n    this.type = type;\r\n    this.data = data;\r\n    this.defaultPrevented = false;\r\n  }\r\n\r\n  _createClass(Event, [{\r\n    key: 'toJSON',\r\n    value: function toJSON() {\r\n      return { type: this.type, data: this.data };\r\n    }\r\n  }, {\r\n    key: 'isDefaultPrevented',\r\n    value: function isDefaultPrevented() {\r\n      return this.defaultPrevented;\r\n    }\r\n  }, {\r\n    key: 'preventDefault',\r\n    value: function preventDefault() {\r\n      this.defaultPrevented = true;\r\n    }\r\n  }]);\r\n\r\n  return Event;\r\n}();\r\n\r\nvar ListenersRunner = function () {\r\n  function ListenersRunner(listeners, onStopped, onComplete) {\r\n    var _this = this;\r\n\r\n    _classCallCheck(this, ListenersRunner);\r\n\r\n    this.index = -1;\r\n    this.immediatelyStopped = false;\r\n\r\n    this.stopImmediatePropagation = function () {\r\n      _this.immediatelyStopped = true;\r\n    };\r\n\r\n    this.listeners = listeners;\r\n    this.onStopped = onStopped;\r\n    this.onComplete = onComplete;\r\n  }\r\n\r\n  _createClass(ListenersRunner, [{\r\n    key: 'run',\r\n    value: function run(event, target) {\r\n      var listener = void 0;\r\n      var listeners = this.listeners;\r\n\r\n      this.augmentEvent(event);\r\n      // TODO this has to be handled in separate object ListenersRunner that should be\r\n      // created for each call() call and asked for index validation on each listener remove.\r\n      for (this.index = 0; this.index < listeners.length; this.index++) {\r\n        if (this.immediatelyStopped) break;\r\n        listener = listeners[this.index];\r\n        listener.call(target, event);\r\n      }\r\n      this.clearEvent(event);\r\n      this.onComplete(this);\r\n    }\r\n  }, {\r\n    key: 'augmentEvent',\r\n    value: function augmentEvent(eventObject) {\r\n      var event = eventObject;\r\n      event.stopPropagation = this.onStopped;\r\n      event.stopImmediatePropagation = this.stopImmediatePropagation;\r\n    }\r\n\r\n    /* eslint class-methods-use-this: \"off\" */\r\n\r\n  }, {\r\n    key: 'clearEvent',\r\n    value: function clearEvent(eventObject) {\r\n      var event = eventObject;\r\n      delete event.stopPropagation;\r\n      delete event.stopImmediatePropagation;\r\n    }\r\n  }, {\r\n    key: 'listenerRemoved',\r\n    value: function listenerRemoved(listeners, index) {\r\n      if (listeners === this.listeners && index <= this.index) {\r\n        this.index--;\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return ListenersRunner;\r\n}();\r\n\r\nvar EventListeners = function () {\r\n  function EventListeners() {\r\n    var _this2 = this;\r\n\r\n    _classCallCheck(this, EventListeners);\r\n\r\n    this._listeners = {};\r\n    this._runners = [];\r\n\r\n    this.removeRunner = function (runner) {\r\n      _this2._runners.splice(_this2._runners.indexOf(runner), 1);\r\n    };\r\n  }\r\n  /**\r\n   * key - event Type\r\n   * value - hash of priorities\r\n   *    key - priority\r\n   *    value - list of handlers\r\n   * @type {Object<string, Object.<string, Array<number, Function>>>}\r\n   * @private\r\n   */\r\n\r\n\r\n  _createClass(EventListeners, [{\r\n    key: 'createList',\r\n    value: function createList(eventType, priorityOpt) {\r\n      var priority = parseInt(priorityOpt, 10);\r\n      var target = this.getPrioritiesByKey(eventType);\r\n      var key = String(priority);\r\n      var value = void 0;\r\n      if (hasOwnProp(target, key)) {\r\n        value = target[key];\r\n      } else {\r\n        value = [];\r\n        target[key] = value;\r\n      }\r\n      return value;\r\n    }\r\n  }, {\r\n    key: 'getPrioritiesByKey',\r\n    value: function getPrioritiesByKey(key) {\r\n      var value = void 0;\r\n      if (hasOwnProp(this._listeners, key)) {\r\n        value = this._listeners[key];\r\n      } else {\r\n        value = {};\r\n        this._listeners[key] = value;\r\n      }\r\n      return value;\r\n    }\r\n  }, {\r\n    key: 'add',\r\n    value: function add(eventType, handler, priority) {\r\n      var handlers = this.createList(eventType, priority);\r\n      if (handlers.indexOf(handler) < 0) {\r\n        handlers.push(handler);\r\n      }\r\n    }\r\n  }, {\r\n    key: 'has',\r\n    value: function has(eventType) {\r\n      var priority = void 0;\r\n      var result = false;\r\n      var priorities = this.getPrioritiesByKey(eventType);\r\n      if (priorities) {\r\n        for (priority in priorities) {\r\n          if (hasOwnProp(priorities, priority)) {\r\n            result = true;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n  }, {\r\n    key: 'remove',\r\n    value: function remove(eventType, handler) {\r\n      var _this3 = this;\r\n\r\n      var priorities = this.getPrioritiesByKey(eventType);\r\n      if (priorities) {\r\n        var list = Object.getOwnPropertyNames(priorities);\r\n        var length = list.length;\r\n\r\n        var _loop = function _loop(index) {\r\n          var priority = list[index];\r\n          var handlers = priorities[priority];\r\n          var handlerIndex = handlers.indexOf(handler);\r\n          if (handlerIndex >= 0) {\r\n            handlers.splice(handlerIndex, 1);\r\n            if (!handlers.length) {\r\n              delete priorities[priority];\r\n            }\r\n            _this3._runners.forEach(function (runner) {\r\n              runner.listenerRemoved(handlers, handlerIndex);\r\n            });\r\n          }\r\n        };\r\n\r\n        for (var index = 0; index < length; index++) {\r\n          _loop(index);\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: 'removeAll',\r\n    value: function removeAll(eventType) {\r\n      delete this._listeners[eventType];\r\n    }\r\n  }, {\r\n    key: 'createRunner',\r\n    value: function createRunner(handlers, onStopped) {\r\n      var runner = new ListenersRunner(handlers, onStopped, this.removeRunner);\r\n      this._runners.push(runner);\r\n      return runner;\r\n    }\r\n  }, {\r\n    key: 'call',\r\n    value: function call(event, target) {\r\n      var priorities = this.getPrioritiesByKey(event.type);\r\n      var stopped = false;\r\n      var stopPropagation = function stopPropagation() {\r\n        stopped = true;\r\n      };\r\n      if (priorities) {\r\n        // getOwnPropertyNames() or keys()?\r\n        var list = Object.getOwnPropertyNames(priorities).sort(function (a, b) {\r\n          return a - b;\r\n        });\r\n        var length = list.length;\r\n\r\n        for (var index = 0; index < length; index++) {\r\n          if (stopped) break;\r\n          var _handlers = priorities[list[index]];\r\n          // in case if all handlers of priority were removed while event\r\n          // was dispatched and handlers become undefined.\r\n          if (_handlers) {\r\n            var _runner = this.createRunner(_handlers, stopPropagation);\r\n            _runner.run(event, target);\r\n            if (_runner.immediatelyStopped) break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return EventListeners;\r\n}();\r\n\r\nvar EventDispatcher = function () {\r\n  function EventDispatcher() {\r\n    var eventPreprocessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\r\n    var noInit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\r\n\r\n    _classCallCheck(this, EventDispatcher);\r\n\r\n    if (!noInit) {\r\n      this.initialize(eventPreprocessor);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n\r\n\r\n  _createClass(EventDispatcher, [{\r\n    key: 'initialize',\r\n    value: function initialize() {\r\n      var eventPreprocessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\r\n\r\n      this._eventPreprocessor = eventPreprocessor;\r\n      this._listeners = new EventListeners();\r\n    }\r\n  }, {\r\n    key: 'addEventListener',\r\n    value: function addEventListener(eventType, listener) {\r\n      var priority = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\r\n\r\n      this._listeners.add(eventType, listener, -priority || 0);\r\n    }\r\n  }, {\r\n    key: 'hasEventListener',\r\n    value: function hasEventListener(eventType) {\r\n      return this._listeners.has(eventType);\r\n    }\r\n  }, {\r\n    key: 'removeEventListener',\r\n    value: function removeEventListener(eventType, listener) {\r\n      this._listeners.remove(eventType, listener);\r\n    }\r\n  }, {\r\n    key: 'removeAllEventListeners',\r\n    value: function removeAllEventListeners(eventType) {\r\n      this._listeners.removeAll(eventType);\r\n    }\r\n  }, {\r\n    key: 'dispatchEvent',\r\n    value: function dispatchEvent(event, data) {\r\n      var eventObject = EventDispatcher.getEvent(event, data);\r\n      if (this._eventPreprocessor) {\r\n        eventObject = this._eventPreprocessor.call(this, eventObject);\r\n      }\r\n      this._listeners.call(eventObject);\r\n    }\r\n  }], [{\r\n    key: 'isObject',\r\n    value: function isObject(value) {\r\n      return (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value !== null;\r\n    }\r\n  }, {\r\n    key: 'getEvent',\r\n    value: function getEvent(eventOrType, optionalData) {\r\n      var event = eventOrType;\r\n      if (!EventDispatcher.isObject(eventOrType)) {\r\n        event = new EventDispatcher.Event(String(eventOrType), optionalData);\r\n      }\r\n      return event;\r\n    }\r\n  }, {\r\n    key: 'create',\r\n    value: function create(eventPreprocessor) {\r\n      return new EventDispatcher(eventPreprocessor);\r\n    }\r\n\r\n    /* eslint no-undef: \"off\" */\r\n\r\n  }]);\r\n\r\n  return EventDispatcher;\r\n}();\r\n\r\nEventDispatcher.Event = Event;\r\n\r\nexports.default = EventDispatcher;\r\n\r\n/***/ })\r\n/******/ ]);\r\n});\r\n//# sourceMappingURL=event-dispatcher.js.map\n\n\n// WEBPACK FOOTER //\n// ./node_modules/event-dispatcher/dist/event-dispatcher.js","import TARGET_DATA from '../utils/TARGET_DATA';\r\nimport TARGET_INTERNALS from '../utils/TARGET_INTERNALS';\r\nimport getId from '../utils/getId';\r\n\r\nconst getPoolId = (pool) => (pool ? pool.id : null);\r\n\r\n/**\r\n * @exports TargetResource\r\n */\r\nclass TargetResource {\r\n  constructor(pool, resource, type, id) {\r\n    Object.defineProperties(this, {\r\n      [TARGET_INTERNALS]: {\r\n        value: {\r\n          pool,\r\n          resource,\r\n          type,\r\n          id,\r\n          active: true,\r\n          poolId: getPoolId(pool),\r\n        },\r\n      },\r\n      [TARGET_DATA]: {\r\n        get: this.toJSON,\r\n      },\r\n    });\r\n  }\r\n\r\n\r\n  get active() {\r\n    return Boolean(this[TARGET_INTERNALS].active);\r\n  }\r\n\r\n  get resource() {\r\n    return this[TARGET_INTERNALS].resource;\r\n  }\r\n\r\n  get type() {\r\n    return this[TARGET_INTERNALS].type || typeof this[TARGET_INTERNALS].resource;\r\n  }\r\n\r\n  get id() {\r\n    return this[TARGET_INTERNALS].id;\r\n  }\r\n\r\n  get poolId() {\r\n    return this[TARGET_INTERNALS].poolId;\r\n  }\r\n\r\n  toJSON = () => ({\r\n    [TARGET_DATA]: {\r\n      id: this.id,\r\n      type: this.type,\r\n      poolId: this.poolId,\r\n    },\r\n  });\r\n\r\n  destroy() {\r\n    const internals = this[TARGET_INTERNALS];\r\n    const { id, pool } = internals;\r\n\r\n    if (!internals.active) {\r\n      return;\r\n    }\r\n\r\n    internals.active = false;\r\n    pool.remove(id);\r\n\r\n    for (const name in internals) {\r\n      delete internals[name];\r\n    }\r\n  }\r\n}\r\n\r\nexport const createTargetResource = (pool, resource, resourceType, id) => (\r\n  new TargetResource(pool, resource, resourceType, id || getId())\r\n);\r\n\r\nexport default TargetResource;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/TargetResource.js","import TARGET_INTERNALS from './TARGET_INTERNALS';\r\nimport TARGET_DATA from './TARGET_DATA';\r\nimport isResource from './isResource';\r\n\r\nexport default (object) => {\r\n  if (typeof object[TARGET_INTERNALS] === 'object') {\r\n    return object[TARGET_INTERNALS].poolId;\r\n  } else if (isResource(object)) {\r\n    return object[TARGET_DATA].poolId;\r\n  }\r\n  return null;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getResourcePoolId.js","import TARGET_INTERNALS from './TARGET_INTERNALS';\r\nimport TARGET_DATA from './TARGET_DATA';\r\nimport isResource from './isResource';\r\n\r\nexport default (object) => {\r\n  // if (object instanceof TargetResource || object instanceof RequestTarget) {\r\n  if (typeof object[TARGET_INTERNALS] === 'object') {\r\n    return object[TARGET_INTERNALS].id;\r\n  } else if (isResource(object)) {\r\n    return object[TARGET_DATA].id;\r\n  }\r\n\r\n  return null;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getResourceId.js","import CommandDescriptor, { descriptorGeneratorFactory } from './CommandDescriptor';\r\n\r\nexport const ProxyCommandNames = Object.freeze({\r\n  GET: 'get',\r\n  SET: 'set',\r\n  APPLY: 'apply',\r\n  DELETE_PROPERTY: 'deleteProperty',\r\n});\r\n\r\nexport const ProxyCommandFields = Object.freeze({\r\n  get: Symbol('proxy.commands::get'),\r\n  set: Symbol('proxy.commands::set'),\r\n  apply: Symbol('proxy.commands::apply'),\r\n  deleteProperty: Symbol('proxy.commands::deleteProperty'),\r\n});\r\n\r\nclass ProxyCommandsClass {\r\n  createGETDescriptor = descriptorGeneratorFactory(\r\n    ProxyCommandNames.GET,\r\n    ProxyCommandFields.get,\r\n  );\r\n  createSETDescriptor = descriptorGeneratorFactory(\r\n    ProxyCommandNames.SET,\r\n    ProxyCommandFields.set,\r\n  );\r\n  createAPPLYDescriptor = descriptorGeneratorFactory(\r\n    ProxyCommandNames.APPLY,\r\n    ProxyCommandFields.apply,\r\n  );\r\n\r\n  constructor() {\r\n    Object.freeze(this);\r\n  }\r\n\r\n  get list() {\r\n    return [\r\n      ProxyCommandNames.GET,\r\n      ProxyCommandNames.SET,\r\n      ProxyCommandNames.APPLY,\r\n      ProxyCommandNames.DELETE_PROPERTY,\r\n    ];\r\n  }\r\n\r\n  get required() {\r\n    return [\r\n      ProxyCommandNames.GET,\r\n      ProxyCommandNames.SET,\r\n      ProxyCommandNames.APPLY,\r\n    ];\r\n  }\r\n}\r\n\r\nconst ProxyCommands = new ProxyCommandsClass();\r\n\r\nexport const createDescriptors = (\r\n  handlers,\r\n  target = {},\r\n  isTemporary = false,\r\n  resourceType = null,\r\n  cacheable = false,\r\n) => {\r\n  const { list } = ProxyCommands;\r\n  const { length } = list;\r\n  for (let index = 0; index < length; index++) {\r\n    const name = list[index];\r\n    const handler = handlers[name];\r\n    const field = ProxyCommandFields[name];\r\n\r\n    if (handler instanceof Function) {\r\n      let descriptor = new CommandDescriptor(name, handler, field);\r\n      descriptor.isTemporary = isTemporary;\r\n      descriptor.resourceType = resourceType;\r\n      descriptor.cacheable = cacheable;\r\n      descriptor = Object.freeze(descriptor);\r\n\r\n      if (target instanceof Array) {\r\n        target.push(descriptor);\r\n      } else if (target) {\r\n        target[field] = descriptor;\r\n      }\r\n    }\r\n  }\r\n  return target;\r\n};\r\n\r\nexport default ProxyCommands;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/commands/ProxyCommands.js","import TARGET_INTERNALS from './TARGET_INTERNALS';\r\nimport TARGET_DATA from './TARGET_DATA';\r\nimport isResource from './isResource';\r\n\r\nconst getResourceType = (object) => {\r\n  if (typeof object[TARGET_INTERNALS] === 'object') {\r\n    return object[TARGET_INTERNALS].type;\r\n  } else if (isResource(object)) {\r\n    return object[TARGET_DATA].type;\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport default getResourceType;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getResourceType.js","export default Object.freeze({\r\n  PENDING: 'pending',\r\n  RESOLVED: 'resolved',\r\n  REJECTED: 'rejected',\r\n  DESTROYED: 'destroyed',\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/TargetStatus.js","export default (type, args, targetId) => {\r\n  const result = {\r\n    type,\r\n    cmd: args[0], // cmd,\r\n    value: args[1], // value,\r\n    target: targetId,\r\n  };\r\n\r\n  // FIXME why? mprobably to make it not enumerable?.. fuck, dunno\r\n  Object.defineProperty(result, 'args', {\r\n    value: args,\r\n  });\r\n\r\n  return result;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/createRequestPackage.js","import TARGET_DATA from './TARGET_DATA';\r\nimport getRawResource from './getRawResource';\r\n\r\nexport default (object) => {\r\n  const data = getRawResource(object);\r\n  return data ? data[TARGET_DATA] : null;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getResourceData.js","const base = `DA/${Date.now()}/`;\r\nlet index = 0;\r\nexport default () => `${base}${++index}/${Date.now()}`;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getId.js","import CommandDescriptor, { addDescriptorTo } from './CommandDescriptor';\r\n\r\nexport const RequestTargetCommandNames = Object.freeze({\r\n  DESTROY: '::destroy.resource',\r\n});\r\n\r\nexport const RequestTargetCommandFields = Object.freeze({\r\n  DESTROY: Symbol('::destroy.resource'),\r\n});\r\n\r\n/**\r\n * Destroy is unique type that exists for every RequestTarget\r\n * and does not have a method on its instances. This type will\r\n * be send each time RequestTarget.destroy() is applied to\r\n * RequestTarget in stance.\r\n */\r\nclass RequestTargetCommands {\r\n  constructor() {\r\n    Object.freeze(this);\r\n  }\r\n\r\n  createDESTROYDescriptor = (handler, target) => {\r\n    const descriptor = new CommandDescriptor(\r\n      RequestTargetCommandNames.DESTROY,\r\n      handler,\r\n      RequestTargetCommandFields.DESTROY,\r\n    );\r\n    descriptor.virtual = true;\r\n    addDescriptorTo(descriptor, target);\r\n    return Object.freeze(descriptor);\r\n  };\r\n\r\n}\r\n\r\nexport default new RequestTargetCommands();\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/commands/RequestTargetCommands.js","/**\r\n * Reserved words\r\n */\r\nexport default Object.freeze({\r\n  /**\r\n   * Contains property names that cannot be used for CommandDescriptor's\r\n   */\r\n  names: Object.freeze({\r\n    // INFO Exposed Promise method, cannot be overwritten by type\r\n    then: true,\r\n    // INFO Exposed Promise method, cannot be overwritten by type\r\n    catch: true,\r\n  }),\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/commands/Reserved.js","import { createRequestTargetDecorator } from './RequestTargetDecorator';\r\nimport { createRequestTarget } from './RequestTarget';\r\n\r\nexport const FACTORY_DECORATOR_FIELD = Symbol('request.factory::decorator');\r\nexport const FACTORY_HANDLERS_FIELD = Symbol('request.factory::handlers');\r\n\r\nclass RequestFactory {\r\n  /*\r\n   function DummyCacheImpl() {\r\n   this.get = function(name, pack) {\r\n\r\n   };\r\n   this.set = function(name, pack, request) {\r\n\r\n   };\r\n   }\r\n   */\r\n  constructor(handlers, cacheImpl = null, noInit = false) {\r\n    if (noInit) {\r\n      return;\r\n    }\r\n\r\n    this.cache = cacheImpl;\r\n    this[FACTORY_HANDLERS_FIELD] = handlers;\r\n    this[FACTORY_DECORATOR_FIELD] = createRequestTargetDecorator(this, handlers);\r\n  }\r\n\r\n  create(promise) {\r\n    const request = createRequestTarget(promise, this[FACTORY_HANDLERS_FIELD]);\r\n    if (this[FACTORY_HANDLERS_FIELD].available) {\r\n      this[FACTORY_DECORATOR_FIELD].apply(request);\r\n    }\r\n    return request;\r\n  }\r\n\r\n  getCached(name, pack) {\r\n    return this.cache && this.cache.get(name, pack);\r\n  }\r\n\r\n  createCached(promise, name, pack) {\r\n    let request = null;\r\n    if (this.cache) {\r\n      request = this.create(promise);\r\n      this.cache.set(name, pack, request);\r\n    }\r\n    return request;\r\n  }\r\n\r\n}\r\n\r\nexport const createRequestFactory = (handlers, cacheImpl) => (\r\n  new RequestFactory(handlers, cacheImpl)\r\n);\r\n\r\nexport default RequestFactory;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/RequestFactory.js","import EventDispatcher from 'event-dispatcher';\r\nimport getResourcePoolId from '../utils/getResourcePoolId';\r\nimport getResourceId from '../utils/getResourceId';\r\nimport isResource from '../utils/isResource';\r\nimport isResourceConvertible from '../utils/isResourceConvertible';\r\nimport getRawResource from '../utils/getRawResource';\r\nimport { isPending, toJSON } from '../request/RequestTarget';\r\n\r\nexport const ResourceConverterEvents = Object.freeze({\r\n  RESOURCE_CREATED: 'resourceCreated',\r\n  RESOURCE_CONVERTED: 'resourceConverted',\r\n});\r\n\r\n/**\r\n * Resource converter contains bunch of methods to lookup for resources\r\n * and registering them, converting them into RAWResource or into\r\n * RequestTargets, depending on their origin.\r\n * Before sending data, bundled resources should be registered in ResourcePool\r\n * and then converted to RAWResource objects.\r\n * After data received, its RAWResources should be converted to RequestTargets\r\n * for not resolved resources or to resource target values otherwise.\r\n * Resource can be resolved by its `id` and `poolId`, if ResourceConverter\r\n * can find ResourcePool with id from poolId, it will try to get target\r\n * resource value and replace with it RAWResource object.\r\n * If ResourcePool not found, ResourceConverter assumes that resource come from\r\n * other origin/environment and creates RequestTarget object that can be target\r\n * object for commands.\r\n * ResourceConverter while handling data does not look deeply, so its developer\r\n * responsibility to convert deeply nested resource targets.\r\n * @param {RequestFactory} factory\r\n * @param {ResourcePoolRegistry} registry\r\n * @param {ResourcePool} pool\r\n * @param {RequestHandlers} handlers\r\n * @extends EventDispatcher\r\n */\r\nclass ResourceConverter extends EventDispatcher {\r\n  constructor(factory, registry, pool, handlers = null) {\r\n    super();\r\n    this.factory = factory;\r\n    this.pool = pool;\r\n    this.registry = registry;\r\n\r\n    if (handlers) {\r\n      handlers.setConverter(this);\r\n    }\r\n  }\r\n\r\n  resourceToObject(data) {\r\n    let result;\r\n\r\n    if (isResourceConvertible(data)) {\r\n      result = getRawResource(data, this.pool);\r\n    } else if (typeof data.toJSON === 'function') {\r\n      result = data.toJSON();\r\n    } else {\r\n      return data;\r\n    }\r\n\r\n    if (this.hasEventListener(ResourceConverterEvents.RESOURCE_CONVERTED)) {\r\n      this.dispatchEvent(ResourceConverterEvents.RESOURCE_CONVERTED, {\r\n        data,\r\n        result,\r\n      });\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#objectToResource\r\n   * @param {*} data\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  objectToResource(data) {\r\n    let result = data;\r\n\r\n    if (isResource(data)) {\r\n      const poolId = getResourcePoolId(data);\r\n\r\n      if (this.registry.isRegistered(poolId)) { // target object is stored in current pool\r\n        const target = this.registry.get(poolId).get(getResourceId(data));\r\n\r\n        if (target) {\r\n          result = target.resource;\r\n        }\r\n\r\n      } else { // target object has another origin, should be wrapped\r\n        result = this.factory.create(Promise.resolve(data));\r\n      }\r\n    }\r\n\r\n    if (result !== data && this.hasEventListener(ResourceConverterEvents.RESOURCE_CREATED)) {\r\n      this.dispatchEvent(ResourceConverterEvents.RESOURCE_CREATED, {\r\n        data,\r\n        result,\r\n      });\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#lookupArray\r\n   * @param list\r\n   * @param linkConvertHandler\r\n   * @returns {Array}\r\n   * @private\r\n   */\r\n  lookupArray(list, linkConvertHandler) {\r\n    const result = [];\r\n    const { length } = list;\r\n    for (let index = 0; index < length; index++) {\r\n      // FIXME Array.map()\r\n      result[index] = linkConvertHandler.call(this, list[index]);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#lookupObject\r\n   * @param {*} data\r\n   * @param {Function} linkConvertHandler\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  lookupObject(data, linkConvertHandler) {\r\n    const result = {};\r\n    for (const name in data) {\r\n      if (Object.prototype.hasOwnProperty.call(data, name)) {\r\n        result[name] = linkConvertHandler.call(this, data[name]);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#toJSON\r\n   * @param {*} data\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  toJSON(data) {\r\n    let result = data;\r\n\r\n    if (data !== undefined && data !== null) {\r\n      if (isResourceConvertible(data)) {\r\n        // if data is RequestTarget, TargetResource, IConvertible, Function or RAW resource data\r\n        result = this.resourceToObject(data);\r\n      } else if (data instanceof Array) {\r\n        // if data is Array of values, check its\r\n        result = this.lookupArray(data, this.resourceToObject);\r\n      } else if (data.constructor === Object) {\r\n        // only Object instances can be looked up, other object types must be converted by hand\r\n        result = this.lookupObject(data, this.resourceToObject);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#parse\r\n   * @param {*} data\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  parse(data) {\r\n    let result = data;\r\n\r\n    if (data !== undefined && data !== null) {\r\n      if (isResource(data)) { // if data is RAW resource data\r\n        result = this.objectToResource(data);\r\n      } else if (data instanceof Array) { // if data is Array of values, check its\r\n        result = this.lookupArray(data, this.objectToResource);\r\n      } else if (data.constructor === Object) {\r\n        result = this.lookupObject(data, this.objectToResource);\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#lookupForPending\r\n   * @param {*} data\r\n   * @returns {Array}\r\n   */\r\n  lookupForPending(data) {\r\n    const result = [];\r\n\r\n    const add = (value) => {\r\n      if (isPending(value)) {\r\n        result.push(value);\r\n      }\r\n      return value;\r\n    };\r\n\r\n    if (typeof data === 'object' && data !== null) {\r\n      if (isPending(data)) {\r\n        result.push(data);\r\n      } else if (data instanceof Array) {\r\n        this.lookupArray(data, add);\r\n      } else if (data.constructor === Object) {\r\n        this.lookupObject(data, add);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n}\r\n\r\n/**\r\n * @param {RequestFactory} factory\r\n * @param {DataAccessInterface.ResourcePoolRegistry} registry\r\n * @param {DataAccessInterface.ResourcePool} pool\r\n * @param {RequestHandlers} handlers\r\n * @returns {ResourceConverter}\r\n */\r\nexport const createResourceConverter = (factory, registry, pool, handlers) => (\r\n  new ResourceConverter(factory, registry, pool, handlers)\r\n);\r\n\r\nexport default ResourceConverter;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/ResourceConverter.js","import isResource from './isResource';\r\nimport IConvertible from './IConvertible';\r\n\r\nexport default (data) => (\r\n  isResource(data)\r\n  || typeof data === 'function'\r\n  || data instanceof IConvertible\r\n);\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/isResourceConvertible.js","import EventDispatcher from 'event-dispatcher';\r\nimport ResourcePool, {\r\n  createResourcePool,\r\n  ResourcePoolEvents,\r\n  defaultResourcePool,\r\n} from './ResourcePool';\r\n\r\nexport const ResourcePoolRegistryEvents = Object.freeze({\r\n  RESOURCE_POOL_CREATED: 'resourcePoolCreated',\r\n  RESOURCE_POOL_REGISTERED: 'resourcePoolRegistered',\r\n  RESOURCE_POOL_REMOVED: 'resourcePoolRemoved',\r\n});\r\n\r\nconst POOLS_FIELD = Symbol('resource.pool.registry::pools');\r\n\r\n/**\r\n * @classdesc Collection of ResourcePool instances. Allows lookup for ResourcePool by its Id.\r\n * When ResourcePool is registered in ResourcePoolRegistry, it subscribes to\r\n * ResourcePool POOL_DESTROYED event and removes pool from registry after its destroyed.\r\n */\r\nclass ResourcePoolRegistry extends EventDispatcher {\r\n  constructor() {\r\n    super();\r\n    this[POOLS_FIELD] = {};\r\n\r\n    // every registry should keep default pool, so you can have access from anywhere\r\n    this.register(defaultResourcePool);\r\n  }\r\n\r\n  handlePoolDestroyed = (event) => {\r\n    this.remove(event.data);\r\n  }\r\n\r\n  /**\r\n   * Create and register ResourcePool\r\n   * @returns {DataAccessInterface.ResourcePool} New ResourcePool instance\r\n   */\r\n  createPool() {\r\n    const pool = createResourcePool();\r\n    if (this.hasEventListener(ResourcePoolRegistryEvents.RESOURCE_POOL_CREATED)) {\r\n      this.dispatchEvent(ResourcePoolRegistryEvents.RESOURCE_POOL_CREATED, pool);\r\n    }\r\n    this.register(pool);\r\n    return pool;\r\n  }\r\n\r\n  /**\r\n   * Register ResourcePool instance.\r\n   * @param pool {DataAccessInterface.ResourcePool} ResourcePool instance to be registered\r\n   */\r\n  register(pool) {\r\n    if (Object.prototype.hasOwnProperty.call(this[POOLS_FIELD], pool.id)) return;\r\n    this[POOLS_FIELD][pool.id] = pool;\r\n    pool.addEventListener(ResourcePoolEvents.POOL_DESTROYED, this.handlePoolDestroyed);\r\n    if (this.hasEventListener(ResourcePoolRegistryEvents.RESOURCE_POOL_REGISTERED)) {\r\n      this.dispatchEvent(ResourcePoolRegistryEvents.RESOURCE_POOL_REGISTERED, pool);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Retrieve ResourcePool instance from registry by its Id.\r\n   * @param poolId {String} ResourcePool instance Id\r\n   * @returns {DataAccessInterface.ResourcePool|null}\r\n   */\r\n  get(poolId) {\r\n    return this[POOLS_FIELD][poolId] || null;\r\n  }\r\n\r\n  /**\r\n   * Check if ResourcePool registered in this registry instance.\r\n   * @param pool {DataAccessInterface.ResourcePool|String} ResourcePool instance or its Id.\r\n   * @returns {Boolean}\r\n   */\r\n  isRegistered(pool) {\r\n    return Object.prototype.hasOwnProperty.call(\r\n      this[POOLS_FIELD],\r\n      pool instanceof ResourcePool ? pool.id : String(pool),\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Remove ResourcePool from current registry instance.\r\n   * @param pool {DataAccessInterface.ResourcePool|String} ResourcePool instance or its Id.\r\n   * @returns {Boolean}\r\n   */\r\n  remove(pool) {\r\n    let result = false;\r\n    pool = pool instanceof ResourcePool ? pool : this.get(pool);\r\n    if (pool) {\r\n      pool.removeEventListener(ResourcePoolEvents.POOL_DESTROYED, this.handlePoolDestroyed);\r\n      result = delete this[POOLS_FIELD][pool.id];\r\n    }\r\n    if (this.hasEventListener(ResourcePoolRegistryEvents.RESOURCE_POOL_REMOVED)) {\r\n      this.dispatchEvent(ResourcePoolRegistryEvents.RESOURCE_POOL_REMOVED, pool);\r\n    }\r\n    return result;\r\n  }\r\n}\r\n\r\nexport const createResourcePoolRegistry = () => new ResourcePoolRegistry();\r\n\r\nexport default ResourcePoolRegistry;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/ResourcePoolRegistry.js","import DataAccessInterface, * as api from './index';\r\n\r\nmodule.exports = Object.assign(DataAccessInterface, api);\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/direct.js","module.exports = function(originalModule) {\n\tif(!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif(!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true,\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/harmony-module.js\n// module id = 26\n// module chunks = 0","import DataAccessInterface, { create, dummy } from './DataAccessInterface';\r\nimport Deferred, { createDeferred } from './utils/Deferred';\r\nimport CommandDescriptor from './commands/CommandDescriptor';\r\nimport Reserved from './commands/Reserved';\r\nimport RequestTargetCommands from './commands/RequestTargetCommands';\r\nimport ProxyCommands from './commands/ProxyCommands';\r\nimport RequestTarget from './request/RequestTarget';\r\nimport ResourcePool from './resource/ResourcePool';\r\nimport ResourcePoolRegistry from './resource/ResourcePoolRegistry';\r\nimport ResourceConverter from './resource/ResourceConverter';\r\nimport IConvertible from './utils/IConvertible';\r\nimport isResourceConvertible from './utils/isResourceConvertible';\r\nimport getRawResource from './utils/getRawResource';\r\nimport getResourceData from './utils/getResourceData';\r\nimport getResourceId from './utils/getResourceId';\r\nimport getResourcePoolId from './utils/getResourcePoolId';\r\nimport getResourceType from './utils/getResourceType';\r\nimport isResource from './utils/isResource';\r\n\r\nexport default DataAccessInterface;\r\n\r\nexport {\r\n  create,\r\n  dummy,\r\n  createDeferred,\r\n  Deferred,\r\n  CommandDescriptor,\r\n  Reserved,\r\n  RequestTargetCommands,\r\n  ProxyCommands,\r\n  RequestTarget,\r\n  ResourcePool,\r\n  ResourcePoolRegistry,\r\n  ResourceConverter,\r\n  IConvertible,\r\n  isResourceConvertible,\r\n  getRawResource,\r\n  getResourceData,\r\n  getResourceId,\r\n  getResourcePoolId,\r\n  getResourceType,\r\n  isResource,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/index.js","/**\r\n * @exports DataAccessInterface\r\n */\r\n\r\nimport areProxiesAvailable from './utils/areProxiesAvailable';\r\nimport isResource from './utils/isResource';\r\nimport getResourcePoolId from './utils/getResourcePoolId';\r\nimport getResourceId from './utils/getResourceId';\r\nimport { createRequestHandlers } from './request/RequestHandlers';\r\nimport { createRequestProxyFactory } from './request/RequestProxyFactory';\r\nimport { createRequestFactory } from './request/RequestFactory';\r\nimport { defaultResourcePool, ResourcePoolEvents } from './resource/ResourcePool';\r\nimport { createResourceConverter } from './resource/ResourceConverter';\r\nimport { createResourcePoolRegistry } from './resource/ResourcePoolRegistry';\r\n\r\nclass DataAccessInterface {\r\n\r\n  /**\r\n   * @class DataAccessInterface\r\n   * @classdesc Facade of Deferred Data Access library, it holds all\r\n   * of public API -- objects like ResourcePool and methods to work\r\n   * with resources.\r\n   * @param {CommandDescriptor[]|Object.<string, Function|CommandDescriptor>} descriptors\r\n   * @param {boolean} [proxyEnabled=false]\r\n   * @param {ResourcePoolRegistry} [poolRegistry]\r\n   * @param {ResourcePool} [pool]\r\n   * @param {ICacheImpl} [cacheImpl]\r\n   */\r\n  constructor(\r\n    descriptors,\r\n    proxyEnabled = true,\r\n    poolRegistry = null,\r\n    pool = null,\r\n    cacheImpl = null,\r\n  ) {\r\n    this.poolRegistry = poolRegistry;\r\n    this.pool = pool;\r\n    this.cache = cacheImpl;\r\n    this.initialize(descriptors, proxyEnabled);\r\n  }\r\n\r\n  initialize(descriptors, proxyEnabled) {\r\n    if (proxyEnabled && !areProxiesAvailable()) {\r\n      throw new Error('Proxies are not available in this environment');\r\n    }\r\n\r\n    this.handlers = createRequestHandlers(proxyEnabled);\r\n    this.resourceConverter = createResourceConverter(\r\n      this.factory,\r\n      this.poolRegistry,\r\n      this.pool,\r\n      this.handlers,\r\n    );\r\n\r\n    if (proxyEnabled) {\r\n      this.factory = createRequestProxyFactory(this.handlers, this.cache);\r\n    } else {\r\n      this.factory = createRequestFactory(this.handlers, this.cache);\r\n    }\r\n\r\n    if (!this.poolRegistry) {\r\n      this.poolRegistry = createResourcePoolRegistry();\r\n    }\r\n\r\n    if (this.pool) {\r\n      this.poolRegistry.register(this.pool);\r\n    } else if (this.pool !== undefined) {\r\n      this.pool = this.poolRegistry.createPool();\r\n    } else {\r\n      this.pool = defaultResourcePool;\r\n    }\r\n\r\n    const poolDestroyedHandler = () => {\r\n      this.pool.removeEventListener(ResourcePoolEvents.POOL_DESTROYED, poolDestroyedHandler);\r\n      this.pool = this.poolRegistry.createPool();\r\n      this.pool.addEventListener(ResourcePoolEvents.POOL_DESTROYED, poolDestroyedHandler);\r\n    };\r\n\r\n    this.handlers.setHandlers(descriptors);\r\n    this.pool.addEventListener(ResourcePoolEvents.POOL_DESTROYED, poolDestroyedHandler);\r\n  }\r\n\r\n  get proxyEnabled() {\r\n    return this.handlers.proxyEnabled;\r\n  }\r\n\r\n  parse(data) {\r\n    return this.resourceConverter.parse(data);\r\n  }\r\n\r\n  toJSON(data) {\r\n    return this.resourceConverter.toJSON(data);\r\n  }\r\n\r\n  isOwnResource(resource) {\r\n    /**\r\n     * @type {DataAccessInterface.ResourcePool}\r\n     */\r\n    let pool;\r\n    if (isResource(resource)) {\r\n      pool = this.poolRegistry.get(getResourcePoolId(resource));\r\n      return pool && pool.has(getResourceId(resource));\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nexport const create = (handlers, proxyEnabled, poolRegistry, pool, cacheImpl) =>\r\n  new DataAccessInterface(handlers, proxyEnabled, poolRegistry, pool, cacheImpl);\r\n\r\nexport const dummy = (handlers, proxyEnabled, poolRegistry, pool, cacheImpl) => {\r\n  const api = new DataAccessInterface(handlers, proxyEnabled, poolRegistry, pool, cacheImpl);\r\n  return api.parse(handlers());\r\n};\r\n\r\nexport default DataAccessInterface;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/DataAccessInterface.js","export default () => (typeof Proxy === 'function');\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/areProxiesAvailable.js","import TargetStatus from '../utils/TargetStatus';\r\nimport { createDeferred } from '../utils/Deferred';\r\nimport TARGET_DATA from '../utils/TARGET_DATA';\r\nimport createRequestPackage from '../utils/createRequestPackage';\r\nimport isResource from '../utils/isResource';\r\nimport getResourceData from '../utils/getResourceData';\r\nimport { getRawPromise } from './RequestTarget';\r\nimport {\r\n  RequestTargetCommandFields,\r\n  RequestTargetCommandNames,\r\n} from '../commands/RequestTargetCommands';\r\n\r\n/**\r\n * @exports RequestTargetInternals\r\n */\r\n\r\nclass RequestTargetInternals {\r\n\r\n  /**\r\n   * @class RequestTargetInternals\r\n   * @param {DataAccessInterface.RequestTarget} _requestTarget\r\n   * @param {Promise} _promise\r\n   * @param {RequestHandlers} _requestHandlers\r\n   * @mixin Promise\r\n   */\r\n  constructor(requestTarget, promise, requestHandlers) {\r\n    this.requestHandlers = requestHandlers;\r\n    this.requestTarget = requestTarget;\r\n    this.link = {};\r\n    // INFO this should be not initialized i.e. keep it undefined, this will be checked later\r\n    this.temporary = undefined;\r\n    this.hadChildPromises = false;\r\n    this.status = TargetStatus.PENDING;\r\n    this.queue = [];\r\n    this.children = [];\r\n    this.deferred = createDeferred();\r\n    this.promise = this.deferred.promise;\r\n    promise\r\n      .then(this.handlePromiseResolve)\r\n      .catch(this.handlePromiseReject);\r\n  }\r\n\r\n  handlePromiseResolve = (value) => {\r\n    this.status = TargetStatus.RESOLVED;\r\n    if (isResource(value)) {\r\n      this.link = getResourceData(value);\r\n      /*\r\n       INFO Sending \"this\" as result of resolve() handler, causes infinite\r\n       loop of this.then(), so I've used wrapper object\r\n      */\r\n      // FIXME Check if Proxy wrapper will work with promise result, probably not\r\n      value = { target: this.requestTarget };\r\n      this.sendQueue();\r\n      /*\r\n      In theory, at time of these lines executing, \"temporary\" property should be\r\n      already set via _commandHandler() set from RequestTargetDecorator\r\n       */\r\n      if (this.temporary) {\r\n        this.destroy();\r\n      }\r\n    } else { // else { value must be passed as is }\r\n      this.rejectQueue('Target of the call is not a resource and call cannot be sent.');\r\n    }\r\n    this.deferred.resolve(value);\r\n    delete this.deferred;\r\n  };\r\n\r\n  handlePromiseReject = (value) => {\r\n    this.status = TargetStatus.REJECTED;\r\n    this.rejectQueue('Target of the call was rejected and call cannot be sent.');\r\n    this.deferred.reject(value);\r\n    delete this.deferred;\r\n  };\r\n\r\n  get poolId() {\r\n    return this.link.poolId || null;\r\n  }\r\n\r\n  get type() {\r\n    return this.link.type || null;\r\n  }\r\n\r\n  get id() {\r\n    return this.link.id || null;\r\n  }\r\n\r\n  sendQueue() {\r\n    while (this.queue && this.queue.length) {\r\n      const [name, pack, deferred, child] = this.queue.shift();\r\n      pack.target = this.link.id;\r\n      this.handleRequest(name, pack, deferred, child);\r\n    }\r\n    this.queue = null;\r\n  }\r\n\r\n  rejectQueue(message) {\r\n    const error = new Error(message || 'This request was rejected before sending.');\r\n    while (this.queue && this.queue.length) {\r\n      /**\r\n       * @type {Array.<string, CommandDataPack, DataAccessInterface.Deferred>}\r\n       */\r\n        // FIXME [string, {type:string, cmd:string, value:*, target:string}, Deferred]\r\n        // how to describe this in JSDoc?\r\n      const [, , deferred] = this.queue.shift();\r\n      deferred.reject(error);\r\n    }\r\n    this.queue = null;\r\n  }\r\n\r\n  sendRequest(name, pack, deferred, child) {\r\n    let promise = null;\r\n\r\n    if (this.requestHandlers.hasHandler(name)) {\r\n      promise = this.applyRequest(name, pack, deferred || createDeferred(), child);\r\n    } else {\r\n      throw new Error(`Request handler for \"${name}\" is not registered.`);\r\n    }\r\n\r\n    if (child) {\r\n      this.registerChild(child);\r\n    }\r\n\r\n    return promise;\r\n  }\r\n\r\n  addToQueue(name, pack, deferred, child) {\r\n    this.queue.push([name, pack, deferred, child]);\r\n  }\r\n\r\n  applyRequest(name, pack, deferred, child) {\r\n    let { promise } = deferred;\r\n\r\n    switch (this.status) {\r\n      case TargetStatus.PENDING:\r\n        this.addToQueue(name, pack, deferred, child);\r\n        break;\r\n      case TargetStatus.REJECTED:\r\n        promise = Promise.reject(new Error('Target object was rejected and cannot be used for calls.'));\r\n        break;\r\n      case TargetStatus.DESTROYED:\r\n        promise = Promise.reject(new Error('Target object was destroyed and cannot be used for calls.'));\r\n        break;\r\n      case TargetStatus.RESOLVED:\r\n        this.handleRequest(name, pack, deferred, child);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    return promise;\r\n  }\r\n\r\n  handleRequest(name, pack, deferred, child) {\r\n    this.requestHandlers.handle(this.requestTarget, name, pack, deferred, child);\r\n  }\r\n\r\n  registerChild(childRequestTarget) {\r\n    const handleChildRequest = () => {\r\n      if (this.children) {\r\n        const index = this.children.indexOf(childRequestTarget);\r\n        if (index >= 0) {\r\n          this.children.splice(index, 1);\r\n        }\r\n      }\r\n    };\r\n\r\n    this.children.push(childRequestTarget);\r\n    getRawPromise(childRequestTarget)\r\n      .then(handleChildRequest, handleChildRequest);\r\n  }\r\n\r\n  isActive() {\r\n    return this.status === TargetStatus.PENDING || this.status === TargetStatus.RESOLVED;\r\n  }\r\n\r\n  canBeDestroyed() {\r\n    return this.status === TargetStatus.RESOLVED || this.status === TargetStatus.REJECTED;\r\n  }\r\n\r\n  destroy() {\r\n    let promise = null;\r\n    if (this.canBeDestroyed()) {\r\n      // INFO I should not clear children list, since they are pending and requests already sent.\r\n      if (this.status === TargetStatus.RESOLVED) {\r\n        promise = this.sendRequest(\r\n          RequestTargetCommandFields.DESTROY,\r\n          createRequestPackage(\r\n            RequestTargetCommandNames.DESTROY,\r\n            [null, null],\r\n            this.id,\r\n          ),\r\n        );\r\n      } else {\r\n        promise = Promise.resolve();\r\n      }\r\n      this.status = TargetStatus.DESTROYED;\r\n    } else {\r\n      promise = Promise.reject(new Error('Invalid or already destroyed target.'));\r\n    }\r\n    return promise;\r\n  }\r\n\r\n  then(handleResolve, handleReject) {\r\n    const child = this.promise.then(handleResolve, handleReject);\r\n    this.hadChildPromises = true;\r\n    return child;\r\n  }\r\n\r\n  catch(handleReject) {\r\n    const child = this.promise.catch(handleReject);\r\n    this.hadChildPromises = true;\r\n    return child;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      [TARGET_DATA]: {\r\n        id: this.link.id,\r\n        type: this.link.type,\r\n        poolId: this.link.poolId,\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\nexport default RequestTargetInternals;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/RequestTargetInternals.js","module.exports = function(module) {\n\tif(!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif(!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 31\n// module chunks = 0","import CommandDescriptor from '../commands/CommandDescriptor';\r\nimport ProxyCommands, { ProxyCommandFields } from '../commands/ProxyCommands';\r\nimport filterRequestHandlers from '../utils/filterRequestHandlers';\r\nimport getResourceType from '../utils/getResourceType';\r\n\r\n/**\r\n * Key for default type for handlers that will be applied to any\r\n * resource that does not have type-specific handlers registered\r\n * @type {string}\r\n */\r\nconst DEFAULT_KEY = '';\r\n\r\nexport const areProxyHandlersAvailable = (handlers, throwError) => {\r\n  let result = true;\r\n  const list = ProxyCommands.required;\r\n  const { length } = list;\r\n  for (let index = 0; index < length; index++) {\r\n    const name = list[index];\r\n    if (!(ProxyCommandFields[name] in handlers)) {\r\n      result = false;\r\n      if (throwError) {\r\n        throw new Error(`For Proxy interface, handler \"${name}\" should be set.`);\r\n      }\r\n    }\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const RequestHandlersEvents = Object.freeze({\r\n  HANDLERS_UPDATED: 'handlersUpdated',\r\n});\r\n\r\nclass RequestHandlers {\r\n\r\n  /**\r\n   * @class RequestHandlers\r\n   * @param {boolean} proxyEnabled\r\n   * @private\r\n   */\r\n  constructor(proxyEnabled = false) {\r\n    // named collection of CommandDescriptor lists that may be applied\r\n    this.properties = {};\r\n    this.descriptors = {};\r\n    this.proxyEnabled = Boolean(proxyEnabled);\r\n    this.converter = null;\r\n  }\r\n\r\n  get available() {\r\n    const nonEmptyList = Object.keys(this.properties).find((item) => Boolean(item && item.length));\r\n    return Boolean(nonEmptyList);\r\n  }\r\n\r\n  setConverter(converter) {\r\n    this.converter = converter;\r\n  }\r\n\r\n  setHandlers(handlers) {\r\n    this.setHandlersByType(DEFAULT_KEY, handlers);\r\n\r\n    Object.keys(handlers).forEach((name) => {\r\n      const type = handlers[name];\r\n      if (type && (type.constructor === Object || type instanceof Array)) {\r\n        this.setHandlersByType(name, type);\r\n      }\r\n    });\r\n\r\n    if (this.proxyEnabled) {\r\n      areProxyHandlersAvailable(this.descriptors[DEFAULT_KEY], true);\r\n    }\r\n  }\r\n\r\n  setHandlersByType(type, handlers) {\r\n    const descrs = {};\r\n    const props = [];\r\n    filterRequestHandlers(handlers, descrs, props);\r\n    this.descriptors[type] = descrs;\r\n    this.properties[type] = props;\r\n  }\r\n\r\n  /**\r\n   * @method RequestHandlers#hasHandler\r\n   * @param {String|Symbol} name Property name of CommandDescriptor\r\n   * @param {String} [type] Resource type for type-specific handlers\r\n   * @returns {boolean}\r\n   */\r\n  hasHandler(name, type) {\r\n    return (\r\n        this.descriptors[type]\r\n        && Object.prototype.hasOwnProperty.call(this.descriptors[type], name)\r\n      )\r\n      || (\r\n        this.descriptors[DEFAULT_KEY]\r\n        && Object.prototype.hasOwnProperty.call(this.descriptors[DEFAULT_KEY], name)\r\n      );\r\n  }\r\n\r\n  /**\r\n   * IMPORTANT: Returns original list of CommandDescriptors, changing it may cause\r\n   * unexpected result with newly decorated resources.\r\n   * @param {String} [type]\r\n   * @returns {CommandDescriptor[]|null}\r\n   * @private\r\n   */\r\n  getHandlers(type) {\r\n    let descrs = this.descriptors[type || DEFAULT_KEY];\r\n    if (!descrs) {\r\n      descrs = this.descriptors[DEFAULT_KEY];\r\n    }\r\n\r\n    return descrs || null;\r\n  }\r\n\r\n  /**\r\n   * @method RequestHandlers#getHandler\r\n   * @param name\r\n   * @param {String} [type]\r\n   * @returns {*|null}\r\n   * @private\r\n   */\r\n  getHandler(name, type) {\r\n    const handler = (\r\n        this.descriptors[type]\r\n        && this.descriptors[type][name]\r\n      )\r\n      || (\r\n        this.descriptors[DEFAULT_KEY]\r\n        && this.descriptors[DEFAULT_KEY][name]\r\n      );\r\n\r\n    return handler || null;\r\n  }\r\n\r\n  /**\r\n   * @method RequestHandlers#handle\r\n   * @param {DataAccessInterface.RequestTarget} parentRequest\r\n   * @param {String|Symbol} name\r\n   * @param {CommandDataPack} pack\r\n   * @param {DataAccessInterface.Deferred} deferred\r\n   * @param {DataAccessInterface.RequestTarget} [resultRequest]\r\n   * @private\r\n   */\r\n  handle(parentRequest, name, pack, deferred, resultRequest) {\r\n    const list = this.converter ? this.converter.lookupForPending(pack.value) : null;\r\n    if (list && list.length) {\r\n      // FIXME Need to test on all platforms: In other browsers this might not work\r\n      // because may need list of Promise objects, not RequestTargets\r\n      Promise.all(list).then(() => {\r\n        this.handleImmediately(parentRequest, name, pack, deferred, resultRequest);\r\n      });\r\n    } else {\r\n      this.handleImmediately(parentRequest, name, pack, deferred, resultRequest);\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {DataAccessInterface.RequestTarget} parentRequest\r\n   * @param {String|Symbol} name\r\n   * @param {CommandDataPack} data\r\n   * @param {DataAccessInterface.Deferred} deferred\r\n   * @param {DataAccessInterface.RequestTarget} [resultRequest]\r\n   * @private\r\n   */\r\n  handleImmediately(parentRequest, name, data, deferred, resultRequest) {\r\n    /**\r\n     * @type {DataAccessInterface.CommandDescriptor|null}\r\n     */\r\n    const handler = this.getHandler(name, getResourceType(parentRequest));\r\n    if (handler instanceof CommandDescriptor) {\r\n      // INFO result should be applied to deferred.resolve() or deferred.reject()\r\n      handler.handler(parentRequest, data, deferred, resultRequest);\r\n    } else {\r\n      throw new Error(`Command descriptor for \"${name}\" was not found.`);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * @member RequestHandlers.create\r\n * @param {Boolean} proxyEnabled\r\n * @returns {RequestHandlers}\r\n */\r\nexport const createRequestHandlers = (proxyEnabled) => new RequestHandlers(proxyEnabled);\r\n\r\nexport default RequestHandlers;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/RequestHandlers.js","import CommandDescriptor, { createCommandDescriptor } from '../commands/CommandDescriptor';\r\nimport Reserved from '../commands/Reserved';\r\n\r\n\r\n/**\r\n * Checks for CommandDescriptor uniqueness and reserved words usage.\r\n * @param {DataAccessInterface.CommandDescriptor} descriptor\r\n * @param {Object.<string, DataAccessInterface.CommandDescriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.CommandDescriptor>} properties\r\n * @private\r\n */\r\nconst applyDescriptor = (descriptor, descriptors, properties) => {\r\n  const { name } = descriptor;\r\n  if (name in Reserved.names) {\r\n    throw new Error(`Name \"${name}\" is reserved and cannot be used in descriptor.`);\r\n  }\r\n  if (\r\n    Object.prototype.hasOwnProperty.call(descriptors, name)\r\n    && descriptors[name] instanceof CommandDescriptor\r\n  ) {\r\n    throw new Error(`Field names should be unique, \"${String(name)}\" field has duplicates.`);\r\n  }\r\n  descriptors[name] = descriptor;\r\n  if (!descriptor.virtual) {\r\n    properties.push(descriptor);\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Array} handlers\r\n * @param {Object} descriptors\r\n * @private\r\n */\r\nconst filterArray = (handlers, descriptors, properties) => {\r\n  const { length } = handlers;\r\n  for (let index = 0; index < length; index++) {\r\n    const value = handlers[index];\r\n    if (value instanceof CommandDescriptor) {\r\n      applyDescriptor(value, descriptors, properties);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Object} handlers\r\n * @param {Object.<string, DataAccessInterface.CommandDescriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.CommandDescriptor>} properties\r\n * @private\r\n */\r\nconst filterHash = (handlers, descriptors, properties) => {\r\n  if (!handlers) return;\r\n  const keys = Object.getOwnPropertyNames(handlers).concat(Object.getOwnPropertySymbols(handlers));\r\n  const { length } = keys;\r\n  for (let index = 0; index < length; index++) {\r\n    const name = keys[index];\r\n    let value = handlers[name];\r\n    if (typeof value === 'function') {\r\n      value = createCommandDescriptor(name, value);\r\n    }\r\n    if (value instanceof CommandDescriptor) {\r\n      applyDescriptor(value, descriptors, properties);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * @method RequestHandlers.filterHandlers\r\n * @param {Array|Object} handlers\r\n * @param {Object.<string, DataAccessInterface.CommandDescriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.CommandDescriptor>} properties\r\n */\r\nexport default (handlers, descriptors, properties) => {\r\n  if (handlers instanceof Array) {\r\n    filterArray(handlers, descriptors, properties);\r\n  } else {\r\n    filterHash(handlers, descriptors, properties);\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/filterRequestHandlers.js","import RequestFactory, {\r\n  createRequestFactory,\r\n  FACTORY_DECORATOR_FIELD,\r\n  FACTORY_HANDLERS_FIELD,\r\n} from './RequestFactory';\r\nimport { ProxyCommandFields } from '../commands/ProxyCommands';\r\n\r\nconst FACTORY_FIELD = Symbol('request.proxy.factory::factory');\r\n\r\nconst EXCLUSIONS = {\r\n  /*\r\n   INFO arguments and caller were included because they are required function properties\r\n   */\r\n  arguments: true,\r\n  caller: true,\r\n  prototype: true,\r\n};\r\n\r\nconst wrapWithProxy = (target, handlers) => {\r\n  // INFO Target must be a function so I could use Proxy.call() interceptor.\r\n  function requestTargetProxy() {\r\n  }\r\n\r\n  requestTargetProxy.target = target;\r\n  return new Proxy(requestTargetProxy, handlers);\r\n};\r\n\r\nconst proxyGet = (wrapper, name) => {\r\n  const { target } = wrapper;\r\n  if (name in target || name in EXCLUSIONS || typeof name === 'symbol') {\r\n    return target[name];\r\n  }\r\n  // INFO Proxy should be already applied, so no need in additional wrapping\r\n  return target[ProxyCommandFields.get](name);\r\n};\r\n\r\n// INFO Proxy should be already applied, so no need in additional wrapping\r\nconst proxyApply = (wrapper, thisValue, args) => (\r\n  wrapper.target[ProxyCommandFields.apply](null, args)\r\n);\r\n\r\nconst proxySet = (wrapper, name, value) => {\r\n  const { target } = wrapper;\r\n\r\n  if (name in target || name in EXCLUSIONS || typeof name === 'symbol') {\r\n    target[name] = value;\r\n    return value;\r\n  }\r\n\r\n  return target[ProxyCommandFields.set](name, value);\r\n};\r\n\r\nconst proxyHas = (wrapper, name) => (\r\n  Object.prototype.hasOwnProperty.call(wrapper.target, name)\r\n);\r\n\r\nconst proxyDeleteProperty = (wrapper, name) => {\r\n  const { target } = wrapper;\r\n\r\n  if (ProxyCommandFields.deleteProperty in target) {\r\n    target[ProxyCommandFields.deleteProperty](name);\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nconst proxyOwnKeys = () => Object.getOwnPropertyNames(EXCLUSIONS);\r\n\r\nconst proxyEnumerate = () => Object.getOwnPropertyNames(EXCLUSIONS)[Symbol.iterator]();\r\n\r\nconst proxyGetOwnPropertyDescriptor = (wrapper, name) => {\r\n  if (Object.prototype.hasOwnProperty.call(EXCLUSIONS, name)) {\r\n    return Object.getOwnPropertyDescriptor(wrapper, name);\r\n  }\r\n  return Object.getOwnPropertyDescriptor(wrapper.target, name);\r\n};\r\n\r\n/**\r\n * Builds proper handlers hash for Proxy\r\n * @returns {Function}\r\n */\r\nexport const createProxyHandlers = (handlers = {}) => ({\r\n  get: proxyGet,\r\n  apply: proxyApply,\r\n  set: proxySet,\r\n  has: proxyHas,\r\n  deleteProperty: proxyDeleteProperty,\r\n  ownKeys: proxyOwnKeys,\r\n  enumerate: proxyEnumerate,\r\n  getOwnPropertyDescriptor: proxyGetOwnPropertyDescriptor,\r\n  ...handlers,\r\n});\r\n\r\nconst PROXY_HANDLERS = createProxyHandlers();\r\n\r\nclass RequestProxyFactory extends RequestFactory {\r\n  constructor(handlers, cacheImpl) {\r\n    super(null, null, true);\r\n\r\n    this[FACTORY_HANDLERS_FIELD] = handlers;\r\n    this[FACTORY_FIELD] = createRequestFactory(handlers, cacheImpl);\r\n    this[FACTORY_FIELD][FACTORY_DECORATOR_FIELD].setFactory(this);\r\n  }\r\n\r\n  create(promise) {\r\n    const instance = this[FACTORY_FIELD].create(promise);\r\n\r\n    if (this[FACTORY_HANDLERS_FIELD].available) {\r\n      return wrapWithProxy(instance, PROXY_HANDLERS);\r\n    }\r\n\r\n    return instance;\r\n  }\r\n\r\n  getCached(name, pack) {\r\n    return this[FACTORY_FIELD].getCached(name, pack);\r\n  }\r\n\r\n  createCached(promise, name, pack) {\r\n    const instance = this[FACTORY_FIELD].createCached(promise, name, pack);\r\n\r\n    if (this[FACTORY_HANDLERS_FIELD].available) {\r\n      return wrapWithProxy(instance, PROXY_HANDLERS);\r\n    }\r\n\r\n    return instance;\r\n  }\r\n\r\n}\r\n\r\nexport const applyProxyWithDefaultHandlers = (target) => wrapWithProxy(target, PROXY_HANDLERS);\r\n\r\nexport const createRequestProxyFactory = (handlers, cacheImpl) => (\r\n  new RequestProxyFactory(handlers, cacheImpl)\r\n);\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/RequestProxyFactory.js","import CommandHandlerFactory from '../commands/CommandHandlerFactory';\r\nimport getResourceType from '../utils/getResourceType';\r\n\r\nclass RequestTargetDecorator {\r\n\r\n  /**\r\n   * @param {RequestFactory} factory\r\n   * @param {RequestHandlers} handlers\r\n   * @private\r\n   */\r\n  constructor(factory, handlers) {\r\n    this.handlers = handlers;\r\n    this.members = new CommandHandlerFactory(factory);\r\n  }\r\n\r\n  apply(request) {\r\n    let result;\r\n\r\n    if (!this.handlers.available) {\r\n      return request;\r\n    }\r\n    /* FIXME revert change when ES6 will be supported widely\r\n     for (var descriptor of this.handlers) {\r\n     request[descriptor.name] = this.getMember(descriptor.name, descriptor.type);\r\n     }\r\n     */\r\n\r\n    const iterator = this.handlers.getHandlers(getResourceType(request));\r\n    while (!(result = iterator.next()).done) {\r\n      const descriptor = result.value;\r\n      request[descriptor.name] = this.members.get(descriptor);\r\n    }\r\n\r\n    return request;\r\n  }\r\n\r\n  setFactory(factory) {\r\n    if (factory) {\r\n      this.members.setFactory(factory);\r\n    }\r\n  }\r\n}\r\n\r\nexport const createRequestTargetDecorator = (factory, handlers) => (\r\n  new RequestTargetDecorator(factory, handlers)\r\n);\r\n\r\nexport default RequestTargetDecorator;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/RequestTargetDecorator.js","import TARGET_INTERNALS from '../utils/TARGET_INTERNALS';\r\nimport { createDeferred } from '../utils/Deferred';\r\nimport createRequestPackage from '../utils/createRequestPackage';\r\nimport { setTemporary } from '../request/RequestTarget';\r\n\r\nconst createCommandHandlerFor = (\r\n  factoryWrapper,\r\n  propertyName,\r\n  commandType,\r\n  isTemporary,\r\n  cacheable,\r\n) => {\r\n  const { factory, checkState, getChildRequest } = factoryWrapper;\r\n\r\n  function commandHandler(command, value, ...args) {\r\n    let result;\r\n    let promise;\r\n    if (this[TARGET_INTERNALS]) {\r\n      const pack = createRequestPackage(\r\n        commandType,\r\n        [command, value, ...args],\r\n        this[TARGET_INTERNALS].id,\r\n      );\r\n      // FIXME Explicitly pass scope\r\n      const request = getChildRequest(propertyName, pack, cacheable);\r\n      result = request.child;\r\n      if (request.deferred) {\r\n        promise = this[TARGET_INTERNALS].sendRequest(propertyName, pack, request.deferred, result);\r\n        if (promise) {\r\n          if (isTemporary) {\r\n            // FIXME isTemporary must be called before `result` was resolved\r\n            // FIXME remove default `isTemporary`, if not defined just skip\r\n            checkState(promise, isTemporary, this, result, pack);\r\n          }\r\n        } else {\r\n          result = null;\r\n          promise = Promise.reject(new Error('Initial request failed and didn\\'t result in promise.'));\r\n        }\r\n      }\r\n    } else {\r\n      promise = Promise.reject(new Error('Target object is not a resource, so cannot be used for calls.'));\r\n    }\r\n    return result || factory.create(promise);\r\n  }\r\n\r\n  return commandHandler;\r\n};\r\n\r\nclass CommandHandlerFactory {\r\n  members = new Map();\r\n  factory = null;\r\n\r\n  constructor(factory = null) {\r\n    this.setFactory(factory);\r\n  }\r\n\r\n  /**\r\n   * @param {CommandDescriptor} descriptor\r\n   * @returns {Function}\r\n   * @private\r\n   */\r\n  get(descriptor) {\r\n    const propertyName = descriptor.name;\r\n    if (!this.members.has(propertyName)) {\r\n      this.members.set(\r\n        propertyName,\r\n        this.create(\r\n          descriptor.name,\r\n          descriptor.type,\r\n          descriptor.isTemporary,\r\n          descriptor.cacheable,\r\n        ),\r\n      );\r\n    }\r\n    return this.members.get(propertyName);\r\n  }\r\n\r\n  create(propertyName, commandType, isTemporary, cacheable) {\r\n    return createCommandHandlerFor(this, propertyName, commandType, isTemporary, cacheable);\r\n  }\r\n\r\n  getChildRequest = (propertyName, pack, cacheable) => {\r\n    let child;\r\n    let deferred;\r\n\r\n    if (cacheable) {\r\n      child = this.factory.getCached(propertyName, pack);\r\n    }\r\n\r\n    if (!child) {\r\n      deferred = createDeferred();\r\n      if (cacheable) {\r\n        child = this.factory.createCached(deferred.promise, propertyName, pack);\r\n      } else {\r\n        child = this.factory.create(deferred.promise, propertyName, pack);\r\n      }\r\n    }\r\n    return { child, deferred };\r\n  };\r\n\r\n  checkState = (promise, isTemporaryFn, parentRequest, childRequest, pack) => {\r\n    if (promise) {\r\n      promise.then((data) => {\r\n        const isTemporary = Boolean(isTemporaryFn(parentRequest, childRequest, pack, data));\r\n        setTemporary(childRequest, isTemporary);\r\n      });\r\n    }\r\n  };\r\n\r\n  setFactory(factory) {\r\n    this.factory = factory;\r\n  }\r\n}\r\n\r\nexport default CommandHandlerFactory;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/commands/CommandHandlerFactory.js"],"sourceRoot":""}