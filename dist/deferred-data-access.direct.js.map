{"version":3,"sources":["webpack:///deferred-data-access.direct.js","webpack:///webpack/bootstrap 2ebf73130931261a945d","webpack:///./source/utils.js","webpack:///./source/resource/utils/index.js","webpack:///./source/request/RequestTarget.js","webpack:///./source/request/index.js","webpack:///./source/resource/index.js","webpack:///./source/request/utils/index.js","webpack:///./source/commands/index.js","webpack:///./source/commands/CommandDescriptor.js","webpack:///./source/commands/ProxyCommands.js","webpack:///./source/resource/ResourcePool.js","webpack:///./node_modules/event-dispatcher/dist/event-dispatcher.js","webpack:///./source/resource/TargetResource.js","webpack:///./source/commands/CommandHandlerFactory.js","webpack:///./source/resource/utils/defaultResourcePool.js","webpack:///./source/resource/utils/IConvertible.js","webpack:///./source/resource/utils/resourceUtils.js","webpack:///./source/request/RequestTargetInternals.js","webpack:///./source/commands/RequestTargetCommands.js","webpack:///./source/request/RequestTargetDecorator.js","webpack:///./source/request/RequestFactory.js","webpack:///./source/direct.js","webpack:///./source/index.js","webpack:///./source/DataAccessInterface.js","webpack:///./source/request/utils/createRequestPackage.js","webpack:///./source/request/utils/filterRequestHandlers.js","webpack:///./source/resource/ResourceConverter.js","webpack:///./source/resource/ResourcePoolRegistry.js","webpack:///./source/commands/Reserved.js","webpack:///./source/request/RequestHandlers.js","webpack:///./source/request/RequestProxyFactory.js"],"names":["DataAccessInterface","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","value","Deferred","TargetStatus","freeze","PENDING","RESOLVED","REJECTED","DESTROYED","TARGET_INTERNALS","Symbol","TARGET_DATA","getId","base","Date","now","index","_this","this","promise","Promise","resolve","reject","createDeferred","areProxiesAvailable","Proxy","_interopRequireDefault","obj","default","getResourcePoolId","getResourceId","getResourceData","getRawResource","createForeignResource","areSameResource","isResource","getResourceType","isResourceConvertible","IConvertible","defaultResourcePool","undefined","_defaultResourcePool","_defaultResourcePool2","_IConvertible","_IConvertible2","_resourceUtils","_toConsumableArray","arr","Array","isArray","arr2","length","from","createRequestTarget","sendRequest","getChildrenCount","getLastChild","getChildren","getRawPromise","hadChildPromises","getQueueCommands","getQueueLength","isPending","getStatus","setTemporary","isTemporary","toJSON","destroy","canBeDestroyed","isActive","_createClass","defineProperties","target","props","descriptor","writable","key","protoProps","staticProps","_utils","_resource","_RequestTargetInternals","_RequestTargetInternals2","PROMISE_FIELD","getRequestPromise","request","RequestTarget","requestHandlers","handlePromise","data","then","apply","arguments","catch","temporary","Boolean","status","getRequestChildren","list","queue","result","push","type","children","createRequestProxyFactory","RequestProxyFactory","createRequestHandlers","RequestHandlers","createRequestFactory","RequestFactory","createRequestTargetDecorator","RequestTargetDecorator","RequestTargetInternals","createRequestPackage","_RequestTarget","_RequestTarget2","_RequestTargetDecorator","_RequestTargetDecorator2","_RequestFactory","_RequestFactory2","_RequestHandlers","_RequestHandlers2","_RequestProxyFactory","_RequestProxyFactory2","ResourcePoolRegistryEvents","createResourcePoolRegistry","ResourcePoolRegistry","ResourceConverterEvents","createResourceConverter","ResourceConverter","createTargetResource","TargetResource","ResourcePoolEvents","createResourcePool","ResourcePool","_ResourcePool","_ResourcePool2","_TargetResource","_TargetResource2","_ResourceConverter","_ResourceConverter2","_ResourcePoolRegistry","_ResourcePoolRegistry2","filterRequestHandlers","_createRequestPackage","_createRequestPackage2","_filterRequestHandlers","_filterRequestHandlers2","RequestTargetCommandFields","RequestTargetCommandNames","RequestTargetCommands","Reserved","ProxyCommandFields","ProxyCommandNames","ProxyCommands","CommandHandlerFactory","createDescriptors","createCommandDescriptor","CommandDescriptor","_CommandDescriptor","_CommandDescriptor2","_CommandHandlerFactory","_CommandHandlerFactory2","_ProxyCommands","_ProxyCommands2","_Reserved","_Reserved2","_RequestTargetCommands","_RequestTargetCommands2","descriptorGeneratorFactory","addDescriptorTo","handler","cacheable","virtual","resourceType","command","handlers","field","Function","GET","SET","APPLY","DELETE_PROPERTY","set","deleteProperty","createGETDescriptor","createSETDescriptor","createAPPLYDescriptor","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","getDefaultValidTargets","setValidTargets","isValidTarget","_typeof","iterator","_eventDispatcher","_eventDispatcher2","RESOURCE_ADDED","RESOURCE_REMOVED","POOL_CLEAR","POOL_CLEARED","POOL_DESTROYED","MAP_FIELD","validTargets","_EventDispatcher","getPrototypeOf","Map","id","link","has","hasEventListener","dispatchEvent","delete","resource","keys","next","done","clear","root","factory","Event","_EventDispatcher2","hasOwnProp","defaultPrevented","ListenersRunner","listeners","onStopped","onComplete","immediatelyStopped","stopImmediatePropagation","event","listener","augmentEvent","clearEvent","eventObject","stopPropagation","EventListeners","_this2","_listeners","_runners","removeRunner","runner","splice","indexOf","eventType","priorityOpt","priority","parseInt","getPrioritiesByKey","String","createList","priorities","_this3","getOwnPropertyNames","handlerIndex","forEach","listenerRemoved","stopped","sort","a","b","_handlers","_runner","createRunner","run","EventDispatcher","eventPreprocessor","noInit","initialize","_eventPreprocessor","add","remove","removeAll","getEvent","eventOrType","optionalData","isObject","_defineProperty","getPoolId","pool","_Object$definePropert","poolId","active","internals","_request","createCommandHandlerFor","factoryWrapper","propertyName","commandType","commandHandler","_len","args","_key","pack","concat","getChildRequest","child","deferred","checkState","Error","members","getCached","createCached","isTemporaryFn","parentRequest","childRequest","setFactory","DefaultResourcePool","_ResourcePool3","resource1","resource2","_slicedToArray","sliceIterator","_arr","_n","_d","_e","_s","_i","err","_utils2","_utils3","requestTarget","handlePromiseResolve","sendQueue","rejectQueue","handlePromiseReject","_queue$shift","shift","_queue$shift2","handleRequest","message","error","_queue$shift3","hasHandler","applyRequest","registerChild","addToQueue","handle","childRequestTarget","handleChildRequest","DESTROY","handleResolve","handleReject","createDESTROYDescriptor","available","getHandlers","FACTORY_HANDLERS_FIELD","FACTORY_DECORATOR_FIELD","cacheImpl","cache","_index","api","newObj","assign","dummy","_DataAccessInterface","_DataAccessInterface2","_commands","descriptors","proxyEnabled","poolRegistry","resourceConverter","register","createPool","poolDestroyedHandler","removeEventListener","addEventListener","setHandlers","parse","targetId","cmd","applyDescriptor","properties","names","filterArray","filterHash","getOwnPropertySymbols","RESOURCE_CREATED","RESOURCE_CONVERTED","registry","setConverter","isRegistered","linkConvertHandler","resourceToObject","lookupArray","lookupObject","objectToResource","RESOURCE_POOL_CREATED","RESOURCE_POOL_REGISTERED","RESOURCE_POOL_REMOVED","POOLS_FIELD","handlePoolDestroyed","Events","RequestHandlersEvents","areProxyHandlersAvailable","throwError","required","HANDLERS_UPDATED","converter","setHandlersByType","descrs","resultRequest","lookupForPending","all","handleImmediately","getHandler","nonEmptyList","find","item","applyProxyWithDefaultHandlers","createProxyHandlers","_RequestFactory3","FACTORY_FIELD","EXCLUSIONS","caller","wrapWithProxy","requestTargetProxy","proxyGet","wrapper","proxyApply","thisValue","proxySet","proxyHas","proxyDeleteProperty","proxyOwnKeys","proxyEnumerate","proxyGetOwnPropertyDescriptor","getOwnPropertyDescriptor","ownKeys","enumerate","PROXY_HANDLERS"],"mappings":"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","file":"deferred-data-access.direct.js","sourcesContent":["var DataAccessInterface =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"http://localhost:8081/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 20);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar TargetStatus = exports.TargetStatus = Object.freeze({\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n  DESTROYED: 'destroyed'\n});\n\n/**\r\n * @type {Symbol}\r\n * @private\r\n */\nvar TARGET_INTERNALS = exports.TARGET_INTERNALS = Symbol('request.target:internals');\n/**\r\n *\r\n * @type {string}\r\n * @private\r\n */\nvar TARGET_DATA = exports.TARGET_DATA = 'resource::data';\n\n/**\r\n * @private\r\n */\nvar getId = exports.getId = function () {\n  var base = 'DA/' + Date.now() + '/';\n  var index = 0;\n  return function () {\n    return '' + base + ++index + '/' + Date.now();\n  };\n}();\n\n/**\r\n * @constructor\r\n * @alias DataAccessInterface.Deferred\r\n */\n\nvar Deferred = exports.Deferred = function Deferred() {\n  var _this = this;\n\n  _classCallCheck(this, Deferred);\n\n  this.promise = new Promise(function (resolve, reject) {\n    _this.resolve = resolve;\n    _this.reject = reject;\n  });\n};\n\n/**\r\n * @returns {Deferred}\r\n * @private\r\n */\n\n\nvar createDeferred = exports.createDeferred = function createDeferred() {\n  return new Deferred();\n};\n\n/**\r\n * @returns {boolean}\r\n * @private\r\n */\nvar areProxiesAvailable = exports.areProxiesAvailable = function areProxiesAvailable() {\n  return typeof Proxy === 'function';\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getResourcePoolId = exports.getResourceId = exports.getResourceData = exports.getRawResource = exports.createForeignResource = exports.areSameResource = exports.isResource = exports.getResourceType = exports.isResourceConvertible = exports.IConvertible = exports.defaultResourcePool = undefined;\n\nvar _defaultResourcePool = __webpack_require__(13);\n\nvar _defaultResourcePool2 = _interopRequireDefault(_defaultResourcePool);\n\nvar _IConvertible = __webpack_require__(14);\n\nvar _IConvertible2 = _interopRequireDefault(_IConvertible);\n\nvar _resourceUtils = __webpack_require__(15);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.defaultResourcePool = _defaultResourcePool2.default;\nexports.IConvertible = _IConvertible2.default;\nexports.isResourceConvertible = _IConvertible.isResourceConvertible;\nexports.getResourceType = _resourceUtils.getResourceType;\nexports.isResource = _resourceUtils.isResource;\nexports.areSameResource = _resourceUtils.areSameResource;\nexports.createForeignResource = _resourceUtils.createForeignResource;\nexports.getRawResource = _resourceUtils.getRawResource;\nexports.getResourceData = _resourceUtils.getResourceData;\nexports.getResourceId = _resourceUtils.getResourceId;\nexports.getResourcePoolId = _resourceUtils.getResourcePoolId;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createRequestTarget = exports.sendRequest = exports.getChildrenCount = exports.getLastChild = exports.getChildren = exports.getRawPromise = exports.hadChildPromises = exports.getQueueCommands = exports.getQueueLength = exports.isPending = exports.getStatus = exports.setTemporary = exports.isTemporary = exports.toJSON = exports.destroy = exports.canBeDestroyed = exports.isActive = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = __webpack_require__(0);\n\nvar _resource = __webpack_require__(4);\n\nvar _RequestTargetInternals = __webpack_require__(16);\n\nvar _RequestTargetInternals2 = _interopRequireDefault(_RequestTargetInternals);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PROMISE_FIELD = Symbol('request.target::promise');\n\nvar getRequestPromise = function getRequestPromise(request) {\n  return request[_utils.TARGET_INTERNALS] || request[PROMISE_FIELD];\n};\n\n/**\r\n * The object that will be available on other side\r\n * @class DataAccessInterface.RequestTarget\r\n * @param _promise {Promise}\r\n * @param _requestHandlers {RequestHandlers}\r\n */\n\nvar RequestTarget = function () {\n  function RequestTarget(promise, requestHandlers) {\n    var _this = this;\n\n    _classCallCheck(this, RequestTarget);\n\n    this[_utils.TARGET_INTERNALS] = new _RequestTargetInternals2.default(this, promise, requestHandlers);\n\n    var handlePromise = function handlePromise(data) {\n      if (!(0, _resource.isResource)(data)) {\n        _this[PROMISE_FIELD] = promise;\n        delete _this[_utils.TARGET_INTERNALS];\n      }\n    };\n\n    promise.then(handlePromise, handlePromise);\n  }\n\n  _createClass(RequestTarget, [{\n    key: 'then',\n    value: function then() {\n      var target = getRequestPromise(this);\n      return target.then.apply(target, arguments);\n    }\n  }, {\n    key: 'catch',\n    value: function _catch() {\n      var target = getRequestPromise(this);\n      return target.catch.apply(target, arguments);\n    }\n  }]);\n\n  return RequestTarget;\n}();\n\nvar isActive = exports.isActive = function isActive(target) {\n  return target && target[_utils.TARGET_INTERNALS] ? target[_utils.TARGET_INTERNALS].isActive() : false;\n};\n\nvar canBeDestroyed = exports.canBeDestroyed = function canBeDestroyed(target) {\n  return target && target[_utils.TARGET_INTERNALS] ? target[_utils.TARGET_INTERNALS].canBeDestroyed() : false;\n};\n\nvar destroy = exports.destroy = function destroy(target) {\n  return target && target[_utils.TARGET_INTERNALS] ? target[_utils.TARGET_INTERNALS].destroy() : null;\n};\n\nvar toJSON = exports.toJSON = function toJSON(target) {\n  return target && target[_utils.TARGET_INTERNALS] ? target[_utils.TARGET_INTERNALS].toJSON() : null;\n};\n\nvar isTemporary = exports.isTemporary = function isTemporary(target) {\n  return target && target[_utils.TARGET_INTERNALS] && target[_utils.TARGET_INTERNALS].temporary;\n};\n\nvar setTemporary = exports.setTemporary = function setTemporary(target, value) {\n  if (target && target[_utils.TARGET_INTERNALS]) {\n    target[_utils.TARGET_INTERNALS].temporary = Boolean(value);\n  }\n};\n\nvar getStatus = exports.getStatus = function getStatus(target) {\n  return target && target[_utils.TARGET_INTERNALS] ? target[_utils.TARGET_INTERNALS].status : '';\n};\n\nvar isPending = exports.isPending = function isPending(value) {\n  return getStatus(value) === _utils.TargetStatus.PENDING;\n};\n\nvar getQueueLength = exports.getQueueLength = function getQueueLength(target) {\n  var list = target && target[_utils.TARGET_INTERNALS] ? target[_utils.TARGET_INTERNALS].queue : null;\n  return list ? list.length : 0;\n};\n\nvar getQueueCommands = exports.getQueueCommands = function getQueueCommands(target) {\n  var result = [];\n  var queue = target && target[_utils.TARGET_INTERNALS] ? target[_utils.TARGET_INTERNALS].queue : null;\n  if (queue) {\n    var length = queue.length;\n    // FIXME use Array.map()\n\n    for (var index = 0; index < length; index++) {\n      result.push(queue[index][0].type);\n    }\n  }\n  return result;\n};\n\nvar hadChildPromises = exports.hadChildPromises = function hadChildPromises(target) {\n  return Boolean(target && target[_utils.TARGET_INTERNALS] && target[_utils.TARGET_INTERNALS].hadChildPromises);\n};\n\nvar getRawPromise = exports.getRawPromise = function getRawPromise(target) {\n  return target && target[_utils.TARGET_INTERNALS] ? target[_utils.TARGET_INTERNALS].promise : null;\n};\n\nvar getRequestChildren = function getRequestChildren(target) {\n  return target && target[_utils.TARGET_INTERNALS] ? target[_utils.TARGET_INTERNALS].children : null;\n};\n\nvar getChildren = exports.getChildren = function getChildren(target) {\n  var list = getRequestChildren(target);\n  return list ? [].concat(_toConsumableArray(list)) : [];\n};\n\nvar getLastChild = exports.getLastChild = function getLastChild(target) {\n  var list = getRequestChildren(target);\n  return list && list.length ? list[list.length - 1] : null;\n};\n\nvar getChildrenCount = exports.getChildrenCount = function getChildrenCount(target) {\n  var list = getRequestChildren(target);\n  return list ? list.length : 0;\n};\n\n// FIXME Is it used? Why its similar to getChildrenCount()?\nvar sendRequest = exports.sendRequest = function sendRequest(target) {\n  var list = getRequestChildren(target);\n  return list ? list.length : 0;\n};\n\nvar createRequestTarget = exports.createRequestTarget = function createRequestTarget(promise, requestHandlers) {\n  return new RequestTarget(promise, requestHandlers);\n};\n\nexports.default = RequestTarget;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createRequestProxyFactory = exports.RequestProxyFactory = exports.createRequestHandlers = exports.RequestHandlers = exports.createRequestFactory = exports.RequestFactory = exports.createRequestTargetDecorator = exports.RequestTargetDecorator = exports.createRequestTarget = exports.RequestTarget = exports.RequestTargetInternals = exports.createRequestPackage = undefined;\n\nvar _utils = __webpack_require__(5);\n\nvar _RequestTargetInternals = __webpack_require__(16);\n\nvar _RequestTargetInternals2 = _interopRequireDefault(_RequestTargetInternals);\n\nvar _RequestTarget = __webpack_require__(2);\n\nvar _RequestTarget2 = _interopRequireDefault(_RequestTarget);\n\nvar _RequestTargetDecorator = __webpack_require__(18);\n\nvar _RequestTargetDecorator2 = _interopRequireDefault(_RequestTargetDecorator);\n\nvar _RequestFactory = __webpack_require__(19);\n\nvar _RequestFactory2 = _interopRequireDefault(_RequestFactory);\n\nvar _RequestHandlers = __webpack_require__(28);\n\nvar _RequestHandlers2 = _interopRequireDefault(_RequestHandlers);\n\nvar _RequestProxyFactory = __webpack_require__(29);\n\nvar _RequestProxyFactory2 = _interopRequireDefault(_RequestProxyFactory);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.createRequestPackage = _utils.createRequestPackage;\nexports.RequestTargetInternals = _RequestTargetInternals2.default;\nexports.RequestTarget = _RequestTarget2.default;\nexports.createRequestTarget = _RequestTarget.createRequestTarget;\nexports.RequestTargetDecorator = _RequestTargetDecorator2.default;\nexports.createRequestTargetDecorator = _RequestTargetDecorator.createRequestTargetDecorator;\nexports.RequestFactory = _RequestFactory2.default;\nexports.createRequestFactory = _RequestFactory.createRequestFactory;\nexports.RequestHandlers = _RequestHandlers2.default;\nexports.createRequestHandlers = _RequestHandlers.createRequestHandlers;\nexports.RequestProxyFactory = _RequestProxyFactory2.default;\nexports.createRequestProxyFactory = _RequestProxyFactory.createRequestProxyFactory;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ResourcePoolRegistryEvents = exports.createResourcePoolRegistry = exports.ResourcePoolRegistry = exports.ResourceConverterEvents = exports.createResourceConverter = exports.ResourceConverter = exports.createTargetResource = exports.TargetResource = exports.ResourcePoolEvents = exports.createResourcePool = exports.ResourcePool = undefined;\n\nvar _ResourcePool = __webpack_require__(9);\n\nvar _ResourcePool2 = _interopRequireDefault(_ResourcePool);\n\nvar _TargetResource = __webpack_require__(11);\n\nvar _TargetResource2 = _interopRequireDefault(_TargetResource);\n\nvar _ResourceConverter = __webpack_require__(25);\n\nvar _ResourceConverter2 = _interopRequireDefault(_ResourceConverter);\n\nvar _ResourcePoolRegistry = __webpack_require__(26);\n\nvar _ResourcePoolRegistry2 = _interopRequireDefault(_ResourcePoolRegistry);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.ResourcePool = _ResourcePool2.default;\nexports.createResourcePool = _ResourcePool.createResourcePool;\nexports.ResourcePoolEvents = _ResourcePool.ResourcePoolEvents;\nexports.TargetResource = _TargetResource2.default;\nexports.createTargetResource = _TargetResource.createTargetResource;\nexports.ResourceConverter = _ResourceConverter2.default;\nexports.createResourceConverter = _ResourceConverter.createResourceConverter;\nexports.ResourceConverterEvents = _ResourceConverter.ResourceConverterEvents;\nexports.ResourcePoolRegistry = _ResourcePoolRegistry2.default;\nexports.createResourcePoolRegistry = _ResourcePoolRegistry.createResourcePoolRegistry;\nexports.ResourcePoolRegistryEvents = _ResourcePoolRegistry.ResourcePoolRegistryEvents;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.filterRequestHandlers = exports.createRequestPackage = undefined;\n\nvar _createRequestPackage = __webpack_require__(23);\n\nvar _createRequestPackage2 = _interopRequireDefault(_createRequestPackage);\n\nvar _filterRequestHandlers = __webpack_require__(24);\n\nvar _filterRequestHandlers2 = _interopRequireDefault(_filterRequestHandlers);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.createRequestPackage = _createRequestPackage2.default;\nexports.filterRequestHandlers = _filterRequestHandlers2.default;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RequestTargetCommandFields = exports.RequestTargetCommandNames = exports.RequestTargetCommands = exports.Reserved = exports.ProxyCommandFields = exports.ProxyCommandNames = exports.ProxyCommands = exports.CommandHandlerFactory = exports.createDescriptors = exports.createCommandDescriptor = exports.CommandDescriptor = undefined;\n\nvar _CommandDescriptor = __webpack_require__(7);\n\nvar _CommandDescriptor2 = _interopRequireDefault(_CommandDescriptor);\n\nvar _CommandHandlerFactory = __webpack_require__(12);\n\nvar _CommandHandlerFactory2 = _interopRequireDefault(_CommandHandlerFactory);\n\nvar _ProxyCommands = __webpack_require__(8);\n\nvar _ProxyCommands2 = _interopRequireDefault(_ProxyCommands);\n\nvar _Reserved = __webpack_require__(27);\n\nvar _Reserved2 = _interopRequireDefault(_Reserved);\n\nvar _RequestTargetCommands = __webpack_require__(17);\n\nvar _RequestTargetCommands2 = _interopRequireDefault(_RequestTargetCommands);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.CommandDescriptor = _CommandDescriptor2.default;\nexports.createCommandDescriptor = _CommandDescriptor.createCommandDescriptor;\nexports.createDescriptors = _CommandDescriptor.createDescriptors;\nexports.CommandHandlerFactory = _CommandHandlerFactory2.default;\nexports.ProxyCommands = _ProxyCommands2.default;\nexports.ProxyCommandNames = _ProxyCommands.ProxyCommandNames;\nexports.ProxyCommandFields = _ProxyCommands.ProxyCommandFields;\nexports.Reserved = _Reserved2.default;\nexports.RequestTargetCommands = _RequestTargetCommands2.default;\nexports.RequestTargetCommandNames = _RequestTargetCommands.RequestTargetCommandNames;\nexports.RequestTargetCommandFields = _RequestTargetCommands.RequestTargetCommandFields;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createDescriptors = exports.descriptorGeneratorFactory = exports.addDescriptorTo = exports.createCommandDescriptor = undefined;\n\nvar _ProxyCommands = __webpack_require__(8);\n\nvar _ProxyCommands2 = _interopRequireDefault(_ProxyCommands);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CommandDescriptor = function CommandDescriptor(type, handler, name) {\n  _classCallCheck(this, CommandDescriptor);\n\n  this.name = name !== undefined ? name : type;\n  this.type = type;\n  this.handler = handler;\n  this.isTemporary = null;\n  this.cacheable = false;\n  this.virtual = false;\n  this.resourceType = null;\n};\n\nvar createCommandDescriptor = exports.createCommandDescriptor = function createCommandDescriptor(command, handler, name) {\n  var descriptor = new CommandDescriptor(command, handler, name);\n  // We can use Object.freeze(), it keeps class/constructor information\n  return Object.freeze(descriptor);\n};\n\nvar addDescriptorTo = exports.addDescriptorTo = function addDescriptorTo(descriptor, target) {\n  if (target instanceof Array) {\n    target.push(descriptor);\n  } else if (target) {\n    target[descriptor.name] = descriptor;\n  }\n};\n\nvar descriptorGeneratorFactory = exports.descriptorGeneratorFactory = function descriptorGeneratorFactory(command, name) {\n  return function (handler, target, isTemporary, resourceType, cacheable) {\n    var descriptor = new CommandDescriptor(command, handler, name);\n    descriptor.isTemporary = isTemporary;\n    descriptor.resourceType = resourceType;\n    descriptor.cacheable = cacheable;\n    addDescriptorTo(descriptor, target);\n    return Object.freeze(descriptor);\n  };\n};\n\nvar createDescriptors = exports.createDescriptors = function createDescriptors(handlers, target, isTemporary, resourceType, cacheable) {\n  var list = _ProxyCommands2.default.list;\n  var length = list.length;\n\n  target = target || {};\n  for (var index = 0; index < length; index++) {\n    var name = list[index];\n    var handler = handlers[name];\n    var field = _ProxyCommands.ProxyCommandFields[name];\n\n    if (handler instanceof Function) {\n      var descriptor = new CommandDescriptor(name, handler, field);\n      descriptor.isTemporary = isTemporary;\n      descriptor.resourceType = resourceType;\n      descriptor.cacheable = cacheable;\n      descriptor = Object.freeze(descriptor);\n\n      if (target instanceof Array) {\n        target.push(descriptor);\n      } else if (target) {\n        target[field] = descriptor;\n      }\n    }\n  }\n  return target;\n};\n\nexports.default = CommandDescriptor;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ProxyCommandFields = exports.ProxyCommandNames = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _CommandDescriptor = __webpack_require__(7);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ProxyCommandNames = exports.ProxyCommandNames = Object.freeze({\n  GET: 'get',\n  SET: 'set',\n  APPLY: 'apply',\n  DELETE_PROPERTY: 'deleteProperty'\n});\n\nvar ProxyCommandFields = exports.ProxyCommandFields = Object.freeze({\n  get: Symbol('proxy.commands::get'),\n  set: Symbol('proxy.commands::set'),\n  apply: Symbol('proxy.commands::apply'),\n  deleteProperty: Symbol('proxy.commands::deleteProperty')\n});\n\nvar ProxyCommands = function () {\n  function ProxyCommands() {\n    _classCallCheck(this, ProxyCommands);\n\n    this.createGETDescriptor = (0, _CommandDescriptor.descriptorGeneratorFactory)(ProxyCommandNames.GET, ProxyCommandFields.get);\n    this.createSETDescriptor = (0, _CommandDescriptor.descriptorGeneratorFactory)(ProxyCommandNames.SET, ProxyCommandFields.set);\n    this.createAPPLYDescriptor = (0, _CommandDescriptor.descriptorGeneratorFactory)(ProxyCommandNames.APPLY, ProxyCommandFields.apply);\n\n    Object.freeze(this);\n  }\n\n  _createClass(ProxyCommands, [{\n    key: 'list',\n    get: function get() {\n      return [ProxyCommandNames.GET, ProxyCommandNames.SET, ProxyCommandNames.APPLY, ProxyCommandNames.DELETE_PROPERTY];\n    }\n  }, {\n    key: 'required',\n    get: function get() {\n      return [ProxyCommandFields.GET, ProxyCommandFields.SET, ProxyCommandFields.APPLY];\n    }\n  }]);\n\n  return ProxyCommands;\n}();\n\nexports.default = new ProxyCommands();\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createResourcePool = exports.getDefaultValidTargets = exports.setValidTargets = exports.isValidTarget = exports.ResourcePoolEvents = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _eventDispatcher = __webpack_require__(10);\n\nvar _eventDispatcher2 = _interopRequireDefault(_eventDispatcher);\n\nvar _utils = __webpack_require__(0);\n\nvar _TargetResource = __webpack_require__(11);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ResourcePoolEvents = exports.ResourcePoolEvents = Object.freeze({\n  RESOURCE_ADDED: 'resourceAdded',\n  RESOURCE_REMOVED: 'resourceRemoved',\n  POOL_CLEAR: 'poolClear',\n  POOL_CLEARED: 'poolCleared',\n  POOL_DESTROYED: 'poolDestroyed'\n});\n\nvar MAP_FIELD = Symbol('ResourcePool::map');\n\nvar validTargets = {};\n\nvar isValidTarget = exports.isValidTarget = function isValidTarget(target) {\n  return !(0, _utils.isResource)(target) && Boolean(validTargets[typeof target === 'undefined' ? 'undefined' : _typeof(target)]);\n};\n\nvar setValidTargets = exports.setValidTargets = function setValidTargets(list) {\n  validTargets = {};\n  var length = list.length;\n\n  for (var index = 0; index < length; index++) {\n    validTargets[list[index]] = true;\n  }\n};\n\nvar getDefaultValidTargets = exports.getDefaultValidTargets = function getDefaultValidTargets() {\n  return ['object', 'function'];\n};\n\nvar ResourcePool = function (_EventDispatcher) {\n  _inherits(ResourcePool, _EventDispatcher);\n\n  function ResourcePool() {\n    _classCallCheck(this, ResourcePool);\n\n    var _this = _possibleConstructorReturn(this, (ResourcePool.__proto__ || Object.getPrototypeOf(ResourcePool)).call(this));\n\n    _this[MAP_FIELD] = new Map();\n\n    Object.defineProperties(_this, {\n      id: {\n        value: (0, _utils.getId)()\n      }\n    });\n    return _this;\n  }\n\n  _createClass(ResourcePool, [{\n    key: 'set',\n    value: function set(target, type) {\n      var link = null;\n      if (isValidTarget(target)) {\n        if (this[MAP_FIELD].has(target)) {\n          link = this[MAP_FIELD].get(target);\n        } else {\n          link = (0, _TargetResource.createTargetResource)(this, target, type || (typeof target === 'undefined' ? 'undefined' : _typeof(target)));\n          this[MAP_FIELD].set(link.id, link);\n          this[MAP_FIELD].set(target, link);\n          if (this.hasEventListener(ResourcePoolEvents.RESOURCE_ADDED)) {\n            this.dispatchEvent(ResourcePoolEvents.RESOURCE_ADDED, link);\n          }\n        }\n      }\n      return link;\n    }\n  }, {\n    key: 'has',\n    value: function has(target) {\n      return this[MAP_FIELD].has(target);\n    }\n  }, {\n    key: 'get',\n    value: function get(target) {\n      return this[MAP_FIELD].get(target);\n    }\n  }, {\n    key: 'remove',\n    value: function remove(target) {\n      var link = this[MAP_FIELD].get(target);\n      if (link) {\n        this[MAP_FIELD].delete(link.id);\n        this[MAP_FIELD].delete(link.resource);\n        if (this.hasEventListener(ResourcePoolEvents.RESOURCE_REMOVED)) {\n          this.dispatchEvent(ResourcePoolEvents.RESOURCE_REMOVED, link);\n        }\n        link.destroy();\n      }\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      if (this.hasEventListener(ResourcePoolEvents.POOL_CLEAR)) {\n        this.dispatchEvent(ResourcePoolEvents.POOL_CLEAR, this);\n      }\n      var key = void 0;\n      var keys = this[MAP_FIELD].keys();\n      // FIXME update to for...of loop when it comes to browsers\n      while (!(key = keys.next()).done) {\n        if (typeof key.value === 'string') {\n          var link = this[MAP_FIELD].get(key.value);\n          link.destroy();\n        }\n      }\n      this[MAP_FIELD].clear();\n      if (this.hasEventListener(ResourcePoolEvents.POOL_CLEARED)) {\n        this.dispatchEvent(ResourcePoolEvents.POOL_CLEARED, this);\n      }\n    }\n  }, {\n    key: 'isActive',\n    value: function isActive() {\n      return Boolean(this[MAP_FIELD]);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this.clear();\n      // intentionally make it not usable after its destroyed\n      delete this[MAP_FIELD];\n      if (this.hasEventListener(ResourcePoolEvents.POOL_DESTROYED)) {\n        // FIXME why for second parameter?\n        this.dispatchEvent(ResourcePoolEvents.POOL_DESTROYED, this);\n      }\n    }\n  }]);\n\n  return ResourcePool;\n}(_eventDispatcher2.default);\n\nvar createResourcePool = exports.createResourcePool = function createResourcePool() {\n  return new ResourcePool();\n};\n\nsetValidTargets(getDefaultValidTargets());\n\nexports.default = ResourcePool;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n(function webpackUniversalModuleDefinition(root, factory) {\r\n\tif(true)\r\n\t\tmodule.exports = factory();\r\n\telse if(typeof define === 'function' && define.amd)\r\n\t\tdefine([], factory);\r\n\telse if(typeof exports === 'object')\r\n\t\texports[\"EventDispatcher\"] = factory();\r\n\telse\r\n\t\troot[\"EventDispatcher\"] = factory();\r\n})(this, function() {\r\nreturn /******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {};\r\n/******/\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n/******/\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId]) {\r\n/******/ \t\t\treturn installedModules[moduleId].exports;\r\n/******/ \t\t}\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\ti: moduleId,\r\n/******/ \t\t\tl: false,\r\n/******/ \t\t\texports: {}\r\n/******/ \t\t};\r\n/******/\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n/******/\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.l = true;\r\n/******/\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n/******/\r\n/******/\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__webpack_require__.m = modules;\r\n/******/\r\n/******/ \t// expose the module cache\r\n/******/ \t__webpack_require__.c = installedModules;\r\n/******/\r\n/******/ \t// define getter function for harmony exports\r\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\r\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\r\n/******/ \t\t\tObject.defineProperty(exports, name, {\r\n/******/ \t\t\t\tconfigurable: false,\r\n/******/ \t\t\t\tenumerable: true,\r\n/******/ \t\t\t\tget: getter\r\n/******/ \t\t\t});\r\n/******/ \t\t}\r\n/******/ \t};\r\n/******/\r\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\r\n/******/ \t__webpack_require__.n = function(module) {\r\n/******/ \t\tvar getter = module && module.__esModule ?\r\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\r\n/******/ \t\t\tfunction getModuleExports() { return module; };\r\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\r\n/******/ \t\treturn getter;\r\n/******/ \t};\r\n/******/\r\n/******/ \t// Object.prototype.hasOwnProperty.call\r\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\r\n/******/\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__webpack_require__.p = \"http://localhost:8081/dist/\";\r\n/******/\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ([\r\n/* 0 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.Event = undefined;\r\n\r\nvar _EventDispatcher = __webpack_require__(1);\r\n\r\nvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\nexports.default = _EventDispatcher2.default;\r\nexports.Event = _EventDispatcher.Event;\r\n\r\n/***/ }),\r\n/* 1 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\n\r\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar hasOwnProp = function hasOwnProp(target, name) {\r\n  return Object.prototype.hasOwnProperty.call(target, name);\r\n}; /**\r\n    * Created by Oleg Galaburda on 09.02.16.\r\n    * \r\n    */\r\n\r\nvar Event = exports.Event = function () {\r\n  function Event(type, data) {\r\n    _classCallCheck(this, Event);\r\n\r\n    this.type = type;\r\n    this.data = data || null;\r\n    this.defaultPrevented = false;\r\n  }\r\n\r\n  _createClass(Event, [{\r\n    key: 'toJSON',\r\n    value: function toJSON() {\r\n      return { type: this.type, data: this.data };\r\n    }\r\n  }, {\r\n    key: 'isDefaultPrevented',\r\n    value: function isDefaultPrevented() {\r\n      return this.defaultPrevented;\r\n    }\r\n  }, {\r\n    key: 'preventDefault',\r\n    value: function preventDefault() {\r\n      this.defaultPrevented = true;\r\n    }\r\n  }]);\r\n\r\n  return Event;\r\n}();\r\n\r\nvar ListenersRunner = function () {\r\n  function ListenersRunner(listeners, onStopped, onComplete) {\r\n    var _this = this;\r\n\r\n    _classCallCheck(this, ListenersRunner);\r\n\r\n    this.index = -1;\r\n    this.immediatelyStopped = false;\r\n\r\n    this.stopImmediatePropagation = function () {\r\n      _this.immediatelyStopped = true;\r\n    };\r\n\r\n    this.listeners = listeners;\r\n    this.onStopped = onStopped;\r\n    this.onComplete = onComplete;\r\n  }\r\n\r\n  _createClass(ListenersRunner, [{\r\n    key: 'run',\r\n    value: function run(event, target) {\r\n      var listener = void 0;\r\n      var listeners = this.listeners;\r\n\r\n      this.augmentEvent(event);\r\n      // TODO this has to be handled in separate object ListenersRunner that should be\r\n      // created for each call() call and asked for index validation on each listener remove.\r\n      for (this.index = 0; this.index < listeners.length; this.index++) {\r\n        if (this.immediatelyStopped) break;\r\n        listener = listeners[this.index];\r\n        listener.call(target, event);\r\n      }\r\n      this.clearEvent(event);\r\n      this.onComplete(this);\r\n    }\r\n  }, {\r\n    key: 'augmentEvent',\r\n    value: function augmentEvent(eventObject) {\r\n      var event = eventObject;\r\n      event.stopPropagation = this.onStopped;\r\n      event.stopImmediatePropagation = this.stopImmediatePropagation;\r\n    }\r\n\r\n    /* eslint class-methods-use-this: \"off\" */\r\n\r\n  }, {\r\n    key: 'clearEvent',\r\n    value: function clearEvent(eventObject) {\r\n      var event = eventObject;\r\n      delete event.stopPropagation;\r\n      delete event.stopImmediatePropagation;\r\n    }\r\n  }, {\r\n    key: 'listenerRemoved',\r\n    value: function listenerRemoved(listeners, index) {\r\n      if (listeners === this.listeners && index <= this.index) {\r\n        this.index--;\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return ListenersRunner;\r\n}();\r\n\r\nvar EventListeners = function () {\r\n  function EventListeners() {\r\n    var _this2 = this;\r\n\r\n    _classCallCheck(this, EventListeners);\r\n\r\n    this._listeners = {};\r\n    this._runners = [];\r\n\r\n    this.removeRunner = function (runner) {\r\n      _this2._runners.splice(_this2._runners.indexOf(runner), 1);\r\n    };\r\n  }\r\n  /**\r\n   * key - event Type\r\n   * value - hash of priorities\r\n   *    key - priority\r\n   *    value - list of handlers\r\n   * @type {Object<string, Object.<string, Array<number, Function>>>}\r\n   * @private\r\n   */\r\n\r\n\r\n  _createClass(EventListeners, [{\r\n    key: 'createList',\r\n    value: function createList(eventType, priorityOpt) {\r\n      var priority = parseInt(priorityOpt, 10);\r\n      var target = this.getPrioritiesByKey(eventType);\r\n      var key = String(priority);\r\n      var value = void 0;\r\n      if (hasOwnProp(target, key)) {\r\n        value = target[key];\r\n      } else {\r\n        value = [];\r\n        target[key] = value;\r\n      }\r\n      return value;\r\n    }\r\n  }, {\r\n    key: 'getPrioritiesByKey',\r\n    value: function getPrioritiesByKey(key) {\r\n      var value = void 0;\r\n      if (hasOwnProp(this._listeners, key)) {\r\n        value = this._listeners[key];\r\n      } else {\r\n        value = {};\r\n        this._listeners[key] = value;\r\n      }\r\n      return value;\r\n    }\r\n  }, {\r\n    key: 'add',\r\n    value: function add(eventType, handler, priority) {\r\n      var handlers = this.createList(eventType, priority);\r\n      if (handlers.indexOf(handler) < 0) {\r\n        handlers.push(handler);\r\n      }\r\n    }\r\n  }, {\r\n    key: 'has',\r\n    value: function has(eventType) {\r\n      var priority = void 0;\r\n      var result = false;\r\n      var priorities = this.getPrioritiesByKey(eventType);\r\n      if (priorities) {\r\n        for (priority in priorities) {\r\n          if (hasOwnProp(priorities, priority)) {\r\n            result = true;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n  }, {\r\n    key: 'remove',\r\n    value: function remove(eventType, handler) {\r\n      var _this3 = this;\r\n\r\n      var priorities = this.getPrioritiesByKey(eventType);\r\n      if (priorities) {\r\n        var list = Object.getOwnPropertyNames(priorities);\r\n        var length = list.length;\r\n\r\n        var _loop = function _loop(index) {\r\n          var priority = list[index];\r\n          var handlers = priorities[priority];\r\n          var handlerIndex = handlers.indexOf(handler);\r\n          if (handlerIndex >= 0) {\r\n            handlers.splice(handlerIndex, 1);\r\n            if (!handlers.length) {\r\n              delete priorities[priority];\r\n            }\r\n            _this3._runners.forEach(function (runner) {\r\n              runner.listenerRemoved(handlers, handlerIndex);\r\n            });\r\n          }\r\n        };\r\n\r\n        for (var index = 0; index < length; index++) {\r\n          _loop(index);\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: 'removeAll',\r\n    value: function removeAll(eventType) {\r\n      delete this._listeners[eventType];\r\n    }\r\n  }, {\r\n    key: 'createRunner',\r\n    value: function createRunner(handlers, onStopped) {\r\n      var runner = new ListenersRunner(handlers, onStopped, this.removeRunner);\r\n      this._runners.push(runner);\r\n      return runner;\r\n    }\r\n  }, {\r\n    key: 'call',\r\n    value: function call(event, target) {\r\n      var priorities = this.getPrioritiesByKey(event.type);\r\n      var stopped = false;\r\n      var stopPropagation = function stopPropagation() {\r\n        stopped = true;\r\n      };\r\n      if (priorities) {\r\n        // getOwnPropertyNames() or keys()?\r\n        var list = Object.getOwnPropertyNames(priorities).sort(function (a, b) {\r\n          return a - b;\r\n        });\r\n        var length = list.length;\r\n\r\n        for (var index = 0; index < length; index++) {\r\n          if (stopped) break;\r\n          var _handlers = priorities[list[index]];\r\n          // in case if all handlers of priority were removed while event\r\n          // was dispatched and handlers become undefined.\r\n          if (_handlers) {\r\n            var _runner = this.createRunner(_handlers, stopPropagation);\r\n            _runner.run(event, target);\r\n            if (_runner.immediatelyStopped) break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return EventListeners;\r\n}();\r\n\r\nvar EventDispatcher = function () {\r\n  function EventDispatcher(eventPreprocessor) {\r\n    var noInit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\r\n\r\n    _classCallCheck(this, EventDispatcher);\r\n\r\n    if (!noInit) {\r\n      this.initialize(eventPreprocessor);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n\r\n\r\n  _createClass(EventDispatcher, [{\r\n    key: 'initialize',\r\n    value: function initialize(eventPreprocessor) {\r\n      this._eventPreprocessor = eventPreprocessor;\r\n      this._listeners = new EventListeners();\r\n    }\r\n  }, {\r\n    key: 'addEventListener',\r\n    value: function addEventListener(eventType, listener) {\r\n      var priority = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\r\n\r\n      this._listeners.add(eventType, listener, -priority || 0);\r\n    }\r\n  }, {\r\n    key: 'hasEventListener',\r\n    value: function hasEventListener(eventType) {\r\n      return this._listeners.has(eventType);\r\n    }\r\n  }, {\r\n    key: 'removeEventListener',\r\n    value: function removeEventListener(eventType, listener) {\r\n      this._listeners.remove(eventType, listener);\r\n    }\r\n  }, {\r\n    key: 'removeAllEventListeners',\r\n    value: function removeAllEventListeners(eventType) {\r\n      this._listeners.removeAll(eventType);\r\n    }\r\n  }, {\r\n    key: 'dispatchEvent',\r\n    value: function dispatchEvent(event, data) {\r\n      var eventObject = EventDispatcher.getEvent(event, data);\r\n      if (this._eventPreprocessor) {\r\n        eventObject = this._eventPreprocessor.call(this, eventObject);\r\n      }\r\n      this._listeners.call(eventObject);\r\n    }\r\n  }], [{\r\n    key: 'isObject',\r\n    value: function isObject(value) {\r\n      return (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value !== null;\r\n    }\r\n  }, {\r\n    key: 'getEvent',\r\n    value: function getEvent(eventOrType, optionalData) {\r\n      var event = eventOrType;\r\n      if (!EventDispatcher.isObject(eventOrType)) {\r\n        event = new EventDispatcher.Event(String(eventOrType), optionalData);\r\n      }\r\n      return event;\r\n    }\r\n  }, {\r\n    key: 'create',\r\n    value: function create(eventPreprocessor) {\r\n      return new EventDispatcher(eventPreprocessor);\r\n    }\r\n\r\n    /* eslint no-undef: \"off\" */\r\n\r\n  }]);\r\n\r\n  return EventDispatcher;\r\n}();\r\n\r\nEventDispatcher.Event = Event;\r\n\r\nexports.default = EventDispatcher;\r\n\r\n/***/ })\r\n/******/ ]);\r\n});\r\n//# sourceMappingURL=event-dispatcher.js.map\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createTargetResource = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = __webpack_require__(0);\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar getPoolId = function getPoolId(pool) {\n  return pool ? pool.id : null;\n};\n\n/**\r\n * @exports TargetResource\r\n */\n\nvar TargetResource = function () {\n  function TargetResource(pool, resource, type, id) {\n    var _this = this,\n        _Object$definePropert;\n\n    _classCallCheck(this, TargetResource);\n\n    this.toJSON = function () {\n      return _defineProperty({}, _utils.TARGET_DATA, {\n        id: _this.id,\n        type: _this.type,\n        poolId: _this.poolId\n      });\n    };\n\n    Object.defineProperties(this, (_Object$definePropert = {}, _defineProperty(_Object$definePropert, _utils.TARGET_INTERNALS, {\n      value: {\n        pool: pool,\n        resource: resource,\n        type: type,\n        id: id,\n        active: true,\n        poolId: getPoolId(pool)\n      }\n    }), _defineProperty(_Object$definePropert, _utils.TARGET_DATA, {\n      get: this.toJSON\n    }), _Object$definePropert));\n  }\n\n  _createClass(TargetResource, [{\n    key: 'destroy',\n    value: function destroy() {\n      var id = this.id,\n          pool = this.pool;\n\n      var internals = this[_utils.TARGET_INTERNALS];\n\n      if (!internals.active) {\n        return;\n      }\n\n      internals.active = false;\n      pool.remove(id);\n\n      for (var name in internals) {\n        delete internals[name];\n      }\n    }\n  }, {\n    key: 'active',\n    get: function get() {\n      return Boolean(this[_utils.TARGET_INTERNALS].active);\n    }\n  }, {\n    key: 'resource',\n    get: function get() {\n      return this[_utils.TARGET_INTERNALS].resource;\n    }\n  }, {\n    key: 'type',\n    get: function get() {\n      return this[_utils.TARGET_INTERNALS].type || _typeof(this[_utils.TARGET_INTERNALS].resource);\n    }\n  }, {\n    key: 'id',\n    get: function get() {\n      return this[_utils.TARGET_INTERNALS].id;\n    }\n  }, {\n    key: 'poolId',\n    get: function get() {\n      return this[_utils.TARGET_INTERNALS].poolId;\n    }\n  }]);\n\n  return TargetResource;\n}();\n\nvar createTargetResource = exports.createTargetResource = function createTargetResource(pool, resource, resourceType, id) {\n  return new TargetResource(pool, resource, resourceType, id || (0, _utils.getId)());\n};\n\nexports.default = TargetResource;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = __webpack_require__(0);\n\nvar _request = __webpack_require__(3);\n\nvar _RequestTarget = __webpack_require__(2);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar createCommandHandlerFor = function createCommandHandlerFor(factoryWrapper, propertyName, commandType, isTemporary, cacheable) {\n  var factory = factoryWrapper.factory,\n      checkState = factoryWrapper.checkState,\n      getChildRequest = factoryWrapper.getChildRequest;\n\n\n  function commandHandler(command, value) {\n    var result = void 0;\n    var promise = void 0;\n    if (this[_utils.TARGET_INTERNALS]) {\n      for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        args[_key - 2] = arguments[_key];\n      }\n\n      var pack = (0, _request.createRequestPackage)(commandType, [command, value].concat(args), this[_utils.TARGET_INTERNALS].id);\n      // FIXME Explicitly pass scope\n      var request = getChildRequest(propertyName, pack, cacheable);\n      result = request.child;\n      if (request.deferred) {\n        promise = this[_utils.TARGET_INTERNALS].sendRequest(propertyName, pack, request.deferred, result);\n        if (promise) {\n          if (isTemporary) {\n            // FIXME isTemporary must be called before `result` was resolved\n            // FIXME remove default `isTemporary`, if not defined just skip\n            checkState(promise, isTemporary, this, result, pack);\n          }\n        } else {\n          result = null;\n          promise = Promise.reject(new Error('Initial request failed and didn\\'t result in promise.'));\n        }\n      }\n    } else {\n      promise = Promise.reject(new Error('Target object is not a resource, so cannot be used for calls.'));\n    }\n    return result || factory.create(promise);\n  }\n\n  return commandHandler;\n};\n\nvar CommandHandlerFactory = function () {\n  function CommandHandlerFactory() {\n    var _this = this;\n\n    var factory = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n    _classCallCheck(this, CommandHandlerFactory);\n\n    this.members = new Map();\n    this.factory = null;\n\n    this.getChildRequest = function (propertyName, pack, cacheable) {\n      var child = void 0;\n      var deferred = void 0;\n\n      if (cacheable) {\n        child = _this.factory.getCached(propertyName, pack);\n      }\n\n      if (!child) {\n        deferred = (0, _utils.createDeferred)();\n        if (cacheable) {\n          child = _this.factory.createCached(deferred.promise, propertyName, pack);\n        } else {\n          child = _this.factory.create(deferred.promise, propertyName, pack);\n        }\n      }\n      return { child: child, deferred: deferred };\n    };\n\n    this.checkState = function (promise, isTemporaryFn, parentRequest, childRequest, pack) {\n      if (promise) {\n        promise.then(function (data) {\n          var isTemporary = Boolean(isTemporaryFn(parentRequest, childRequest, pack, data));\n          (0, _RequestTarget.setTemporary)(childRequest, isTemporary);\n        });\n      }\n    };\n\n    this.setFactory(factory);\n  }\n\n  /**\r\n   * @param {CommandDescriptor} descriptor\r\n   * @returns {Function}\r\n   * @private\r\n   */\n\n\n  _createClass(CommandHandlerFactory, [{\n    key: 'get',\n    value: function get(descriptor) {\n      var propertyName = descriptor.name;\n      if (!this.members.has(propertyName)) {\n        this.members.set(propertyName, this.create(descriptor.name, descriptor.type, descriptor.isTemporary, descriptor.cacheable));\n      }\n      return this.members.get(propertyName);\n    }\n  }, {\n    key: 'create',\n    value: function create(propertyName, commandType, isTemporary, cacheable) {\n      return createCommandHandlerFor(this, propertyName, commandType, isTemporary, cacheable);\n    }\n  }, {\n    key: 'setFactory',\n    value: function setFactory(factory) {\n      this.factory = factory;\n    }\n  }]);\n\n  return CommandHandlerFactory;\n}();\n\nexports.default = CommandHandlerFactory;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DefaultResourcePool = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _ResourcePool2 = __webpack_require__(9);\n\nvar _ResourcePool3 = _interopRequireDefault(_ResourcePool2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar DefaultResourcePool = exports.DefaultResourcePool = function (_ResourcePool) {\n  _inherits(DefaultResourcePool, _ResourcePool);\n\n  function DefaultResourcePool() {\n    _classCallCheck(this, DefaultResourcePool);\n\n    return _possibleConstructorReturn(this, (DefaultResourcePool.__proto__ || Object.getPrototypeOf(DefaultResourcePool)).apply(this, arguments));\n  }\n\n  _createClass(DefaultResourcePool, [{\n    key: 'destroy',\n\n    // INFO default ResourcePool should not be destroyable;\n    value: function destroy() {\n      throw new Error('Default ResourcePool cannot be destroyed.');\n    }\n  }]);\n\n  return DefaultResourcePool;\n}(_ResourcePool3.default);\n\nvar defaultResourcePool = new DefaultResourcePool();\n\nexports.default = defaultResourcePool;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isResourceConvertible = undefined;\n\nvar _resourceUtils = __webpack_require__(15);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * Interface for all resource types, these will be treated as resources automatically\r\n * @interface\r\n * @alias DataAccessInterface.IConvertible\r\n */\nvar IConvertible = function IConvertible() {\n  _classCallCheck(this, IConvertible);\n};\n\nvar isResourceConvertible = exports.isResourceConvertible = function isResourceConvertible(data) {\n  return (0, _resourceUtils.isResource)(data) || typeof data === 'function' || data instanceof IConvertible;\n};\n\nexports.default = IConvertible;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.areSameResource = exports.createForeignResource = exports.getResourceData = exports.getRawResource = exports.getResourceType = exports.getResourcePoolId = exports.getResourceId = exports.isResource = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _utils = __webpack_require__(1);\n\nvar _request = __webpack_require__(3);\n\nvar _defaultResourcePool = __webpack_require__(13);\n\nvar _defaultResourcePool2 = _interopRequireDefault(_defaultResourcePool);\n\nvar _IConvertible = __webpack_require__(14);\n\nvar _IConvertible2 = _interopRequireDefault(_IConvertible);\n\nvar _TargetResource = __webpack_require__(11);\n\nvar _TargetResource2 = _interopRequireDefault(_TargetResource);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar isResource = exports.isResource = function isResource(object) {\n  return object instanceof _TargetResource2.default || object instanceof _request.RequestTarget || object && (\n  // this case for RequestTargets and TargetResources which contain\n  // data in TARGET_INTERNALS Symbol\n  // We check for their types above but in cases when Proxies are enabled\n  // their type will be Function and verification will come to this case\n  _typeof(object[_utils.TARGET_INTERNALS]) === 'object' ||\n  // this case for RAW resources passed via JSON conversion,\n  // look like {'resource::data': {id: '1111', poolId: '22222'}}\n  _typeof(object[_utils.TARGET_DATA]) === 'object');\n};\n\nvar getResourceId = exports.getResourceId = function getResourceId(object) {\n  // if (object instanceof TargetResource || object instanceof RequestTarget) {\n  if (_typeof(object[_utils.TARGET_INTERNALS]) === 'object') {\n    return object[_utils.TARGET_INTERNALS];\n  } else if (isResource(object)) {\n    return object[_utils.TARGET_DATA].id;\n  }\n\n  return null;\n};\n\nvar getResourcePoolId = exports.getResourcePoolId = function getResourcePoolId(object) {\n  if (_typeof(object[_utils.TARGET_INTERNALS]) === 'object') {\n    return object[_utils.TARGET_INTERNALS].poolId;\n  } else if (isResource(object)) {\n    return object[_utils.TARGET_DATA].poolId;\n  }\n\n  return null;\n};\n\nvar getResourceType = exports.getResourceType = function getResourceType(object) {\n  if (_typeof(object[_utils.TARGET_INTERNALS]) === 'object') {\n    return object[_utils.TARGET_INTERNALS].type;\n  } else if (isResource(object)) {\n    return object[_utils.TARGET_DATA].type;\n  }\n\n  return null;\n};\n\nvar getRawResource = exports.getRawResource = function getRawResource(object, pool) {\n  pool = pool || _defaultResourcePool2.default;\n\n  if (object instanceof _TargetResource2.default) {\n    return object.toJSON();\n  } else if (_typeof(object[_utils.TARGET_INTERNALS]) === 'object') {\n    return _request.RequestTarget.toJSON(object);\n  } else if (object instanceof _IConvertible2.default || typeof object === 'function') {\n    return pool.set(object).toJSON();\n  } else if (isResource(object)) {\n    return object;\n  }\n\n  return null;\n};\n\nvar getResourceData = exports.getResourceData = function getResourceData(object) {\n  var data = getRawResource(object);\n  return data ? data[_utils.TARGET_DATA] : null;\n};\n\nvar createForeignResource = exports.createForeignResource = function createForeignResource(type) {\n  var resource = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  resource[_utils.TARGET_DATA] = {\n    id: 'foreign-id-' + (0, _utils.getId)(),\n    type: type || (typeof resource === 'undefined' ? 'undefined' : _typeof(resource)),\n    poolId: 'foreign-poolId-' + (0, _utils.getId)()\n  };\n\n  return resource;\n};\n\nvar areSameResource = exports.areSameResource = function areSameResource(resource1, resource2) {\n  return isResource(resource1) && isResource(resource2) && getResourceId(resource1) === getResourceId(resource2) && getResourcePoolId(resource1) === getResourcePoolId(resource2);\n};\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = __webpack_require__(0);\n\nvar _utils2 = __webpack_require__(5);\n\nvar _utils3 = __webpack_require__(1);\n\nvar _RequestTarget = __webpack_require__(2);\n\nvar _RequestTargetCommands = __webpack_require__(17);\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * @exports RequestTargetInternals\r\n */\n\nvar RequestTargetInternals = function () {\n\n  /**\r\n   * @class RequestTargetInternals\r\n   * @param {DataAccessInterface.RequestTarget} _requestTarget\r\n   * @param {Promise} _promise\r\n   * @param {RequestHandlers} _requestHandlers\r\n   * @mixin Promise\r\n   */\n  function RequestTargetInternals(requestTarget, promise, requestHandlers) {\n    var _this = this;\n\n    _classCallCheck(this, RequestTargetInternals);\n\n    this.handlePromiseResolve = function (value) {\n      _this.status = _utils.TargetStatus.RESOLVED;\n      if ((0, _utils3.isResource)(value)) {\n        _this.link = (0, _utils3.getResourceData)(value);\n        /*\r\n         INFO Sending \"this\" as result of resolve() handler, causes infinite\r\n         loop of this.then(), so I've used wrapper object\r\n        */\n        // FIXME Check if Proxy wrapper will work with promise result, probably not\n        value = { target: _this.requestTarget };\n        _this.sendQueue();\n        /*\r\n        In theory, at time of these lines executing, \"temporary\" property should be\r\n        already set via _commandHandler() set from RequestTargetDecorator\r\n         */\n        if (_this.temporary) {\n          _this.destroy();\n        }\n      } else {\n        // else { value must be passed as is }\n        _this.rejectQueue('Target of the call is not a resource and call cannot be sent.');\n      }\n      _this.deferred.resolve(value);\n      delete _this.deferred;\n    };\n\n    this.handlePromiseReject = function (value) {\n      _this.status = _utils.TargetStatus.REJECTED;\n      _this.rejectQueue('Target of the call was rejected and call cannot be sent.');\n      _this.deferred.reject(value);\n      delete _this.deferred;\n    };\n\n    this.requestHandlers = requestHandlers;\n    this.requestTarget = requestTarget;\n    this.link = {};\n    // INFO this should be not initialized i.e. keep it undefined, this will be checked later\n    this.temporary;\n    this.hadChildPromises = false;\n    this.status = _utils.TargetStatus.PENDING;\n    this.queue = [];\n    this.children = [];\n    this.deferred = (0, _utils.createDeferred)();\n    this.promise = this.deferred.promise.then(this.handlePromiseResolve, this.handlePromiseReject);\n  }\n\n  _createClass(RequestTargetInternals, [{\n    key: 'sendQueue',\n    value: function sendQueue() {\n      while (this.queue && this.queue.length) {\n        var _queue$shift = this.queue.shift(),\n            _queue$shift2 = _slicedToArray(_queue$shift, 4),\n            name = _queue$shift2[0],\n            pack = _queue$shift2[1],\n            deferred = _queue$shift2[2],\n            child = _queue$shift2[3];\n\n        pack.target = this.link.id;\n        this.handleRequest(name, pack, deferred, child);\n      }\n      this.queue = null;\n    }\n  }, {\n    key: 'rejectQueue',\n    value: function rejectQueue(message) {\n      var error = new Error(message || 'This request was rejected before sending.');\n      while (this.queue && this.queue.length) {\n        /**\r\n         * @type {Array.<string, CommandDataPack, DataAccessInterface.Deferred>}\r\n         */\n        // FIXME [string, {type:string, cmd:string, value:*, target:string}, Deferred]\n        var _queue$shift3 = this.queue.shift(),\n            _queue$shift4 = _slicedToArray(_queue$shift3, 3),\n            deferred = _queue$shift4[2];\n\n        deferred.reject(error);\n      }\n      this.queue = null;\n    }\n  }, {\n    key: 'sendRequest',\n    value: function sendRequest(name, pack, deferred, child) {\n      var promise = null;\n\n      if (this.requestHandlers.hasHandler(name)) {\n        promise = this.applyRequest(name, pack, deferred || (0, _utils.createDeferred)(), child);\n      } else {\n        throw new Error('Request handler for \"' + name + '\" is not registered.');\n      }\n\n      if (child) {\n        this.registerChild(child);\n      }\n\n      return promise;\n    }\n  }, {\n    key: 'addToQueue',\n    value: function addToQueue(name, pack, deferred, child) {\n      this.queue.push([name, pack, deferred, child]);\n    }\n  }, {\n    key: 'applyRequest',\n    value: function applyRequest(name, pack, deferred, child) {\n      var promise = deferred.promise;\n\n\n      switch (this.status) {\n        case _utils.TargetStatus.PENDING:\n          this.addToQueue(name, pack, deferred, child);\n          break;\n        case _utils.TargetStatus.REJECTED:\n          promise = Promise.reject(new Error('Target object was rejected and cannot be used for calls.'));\n          break;\n        case _utils.TargetStatus.DESTROYED:\n          promise = Promise.reject(new Error('Target object was destroyed and cannot be used for calls.'));\n          break;\n        case _utils.TargetStatus.RESOLVED:\n          this.handleRequest(name, pack, deferred, child);\n          break;\n        default:\n          break;\n      }\n\n      return promise;\n    }\n  }, {\n    key: 'handleRequest',\n    value: function handleRequest(name, pack, deferred, child) {\n      this.requestHandlers.handle(this.requestTarget, name, pack, deferred, child);\n    }\n  }, {\n    key: 'registerChild',\n    value: function registerChild(childRequestTarget) {\n      var _this2 = this;\n\n      var handleChildRequest = function handleChildRequest() {\n        if (_this2.children) {\n          var index = _this2.children.indexOf(childRequestTarget);\n          if (index >= 0) {\n            _this2.children.splice(index, 1);\n          }\n        }\n      };\n\n      this.children.push(childRequestTarget);\n      (0, _RequestTarget.getRawPromise)(childRequestTarget).then(handleChildRequest, handleChildRequest);\n    }\n  }, {\n    key: 'isActive',\n    value: function isActive() {\n      return this.status === _utils.TargetStatus.PENDING || this.status === _utils.TargetStatus.RESOLVED;\n    }\n  }, {\n    key: 'canBeDestroyed',\n    value: function canBeDestroyed() {\n      return this.status === _utils.TargetStatus.RESOLVED || this.status === _utils.TargetStatus.REJECTED;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      var promise = null;\n      if (this.canBeDestroyed()) {\n        // INFO I should not clear children list, since they are pending and requests already sent.\n        if (this.status === _utils.TargetStatus.RESOLVED) {\n          promise = this.sendRequest(_RequestTargetCommands.RequestTargetCommandFields.DESTROY, (0, _utils2.createRequestPackage)(_RequestTargetCommands.RequestTargetCommandNames.DESTROY, [null, null], this.id));\n        } else {\n          promise = Promise.resolve();\n        }\n        this.status = _utils.TargetStatus.DESTROYED;\n      } else {\n        promise = Promise.reject(new Error('Invalid or already destroyed target.'));\n      }\n      return promise;\n    }\n  }, {\n    key: 'then',\n    value: function then(handleResolve, handleReject) {\n      var child = this.promise.then(handleResolve, handleReject);\n      this.hadChildPromises = true;\n      return child;\n    }\n  }, {\n    key: 'catch',\n    value: function _catch(handleReject) {\n      var child = this.promise.catch(handleReject);\n      this.hadChildPromises = true;\n      return child;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return _defineProperty({}, _utils.TARGET_DATA, {\n        id: this.link.id,\n        type: this.link.type,\n        poolId: this.link.poolId\n      });\n    }\n  }, {\n    key: 'poolId',\n    get: function get() {\n      return this.link.poolId || null;\n    }\n  }, {\n    key: 'type',\n    get: function get() {\n      return this.link.type || null;\n    }\n  }, {\n    key: 'id',\n    get: function get() {\n      return this.link.id || null;\n    }\n  }]);\n\n  return RequestTargetInternals;\n}();\n\nexports.default = RequestTargetInternals;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RequestTargetCommandFields = exports.RequestTargetCommandNames = undefined;\n\nvar _CommandDescriptor = __webpack_require__(7);\n\nvar _CommandDescriptor2 = _interopRequireDefault(_CommandDescriptor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar RequestTargetCommandNames = exports.RequestTargetCommandNames = Object.freeze({\n  DESTROY: '::destroy.resource'\n});\n\nvar RequestTargetCommandFields = exports.RequestTargetCommandFields = Object.freeze({\n  DESTROY: Symbol('::destroy.resource')\n});\n\n/**\r\n * Destroy is unique type that exists for every RequestTarget\r\n * and does not have a method on its instances. This type will\r\n * be send each time RequestTarget.destroy() is applied to\r\n * RequestTarget in stance.\r\n */\n\nvar RequestTargetCommands = function RequestTargetCommands() {\n  _classCallCheck(this, RequestTargetCommands);\n\n  this.createDESTROYDescriptor = function (handler, target) {\n    var descriptor = new _CommandDescriptor2.default(RequestTargetCommandNames.DESTROY, handler, RequestTargetCommandFields.DESTROY);\n    descriptor.virtual = true;\n    (0, _CommandDescriptor.addDescriptorTo)(descriptor, target);\n    return Object.freeze(descriptor);\n  };\n\n  Object.freeze(this);\n};\n\nexports.default = new RequestTargetCommands();\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createRequestTargetDecorator = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _CommandHandlerFactory = __webpack_require__(12);\n\nvar _CommandHandlerFactory2 = _interopRequireDefault(_CommandHandlerFactory);\n\nvar _resource = __webpack_require__(4);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar RequestTargetDecorator = function () {\n\n  /**\r\n   * @param {RequestFactory} factory\r\n   * @param {RequestHandlers} handlers\r\n   * @private\r\n   */\n  function RequestTargetDecorator(factory, handlers) {\n    _classCallCheck(this, RequestTargetDecorator);\n\n    this.handlers = handlers;\n    this.members = new _CommandHandlerFactory2.default(factory);\n  }\n\n  _createClass(RequestTargetDecorator, [{\n    key: 'apply',\n    value: function apply(request) {\n      var result = void 0;\n\n      if (!this.handlers.available) return;\n      /* FIXME revert change when ES6 will be supported widely\r\n       for (var descriptor of this.handlers) {\r\n       request[descriptor.name] = this.getMember(descriptor.name, descriptor.type);\r\n       }\r\n       */\n\n      var iterator = this.handlers.getHandlers((0, _resource.getResourceType)(request));\n      while (!(result = iterator.next()).done) {\n        var descriptor = result.value;\n        request[descriptor.name] = this.members.get(descriptor);\n      }\n      return request;\n    }\n  }, {\n    key: 'setFactory',\n    value: function setFactory(factory) {\n      if (factory) {\n        this.members.setFactory(factory);\n      }\n    }\n  }]);\n\n  return RequestTargetDecorator;\n}();\n\nvar createRequestTargetDecorator = exports.createRequestTargetDecorator = function createRequestTargetDecorator(factory, handlers) {\n  return new RequestTargetDecorator(factory, handlers);\n};\n\nexports.default = RequestTargetDecorator;\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createRequestFactory = exports.FACTORY_HANDLERS_FIELD = exports.FACTORY_DECORATOR_FIELD = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _RequestTargetDecorator = __webpack_require__(18);\n\nvar _RequestTarget = __webpack_require__(2);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar FACTORY_DECORATOR_FIELD = exports.FACTORY_DECORATOR_FIELD = Symbol('request.factory::decorator');\nvar FACTORY_HANDLERS_FIELD = exports.FACTORY_HANDLERS_FIELD = Symbol('request.factory::handlers');\n\nvar RequestFactory = function () {\n  /*\r\n   function DummyCacheImpl() {\r\n   this.get = function(name, pack) {\r\n     };\r\n   this.set = function(name, pack, request) {\r\n     };\r\n   }\r\n   */\n  function RequestFactory(handlers) {\n    var cacheImpl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var noInit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    _classCallCheck(this, RequestFactory);\n\n    if (noInit) {\n      return;\n    }\n\n    this.cache = cacheImpl;\n    this[FACTORY_HANDLERS_FIELD] = handlers;\n    this[FACTORY_DECORATOR_FIELD] = (0, _RequestTargetDecorator.createRequestTargetDecorator)(this, handlers);\n  }\n\n  _createClass(RequestFactory, [{\n    key: 'create',\n    value: function create(promise) {\n      var request = (0, _RequestTarget.createRequestTarget)(promise, this[FACTORY_HANDLERS_FIELD]);\n      if (this[FACTORY_HANDLERS_FIELD].available) {\n        this[FACTORY_DECORATOR_FIELD].apply(request);\n      }\n      return request;\n    }\n  }, {\n    key: 'getCached',\n    value: function getCached(name, pack) {\n      return this.cache && this.cache.get(name, pack);\n    }\n  }, {\n    key: 'createCached',\n    value: function createCached(promise, name, pack) {\n      var request = null;\n      if (this.cache) {\n        request = this.create(promise);\n        this.cache.set(name, pack, request);\n      }\n      return request;\n    }\n  }]);\n\n  return RequestFactory;\n}();\n\nvar createRequestFactory = exports.createRequestFactory = function createRequestFactory(handlers, cacheImpl) {\n  return new RequestFactory(handlers, cacheImpl);\n};\n\nexports.default = RequestFactory;\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _index = __webpack_require__(21);\n\nvar api = _interopRequireWildcard(_index);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nmodule.exports = Object.assign(api.default, api);\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isResource = exports.getResourceType = exports.getResourcePoolId = exports.getResourceId = exports.getResourceData = exports.getRawResource = exports.isResourceConvertible = exports.IConvertible = exports.ResourceConverter = exports.ResourcePoolRegistry = exports.ResourcePool = exports.RequestTarget = exports.ProxyCommands = exports.RequestTargetCommands = exports.Reserved = exports.CommandDescriptor = exports.Deferred = exports.createDeferred = exports.dummy = exports.create = undefined;\n\nvar _DataAccessInterface = __webpack_require__(22);\n\nvar _DataAccessInterface2 = _interopRequireDefault(_DataAccessInterface);\n\nvar _utils = __webpack_require__(0);\n\nvar _commands = __webpack_require__(6);\n\nvar _request = __webpack_require__(3);\n\nvar _resource = __webpack_require__(4);\n\nvar _utils2 = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _DataAccessInterface2.default;\nexports.create = _DataAccessInterface.create;\nexports.dummy = _DataAccessInterface.dummy;\nexports.createDeferred = _utils.createDeferred;\nexports.Deferred = _utils.Deferred;\nexports.CommandDescriptor = _commands.CommandDescriptor;\nexports.Reserved = _commands.Reserved;\nexports.RequestTargetCommands = _commands.RequestTargetCommands;\nexports.ProxyCommands = _commands.ProxyCommands;\nexports.RequestTarget = _request.RequestTarget;\nexports.ResourcePool = _resource.ResourcePool;\nexports.ResourcePoolRegistry = _resource.ResourcePoolRegistry;\nexports.ResourceConverter = _resource.ResourceConverter;\nexports.IConvertible = _utils2.IConvertible;\nexports.isResourceConvertible = _utils2.isResourceConvertible;\nexports.getRawResource = _utils2.getRawResource;\nexports.getResourceData = _utils2.getResourceData;\nexports.getResourceId = _utils2.getResourceId;\nexports.getResourcePoolId = _utils2.getResourcePoolId;\nexports.getResourceType = _utils2.getResourceType;\nexports.isResource = _utils2.isResource;\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.dummy = exports.create = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @exports DataAccessInterface\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _utils = __webpack_require__(0);\n\nvar _request = __webpack_require__(3);\n\nvar _resource = __webpack_require__(4);\n\nvar _utils2 = __webpack_require__(1);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DataAccessInterface = function () {\n\n  /**\r\n   * @class DataAccessInterface\r\n   * @classdesc Facade of Deferred Data Access library, it holds all\r\n   * of public API -- objects like ResourcePool and methods to work\r\n   * with resources.\r\n   * @param {CommandDescriptor[]|Object.<string, Function|CommandDescriptor>} descriptors\r\n   * @param {boolean} [proxyEnabled=false]\r\n   * @param {ResourcePoolRegistry} [poolRegistry]\r\n   * @param {ResourcePool} [pool]\r\n   * @param {ICacheImpl} [cacheImpl]\r\n   */\n  function DataAccessInterface(descriptors) {\n    var proxyEnabled = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var poolRegistry = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var pool = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    var cacheImpl = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n\n    _classCallCheck(this, DataAccessInterface);\n\n    this.poolRegistry = poolRegistry;\n    this.pool = pool;\n    this.cache = cacheImpl;\n    this.initialize(descriptors, proxyEnabled);\n  }\n\n  _createClass(DataAccessInterface, [{\n    key: 'initialize',\n    value: function initialize(descriptors, proxyEnabled) {\n      var _this = this;\n\n      if (proxyEnabled && !(0, _utils.areProxiesAvailable)()) {\n        throw new Error('Proxies are not available in this environment');\n      }\n\n      this.handlers = (0, _request.createRequestHandlers)(proxyEnabled);\n      this.resourceConverter = (0, _resource.createResourceConverter)(this.factory, this.poolRegistry, this.pool, this.handlers);\n\n      if (proxyEnabled) {\n        this.factory = (0, _request.createRequestProxyFactory)(this.handlers, this.cache);\n      } else {\n        this.factory = (0, _request.createRequestFactory)(this.handlers, this.cache);\n      }\n\n      if (!this.poolRegistry) {\n        this.poolRegistry = (0, _resource.createResourcePoolRegistry)();\n      }\n\n      if (this.pool) {\n        this.poolRegistry.register(this.pool);\n      } else if (this.pool !== undefined) {\n        this.pool = this.poolRegistry.createPool();\n      } else {\n        this.pool = _utils2.defaultResourcePool;\n      }\n\n      var poolDestroyedHandler = function poolDestroyedHandler() {\n        _this.pool.removeEventListener(_resource.ResourcePoolEvents.POOL_DESTROYED, poolDestroyedHandler);\n        _this.pool = _this.poolRegistry.createPool();\n        _this.pool.addEventListener(_resource.ResourcePoolEvents.POOL_DESTROYED, poolDestroyedHandler);\n      };\n\n      this.handlers.setHandlers(descriptors);\n      this.pool.addEventListener(_resource.ResourcePoolEvents.POOL_DESTROYED, poolDestroyedHandler);\n    }\n  }, {\n    key: 'parse',\n    value: function parse(data) {\n      return this.resourceConverter.parse(data);\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON(data) {\n      return this.resourceConverter.toJSON(data);\n    }\n  }, {\n    key: 'isOwnResource',\n    value: function isOwnResource(resource) {\n      /**\r\n       * @type {DataAccessInterface.ResourcePool}\r\n       */\n      var pool = void 0;\n      if ((0, _utils2.isResource)(resource)) {\n        pool = this.poolRegistry.get((0, _utils2.getResourcePoolId)(resource));\n        return pool && pool.has((0, _utils2.getResourceId)(resource));\n      }\n      return false;\n    }\n  }, {\n    key: 'proxyEnabled',\n    get: function get() {\n      return this.handlers.proxyEnabled;\n    }\n  }]);\n\n  return DataAccessInterface;\n}();\n\nvar create = exports.create = function create(handlers, proxyEnabled, poolRegistry, pool, cacheImpl) {\n  return new DataAccessInterface(handlers, proxyEnabled, poolRegistry, pool, cacheImpl);\n};\n\nvar dummy = exports.dummy = function dummy(handlers, proxyEnabled, poolRegistry, pool, cacheImpl) {\n  var api = new DataAccessInterface(handlers, proxyEnabled, poolRegistry, pool, cacheImpl);\n  return api.parse(handlers());\n};\n\nexports.default = DataAccessInterface;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar createRequestPackage = function createRequestPackage(type, args, targetId) {\n  var result = {\n    type: type,\n    cmd: args[0], // cmd,\n    value: args[1], // value,\n    target: targetId\n  };\n\n  // FIXME why?\n  Object.defineProperty(result, 'args', {\n    value: args\n  });\n\n  return result;\n};\n\nexports.default = createRequestPackage;\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _commands = __webpack_require__(6);\n\n/**\r\n * Checks for CommandDescriptor uniqueness and reserved words usage.\r\n * @param {DataAccessInterface.CommandDescriptor} descriptor\r\n * @param {Object.<string, DataAccessInterface.CommandDescriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.CommandDescriptor>} properties\r\n * @private\r\n */\nvar applyDescriptor = function applyDescriptor(descriptor, descriptors, properties) {\n  var name = descriptor.name;\n\n  if (name in _commands.Reserved.names) {\n    throw new Error('Name \"' + name + '\" is reserved and cannot be used in descriptor.');\n  }\n  if (Object.prototype.hasOwnProperty.call(descriptors, name) && descriptors[name] instanceof _commands.CommandDescriptor) {\n    throw new Error('Field names should be unique, \"' + String(name) + '\" field has duplicates.');\n  }\n  descriptors[name] = descriptor;\n  if (!descriptor.virtual) {\n    properties.push(descriptor);\n  }\n};\n\n/**\r\n * @param {Array} handlers\r\n * @param {Object} descriptors\r\n * @private\r\n */\nvar filterArray = function filterArray(handlers, descriptors, properties) {\n  var length = handlers.length;\n\n  for (var index = 0; index < length; index++) {\n    var value = handlers[index];\n    if (value instanceof _commands.CommandDescriptor) {\n      applyDescriptor(value, descriptors, properties);\n    }\n  }\n};\n\n/**\r\n * @param {Object} handlers\r\n * @param {Object.<string, DataAccessInterface.CommandDescriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.CommandDescriptor>} properties\r\n * @private\r\n */\nvar filterHash = function filterHash(handlers, descriptors, properties) {\n  if (!handlers) return;\n  var keys = Object.getOwnPropertyNames(handlers).concat(Object.getOwnPropertySymbols(handlers));\n  var length = keys.length;\n\n  for (var index = 0; index < length; index++) {\n    var name = keys[index];\n    var value = handlers[name];\n    if (typeof value === 'function') {\n      value = (0, _commands.createCommandDescriptor)(name, value);\n    }\n    if (value instanceof _commands.CommandDescriptor) {\n      applyDescriptor(value, descriptors, properties);\n    }\n  }\n};\n\n/**\r\n * @method RequestHandlers.filterHandlers\r\n * @param {Array|Object} handlers\r\n * @param {Object.<string, DataAccessInterface.CommandDescriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.CommandDescriptor>} properties\r\n */\nvar filterRequestHandlers = function filterRequestHandlers(handlers, descriptors, properties) {\n  if (handlers instanceof Array) {\n    filterArray(handlers, descriptors, properties);\n  } else {\n    filterHash(handlers, descriptors, properties);\n  }\n};\n\nexports.default = filterRequestHandlers;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createResourceConverter = exports.ResourceConverterEvents = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _eventDispatcher = __webpack_require__(10);\n\nvar _eventDispatcher2 = _interopRequireDefault(_eventDispatcher);\n\nvar _utils = __webpack_require__(1);\n\nvar _RequestTarget = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ResourceConverterEvents = exports.ResourceConverterEvents = Object.freeze({\n  RESOURCE_CREATED: 'resourceCreated',\n  RESOURCE_CONVERTED: 'resourceConverted'\n});\n\n/**\r\n * Resource converter contains bunch of methods to lookup for resources\r\n * and registering them, converting them into RAWResource or into\r\n * RequestTargets, depending on their origin.\r\n * Before sending data, bundled resources should be registered in ResourcePool\r\n * and then converted to RAWResource objects.\r\n * After data received, its RAWResources should be converted to RequestTargets\r\n * for not resolved resources or to resource target values otherwise.\r\n * Resource can be resolved by its `id` and `poolId`, if ResourceConverter\r\n * can find ResourcePool with id from poolId, it will try to get target\r\n * resource value and replace with it RAWResource object.\r\n * If ResourcePool not found, ResourceConverter assumes that resource come from\r\n * other origin/environment and creates RequestTarget object that can be target\r\n * object for commands.\r\n * ResourceConverter while handling data does not look deeply, so its developer\r\n * responsibility to convert deeply nested resource targets.\r\n * @param {RequestFactory} factory\r\n * @param {ResourcePoolRegistry} registry\r\n * @param {ResourcePool} pool\r\n * @param {RequestHandlers} handlers\r\n * @extends EventDispatcher\r\n */\n\nvar ResourceConverter = function (_EventDispatcher) {\n  _inherits(ResourceConverter, _EventDispatcher);\n\n  function ResourceConverter(factory, registry, pool) {\n    var handlers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n    _classCallCheck(this, ResourceConverter);\n\n    var _this = _possibleConstructorReturn(this, (ResourceConverter.__proto__ || Object.getPrototypeOf(ResourceConverter)).call(this));\n\n    _this.factory = factory;\n    _this.pool = pool;\n    _this.registry = registry;\n\n    if (handlers) {\n      handlers.setConverter(_this);\n    }\n    return _this;\n  }\n\n  _createClass(ResourceConverter, [{\n    key: 'resourceToObject',\n    value: function resourceToObject(data) {\n      var result = void 0;\n\n      if ((0, _utils.isResourceConvertible)(data)) {\n        result = (0, _utils.getRawResource)(data, this.pool);\n      } else if (typeof data.toJSON === 'function') {\n        result = data.toJSON();\n      } else {\n        return data;\n      }\n\n      if (this.hasEventListener(ResourceConverterEvents.RESOURCE_CONVERTED)) {\n        this.dispatchEvent(ResourceConverterEvents.RESOURCE_CONVERTED, {\n          data: data,\n          result: result\n        });\n      }\n\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#objectToResource\r\n     * @param {*} data\r\n     * @returns {*}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'objectToResource',\n    value: function objectToResource(data) {\n      var result = data;\n\n      if ((0, _utils.isResource)(data)) {\n        var poolId = (0, _utils.getResourcePoolId)(data);\n\n        if (this.registry.isRegistered(poolId)) {\n          // target object is stored in current pool\n          var target = this.registry.get(poolId).get((0, _utils.getResourceId)(data));\n\n          if (target) {\n            result = target.resource;\n          }\n        } else {\n          // target object has another origin, should be wrapped\n          result = this.factory.create(Promise.resolve(data));\n        }\n      }\n\n      if (result !== data && this.hasEventListener(ResourceConverterEvents.RESOURCE_CREATED)) {\n        this.dispatchEvent(ResourceConverterEvents.RESOURCE_CREATED, {\n          data: data,\n          result: result\n        });\n      }\n\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#lookupArray\r\n     * @param list\r\n     * @param linkConvertHandler\r\n     * @returns {Array}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'lookupArray',\n    value: function lookupArray(list, linkConvertHandler) {\n      var result = [];\n      var length = list.length;\n\n      for (var index = 0; index < length; index++) {\n        // FIXME Array.map()\n        result[index] = linkConvertHandler.call(this, list[index]);\n      }\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#lookupObject\r\n     * @param {*} data\r\n     * @param {Function} linkConvertHandler\r\n     * @returns {*}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'lookupObject',\n    value: function lookupObject(data, linkConvertHandler) {\n      var result = {};\n      for (var name in data) {\n        if (!Object.property.hasOwnProperty.call(data, name)) continue;\n        result[name] = linkConvertHandler.call(this, data[name]);\n      }\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#toJSON\r\n     * @param {*} data\r\n     * @returns {*}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON(data) {\n      var result = data;\n\n      if (data !== undefined && data !== null) {\n        if ((0, _utils.isResourceConvertible)(data)) {\n          // if data is RequestTarget, TargetResource, IConvertible, Function or RAW resource data\n          result = this.resourceToObject(data);\n        } else if (data instanceof Array) {\n          // if data is Array of values, check its\n          result = this.lookupArray(data, this.resourceToObject);\n        } else if (data.constructor === Object) {\n          // only Object instances can be looked up, other object types must be converted by hand\n          result = this.lookupObject(data, this.resourceToObject);\n        }\n      }\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#parse\r\n     * @param {*} data\r\n     * @returns {*}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'parse',\n    value: function parse(data) {\n      var result = data;\n\n      if (data !== undefined && data !== null) {\n        if ((0, _utils.isResource)(data)) {\n          // if data is RAW resource data\n          result = this.objectToResource(data);\n        } else if (data instanceof Array) {\n          // if data is Array of values, check its\n          result = this.lookupArray(data, this.objectToResource);\n        } else if (data.constructor === Object) {\n          result = this.lookupObject(data, this.objectToResource);\n        }\n      }\n\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#lookupForPending\r\n     * @param {*} data\r\n     * @returns {Array}\r\n     */\n\n  }, {\n    key: 'lookupForPending',\n    value: function lookupForPending(data) {\n      var result = [];\n\n      var add = function add(value) {\n        if ((0, _RequestTarget.isPending)(value)) {\n          result.push(value);\n        }\n        return value;\n      };\n\n      if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) === 'object' && data !== null) {\n        if ((0, _RequestTarget.isPending)(data)) {\n          result.push(data);\n        } else if (data instanceof Array) {\n          this.lookupArray(data, add);\n        } else if (data.constructor === Object) {\n          this.lookupObject(data, add);\n        }\n      }\n      return result;\n    }\n  }]);\n\n  return ResourceConverter;\n}(_eventDispatcher2.default);\n\n/**\r\n * @param {RequestFactory} factory\r\n * @param {DataAccessInterface.ResourcePoolRegistry} registry\r\n * @param {DataAccessInterface.ResourcePool} pool\r\n * @param {RequestHandlers} handlers\r\n * @returns {ResourceConverter}\r\n */\n\n\nvar createResourceConverter = exports.createResourceConverter = function createResourceConverter(factory, registry, pool, handlers) {\n  return new ResourceConverter(factory, registry, pool, handlers);\n};\n\nexports.default = ResourceConverter;\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createResourcePoolRegistry = exports.ResourcePoolRegistryEvents = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _eventDispatcher = __webpack_require__(10);\n\nvar _eventDispatcher2 = _interopRequireDefault(_eventDispatcher);\n\nvar _utils = __webpack_require__(1);\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _ResourcePool = __webpack_require__(9);\n\nvar _ResourcePool2 = _interopRequireDefault(_ResourcePool);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ResourcePoolRegistryEvents = exports.ResourcePoolRegistryEvents = Object.freeze({\n  RESOURCE_POOL_CREATED: 'resourcePoolCreated',\n  RESOURCE_POOL_REGISTERED: 'resourcePoolRegistered',\n  RESOURCE_POOL_REMOVED: 'resourcePoolRemoved'\n});\n\nvar POOLS_FIELD = Symbol('resource.pool.registry::pools');\n\n/**\r\n * @classdesc Collection of ResourcePool instances. Allows lookup for ResourcePool by its Id.\r\n * When ResourcePool is registered in ResourcePoolRegistry, it subscribes to\r\n * ResourcePool POOL_DESTROYED event and removes pool from registry after its destroyed.\r\n */\n\nvar ResourcePoolRegistry = function (_EventDispatcher) {\n  _inherits(ResourcePoolRegistry, _EventDispatcher);\n\n  function ResourcePoolRegistry() {\n    _classCallCheck(this, ResourcePoolRegistry);\n\n    var _this = _possibleConstructorReturn(this, (ResourcePoolRegistry.__proto__ || Object.getPrototypeOf(ResourcePoolRegistry)).call(this));\n\n    _this[POOLS_FIELD] = {};\n\n    // every registry should keep default pool, so you can have access from anywhere\n    _this.register(_utils2.default);\n    return _this;\n  }\n\n  _createClass(ResourcePoolRegistry, [{\n    key: 'handlePoolDestroyed',\n    value: function handlePoolDestroyed(event) {\n      this.remove(event.data);\n    }\n\n    /**\r\n     * Create and register ResourcePool\r\n     * @returns {DataAccessInterface.ResourcePool} New ResourcePool instance\r\n     */\n\n  }, {\n    key: 'createPool',\n    value: function createPool() {\n      var pool = (0, _ResourcePool.createResourcePool)();\n      if (this.hasEventListener(ResourcePoolRegistryEvents.RESOURCE_POOL_CREATED)) {\n        this.dispatchEvent(ResourcePoolRegistryEvents.RESOURCE_POOL_CREATED, pool);\n      }\n      this.register(pool);\n      return pool;\n    }\n\n    /**\r\n     * Register ResourcePool instance.\r\n     * @param pool {DataAccessInterface.ResourcePool} ResourcePool instance to be registered\r\n     */\n\n  }, {\n    key: 'register',\n    value: function register(pool) {\n      if (Object.prototype.hasOwnProperty.call(this[POOLS_FIELD], pool.id)) return;\n      this[POOLS_FIELD][pool.id] = pool;\n      pool.addEventListener(_ResourcePool.ResourcePoolEvents.POOL_DESTROYED, this.handlePoolDestroyed);\n      if (this.hasEventListener(ResourcePoolRegistryEvents.RESOURCE_POOL_REGISTERED)) {\n        this.dispatchEvent(ResourcePoolRegistryEvents.RESOURCE_POOL_REGISTERED, pool);\n      }\n    }\n\n    /**\r\n     * Retrieve ResourcePool instance from registry by its Id.\r\n     * @param poolId {String} ResourcePool instance Id\r\n     * @returns {DataAccessInterface.ResourcePool|null}\r\n     */\n\n  }, {\n    key: 'get',\n    value: function get(poolId) {\n      return this[POOLS_FIELD][poolId] || null;\n    }\n\n    /**\r\n     * Check if ResourcePool registered in this registry instance.\r\n     * @param pool {DataAccessInterface.ResourcePool|String} ResourcePool instance or its Id.\r\n     * @returns {Boolean}\r\n     */\n\n  }, {\n    key: 'isRegistered',\n    value: function isRegistered(pool) {\n      return Object.prototype.hasOwnProperty.call(this[POOLS_FIELD], pool instanceof _ResourcePool2.default ? pool.id : String(pool));\n    }\n\n    /**\r\n     * Remove ResourcePool from current registry instance.\r\n     * @param pool {DataAccessInterface.ResourcePool|String} ResourcePool instance or its Id.\r\n     * @returns {Boolean}\r\n     */\n\n  }, {\n    key: 'remove',\n    value: function remove(pool) {\n      var result = false;\n      pool = pool instanceof _ResourcePool2.default ? pool : this.get(pool);\n      if (pool) {\n        pool.removeEventListener(_ResourcePool2.default.Events.POOL_DESTROYED, this.handlePoolDestroyed);\n        result = delete this[POOLS_FIELD][pool.id];\n      }\n      if (this.hasEventListener(ResourcePoolRegistryEvents.RESOURCE_POOL_REMOVED)) {\n        this.dispatchEvent(ResourcePoolRegistryEvents.RESOURCE_POOL_REMOVED, pool);\n      }\n      return result;\n    }\n  }]);\n\n  return ResourcePoolRegistry;\n}(_eventDispatcher2.default);\n\nvar createResourcePoolRegistry = exports.createResourcePoolRegistry = function createResourcePoolRegistry() {\n  return new ResourcePoolRegistry();\n};\n\nexports.default = ResourcePoolRegistry;\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\r\n * Reserved words\r\n */\nvar Reserved = Object.freeze({\n  /**\r\n   * Contains property names that cannot be used for CommandDescriptor's\r\n   */\n  names: Object.freeze({\n    // INFO Exposed Promise method, cannot be overwritten by type\n    then: true,\n    // INFO Exposed Promise method, cannot be overwritten by type\n    catch: true\n  })\n});\n\nexports.default = Reserved;\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createRequestHandlers = exports.RequestHandlersEvents = exports.areProxyHandlersAvailable = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _commands = __webpack_require__(6);\n\nvar _utils = __webpack_require__(5);\n\nvar _utils2 = __webpack_require__(1);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * Key for default type for handlers that will be applied to any\r\n * resource that does not have type-specific handlers registered\r\n * @type {string}\r\n */\nvar DEFAULT_KEY = '';\n\nvar areProxyHandlersAvailable = exports.areProxyHandlersAvailable = function areProxyHandlersAvailable(handlers, throwError) {\n  var result = true;\n  var list = _commands.ProxyCommands.required;\n  var length = list.length;\n\n  for (var index = 0; index < length; index++) {\n    var name = list[index];\n    if (!(_commands.ProxyCommandFields[name] in handlers)) {\n      result = false;\n      if (throwError) {\n        throw new Error('For Proxy interface, handler \"' + name + '\" should be set.');\n      }\n    }\n  }\n  return result;\n};\n\nvar RequestHandlersEvents = exports.RequestHandlersEvents = Object.freeze({\n  HANDLERS_UPDATED: 'handlersUpdated'\n});\n\nvar RequestHandlers = function () {\n\n  /**\r\n   * @class RequestHandlers\r\n   * @param {boolean} proxyEnabled\r\n   * @private\r\n   */\n  function RequestHandlers(proxyEnabled) {\n    _classCallCheck(this, RequestHandlers);\n\n    // named collection of CommandDescriptor lists that may be applied\n    this.properties = {};\n    this.descriptors = {};\n    this.proxyEnabled = Boolean(proxyEnabled);\n    this.converter = null;\n  }\n\n  _createClass(RequestHandlers, [{\n    key: 'setConverter',\n    value: function setConverter(converter) {\n      this.converter = converter;\n    }\n  }, {\n    key: 'setHandlers',\n    value: function setHandlers(handlers) {\n      var _this = this;\n\n      this.setHandlersByType(DEFAULT_KEY, handlers);\n\n      Object.keys(handlers).forEach(function (name) {\n        var type = handlers[name];\n        if (type && (type.constructor === Object || type instanceof Array)) {\n          _this.setHandlersByType(name, type);\n        }\n      });\n\n      if (this.proxyEnabled) {\n        areProxyHandlersAvailable(this.descriptors, true);\n      }\n    }\n  }, {\n    key: 'setHandlersByType',\n    value: function setHandlersByType(type, handlers) {\n      var descrs = {};\n      var props = [];\n      (0, _utils.filterRequestHandlers)(handlers, descrs, props);\n      this.descriptors[type] = descrs;\n      this.properties[type] = props;\n    }\n\n    /**\r\n     * @method RequestHandlers#hasHandler\r\n     * @param {String|Symbol} name Property name of CommandDescriptor\r\n     * @param {String} [type] Resource type for type-specific handlers\r\n     * @returns {boolean}\r\n     */\n\n  }, {\n    key: 'hasHandler',\n    value: function hasHandler(name, type) {\n      return this.descriptors[type] && Object.prototype.hasOwnProperty.call(this.descriptors[type], name) || this.descriptors[DEFAULT_KEY] && Object.prototype.hasOwnProperty.call(this.descriptors[DEFAULT_KEY], name);\n    }\n\n    /**\r\n     * IMPORTANT: Returns original list of CommandDescriptors, changing it may cause\r\n     * unexpected result with newly decorated resources.\r\n     * @param {String} [type]\r\n     * @returns {CommandDescriptor[]|null}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'getHandlers',\n    value: function getHandlers(type) {\n      var descrs = this.descriptors[type || DEFAULT_KEY];\n      if (!descrs) {\n        descrs = this.descriptors[DEFAULT_KEY];\n      }\n\n      return descrs || null;\n    }\n\n    /**\r\n     * @method RequestHandlers#getHandler\r\n     * @param name\r\n     * @param {String} [type]\r\n     * @returns {*|null}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'getHandler',\n    value: function getHandler(name, type) {\n      var handler = this.descriptors[type] && this.descriptors[type][name] || this.descriptors[DEFAULT_KEY] && this.descriptors[DEFAULT_KEY][name];\n\n      return handler || null;\n    }\n\n    /**\r\n     * @method RequestHandlers#handle\r\n     * @param {DataAccessInterface.RequestTarget} parentRequest\r\n     * @param {String|Symbol} name\r\n     * @param {CommandDataPack} pack\r\n     * @param {DataAccessInterface.Deferred} deferred\r\n     * @param {DataAccessInterface.RequestTarget} [resultRequest]\r\n     * @private\r\n     */\n\n  }, {\n    key: 'handle',\n    value: function handle(parentRequest, name, pack, deferred, resultRequest) {\n      var _this2 = this;\n\n      var list = this.converter ? this.converter.lookupForPending(pack.value) : null;\n      if (list && list.length) {\n        // FIXME Need to test on all platforms: In other browsers this might not work\n        // because may need list of Promise objects, not RequestTargets\n        Promise.all(list).then(function () {\n          _this2.handleImmediately(parentRequest, name, pack, deferred, resultRequest);\n        });\n      } else {\n        this.handleImmediately(parentRequest, name, pack, deferred, resultRequest);\n      }\n    }\n\n    /**\r\n     *\r\n     * @param {DataAccessInterface.RequestTarget} parentRequest\r\n     * @param {String|Symbol} name\r\n     * @param {CommandDataPack} data\r\n     * @param {DataAccessInterface.Deferred} deferred\r\n     * @param {DataAccessInterface.RequestTarget} [resultRequest]\r\n     * @private\r\n     */\n\n  }, {\n    key: 'handleImmediately',\n    value: function handleImmediately(parentRequest, name, data, deferred, resultRequest) {\n      /**\r\n       * @type {DataAccessInterface.CommandDescriptor|null}\r\n       */\n      var handler = this.getHandler(name, (0, _utils2.getResourceType)(parentRequest));\n      if (handler instanceof _commands.CommandDescriptor) {\n        // INFO result should be applied to deferred.resolve() or deferred.reject()\n        handler.handler(parentRequest, data, deferred, resultRequest);\n      } else {\n        throw new Error('Command descriptor for \"' + name + '\" was not found.');\n      }\n    }\n  }, {\n    key: 'available',\n    get: function get() {\n      var nonEmptyList = Object.keys(this.properties).find(function (item) {\n        return Boolean(item && item.length);\n      });\n      return Boolean(nonEmptyList);\n    }\n  }]);\n\n  return RequestHandlers;\n}();\n\n/**\r\n * @member RequestHandlers.create\r\n * @param {Boolean} proxyEnabled\r\n * @returns {RequestHandlers}\r\n */\n\n\nvar createRequestHandlers = exports.createRequestHandlers = function createRequestHandlers(proxyEnabled) {\n  return new RequestHandlers(proxyEnabled);\n};\n\nexports.default = RequestHandlers;\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createRequestProxyFactory = exports.applyProxyWithDefaultHandlers = exports.createProxyHandlers = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _RequestFactory2 = __webpack_require__(19);\n\nvar _RequestFactory3 = _interopRequireDefault(_RequestFactory2);\n\nvar _ProxyCommands = __webpack_require__(8);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar FACTORY_FIELD = Symbol('request.proxy.factory::factory');\n\nvar EXCLUSIONS = {\n  /*\r\n   INFO arguments and caller were included because they are required function properties\r\n   */\n  arguments: true,\n  caller: true,\n  prototype: true\n};\n\nvar wrapWithProxy = function wrapWithProxy(target, handlers) {\n  // INFO Target must be a function so I could use Proxy.call() interceptor.\n  function requestTargetProxy() {}\n\n  requestTargetProxy.target = target;\n  return new Proxy(requestTargetProxy, handlers);\n};\n\nvar proxyGet = function proxyGet(wrapper, name) {\n  var target = wrapper.target;\n\n  if (name in target || name in EXCLUSIONS || (typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'symbol') {\n    return target[name];\n  }\n  // INFO Proxy should be already applied, so no need in additional wrapping\n  return target[_ProxyCommands.ProxyCommandFields.get](name);\n};\n\n// INFO Proxy should be already applied, so no need in additional wrapping\nvar proxyApply = function proxyApply(wrapper, thisValue, args) {\n  return wrapper.target[_ProxyCommands.ProxyCommandFields.apply](null, args);\n};\n\nvar proxySet = function proxySet(wrapper, name, value) {\n  var target = wrapper.target;\n\n\n  if (name in target || name in EXCLUSIONS || (typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'symbol') {\n    target[name] = value;\n    return value;\n  }\n\n  return target[_ProxyCommands.ProxyCommandFields.set](name, value);\n};\n\nvar proxyHas = function proxyHas(wrapper, name) {\n  return Object.prototype.hasOwnProperty.call(wrapper.target, name);\n};\n\nvar proxyDeleteProperty = function proxyDeleteProperty(wrapper, name) {\n  var target = wrapper.target;\n\n\n  if (_ProxyCommands.ProxyCommandFields.deleteProperty in target) {\n    target[_ProxyCommands.ProxyCommandFields.deleteProperty](name);\n    return true;\n  }\n\n  return false;\n};\n\nvar proxyOwnKeys = function proxyOwnKeys() {\n  return Object.getOwnPropertyNames(EXCLUSIONS);\n};\n\nvar proxyEnumerate = function proxyEnumerate() {\n  return Object.getOwnPropertyNames(EXCLUSIONS)[Symbol.iterator]();\n};\n\nvar proxyGetOwnPropertyDescriptor = function proxyGetOwnPropertyDescriptor(wrapper, name) {\n  if (Object.prototype.hasOwnProperty.call(EXCLUSIONS, name)) {\n    return Object.getOwnPropertyDescriptor(wrapper, name);\n  }\n  return Object.getOwnPropertyDescriptor(wrapper.target, name);\n};\n\n/**\r\n * Builds proper handlers hash for Proxy\r\n * @returns {Function}\r\n */\nvar createProxyHandlers = exports.createProxyHandlers = function createProxyHandlers() {\n  var handlers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return Object.assign({\n    get: proxyGet,\n    apply: proxyApply,\n    set: proxySet,\n    has: proxyHas,\n    deleteProperty: proxyDeleteProperty,\n    ownKeys: proxyOwnKeys,\n    enumerate: proxyEnumerate,\n    getOwnPropertyDescriptor: proxyGetOwnPropertyDescriptor\n  }, handlers);\n};\n\nvar PROXY_HANDLERS = createProxyHandlers();\n\nvar RequestProxyFactory = function (_RequestFactory) {\n  _inherits(RequestProxyFactory, _RequestFactory);\n\n  function RequestProxyFactory(handlers, cacheImpl) {\n    _classCallCheck(this, RequestProxyFactory);\n\n    var _this = _possibleConstructorReturn(this, (RequestProxyFactory.__proto__ || Object.getPrototypeOf(RequestProxyFactory)).call(this, null, null, true));\n\n    _this[_RequestFactory2.FACTORY_HANDLERS_FIELD] = handlers;\n    _this[FACTORY_FIELD] = _RequestFactory3.default.create(handlers, cacheImpl);\n    _this[FACTORY_FIELD][_RequestFactory2.FACTORY_DECORATOR_FIELD].setFactory(_this);\n    return _this;\n  }\n\n  _createClass(RequestProxyFactory, [{\n    key: 'create',\n    value: function create(promise) {\n      var instance = this[FACTORY_FIELD].create(promise);\n\n      if (this[_RequestFactory2.FACTORY_HANDLERS_FIELD].available) {\n        return wrapWithProxy(instance, PROXY_HANDLERS);\n      }\n\n      return instance;\n    }\n  }, {\n    key: 'getCached',\n    value: function getCached(name, pack) {\n      return this[FACTORY_FIELD].getCached(name, pack);\n    }\n  }, {\n    key: 'createCached',\n    value: function createCached(promise, name, pack) {\n      var instance = this[FACTORY_FIELD].createCached(promise, name, pack);\n\n      if (this[_RequestFactory2.FACTORY_HANDLERS_FIELD].available) {\n        return wrapWithProxy(instance, PROXY_HANDLERS);\n      }\n\n      return instance;\n    }\n  }]);\n\n  return RequestProxyFactory;\n}(_RequestFactory3.default);\n\nvar applyProxyWithDefaultHandlers = exports.applyProxyWithDefaultHandlers = function applyProxyWithDefaultHandlers(target) {\n  return wrapWithProxy(target, PROXY_HANDLERS);\n};\n\nvar createRequestProxyFactory = exports.createRequestProxyFactory = function createRequestProxyFactory(handlers, cacheImpl) {\n  return new RequestProxyFactory(handlers, cacheImpl);\n};\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// deferred-data-access.direct.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"http://localhost:8081/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2ebf73130931261a945d","export const TargetStatus = Object.freeze({\r\n  PENDING: 'pending',\r\n  RESOLVED: 'resolved',\r\n  REJECTED: 'rejected',\r\n  DESTROYED: 'destroyed',\r\n});\r\n\r\n/**\r\n * @type {Symbol}\r\n * @private\r\n */\r\nexport const TARGET_INTERNALS = Symbol('request.target:internals');\r\n/**\r\n *\r\n * @type {string}\r\n * @private\r\n */\r\nexport const TARGET_DATA = 'resource::data';\r\n\r\n/**\r\n * @private\r\n */\r\nexport const getId = (() => {\r\n  const base = `DA/${Date.now()}/`;\r\n  let index = 0;\r\n  return () => `${base}${++index}/${Date.now()}`;\r\n})();\r\n\r\n/**\r\n * @constructor\r\n * @alias DataAccessInterface.Deferred\r\n */\r\nexport class Deferred {\r\n  constructor() {\r\n    this.promise = new Promise((resolve, reject) => {\r\n      this.resolve = resolve;\r\n      this.reject = reject;\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * @returns {Deferred}\r\n * @private\r\n */\r\nexport const createDeferred = () => new Deferred();\r\n\r\n/**\r\n * @returns {boolean}\r\n * @private\r\n */\r\nexport const areProxiesAvailable = () => (typeof Proxy === 'function');\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils.js","import defaultResourcePool from './defaultResourcePool';\r\nimport IConvertible, { isResourceConvertible } from './IConvertible';\r\nimport {\r\n  getResourceType,\r\n  isResource,\r\n  areSameResource,\r\n  createForeignResource,\r\n  getRawResource,\r\n  getResourceData,\r\n  getResourceId,\r\n  getResourcePoolId,\r\n} from './resourceUtils';\r\n\r\nexport {\r\n  defaultResourcePool,\r\n  IConvertible,\r\n  isResourceConvertible,\r\n  getResourceType,\r\n  isResource,\r\n  areSameResource,\r\n  createForeignResource,\r\n  getRawResource,\r\n  getResourceData,\r\n  getResourceId,\r\n  getResourcePoolId,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/utils/index.js","import { TargetStatus, TARGET_INTERNALS } from '../utils';\r\nimport { isResource } from '../resource';\r\nimport RequestTargetInternals from './RequestTargetInternals';\r\n\r\nconst PROMISE_FIELD = Symbol('request.target::promise');\r\n\r\nconst getRequestPromise = (request) => (\r\n  request[TARGET_INTERNALS]\r\n  || request[PROMISE_FIELD]\r\n);\r\n\r\n/**\r\n * The object that will be available on other side\r\n * @class DataAccessInterface.RequestTarget\r\n * @param _promise {Promise}\r\n * @param _requestHandlers {RequestHandlers}\r\n */\r\nclass RequestTarget {\r\n  constructor(promise, requestHandlers) {\r\n    this[TARGET_INTERNALS] = new RequestTargetInternals(this, promise, requestHandlers);\r\n\r\n    const handlePromise = (data) => {\r\n      if (!isResource(data)) {\r\n        this[PROMISE_FIELD] = promise;\r\n        delete this[TARGET_INTERNALS];\r\n      }\r\n    };\r\n\r\n    promise.then(handlePromise, handlePromise);\r\n  }\r\n\r\n  then(...args) {\r\n    const target = getRequestPromise(this);\r\n    return target.then(...args);\r\n  }\r\n\r\n  catch(...args) {\r\n    const target = getRequestPromise(this);\r\n    return target.catch(...args);\r\n  }\r\n}\r\n\r\nexport const isActive = (target) => (\r\n  target\r\n  && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].isActive() : false\r\n);\r\n\r\nexport const canBeDestroyed = (target) => (\r\n  target\r\n  && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].canBeDestroyed() : false\r\n);\r\n\r\nexport const destroy = (target) => (\r\n  target &&\r\n  target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].destroy() : null\r\n);\r\n\r\nexport const toJSON = (target) => (\r\n  target\r\n  && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].toJSON() : null\r\n);\r\n\r\nexport const isTemporary = (target) => (\r\n  target\r\n  && target[TARGET_INTERNALS] && target[TARGET_INTERNALS].temporary\r\n);\r\n\r\nexport const setTemporary = (target, value) => {\r\n  if (target && target[TARGET_INTERNALS]) {\r\n    target[TARGET_INTERNALS].temporary = Boolean(value);\r\n  }\r\n};\r\n\r\nexport const getStatus = (target) => (\r\n  target &&\r\n  target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].status : ''\r\n);\r\n\r\nexport const isPending = (value) => (\r\n  getStatus(value) === TargetStatus.PENDING\r\n);\r\n\r\nexport const getQueueLength = (target) => {\r\n  const list = target && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].queue : null;\r\n  return list ? list.length : 0;\r\n};\r\n\r\nexport const getQueueCommands = (target) => {\r\n  const result = [];\r\n  const queue = target && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].queue : null;\r\n  if (queue) {\r\n    const { length } = queue;\r\n    // FIXME use Array.map()\r\n    for (let index = 0; index < length; index++) {\r\n      result.push(queue[index][0].type);\r\n    }\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const hadChildPromises = (target) => Boolean(target\r\n  && target[TARGET_INTERNALS]\r\n  && target[TARGET_INTERNALS].hadChildPromises);\r\n\r\nexport const getRawPromise = (target) => (\r\n  target\r\n  && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].promise : null\r\n);\r\n\r\nconst getRequestChildren = (target) => (\r\n  target && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].children : null\r\n);\r\n\r\nexport const getChildren = (target) => {\r\n  const list = getRequestChildren(target);\r\n  return list ? [...list] : [];\r\n};\r\n\r\nexport const getLastChild = (target) => {\r\n  const list = getRequestChildren(target);\r\n  return list && list.length ? list[list.length - 1] : null;\r\n};\r\n\r\nexport const getChildrenCount = (target) => {\r\n  const list = getRequestChildren(target);\r\n  return list ? list.length : 0;\r\n};\r\n\r\n// FIXME Is it used? Why its similar to getChildrenCount()?\r\nexport const sendRequest = (target) => {\r\n  const list = getRequestChildren(target);\r\n  return list ? list.length : 0;\r\n};\r\n\r\nexport const createRequestTarget = (promise, requestHandlers) => (\r\n  new RequestTarget(promise, requestHandlers)\r\n);\r\n\r\nexport default RequestTarget;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/RequestTarget.js","import { createRequestPackage } from './utils';\r\nimport RequestTargetInternals from './RequestTargetInternals';\r\nimport RequestTarget, { createRequestTarget } from './RequestTarget';\r\nimport RequestTargetDecorator, { createRequestTargetDecorator } from './RequestTargetDecorator';\r\nimport RequestFactory, { createRequestFactory } from './RequestFactory';\r\nimport RequestHandlers, { createRequestHandlers } from './RequestHandlers';\r\nimport RequestProxyFactory, { createRequestProxyFactory } from './RequestProxyFactory';\r\n\r\nexport {\r\n  createRequestPackage,\r\n  RequestTargetInternals,\r\n  RequestTarget,\r\n  createRequestTarget,\r\n  RequestTargetDecorator,\r\n  createRequestTargetDecorator,\r\n  RequestFactory,\r\n  createRequestFactory,\r\n  RequestHandlers,\r\n  createRequestHandlers,\r\n  RequestProxyFactory,\r\n  createRequestProxyFactory,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/index.js","import ResourcePool, {\r\n  createResourcePool,\r\n  ResourcePoolEvents,\r\n} from './ResourcePool';\r\nimport TargetResource, {\r\n  createTargetResource,\r\n} from './TargetResource';\r\nimport ResourceConverter, {\r\n  createResourceConverter,\r\n  ResourceConverterEvents,\r\n} from './ResourceConverter';\r\nimport ResourcePoolRegistry, {\r\n  createResourcePoolRegistry,\r\n  ResourcePoolRegistryEvents,\r\n} from './ResourcePoolRegistry';\r\n\r\nexport {\r\n  ResourcePool,\r\n  createResourcePool,\r\n  ResourcePoolEvents,\r\n  TargetResource,\r\n  createTargetResource,\r\n  ResourceConverter,\r\n  createResourceConverter,\r\n  ResourceConverterEvents,\r\n  ResourcePoolRegistry,\r\n  createResourcePoolRegistry,\r\n  ResourcePoolRegistryEvents,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/index.js","import createRequestPackage from './createRequestPackage';\r\nimport filterRequestHandlers from './filterRequestHandlers';\r\n\r\nexport {\r\n  createRequestPackage,\r\n  filterRequestHandlers,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/utils/index.js","import CommandDescriptor, {\r\n  createCommandDescriptor,\r\n  createDescriptors,\r\n} from './CommandDescriptor';\r\nimport CommandHandlerFactory from './CommandHandlerFactory';\r\nimport ProxyCommands, {\r\n  ProxyCommandNames,\r\n  ProxyCommandFields,\r\n} from './ProxyCommands';\r\nimport Reserved from './Reserved';\r\nimport RequestTargetCommands, {\r\n  RequestTargetCommandNames,\r\n  RequestTargetCommandFields,\r\n} from './RequestTargetCommands';\r\n\r\nexport {\r\n  CommandDescriptor,\r\n  createCommandDescriptor,\r\n  createDescriptors,\r\n  CommandHandlerFactory,\r\n  ProxyCommands,\r\n  ProxyCommandNames,\r\n  ProxyCommandFields,\r\n  Reserved,\r\n  RequestTargetCommands,\r\n  RequestTargetCommandNames,\r\n  RequestTargetCommandFields,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/commands/index.js","import ProxyCommands, { ProxyCommandFields } from './ProxyCommands';\r\n\r\nclass CommandDescriptor {\r\n  constructor(type, handler, name) {\r\n    this.name = name !== undefined ? name : type;\r\n    this.type = type;\r\n    this.handler = handler;\r\n    this.isTemporary = null;\r\n    this.cacheable = false;\r\n    this.virtual = false;\r\n    this.resourceType = null;\r\n  }\r\n}\r\n\r\nexport const createCommandDescriptor = (command, handler, name) => {\r\n  const descriptor = new CommandDescriptor(command, handler, name);\r\n  // We can use Object.freeze(), it keeps class/constructor information\r\n  return Object.freeze(descriptor);\r\n};\r\n\r\nexport const addDescriptorTo = (descriptor, target) => {\r\n  if (target instanceof Array) {\r\n    target.push(descriptor);\r\n  } else if (target) {\r\n    target[descriptor.name] = descriptor;\r\n  }\r\n};\r\n\r\nexport const descriptorGeneratorFactory = (command, name) =>\r\n  (handler, target, isTemporary, resourceType, cacheable) => {\r\n    const descriptor = new CommandDescriptor(command, handler, name);\r\n    descriptor.isTemporary = isTemporary;\r\n    descriptor.resourceType = resourceType;\r\n    descriptor.cacheable = cacheable;\r\n    addDescriptorTo(descriptor, target);\r\n    return Object.freeze(descriptor);\r\n  };\r\n\r\n\r\nexport const createDescriptors = (handlers, target, isTemporary, resourceType, cacheable) => {\r\n  const { list } = ProxyCommands;\r\n  const { length } = list;\r\n  target = target || {};\r\n  for (let index = 0; index < length; index++) {\r\n    const name = list[index];\r\n    const handler = handlers[name];\r\n    const field = ProxyCommandFields[name];\r\n\r\n    if (handler instanceof Function) {\r\n      let descriptor = new CommandDescriptor(name, handler, field);\r\n      descriptor.isTemporary = isTemporary;\r\n      descriptor.resourceType = resourceType;\r\n      descriptor.cacheable = cacheable;\r\n      descriptor = Object.freeze(descriptor);\r\n\r\n      if (target instanceof Array) {\r\n        target.push(descriptor);\r\n      } else if (target) {\r\n        target[field] = descriptor;\r\n      }\r\n    }\r\n  }\r\n  return target;\r\n};\r\n\r\nexport default CommandDescriptor;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/commands/CommandDescriptor.js","import { descriptorGeneratorFactory } from './CommandDescriptor';\r\n\r\nexport const ProxyCommandNames = Object.freeze({\r\n  GET: 'get',\r\n  SET: 'set',\r\n  APPLY: 'apply',\r\n  DELETE_PROPERTY: 'deleteProperty',\r\n});\r\n\r\nexport const ProxyCommandFields = Object.freeze({\r\n  get: Symbol('proxy.commands::get'),\r\n  set: Symbol('proxy.commands::set'),\r\n  apply: Symbol('proxy.commands::apply'),\r\n  deleteProperty: Symbol('proxy.commands::deleteProperty'),\r\n});\r\n\r\nclass ProxyCommands {\r\n  createGETDescriptor = descriptorGeneratorFactory(\r\n    ProxyCommandNames.GET,\r\n    ProxyCommandFields.get,\r\n  );\r\n  createSETDescriptor = descriptorGeneratorFactory(\r\n    ProxyCommandNames.SET,\r\n    ProxyCommandFields.set,\r\n  );\r\n  createAPPLYDescriptor = descriptorGeneratorFactory(\r\n    ProxyCommandNames.APPLY,\r\n    ProxyCommandFields.apply,\r\n  );\r\n\r\n  constructor() {\r\n    Object.freeze(this);\r\n  }\r\n\r\n  get list() {\r\n    return [\r\n      ProxyCommandNames.GET,\r\n      ProxyCommandNames.SET,\r\n      ProxyCommandNames.APPLY,\r\n      ProxyCommandNames.DELETE_PROPERTY,\r\n    ];\r\n  }\r\n\r\n  get required() {\r\n    return [\r\n      ProxyCommandFields.GET,\r\n      ProxyCommandFields.SET,\r\n      ProxyCommandFields.APPLY,\r\n    ];\r\n  }\r\n}\r\n\r\nexport default new ProxyCommands();\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/commands/ProxyCommands.js","import EventDispatcher from 'event-dispatcher';\r\nimport { getId, isResource } from '../utils';\r\nimport { createTargetResource } from './TargetResource';\r\n\r\nexport const ResourcePoolEvents = Object.freeze({\r\n  RESOURCE_ADDED: 'resourceAdded',\r\n  RESOURCE_REMOVED: 'resourceRemoved',\r\n  POOL_CLEAR: 'poolClear',\r\n  POOL_CLEARED: 'poolCleared',\r\n  POOL_DESTROYED: 'poolDestroyed',\r\n});\r\n\r\nconst MAP_FIELD = Symbol('ResourcePool::map');\r\n\r\nlet validTargets = {};\r\n\r\nexport const isValidTarget = (target) => (\r\n  !isResource(target)\r\n  && Boolean(validTargets[typeof target])\r\n);\r\n\r\nexport const setValidTargets = (list) => {\r\n  validTargets = {};\r\n  const { length } = list;\r\n  for (let index = 0; index < length; index++) {\r\n    validTargets[list[index]] = true;\r\n  }\r\n};\r\n\r\nexport const getDefaultValidTargets = () => ['object', 'function'];\r\n\r\nclass ResourcePool extends EventDispatcher {\r\n  [MAP_FIELD] = new Map();\r\n\r\n  constructor() {\r\n    super();\r\n    Object.defineProperties(this, {\r\n      id: {\r\n        value: getId(),\r\n      },\r\n    });\r\n  }\r\n\r\n  set(target, type) {\r\n    let link = null;\r\n    if (isValidTarget(target)) {\r\n      if (this[MAP_FIELD].has(target)) {\r\n        link = this[MAP_FIELD].get(target);\r\n      } else {\r\n        link = createTargetResource(this, target, type || typeof target);\r\n        this[MAP_FIELD].set(link.id, link);\r\n        this[MAP_FIELD].set(target, link);\r\n        if (this.hasEventListener(ResourcePoolEvents.RESOURCE_ADDED)) {\r\n          this.dispatchEvent(ResourcePoolEvents.RESOURCE_ADDED, link);\r\n        }\r\n      }\r\n    }\r\n    return link;\r\n  }\r\n\r\n  has(target) {\r\n    return this[MAP_FIELD].has(target);\r\n  }\r\n\r\n  get(target) {\r\n    return this[MAP_FIELD].get(target);\r\n  }\r\n\r\n  remove(target) {\r\n    const link = this[MAP_FIELD].get(target);\r\n    if (link) {\r\n      this[MAP_FIELD].delete(link.id);\r\n      this[MAP_FIELD].delete(link.resource);\r\n      if (this.hasEventListener(ResourcePoolEvents.RESOURCE_REMOVED)) {\r\n        this.dispatchEvent(ResourcePoolEvents.RESOURCE_REMOVED, link);\r\n      }\r\n      link.destroy();\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    if (this.hasEventListener(ResourcePoolEvents.POOL_CLEAR)) {\r\n      this.dispatchEvent(ResourcePoolEvents.POOL_CLEAR, this);\r\n    }\r\n    let key;\r\n    const keys = this[MAP_FIELD].keys();\r\n    // FIXME update to for...of loop when it comes to browsers\r\n    while (!(key = keys.next()).done) {\r\n      if (typeof key.value === 'string') {\r\n        const link = this[MAP_FIELD].get(key.value);\r\n        link.destroy();\r\n      }\r\n    }\r\n    this[MAP_FIELD].clear();\r\n    if (this.hasEventListener(ResourcePoolEvents.POOL_CLEARED)) {\r\n      this.dispatchEvent(ResourcePoolEvents.POOL_CLEARED, this);\r\n    }\r\n  }\r\n\r\n  isActive() {\r\n    return Boolean(this[MAP_FIELD]);\r\n  }\r\n\r\n  destroy() {\r\n    this.clear();\r\n    // intentionally make it not usable after its destroyed\r\n    delete this[MAP_FIELD];\r\n    if (this.hasEventListener(ResourcePoolEvents.POOL_DESTROYED)) {\r\n      // FIXME why for second parameter?\r\n      this.dispatchEvent(ResourcePoolEvents.POOL_DESTROYED, this);\r\n    }\r\n  }\r\n}\r\n\r\nexport const createResourcePool = () => new ResourcePool();\r\n\r\nsetValidTargets(getDefaultValidTargets());\r\n\r\nexport default ResourcePool;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/ResourcePool.js","(function webpackUniversalModuleDefinition(root, factory) {\r\n\tif(typeof exports === 'object' && typeof module === 'object')\r\n\t\tmodule.exports = factory();\r\n\telse if(typeof define === 'function' && define.amd)\r\n\t\tdefine([], factory);\r\n\telse if(typeof exports === 'object')\r\n\t\texports[\"EventDispatcher\"] = factory();\r\n\telse\r\n\t\troot[\"EventDispatcher\"] = factory();\r\n})(this, function() {\r\nreturn /******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {};\r\n/******/\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n/******/\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId]) {\r\n/******/ \t\t\treturn installedModules[moduleId].exports;\r\n/******/ \t\t}\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\ti: moduleId,\r\n/******/ \t\t\tl: false,\r\n/******/ \t\t\texports: {}\r\n/******/ \t\t};\r\n/******/\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n/******/\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.l = true;\r\n/******/\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n/******/\r\n/******/\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__webpack_require__.m = modules;\r\n/******/\r\n/******/ \t// expose the module cache\r\n/******/ \t__webpack_require__.c = installedModules;\r\n/******/\r\n/******/ \t// define getter function for harmony exports\r\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\r\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\r\n/******/ \t\t\tObject.defineProperty(exports, name, {\r\n/******/ \t\t\t\tconfigurable: false,\r\n/******/ \t\t\t\tenumerable: true,\r\n/******/ \t\t\t\tget: getter\r\n/******/ \t\t\t});\r\n/******/ \t\t}\r\n/******/ \t};\r\n/******/\r\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\r\n/******/ \t__webpack_require__.n = function(module) {\r\n/******/ \t\tvar getter = module && module.__esModule ?\r\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\r\n/******/ \t\t\tfunction getModuleExports() { return module; };\r\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\r\n/******/ \t\treturn getter;\r\n/******/ \t};\r\n/******/\r\n/******/ \t// Object.prototype.hasOwnProperty.call\r\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\r\n/******/\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__webpack_require__.p = \"http://localhost:8081/dist/\";\r\n/******/\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ([\r\n/* 0 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.Event = undefined;\r\n\r\nvar _EventDispatcher = __webpack_require__(1);\r\n\r\nvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\nexports.default = _EventDispatcher2.default;\r\nexports.Event = _EventDispatcher.Event;\r\n\r\n/***/ }),\r\n/* 1 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\n\r\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar hasOwnProp = function hasOwnProp(target, name) {\r\n  return Object.prototype.hasOwnProperty.call(target, name);\r\n}; /**\r\n    * Created by Oleg Galaburda on 09.02.16.\r\n    * \r\n    */\r\n\r\nvar Event = exports.Event = function () {\r\n  function Event(type, data) {\r\n    _classCallCheck(this, Event);\r\n\r\n    this.type = type;\r\n    this.data = data || null;\r\n    this.defaultPrevented = false;\r\n  }\r\n\r\n  _createClass(Event, [{\r\n    key: 'toJSON',\r\n    value: function toJSON() {\r\n      return { type: this.type, data: this.data };\r\n    }\r\n  }, {\r\n    key: 'isDefaultPrevented',\r\n    value: function isDefaultPrevented() {\r\n      return this.defaultPrevented;\r\n    }\r\n  }, {\r\n    key: 'preventDefault',\r\n    value: function preventDefault() {\r\n      this.defaultPrevented = true;\r\n    }\r\n  }]);\r\n\r\n  return Event;\r\n}();\r\n\r\nvar ListenersRunner = function () {\r\n  function ListenersRunner(listeners, onStopped, onComplete) {\r\n    var _this = this;\r\n\r\n    _classCallCheck(this, ListenersRunner);\r\n\r\n    this.index = -1;\r\n    this.immediatelyStopped = false;\r\n\r\n    this.stopImmediatePropagation = function () {\r\n      _this.immediatelyStopped = true;\r\n    };\r\n\r\n    this.listeners = listeners;\r\n    this.onStopped = onStopped;\r\n    this.onComplete = onComplete;\r\n  }\r\n\r\n  _createClass(ListenersRunner, [{\r\n    key: 'run',\r\n    value: function run(event, target) {\r\n      var listener = void 0;\r\n      var listeners = this.listeners;\r\n\r\n      this.augmentEvent(event);\r\n      // TODO this has to be handled in separate object ListenersRunner that should be\r\n      // created for each call() call and asked for index validation on each listener remove.\r\n      for (this.index = 0; this.index < listeners.length; this.index++) {\r\n        if (this.immediatelyStopped) break;\r\n        listener = listeners[this.index];\r\n        listener.call(target, event);\r\n      }\r\n      this.clearEvent(event);\r\n      this.onComplete(this);\r\n    }\r\n  }, {\r\n    key: 'augmentEvent',\r\n    value: function augmentEvent(eventObject) {\r\n      var event = eventObject;\r\n      event.stopPropagation = this.onStopped;\r\n      event.stopImmediatePropagation = this.stopImmediatePropagation;\r\n    }\r\n\r\n    /* eslint class-methods-use-this: \"off\" */\r\n\r\n  }, {\r\n    key: 'clearEvent',\r\n    value: function clearEvent(eventObject) {\r\n      var event = eventObject;\r\n      delete event.stopPropagation;\r\n      delete event.stopImmediatePropagation;\r\n    }\r\n  }, {\r\n    key: 'listenerRemoved',\r\n    value: function listenerRemoved(listeners, index) {\r\n      if (listeners === this.listeners && index <= this.index) {\r\n        this.index--;\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return ListenersRunner;\r\n}();\r\n\r\nvar EventListeners = function () {\r\n  function EventListeners() {\r\n    var _this2 = this;\r\n\r\n    _classCallCheck(this, EventListeners);\r\n\r\n    this._listeners = {};\r\n    this._runners = [];\r\n\r\n    this.removeRunner = function (runner) {\r\n      _this2._runners.splice(_this2._runners.indexOf(runner), 1);\r\n    };\r\n  }\r\n  /**\r\n   * key - event Type\r\n   * value - hash of priorities\r\n   *    key - priority\r\n   *    value - list of handlers\r\n   * @type {Object<string, Object.<string, Array<number, Function>>>}\r\n   * @private\r\n   */\r\n\r\n\r\n  _createClass(EventListeners, [{\r\n    key: 'createList',\r\n    value: function createList(eventType, priorityOpt) {\r\n      var priority = parseInt(priorityOpt, 10);\r\n      var target = this.getPrioritiesByKey(eventType);\r\n      var key = String(priority);\r\n      var value = void 0;\r\n      if (hasOwnProp(target, key)) {\r\n        value = target[key];\r\n      } else {\r\n        value = [];\r\n        target[key] = value;\r\n      }\r\n      return value;\r\n    }\r\n  }, {\r\n    key: 'getPrioritiesByKey',\r\n    value: function getPrioritiesByKey(key) {\r\n      var value = void 0;\r\n      if (hasOwnProp(this._listeners, key)) {\r\n        value = this._listeners[key];\r\n      } else {\r\n        value = {};\r\n        this._listeners[key] = value;\r\n      }\r\n      return value;\r\n    }\r\n  }, {\r\n    key: 'add',\r\n    value: function add(eventType, handler, priority) {\r\n      var handlers = this.createList(eventType, priority);\r\n      if (handlers.indexOf(handler) < 0) {\r\n        handlers.push(handler);\r\n      }\r\n    }\r\n  }, {\r\n    key: 'has',\r\n    value: function has(eventType) {\r\n      var priority = void 0;\r\n      var result = false;\r\n      var priorities = this.getPrioritiesByKey(eventType);\r\n      if (priorities) {\r\n        for (priority in priorities) {\r\n          if (hasOwnProp(priorities, priority)) {\r\n            result = true;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n  }, {\r\n    key: 'remove',\r\n    value: function remove(eventType, handler) {\r\n      var _this3 = this;\r\n\r\n      var priorities = this.getPrioritiesByKey(eventType);\r\n      if (priorities) {\r\n        var list = Object.getOwnPropertyNames(priorities);\r\n        var length = list.length;\r\n\r\n        var _loop = function _loop(index) {\r\n          var priority = list[index];\r\n          var handlers = priorities[priority];\r\n          var handlerIndex = handlers.indexOf(handler);\r\n          if (handlerIndex >= 0) {\r\n            handlers.splice(handlerIndex, 1);\r\n            if (!handlers.length) {\r\n              delete priorities[priority];\r\n            }\r\n            _this3._runners.forEach(function (runner) {\r\n              runner.listenerRemoved(handlers, handlerIndex);\r\n            });\r\n          }\r\n        };\r\n\r\n        for (var index = 0; index < length; index++) {\r\n          _loop(index);\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: 'removeAll',\r\n    value: function removeAll(eventType) {\r\n      delete this._listeners[eventType];\r\n    }\r\n  }, {\r\n    key: 'createRunner',\r\n    value: function createRunner(handlers, onStopped) {\r\n      var runner = new ListenersRunner(handlers, onStopped, this.removeRunner);\r\n      this._runners.push(runner);\r\n      return runner;\r\n    }\r\n  }, {\r\n    key: 'call',\r\n    value: function call(event, target) {\r\n      var priorities = this.getPrioritiesByKey(event.type);\r\n      var stopped = false;\r\n      var stopPropagation = function stopPropagation() {\r\n        stopped = true;\r\n      };\r\n      if (priorities) {\r\n        // getOwnPropertyNames() or keys()?\r\n        var list = Object.getOwnPropertyNames(priorities).sort(function (a, b) {\r\n          return a - b;\r\n        });\r\n        var length = list.length;\r\n\r\n        for (var index = 0; index < length; index++) {\r\n          if (stopped) break;\r\n          var _handlers = priorities[list[index]];\r\n          // in case if all handlers of priority were removed while event\r\n          // was dispatched and handlers become undefined.\r\n          if (_handlers) {\r\n            var _runner = this.createRunner(_handlers, stopPropagation);\r\n            _runner.run(event, target);\r\n            if (_runner.immediatelyStopped) break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return EventListeners;\r\n}();\r\n\r\nvar EventDispatcher = function () {\r\n  function EventDispatcher(eventPreprocessor) {\r\n    var noInit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\r\n\r\n    _classCallCheck(this, EventDispatcher);\r\n\r\n    if (!noInit) {\r\n      this.initialize(eventPreprocessor);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n\r\n\r\n  _createClass(EventDispatcher, [{\r\n    key: 'initialize',\r\n    value: function initialize(eventPreprocessor) {\r\n      this._eventPreprocessor = eventPreprocessor;\r\n      this._listeners = new EventListeners();\r\n    }\r\n  }, {\r\n    key: 'addEventListener',\r\n    value: function addEventListener(eventType, listener) {\r\n      var priority = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\r\n\r\n      this._listeners.add(eventType, listener, -priority || 0);\r\n    }\r\n  }, {\r\n    key: 'hasEventListener',\r\n    value: function hasEventListener(eventType) {\r\n      return this._listeners.has(eventType);\r\n    }\r\n  }, {\r\n    key: 'removeEventListener',\r\n    value: function removeEventListener(eventType, listener) {\r\n      this._listeners.remove(eventType, listener);\r\n    }\r\n  }, {\r\n    key: 'removeAllEventListeners',\r\n    value: function removeAllEventListeners(eventType) {\r\n      this._listeners.removeAll(eventType);\r\n    }\r\n  }, {\r\n    key: 'dispatchEvent',\r\n    value: function dispatchEvent(event, data) {\r\n      var eventObject = EventDispatcher.getEvent(event, data);\r\n      if (this._eventPreprocessor) {\r\n        eventObject = this._eventPreprocessor.call(this, eventObject);\r\n      }\r\n      this._listeners.call(eventObject);\r\n    }\r\n  }], [{\r\n    key: 'isObject',\r\n    value: function isObject(value) {\r\n      return (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value !== null;\r\n    }\r\n  }, {\r\n    key: 'getEvent',\r\n    value: function getEvent(eventOrType, optionalData) {\r\n      var event = eventOrType;\r\n      if (!EventDispatcher.isObject(eventOrType)) {\r\n        event = new EventDispatcher.Event(String(eventOrType), optionalData);\r\n      }\r\n      return event;\r\n    }\r\n  }, {\r\n    key: 'create',\r\n    value: function create(eventPreprocessor) {\r\n      return new EventDispatcher(eventPreprocessor);\r\n    }\r\n\r\n    /* eslint no-undef: \"off\" */\r\n\r\n  }]);\r\n\r\n  return EventDispatcher;\r\n}();\r\n\r\nEventDispatcher.Event = Event;\r\n\r\nexports.default = EventDispatcher;\r\n\r\n/***/ })\r\n/******/ ]);\r\n});\r\n//# sourceMappingURL=event-dispatcher.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/event-dispatcher/dist/event-dispatcher.js\n// module id = 10\n// module chunks = 0","import { TARGET_DATA, TARGET_INTERNALS, getId } from '../utils';\r\n\r\nconst getPoolId = (pool) => (pool ? pool.id : null);\r\n\r\n/**\r\n * @exports TargetResource\r\n */\r\nclass TargetResource {\r\n  constructor(pool, resource, type, id) {\r\n    Object.defineProperties(this, {\r\n      [TARGET_INTERNALS]: {\r\n        value: {\r\n          pool,\r\n          resource,\r\n          type,\r\n          id,\r\n          active: true,\r\n          poolId: getPoolId(pool),\r\n        },\r\n      },\r\n      [TARGET_DATA]: {\r\n        get: this.toJSON,\r\n      },\r\n    });\r\n  }\r\n\r\n\r\n  get active() {\r\n    return Boolean(this[TARGET_INTERNALS].active);\r\n  }\r\n\r\n  get resource() {\r\n    return this[TARGET_INTERNALS].resource;\r\n  }\r\n\r\n  get type() {\r\n    return this[TARGET_INTERNALS].type || typeof this[TARGET_INTERNALS].resource;\r\n  }\r\n\r\n  get id() {\r\n    return this[TARGET_INTERNALS].id;\r\n  }\r\n\r\n  get poolId() {\r\n    return this[TARGET_INTERNALS].poolId;\r\n  }\r\n\r\n  toJSON = () => ({\r\n    [TARGET_DATA]: {\r\n      id: this.id,\r\n      type: this.type,\r\n      poolId: this.poolId,\r\n    },\r\n  });\r\n\r\n  destroy() {\r\n    const { id, pool } = this;\r\n    const internals = this[TARGET_INTERNALS];\r\n\r\n    if (!internals.active) {\r\n      return;\r\n    }\r\n\r\n    internals.active = false;\r\n    pool.remove(id);\r\n\r\n    for (const name in internals) {\r\n      delete internals[name];\r\n    }\r\n  }\r\n}\r\n\r\nexport const createTargetResource = (pool, resource, resourceType, id) => (\r\n  new TargetResource(pool, resource, resourceType, id || getId())\r\n);\r\n\r\nexport default TargetResource;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/TargetResource.js","import { createDeferred, TARGET_INTERNALS } from '../utils';\r\nimport { createRequestPackage } from '../request';\r\nimport { setTemporary } from '../request/RequestTarget';\r\n\r\nconst createCommandHandlerFor = (\r\n  factoryWrapper,\r\n  propertyName,\r\n  commandType,\r\n  isTemporary,\r\n  cacheable,\r\n) => {\r\n  const { factory, checkState, getChildRequest } = factoryWrapper;\r\n\r\n  function commandHandler(command, value, ...args) {\r\n    let result;\r\n    let promise;\r\n    if (this[TARGET_INTERNALS]) {\r\n      const pack = createRequestPackage(\r\n        commandType,\r\n        [command, value, ...args],\r\n        this[TARGET_INTERNALS].id,\r\n      );\r\n      // FIXME Explicitly pass scope\r\n      const request = getChildRequest(propertyName, pack, cacheable);\r\n      result = request.child;\r\n      if (request.deferred) {\r\n        promise = this[TARGET_INTERNALS].sendRequest(propertyName, pack, request.deferred, result);\r\n        if (promise) {\r\n          if (isTemporary) {\r\n            // FIXME isTemporary must be called before `result` was resolved\r\n            // FIXME remove default `isTemporary`, if not defined just skip\r\n            checkState(promise, isTemporary, this, result, pack);\r\n          }\r\n        } else {\r\n          result = null;\r\n          promise = Promise.reject(new Error('Initial request failed and didn\\'t result in promise.'));\r\n        }\r\n      }\r\n    } else {\r\n      promise = Promise.reject(new Error('Target object is not a resource, so cannot be used for calls.'));\r\n    }\r\n    return result || factory.create(promise);\r\n  }\r\n\r\n  return commandHandler;\r\n};\r\n\r\nclass CommandHandlerFactory {\r\n  members = new Map();\r\n  factory = null;\r\n\r\n  constructor(factory = null) {\r\n    this.setFactory(factory);\r\n  }\r\n\r\n  /**\r\n   * @param {CommandDescriptor} descriptor\r\n   * @returns {Function}\r\n   * @private\r\n   */\r\n  get(descriptor) {\r\n    const propertyName = descriptor.name;\r\n    if (!this.members.has(propertyName)) {\r\n      this.members.set(\r\n        propertyName,\r\n        this.create(\r\n          descriptor.name,\r\n          descriptor.type,\r\n          descriptor.isTemporary,\r\n          descriptor.cacheable,\r\n        ),\r\n      );\r\n    }\r\n    return this.members.get(propertyName);\r\n  }\r\n\r\n  create(propertyName, commandType, isTemporary, cacheable) {\r\n    return createCommandHandlerFor(this, propertyName, commandType, isTemporary, cacheable);\r\n  }\r\n\r\n  getChildRequest = (propertyName, pack, cacheable) => {\r\n    let child;\r\n    let deferred;\r\n\r\n    if (cacheable) {\r\n      child = this.factory.getCached(propertyName, pack);\r\n    }\r\n\r\n    if (!child) {\r\n      deferred = createDeferred();\r\n      if (cacheable) {\r\n        child = this.factory.createCached(deferred.promise, propertyName, pack);\r\n      } else {\r\n        child = this.factory.create(deferred.promise, propertyName, pack);\r\n      }\r\n    }\r\n    return { child, deferred };\r\n  };\r\n\r\n  checkState = (promise, isTemporaryFn, parentRequest, childRequest, pack) => {\r\n    if (promise) {\r\n      promise.then((data) => {\r\n        const isTemporary = Boolean(isTemporaryFn(parentRequest, childRequest, pack, data));\r\n        setTemporary(childRequest, isTemporary);\r\n      });\r\n    }\r\n  };\r\n\r\n  setFactory(factory) {\r\n    this.factory = factory;\r\n  }\r\n}\r\n\r\nexport default CommandHandlerFactory;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/commands/CommandHandlerFactory.js","import ResourcePool from '../ResourcePool';\r\n\r\nexport class DefaultResourcePool extends ResourcePool {\r\n  // INFO default ResourcePool should not be destroyable;\r\n  destroy() {\r\n    throw new Error('Default ResourcePool cannot be destroyed.');\r\n  }\r\n}\r\n\r\nconst defaultResourcePool = new DefaultResourcePool();\r\n\r\nexport default defaultResourcePool;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/utils/defaultResourcePool.js","import { isResource } from './resourceUtils';\r\n\r\n/**\r\n * Interface for all resource types, these will be treated as resources automatically\r\n * @interface\r\n * @alias DataAccessInterface.IConvertible\r\n */\r\nclass IConvertible {\r\n\r\n}\r\n\r\nexport const isResourceConvertible = (data) => (\r\n  isResource(data)\r\n  || typeof data === 'function'\r\n  || data instanceof IConvertible\r\n);\r\n\r\nexport default IConvertible;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/utils/IConvertible.js","import { TARGET_INTERNALS, TARGET_DATA, getId } from '../utils';\r\nimport { RequestTarget } from '../../request';\r\nimport defaultResourcePool from './defaultResourcePool';\r\nimport IConvertible from './IConvertible';\r\nimport TargetResource from '../TargetResource';\r\n\r\nexport const isResource = (object) => object instanceof TargetResource ||\r\n  object instanceof RequestTarget ||\r\n  (object && (\r\n    // this case for RequestTargets and TargetResources which contain\r\n    // data in TARGET_INTERNALS Symbol\r\n    // We check for their types above but in cases when Proxies are enabled\r\n    // their type will be Function and verification will come to this case\r\n    typeof object[TARGET_INTERNALS] === 'object' ||\r\n    // this case for RAW resources passed via JSON conversion,\r\n    // look like {'resource::data': {id: '1111', poolId: '22222'}}\r\n    typeof object[TARGET_DATA] === 'object'\r\n  ));\r\n\r\nexport const getResourceId = (object) => {\r\n  // if (object instanceof TargetResource || object instanceof RequestTarget) {\r\n  if (typeof object[TARGET_INTERNALS] === 'object') {\r\n    return object[TARGET_INTERNALS];\r\n  } else if (isResource(object)) {\r\n    return object[TARGET_DATA].id;\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport const getResourcePoolId = (object) => {\r\n  if (typeof object[TARGET_INTERNALS] === 'object') {\r\n    return object[TARGET_INTERNALS].poolId;\r\n  } else if (isResource(object)) {\r\n    return object[TARGET_DATA].poolId;\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport const getResourceType = (object) => {\r\n  if (typeof object[TARGET_INTERNALS] === 'object') {\r\n    return object[TARGET_INTERNALS].type;\r\n  } else if (isResource(object)) {\r\n    return object[TARGET_DATA].type;\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport const getRawResource = (object, pool) => {\r\n  pool = pool || defaultResourcePool;\r\n\r\n  if (object instanceof TargetResource) {\r\n    return object.toJSON();\r\n  } else if (typeof object[TARGET_INTERNALS] === 'object') {\r\n    return RequestTarget.toJSON(object);\r\n  } else if (object instanceof IConvertible || typeof object === 'function') {\r\n    return pool.set(object).toJSON();\r\n  } else if (isResource(object)) {\r\n    return object;\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport const getResourceData = (object) => {\r\n  const data = getRawResource(object);\r\n  return data ? data[TARGET_DATA] : null;\r\n};\r\n\r\nexport const createForeignResource = (type, resource = {}) => {\r\n  resource[TARGET_DATA] = {\r\n    id: `foreign-id-${getId()}`,\r\n    type: type || typeof resource,\r\n    poolId: `foreign-poolId-${getId()}`,\r\n  };\r\n\r\n  return resource;\r\n};\r\n\r\nexport const areSameResource = (resource1, resource2) => (\r\n  isResource(resource1)\r\n  && isResource(resource2)\r\n  && getResourceId(resource1) === getResourceId(resource2)\r\n  && getResourcePoolId(resource1) === getResourcePoolId(resource2)\r\n);\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/utils/resourceUtils.js","import { TargetStatus, createDeferred, TARGET_DATA } from '../utils';\r\nimport { createRequestPackage } from './utils';\r\nimport { isResource, getResourceData } from '../resource/utils';\r\nimport { getRawPromise } from './RequestTarget';\r\nimport {\r\n  RequestTargetCommandFields,\r\n  RequestTargetCommandNames,\r\n} from '../commands/RequestTargetCommands';\r\n\r\n/**\r\n * @exports RequestTargetInternals\r\n */\r\n\r\nclass RequestTargetInternals {\r\n\r\n  /**\r\n   * @class RequestTargetInternals\r\n   * @param {DataAccessInterface.RequestTarget} _requestTarget\r\n   * @param {Promise} _promise\r\n   * @param {RequestHandlers} _requestHandlers\r\n   * @mixin Promise\r\n   */\r\n  constructor(requestTarget, promise, requestHandlers) {\r\n    this.requestHandlers = requestHandlers;\r\n    this.requestTarget = requestTarget;\r\n    this.link = {};\r\n    // INFO this should be not initialized i.e. keep it undefined, this will be checked later\r\n    this.temporary;\r\n    this.hadChildPromises = false;\r\n    this.status = TargetStatus.PENDING;\r\n    this.queue = [];\r\n    this.children = [];\r\n    this.deferred = createDeferred();\r\n    this.promise = this.deferred.promise\r\n      .then(\r\n        this.handlePromiseResolve,\r\n        this.handlePromiseReject,\r\n      );\r\n  }\r\n\r\n  handlePromiseResolve = (value) => {\r\n    this.status = TargetStatus.RESOLVED;\r\n    if (isResource(value)) {\r\n      this.link = getResourceData(value);\r\n      /*\r\n       INFO Sending \"this\" as result of resolve() handler, causes infinite\r\n       loop of this.then(), so I've used wrapper object\r\n      */\r\n      // FIXME Check if Proxy wrapper will work with promise result, probably not\r\n      value = { target: this.requestTarget };\r\n      this.sendQueue();\r\n      /*\r\n      In theory, at time of these lines executing, \"temporary\" property should be\r\n      already set via _commandHandler() set from RequestTargetDecorator\r\n       */\r\n      if (this.temporary) {\r\n        this.destroy();\r\n      }\r\n    } else { // else { value must be passed as is }\r\n      this.rejectQueue('Target of the call is not a resource and call cannot be sent.');\r\n    }\r\n    this.deferred.resolve(value);\r\n    delete this.deferred;\r\n  };\r\n\r\n  handlePromiseReject = (value) => {\r\n    this.status = TargetStatus.REJECTED;\r\n    this.rejectQueue('Target of the call was rejected and call cannot be sent.');\r\n    this.deferred.reject(value);\r\n    delete this.deferred;\r\n  };\r\n\r\n  get poolId() {\r\n    return this.link.poolId || null;\r\n  }\r\n\r\n  get type() {\r\n    return this.link.type || null;\r\n  }\r\n\r\n  get id() {\r\n    return this.link.id || null;\r\n  }\r\n\r\n  sendQueue() {\r\n    while (this.queue && this.queue.length) {\r\n      const [name, pack, deferred, child] = this.queue.shift();\r\n      pack.target = this.link.id;\r\n      this.handleRequest(name, pack, deferred, child);\r\n    }\r\n    this.queue = null;\r\n  }\r\n\r\n  rejectQueue(message) {\r\n    const error = new Error(message || 'This request was rejected before sending.');\r\n    while (this.queue && this.queue.length) {\r\n      /**\r\n       * @type {Array.<string, CommandDataPack, DataAccessInterface.Deferred>}\r\n       */\r\n      // FIXME [string, {type:string, cmd:string, value:*, target:string}, Deferred]\r\n      // how to describe this in JSDoc?\r\n      const [, , deferred] = this.queue.shift();\r\n      deferred.reject(error);\r\n    }\r\n    this.queue = null;\r\n  }\r\n\r\n  sendRequest(name, pack, deferred, child) {\r\n    let promise = null;\r\n\r\n    if (this.requestHandlers.hasHandler(name)) {\r\n      promise = this.applyRequest(name, pack, deferred || createDeferred(), child);\r\n    } else {\r\n      throw new Error(`Request handler for \"${name}\" is not registered.`);\r\n    }\r\n\r\n    if (child) {\r\n      this.registerChild(child);\r\n    }\r\n\r\n    return promise;\r\n  }\r\n\r\n  addToQueue(name, pack, deferred, child) {\r\n    this.queue.push([name, pack, deferred, child]);\r\n  }\r\n\r\n  applyRequest(name, pack, deferred, child) {\r\n    let { promise } = deferred;\r\n\r\n    switch (this.status) {\r\n      case TargetStatus.PENDING:\r\n        this.addToQueue(name, pack, deferred, child);\r\n        break;\r\n      case TargetStatus.REJECTED:\r\n        promise = Promise.reject(new Error('Target object was rejected and cannot be used for calls.'));\r\n        break;\r\n      case TargetStatus.DESTROYED:\r\n        promise = Promise.reject(new Error('Target object was destroyed and cannot be used for calls.'));\r\n        break;\r\n      case TargetStatus.RESOLVED:\r\n        this.handleRequest(name, pack, deferred, child);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    return promise;\r\n  }\r\n\r\n  handleRequest(name, pack, deferred, child) {\r\n    this.requestHandlers.handle(this.requestTarget, name, pack, deferred, child);\r\n  }\r\n\r\n  registerChild(childRequestTarget) {\r\n    const handleChildRequest = () => {\r\n      if (this.children) {\r\n        const index = this.children.indexOf(childRequestTarget);\r\n        if (index >= 0) {\r\n          this.children.splice(index, 1);\r\n        }\r\n      }\r\n    };\r\n\r\n    this.children.push(childRequestTarget);\r\n    getRawPromise(childRequestTarget)\r\n      .then(handleChildRequest, handleChildRequest);\r\n  }\r\n\r\n  isActive() {\r\n    return this.status === TargetStatus.PENDING || this.status === TargetStatus.RESOLVED;\r\n  }\r\n\r\n  canBeDestroyed() {\r\n    return this.status === TargetStatus.RESOLVED || this.status === TargetStatus.REJECTED;\r\n  }\r\n\r\n  destroy() {\r\n    let promise = null;\r\n    if (this.canBeDestroyed()) {\r\n      // INFO I should not clear children list, since they are pending and requests already sent.\r\n      if (this.status === TargetStatus.RESOLVED) {\r\n        promise = this.sendRequest(\r\n          RequestTargetCommandFields.DESTROY,\r\n          createRequestPackage(\r\n            RequestTargetCommandNames.DESTROY,\r\n            [null, null],\r\n            this.id,\r\n          ),\r\n        );\r\n      } else {\r\n        promise = Promise.resolve();\r\n      }\r\n      this.status = TargetStatus.DESTROYED;\r\n    } else {\r\n      promise = Promise.reject(new Error('Invalid or already destroyed target.'));\r\n    }\r\n    return promise;\r\n  }\r\n\r\n  then(handleResolve, handleReject) {\r\n    const child = this.promise.then(handleResolve, handleReject);\r\n    this.hadChildPromises = true;\r\n    return child;\r\n  }\r\n\r\n  catch(handleReject) {\r\n    const child = this.promise.catch(handleReject);\r\n    this.hadChildPromises = true;\r\n    return child;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      [TARGET_DATA]: {\r\n        id: this.link.id,\r\n        type: this.link.type,\r\n        poolId: this.link.poolId,\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\nexport default RequestTargetInternals;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/RequestTargetInternals.js","import CommandDescriptor, { addDescriptorTo } from './CommandDescriptor';\r\n\r\nexport const RequestTargetCommandNames = Object.freeze({\r\n  DESTROY: '::destroy.resource',\r\n});\r\n\r\nexport const RequestTargetCommandFields = Object.freeze({\r\n  DESTROY: Symbol('::destroy.resource'),\r\n});\r\n\r\n/**\r\n * Destroy is unique type that exists for every RequestTarget\r\n * and does not have a method on its instances. This type will\r\n * be send each time RequestTarget.destroy() is applied to\r\n * RequestTarget in stance.\r\n */\r\nclass RequestTargetCommands {\r\n  constructor() {\r\n    Object.freeze(this);\r\n  }\r\n\r\n  createDESTROYDescriptor = (handler, target) => {\r\n    const descriptor = new CommandDescriptor(\r\n      RequestTargetCommandNames.DESTROY,\r\n      handler,\r\n      RequestTargetCommandFields.DESTROY,\r\n    );\r\n    descriptor.virtual = true;\r\n    addDescriptorTo(descriptor, target);\r\n    return Object.freeze(descriptor);\r\n  };\r\n\r\n}\r\n\r\nexport default new RequestTargetCommands();\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/commands/RequestTargetCommands.js","import CommandHandlerFactory from '../commands/CommandHandlerFactory';\r\nimport { getResourceType } from '../resource';\r\n\r\nclass RequestTargetDecorator {\r\n\r\n  /**\r\n   * @param {RequestFactory} factory\r\n   * @param {RequestHandlers} handlers\r\n   * @private\r\n   */\r\n  constructor(factory, handlers) {\r\n    this.handlers = handlers;\r\n    this.members = new CommandHandlerFactory(factory);\r\n  }\r\n\r\n  apply(request) {\r\n    let result;\r\n\r\n    if (!this.handlers.available) return;\r\n    /* FIXME revert change when ES6 will be supported widely\r\n     for (var descriptor of this.handlers) {\r\n     request[descriptor.name] = this.getMember(descriptor.name, descriptor.type);\r\n     }\r\n     */\r\n\r\n    const iterator = this.handlers.getHandlers(getResourceType(request));\r\n    while (!(result = iterator.next()).done) {\r\n      const descriptor = result.value;\r\n      request[descriptor.name] = this.members.get(descriptor);\r\n    }\r\n    return request;\r\n  }\r\n\r\n  setFactory(factory) {\r\n    if (factory) {\r\n      this.members.setFactory(factory);\r\n    }\r\n  }\r\n}\r\n\r\nexport const createRequestTargetDecorator = (factory, handlers) => (\r\n  new RequestTargetDecorator(factory, handlers)\r\n);\r\n\r\nexport default RequestTargetDecorator;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/RequestTargetDecorator.js","import { createRequestTargetDecorator } from './RequestTargetDecorator';\r\nimport { createRequestTarget } from './RequestTarget';\r\n\r\nexport const FACTORY_DECORATOR_FIELD = Symbol('request.factory::decorator');\r\nexport const FACTORY_HANDLERS_FIELD = Symbol('request.factory::handlers');\r\n\r\nclass RequestFactory {\r\n  /*\r\n   function DummyCacheImpl() {\r\n   this.get = function(name, pack) {\r\n\r\n   };\r\n   this.set = function(name, pack, request) {\r\n\r\n   };\r\n   }\r\n   */\r\n  constructor(handlers, cacheImpl = null, noInit = false) {\r\n    if (noInit) {\r\n      return;\r\n    }\r\n\r\n    this.cache = cacheImpl;\r\n    this[FACTORY_HANDLERS_FIELD] = handlers;\r\n    this[FACTORY_DECORATOR_FIELD] = createRequestTargetDecorator(this, handlers);\r\n  }\r\n\r\n  create(promise) {\r\n    const request = createRequestTarget(promise, this[FACTORY_HANDLERS_FIELD]);\r\n    if (this[FACTORY_HANDLERS_FIELD].available) {\r\n      this[FACTORY_DECORATOR_FIELD].apply(request);\r\n    }\r\n    return request;\r\n  }\r\n\r\n  getCached(name, pack) {\r\n    return this.cache && this.cache.get(name, pack);\r\n  }\r\n\r\n  createCached(promise, name, pack) {\r\n    let request = null;\r\n    if (this.cache) {\r\n      request = this.create(promise);\r\n      this.cache.set(name, pack, request);\r\n    }\r\n    return request;\r\n  }\r\n\r\n}\r\n\r\nexport const createRequestFactory = (handlers, cacheImpl) => (\r\n  new RequestFactory(handlers, cacheImpl)\r\n);\r\n\r\nexport default RequestFactory;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/RequestFactory.js","import DataAccessInterface, * as api from './index';\r\n\r\nmodule.exports = Object.assign(DataAccessInterface, api);\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/direct.js","import DataAccessInterface, {\r\n  create,\r\n  dummy,\r\n} from './DataAccessInterface';\r\nimport {\r\n  createDeferred,\r\n  Deferred,\r\n} from './utils';\r\nimport {\r\n  CommandDescriptor,\r\n  Reserved,\r\n  RequestTargetCommands,\r\n  ProxyCommands,\r\n} from './commands';\r\nimport { RequestTarget } from './request';\r\nimport {\r\n  ResourcePool,\r\n  ResourcePoolRegistry,\r\n  ResourceConverter,\r\n} from './resource';\r\nimport {\r\n  IConvertible,\r\n  isResourceConvertible,\r\n  getRawResource,\r\n  getResourceData,\r\n  getResourceId,\r\n  getResourcePoolId,\r\n  getResourceType,\r\n  isResource,\r\n} from './resource/utils';\r\n\r\nexport default DataAccessInterface;\r\n\r\nexport {\r\n  create,\r\n  dummy,\r\n  createDeferred,\r\n  Deferred,\r\n  CommandDescriptor,\r\n  Reserved,\r\n  RequestTargetCommands,\r\n  ProxyCommands,\r\n  RequestTarget,\r\n  ResourcePool,\r\n  ResourcePoolRegistry,\r\n  ResourceConverter,\r\n  IConvertible,\r\n  isResourceConvertible,\r\n  getRawResource,\r\n  getResourceData,\r\n  getResourceId,\r\n  getResourcePoolId,\r\n  getResourceType,\r\n  isResource,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/index.js","/**\r\n * @exports DataAccessInterface\r\n */\r\n\r\nimport { areProxiesAvailable } from './utils';\r\nimport {\r\n  createRequestHandlers,\r\n  createRequestProxyFactory,\r\n  createRequestFactory,\r\n} from './request';\r\nimport {\r\n  createResourceConverter,\r\n  createResourcePoolRegistry,\r\n  ResourcePoolEvents,\r\n} from './resource';\r\nimport {\r\n  defaultResourcePool,\r\n  isResource,\r\n  getResourcePoolId,\r\n  getResourceId,\r\n} from './resource/utils';\r\n\r\nclass DataAccessInterface {\r\n\r\n  /**\r\n   * @class DataAccessInterface\r\n   * @classdesc Facade of Deferred Data Access library, it holds all\r\n   * of public API -- objects like ResourcePool and methods to work\r\n   * with resources.\r\n   * @param {CommandDescriptor[]|Object.<string, Function|CommandDescriptor>} descriptors\r\n   * @param {boolean} [proxyEnabled=false]\r\n   * @param {ResourcePoolRegistry} [poolRegistry]\r\n   * @param {ResourcePool} [pool]\r\n   * @param {ICacheImpl} [cacheImpl]\r\n   */\r\n  constructor(\r\n    descriptors,\r\n    proxyEnabled = true,\r\n    poolRegistry = null,\r\n    pool = null,\r\n    cacheImpl = null,\r\n  ) {\r\n    this.poolRegistry = poolRegistry;\r\n    this.pool = pool;\r\n    this.cache = cacheImpl;\r\n    this.initialize(descriptors, proxyEnabled);\r\n  }\r\n\r\n  initialize(descriptors, proxyEnabled) {\r\n    if (proxyEnabled && !areProxiesAvailable()) {\r\n      throw new Error('Proxies are not available in this environment');\r\n    }\r\n\r\n    this.handlers = createRequestHandlers(proxyEnabled);\r\n    this.resourceConverter = createResourceConverter(\r\n      this.factory,\r\n      this.poolRegistry,\r\n      this.pool,\r\n      this.handlers,\r\n    );\r\n\r\n    if (proxyEnabled) {\r\n      this.factory = createRequestProxyFactory(this.handlers, this.cache);\r\n    } else {\r\n      this.factory = createRequestFactory(this.handlers, this.cache);\r\n    }\r\n\r\n    if (!this.poolRegistry) {\r\n      this.poolRegistry = createResourcePoolRegistry();\r\n    }\r\n\r\n    if (this.pool) {\r\n      this.poolRegistry.register(this.pool);\r\n    } else if (this.pool !== undefined) {\r\n      this.pool = this.poolRegistry.createPool();\r\n    } else {\r\n      this.pool = defaultResourcePool;\r\n    }\r\n\r\n    const poolDestroyedHandler = () => {\r\n      this.pool.removeEventListener(ResourcePoolEvents.POOL_DESTROYED, poolDestroyedHandler);\r\n      this.pool = this.poolRegistry.createPool();\r\n      this.pool.addEventListener(ResourcePoolEvents.POOL_DESTROYED, poolDestroyedHandler);\r\n    };\r\n\r\n    this.handlers.setHandlers(descriptors);\r\n    this.pool.addEventListener(ResourcePoolEvents.POOL_DESTROYED, poolDestroyedHandler);\r\n  }\r\n\r\n  get proxyEnabled() {\r\n    return this.handlers.proxyEnabled;\r\n  }\r\n\r\n  parse(data) {\r\n    return this.resourceConverter.parse(data);\r\n  }\r\n\r\n  toJSON(data) {\r\n    return this.resourceConverter.toJSON(data);\r\n  }\r\n\r\n  isOwnResource(resource) {\r\n    /**\r\n     * @type {DataAccessInterface.ResourcePool}\r\n     */\r\n    let pool;\r\n    if (isResource(resource)) {\r\n      pool = this.poolRegistry.get(getResourcePoolId(resource));\r\n      return pool && pool.has(getResourceId(resource));\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nexport const create = (handlers, proxyEnabled, poolRegistry, pool, cacheImpl) =>\r\n  new DataAccessInterface(handlers, proxyEnabled, poolRegistry, pool, cacheImpl);\r\n\r\nexport const dummy = (handlers, proxyEnabled, poolRegistry, pool, cacheImpl) => {\r\n  const api = new DataAccessInterface(handlers, proxyEnabled, poolRegistry, pool, cacheImpl);\r\n  return api.parse(handlers());\r\n};\r\n\r\nexport default DataAccessInterface;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/DataAccessInterface.js","const createRequestPackage = (type, args, targetId) => {\r\n  const result = {\r\n    type,\r\n    cmd: args[0], // cmd,\r\n    value: args[1], // value,\r\n    target: targetId,\r\n  };\r\n\r\n  // FIXME why?\r\n  Object.defineProperty(result, 'args', {\r\n    value: args,\r\n  });\r\n\r\n  return result;\r\n};\r\n\r\nexport default createRequestPackage;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/utils/createRequestPackage.js","import { Reserved, createCommandDescriptor, CommandDescriptor } from '../../commands';\r\n\r\n/**\r\n * Checks for CommandDescriptor uniqueness and reserved words usage.\r\n * @param {DataAccessInterface.CommandDescriptor} descriptor\r\n * @param {Object.<string, DataAccessInterface.CommandDescriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.CommandDescriptor>} properties\r\n * @private\r\n */\r\nconst applyDescriptor = (descriptor, descriptors, properties) => {\r\n  const { name } = descriptor;\r\n  if (name in Reserved.names) {\r\n    throw new Error(`Name \"${name}\" is reserved and cannot be used in descriptor.`);\r\n  }\r\n  if (\r\n    Object.prototype.hasOwnProperty.call(descriptors, name)\r\n    && descriptors[name] instanceof CommandDescriptor\r\n  ) {\r\n    throw new Error(`Field names should be unique, \"${String(name)}\" field has duplicates.`);\r\n  }\r\n  descriptors[name] = descriptor;\r\n  if (!descriptor.virtual) {\r\n    properties.push(descriptor);\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Array} handlers\r\n * @param {Object} descriptors\r\n * @private\r\n */\r\nconst filterArray = (handlers, descriptors, properties) => {\r\n  const { length } = handlers;\r\n  for (let index = 0; index < length; index++) {\r\n    const value = handlers[index];\r\n    if (value instanceof CommandDescriptor) {\r\n      applyDescriptor(value, descriptors, properties);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Object} handlers\r\n * @param {Object.<string, DataAccessInterface.CommandDescriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.CommandDescriptor>} properties\r\n * @private\r\n */\r\nconst filterHash = (handlers, descriptors, properties) => {\r\n  if (!handlers) return;\r\n  const keys = Object.getOwnPropertyNames(handlers).concat(Object.getOwnPropertySymbols(handlers));\r\n  const { length } = keys;\r\n  for (let index = 0; index < length; index++) {\r\n    const name = keys[index];\r\n    let value = handlers[name];\r\n    if (typeof value === 'function') {\r\n      value = createCommandDescriptor(name, value);\r\n    }\r\n    if (value instanceof CommandDescriptor) {\r\n      applyDescriptor(value, descriptors, properties);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * @method RequestHandlers.filterHandlers\r\n * @param {Array|Object} handlers\r\n * @param {Object.<string, DataAccessInterface.CommandDescriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.CommandDescriptor>} properties\r\n */\r\nconst filterRequestHandlers = (handlers, descriptors, properties) => {\r\n  if (handlers instanceof Array) {\r\n    filterArray(handlers, descriptors, properties);\r\n  } else {\r\n    filterHash(handlers, descriptors, properties);\r\n  }\r\n};\r\n\r\nexport default filterRequestHandlers;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/utils/filterRequestHandlers.js","import EventDispatcher from 'event-dispatcher';\r\nimport {\r\n  getResourcePoolId,\r\n  getResourceId,\r\n  isResource,\r\n  isResourceConvertible,\r\n  getRawResource,\r\n} from './utils';\r\nimport { isPending } from '../request/RequestTarget';\r\n\r\nexport const ResourceConverterEvents = Object.freeze({\r\n  RESOURCE_CREATED: 'resourceCreated',\r\n  RESOURCE_CONVERTED: 'resourceConverted',\r\n});\r\n\r\n/**\r\n * Resource converter contains bunch of methods to lookup for resources\r\n * and registering them, converting them into RAWResource or into\r\n * RequestTargets, depending on their origin.\r\n * Before sending data, bundled resources should be registered in ResourcePool\r\n * and then converted to RAWResource objects.\r\n * After data received, its RAWResources should be converted to RequestTargets\r\n * for not resolved resources or to resource target values otherwise.\r\n * Resource can be resolved by its `id` and `poolId`, if ResourceConverter\r\n * can find ResourcePool with id from poolId, it will try to get target\r\n * resource value and replace with it RAWResource object.\r\n * If ResourcePool not found, ResourceConverter assumes that resource come from\r\n * other origin/environment and creates RequestTarget object that can be target\r\n * object for commands.\r\n * ResourceConverter while handling data does not look deeply, so its developer\r\n * responsibility to convert deeply nested resource targets.\r\n * @param {RequestFactory} factory\r\n * @param {ResourcePoolRegistry} registry\r\n * @param {ResourcePool} pool\r\n * @param {RequestHandlers} handlers\r\n * @extends EventDispatcher\r\n */\r\nclass ResourceConverter extends EventDispatcher {\r\n  constructor(factory, registry, pool, handlers = null) {\r\n    super();\r\n    this.factory = factory;\r\n    this.pool = pool;\r\n    this.registry = registry;\r\n\r\n    if (handlers) {\r\n      handlers.setConverter(this);\r\n    }\r\n  }\r\n\r\n  resourceToObject(data) {\r\n    let result;\r\n\r\n    if (isResourceConvertible(data)) {\r\n      result = getRawResource(data, this.pool);\r\n    } else if (typeof data.toJSON === 'function') {\r\n      result = data.toJSON();\r\n    } else {\r\n      return data;\r\n    }\r\n\r\n    if (this.hasEventListener(ResourceConverterEvents.RESOURCE_CONVERTED)) {\r\n      this.dispatchEvent(ResourceConverterEvents.RESOURCE_CONVERTED, {\r\n        data,\r\n        result,\r\n      });\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#objectToResource\r\n   * @param {*} data\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  objectToResource(data) {\r\n    let result = data;\r\n\r\n    if (isResource(data)) {\r\n      const poolId = getResourcePoolId(data);\r\n\r\n      if (this.registry.isRegistered(poolId)) { // target object is stored in current pool\r\n        const target = this.registry.get(poolId).get(getResourceId(data));\r\n\r\n        if (target) {\r\n          result = target.resource;\r\n        }\r\n\r\n      } else { // target object has another origin, should be wrapped\r\n        result = this.factory.create(Promise.resolve(data));\r\n      }\r\n    }\r\n\r\n    if (result !== data && this.hasEventListener(ResourceConverterEvents.RESOURCE_CREATED)) {\r\n      this.dispatchEvent(ResourceConverterEvents.RESOURCE_CREATED, {\r\n        data,\r\n        result,\r\n      });\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#lookupArray\r\n   * @param list\r\n   * @param linkConvertHandler\r\n   * @returns {Array}\r\n   * @private\r\n   */\r\n  lookupArray(list, linkConvertHandler) {\r\n    const result = [];\r\n    const { length } = list;\r\n    for (let index = 0; index < length; index++) {\r\n      // FIXME Array.map()\r\n      result[index] = linkConvertHandler.call(this, list[index]);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#lookupObject\r\n   * @param {*} data\r\n   * @param {Function} linkConvertHandler\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  lookupObject(data, linkConvertHandler) {\r\n    const result = {};\r\n    for (const name in data) {\r\n      if (!Object.property.hasOwnProperty.call(data, name)) continue;\r\n      result[name] = linkConvertHandler.call(this, data[name]);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#toJSON\r\n   * @param {*} data\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  toJSON(data) {\r\n    let result = data;\r\n\r\n    if (data !== undefined && data !== null) {\r\n      if (isResourceConvertible(data)) {\r\n        // if data is RequestTarget, TargetResource, IConvertible, Function or RAW resource data\r\n        result = this.resourceToObject(data);\r\n      } else if (data instanceof Array) {\r\n        // if data is Array of values, check its\r\n        result = this.lookupArray(data, this.resourceToObject);\r\n      } else if (data.constructor === Object) {\r\n        // only Object instances can be looked up, other object types must be converted by hand\r\n        result = this.lookupObject(data, this.resourceToObject);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#parse\r\n   * @param {*} data\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  parse(data) {\r\n    let result = data;\r\n\r\n    if (data !== undefined && data !== null) {\r\n      if (isResource(data)) { // if data is RAW resource data\r\n        result = this.objectToResource(data);\r\n      } else if (data instanceof Array) { // if data is Array of values, check its\r\n        result = this.lookupArray(data, this.objectToResource);\r\n      } else if (data.constructor === Object) {\r\n        result = this.lookupObject(data, this.objectToResource);\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#lookupForPending\r\n   * @param {*} data\r\n   * @returns {Array}\r\n   */\r\n  lookupForPending(data) {\r\n    const result = [];\r\n\r\n    const add = (value) => {\r\n      if (isPending(value)) {\r\n        result.push(value);\r\n      }\r\n      return value;\r\n    };\r\n\r\n    if (typeof data === 'object' && data !== null) {\r\n      if (isPending(data)) {\r\n        result.push(data);\r\n      } else if (data instanceof Array) {\r\n        this.lookupArray(data, add);\r\n      } else if (data.constructor === Object) {\r\n        this.lookupObject(data, add);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n}\r\n\r\n/**\r\n * @param {RequestFactory} factory\r\n * @param {DataAccessInterface.ResourcePoolRegistry} registry\r\n * @param {DataAccessInterface.ResourcePool} pool\r\n * @param {RequestHandlers} handlers\r\n * @returns {ResourceConverter}\r\n */\r\nexport const createResourceConverter = (factory, registry, pool, handlers) => (\r\n  new ResourceConverter(factory, registry, pool, handlers)\r\n);\r\n\r\nexport default ResourceConverter;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/ResourceConverter.js","import EventDispatcher from 'event-dispatcher';\r\nimport defaultResourcePool from './utils';\r\nimport ResourcePool, {\r\n  createResourcePool,\r\n  ResourcePoolEvents,\r\n} from './ResourcePool';\r\n\r\nexport const ResourcePoolRegistryEvents = Object.freeze({\r\n  RESOURCE_POOL_CREATED: 'resourcePoolCreated',\r\n  RESOURCE_POOL_REGISTERED: 'resourcePoolRegistered',\r\n  RESOURCE_POOL_REMOVED: 'resourcePoolRemoved',\r\n});\r\n\r\nconst POOLS_FIELD = Symbol('resource.pool.registry::pools');\r\n\r\n/**\r\n * @classdesc Collection of ResourcePool instances. Allows lookup for ResourcePool by its Id.\r\n * When ResourcePool is registered in ResourcePoolRegistry, it subscribes to\r\n * ResourcePool POOL_DESTROYED event and removes pool from registry after its destroyed.\r\n */\r\nclass ResourcePoolRegistry extends EventDispatcher {\r\n  constructor() {\r\n    super();\r\n    this[POOLS_FIELD] = {};\r\n\r\n    // every registry should keep default pool, so you can have access from anywhere\r\n    this.register(defaultResourcePool);\r\n  }\r\n\r\n  handlePoolDestroyed(event) {\r\n    this.remove(event.data);\r\n  }\r\n\r\n  /**\r\n   * Create and register ResourcePool\r\n   * @returns {DataAccessInterface.ResourcePool} New ResourcePool instance\r\n   */\r\n  createPool() {\r\n    const pool = createResourcePool();\r\n    if (this.hasEventListener(ResourcePoolRegistryEvents.RESOURCE_POOL_CREATED)) {\r\n      this.dispatchEvent(ResourcePoolRegistryEvents.RESOURCE_POOL_CREATED, pool);\r\n    }\r\n    this.register(pool);\r\n    return pool;\r\n  }\r\n\r\n  /**\r\n   * Register ResourcePool instance.\r\n   * @param pool {DataAccessInterface.ResourcePool} ResourcePool instance to be registered\r\n   */\r\n  register(pool) {\r\n    if (Object.prototype.hasOwnProperty.call(this[POOLS_FIELD], pool.id)) return;\r\n    this[POOLS_FIELD][pool.id] = pool;\r\n    pool.addEventListener(ResourcePoolEvents.POOL_DESTROYED, this.handlePoolDestroyed);\r\n    if (this.hasEventListener(ResourcePoolRegistryEvents.RESOURCE_POOL_REGISTERED)) {\r\n      this.dispatchEvent(ResourcePoolRegistryEvents.RESOURCE_POOL_REGISTERED, pool);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Retrieve ResourcePool instance from registry by its Id.\r\n   * @param poolId {String} ResourcePool instance Id\r\n   * @returns {DataAccessInterface.ResourcePool|null}\r\n   */\r\n  get(poolId) {\r\n    return this[POOLS_FIELD][poolId] || null;\r\n  }\r\n\r\n  /**\r\n   * Check if ResourcePool registered in this registry instance.\r\n   * @param pool {DataAccessInterface.ResourcePool|String} ResourcePool instance or its Id.\r\n   * @returns {Boolean}\r\n   */\r\n  isRegistered(pool) {\r\n    return Object.prototype.hasOwnProperty.call(\r\n      this[POOLS_FIELD],\r\n      pool instanceof ResourcePool ? pool.id : String(pool),\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Remove ResourcePool from current registry instance.\r\n   * @param pool {DataAccessInterface.ResourcePool|String} ResourcePool instance or its Id.\r\n   * @returns {Boolean}\r\n   */\r\n  remove(pool) {\r\n    let result = false;\r\n    pool = pool instanceof ResourcePool ? pool : this.get(pool);\r\n    if (pool) {\r\n      pool.removeEventListener(ResourcePool.Events.POOL_DESTROYED, this.handlePoolDestroyed);\r\n      result = delete this[POOLS_FIELD][pool.id];\r\n    }\r\n    if (this.hasEventListener(ResourcePoolRegistryEvents.RESOURCE_POOL_REMOVED)) {\r\n      this.dispatchEvent(ResourcePoolRegistryEvents.RESOURCE_POOL_REMOVED, pool);\r\n    }\r\n    return result;\r\n  }\r\n}\r\n\r\nexport const createResourcePoolRegistry = () => new ResourcePoolRegistry();\r\n\r\nexport default ResourcePoolRegistry;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/ResourcePoolRegistry.js","/**\r\n * Reserved words\r\n */\r\nconst Reserved = Object.freeze({\r\n  /**\r\n   * Contains property names that cannot be used for CommandDescriptor's\r\n   */\r\n  names: Object.freeze({\r\n    // INFO Exposed Promise method, cannot be overwritten by type\r\n    then: true,\r\n    // INFO Exposed Promise method, cannot be overwritten by type\r\n    catch: true,\r\n  }),\r\n});\r\n\r\nexport default Reserved;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/commands/Reserved.js","import { CommandDescriptor, ProxyCommands, ProxyCommandFields } from '../commands';\r\nimport { filterRequestHandlers } from './utils';\r\nimport { getResourceType } from '../resource/utils';\r\n\r\n/**\r\n * Key for default type for handlers that will be applied to any\r\n * resource that does not have type-specific handlers registered\r\n * @type {string}\r\n */\r\nconst DEFAULT_KEY = '';\r\n\r\nexport const areProxyHandlersAvailable = (handlers, throwError) => {\r\n  let result = true;\r\n  const list = ProxyCommands.required;\r\n  const { length } = list;\r\n  for (let index = 0; index < length; index++) {\r\n    const name = list[index];\r\n    if (!(ProxyCommandFields[name] in handlers)) {\r\n      result = false;\r\n      if (throwError) {\r\n        throw new Error(`For Proxy interface, handler \"${name}\" should be set.`);\r\n      }\r\n    }\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const RequestHandlersEvents = Object.freeze({\r\n  HANDLERS_UPDATED: 'handlersUpdated',\r\n});\r\n\r\nclass RequestHandlers {\r\n\r\n  /**\r\n   * @class RequestHandlers\r\n   * @param {boolean} proxyEnabled\r\n   * @private\r\n   */\r\n  constructor(proxyEnabled) {\r\n    // named collection of CommandDescriptor lists that may be applied\r\n    this.properties = {};\r\n    this.descriptors = {};\r\n    this.proxyEnabled = Boolean(proxyEnabled);\r\n    this.converter = null;\r\n  }\r\n\r\n  get available() {\r\n    const nonEmptyList = Object.keys(this.properties).find((item) => Boolean(item && item.length));\r\n    return Boolean(nonEmptyList);\r\n  }\r\n\r\n  setConverter(converter) {\r\n    this.converter = converter;\r\n  }\r\n\r\n  setHandlers(handlers) {\r\n    this.setHandlersByType(DEFAULT_KEY, handlers);\r\n\r\n    Object.keys(handlers).forEach((name) => {\r\n      const type = handlers[name];\r\n      if (type && (type.constructor === Object || type instanceof Array)) {\r\n        this.setHandlersByType(name, type);\r\n      }\r\n    });\r\n\r\n    if (this.proxyEnabled) {\r\n      areProxyHandlersAvailable(this.descriptors, true);\r\n    }\r\n  }\r\n\r\n  setHandlersByType(type, handlers) {\r\n    const descrs = {};\r\n    const props = [];\r\n    filterRequestHandlers(handlers, descrs, props);\r\n    this.descriptors[type] = descrs;\r\n    this.properties[type] = props;\r\n  }\r\n\r\n  /**\r\n   * @method RequestHandlers#hasHandler\r\n   * @param {String|Symbol} name Property name of CommandDescriptor\r\n   * @param {String} [type] Resource type for type-specific handlers\r\n   * @returns {boolean}\r\n   */\r\n  hasHandler(name, type) {\r\n    return (\r\n      this.descriptors[type]\r\n        && Object.prototype.hasOwnProperty.call(this.descriptors[type], name)\r\n    )\r\n      || (\r\n        this.descriptors[DEFAULT_KEY]\r\n        && Object.prototype.hasOwnProperty.call(this.descriptors[DEFAULT_KEY], name)\r\n      );\r\n  }\r\n\r\n  /**\r\n   * IMPORTANT: Returns original list of CommandDescriptors, changing it may cause\r\n   * unexpected result with newly decorated resources.\r\n   * @param {String} [type]\r\n   * @returns {CommandDescriptor[]|null}\r\n   * @private\r\n   */\r\n  getHandlers(type) {\r\n    let descrs = this.descriptors[type || DEFAULT_KEY];\r\n    if (!descrs) {\r\n      descrs = this.descriptors[DEFAULT_KEY];\r\n    }\r\n\r\n    return descrs || null;\r\n  }\r\n\r\n  /**\r\n   * @method RequestHandlers#getHandler\r\n   * @param name\r\n   * @param {String} [type]\r\n   * @returns {*|null}\r\n   * @private\r\n   */\r\n  getHandler(name, type) {\r\n    const handler = (\r\n      this.descriptors[type]\r\n        && this.descriptors[type][name]\r\n    )\r\n      || (\r\n        this.descriptors[DEFAULT_KEY]\r\n        && this.descriptors[DEFAULT_KEY][name]\r\n      );\r\n\r\n    return handler || null;\r\n  }\r\n\r\n  /**\r\n   * @method RequestHandlers#handle\r\n   * @param {DataAccessInterface.RequestTarget} parentRequest\r\n   * @param {String|Symbol} name\r\n   * @param {CommandDataPack} pack\r\n   * @param {DataAccessInterface.Deferred} deferred\r\n   * @param {DataAccessInterface.RequestTarget} [resultRequest]\r\n   * @private\r\n   */\r\n  handle(parentRequest, name, pack, deferred, resultRequest) {\r\n    const list = this.converter ? this.converter.lookupForPending(pack.value) : null;\r\n    if (list && list.length) {\r\n      // FIXME Need to test on all platforms: In other browsers this might not work\r\n      // because may need list of Promise objects, not RequestTargets\r\n      Promise.all(list).then(() => {\r\n        this.handleImmediately(parentRequest, name, pack, deferred, resultRequest);\r\n      });\r\n    } else {\r\n      this.handleImmediately(parentRequest, name, pack, deferred, resultRequest);\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {DataAccessInterface.RequestTarget} parentRequest\r\n   * @param {String|Symbol} name\r\n   * @param {CommandDataPack} data\r\n   * @param {DataAccessInterface.Deferred} deferred\r\n   * @param {DataAccessInterface.RequestTarget} [resultRequest]\r\n   * @private\r\n   */\r\n  handleImmediately(parentRequest, name, data, deferred, resultRequest) {\r\n    /**\r\n     * @type {DataAccessInterface.CommandDescriptor|null}\r\n     */\r\n    const handler = this.getHandler(name, getResourceType(parentRequest));\r\n    if (handler instanceof CommandDescriptor) {\r\n      // INFO result should be applied to deferred.resolve() or deferred.reject()\r\n      handler.handler(parentRequest, data, deferred, resultRequest);\r\n    } else {\r\n      throw new Error(`Command descriptor for \"${name}\" was not found.`);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * @member RequestHandlers.create\r\n * @param {Boolean} proxyEnabled\r\n * @returns {RequestHandlers}\r\n */\r\nexport const createRequestHandlers = (proxyEnabled) => new RequestHandlers(proxyEnabled);\r\n\r\nexport default RequestHandlers;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/RequestHandlers.js","import RequestFactory, { FACTORY_DECORATOR_FIELD, FACTORY_HANDLERS_FIELD } from './RequestFactory';\r\nimport { ProxyCommandFields } from '../commands/ProxyCommands';\r\n\r\nconst FACTORY_FIELD = Symbol('request.proxy.factory::factory');\r\n\r\nconst EXCLUSIONS = {\r\n  /*\r\n   INFO arguments and caller were included because they are required function properties\r\n   */\r\n  arguments: true,\r\n  caller: true,\r\n  prototype: true,\r\n};\r\n\r\nconst wrapWithProxy = (target, handlers) => {\r\n  // INFO Target must be a function so I could use Proxy.call() interceptor.\r\n  function requestTargetProxy() {\r\n  }\r\n\r\n  requestTargetProxy.target = target;\r\n  return new Proxy(requestTargetProxy, handlers);\r\n};\r\n\r\nconst proxyGet = (wrapper, name) => {\r\n  const { target } = wrapper;\r\n  if (name in target || name in EXCLUSIONS || typeof name === 'symbol') {\r\n    return target[name];\r\n  }\r\n  // INFO Proxy should be already applied, so no need in additional wrapping\r\n  return target[ProxyCommandFields.get](name);\r\n};\r\n\r\n// INFO Proxy should be already applied, so no need in additional wrapping\r\nconst proxyApply = (wrapper, thisValue, args) => (\r\n  wrapper.target[ProxyCommandFields.apply](null, args)\r\n);\r\n\r\nconst proxySet = (wrapper, name, value) => {\r\n  const { target } = wrapper;\r\n\r\n  if (name in target || name in EXCLUSIONS || typeof name === 'symbol') {\r\n    target[name] = value;\r\n    return value;\r\n  }\r\n\r\n  return target[ProxyCommandFields.set](name, value);\r\n};\r\n\r\nconst proxyHas = (wrapper, name) => (\r\n  Object.prototype.hasOwnProperty.call(wrapper.target, name)\r\n);\r\n\r\nconst proxyDeleteProperty = (wrapper, name) => {\r\n  const { target } = wrapper;\r\n\r\n  if (ProxyCommandFields.deleteProperty in target) {\r\n    target[ProxyCommandFields.deleteProperty](name);\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nconst proxyOwnKeys = () => Object.getOwnPropertyNames(EXCLUSIONS);\r\n\r\nconst proxyEnumerate = () => Object.getOwnPropertyNames(EXCLUSIONS)[Symbol.iterator]();\r\n\r\nconst proxyGetOwnPropertyDescriptor = (wrapper, name) => {\r\n  if (Object.prototype.hasOwnProperty.call(EXCLUSIONS, name)) {\r\n    return Object.getOwnPropertyDescriptor(wrapper, name);\r\n  }\r\n  return Object.getOwnPropertyDescriptor(wrapper.target, name);\r\n};\r\n\r\n/**\r\n * Builds proper handlers hash for Proxy\r\n * @returns {Function}\r\n */\r\nexport const createProxyHandlers = (handlers = {}) => ({\r\n  get: proxyGet,\r\n  apply: proxyApply,\r\n  set: proxySet,\r\n  has: proxyHas,\r\n  deleteProperty: proxyDeleteProperty,\r\n  ownKeys: proxyOwnKeys,\r\n  enumerate: proxyEnumerate,\r\n  getOwnPropertyDescriptor: proxyGetOwnPropertyDescriptor,\r\n  ...handlers,\r\n});\r\n\r\nconst PROXY_HANDLERS = createProxyHandlers();\r\n\r\nclass RequestProxyFactory extends RequestFactory {\r\n  constructor(handlers, cacheImpl) {\r\n    super(null, null, true);\r\n\r\n    this[FACTORY_HANDLERS_FIELD] = handlers;\r\n    this[FACTORY_FIELD] = RequestFactory.create(handlers, cacheImpl);\r\n    this[FACTORY_FIELD][FACTORY_DECORATOR_FIELD].setFactory(this);\r\n  }\r\n\r\n  create(promise) {\r\n    const instance = this[FACTORY_FIELD].create(promise);\r\n\r\n    if (this[FACTORY_HANDLERS_FIELD].available) {\r\n      return wrapWithProxy(instance, PROXY_HANDLERS);\r\n    }\r\n\r\n    return instance;\r\n  }\r\n\r\n  getCached(name, pack) {\r\n    return this[FACTORY_FIELD].getCached(name, pack);\r\n  }\r\n\r\n  createCached(promise, name, pack) {\r\n    const instance = this[FACTORY_FIELD].createCached(promise, name, pack);\r\n\r\n    if (this[FACTORY_HANDLERS_FIELD].available) {\r\n      return wrapWithProxy(instance, PROXY_HANDLERS);\r\n    }\r\n\r\n    return instance;\r\n  }\r\n\r\n}\r\n\r\nexport const applyProxyWithDefaultHandlers = (target) => wrapWithProxy(target, PROXY_HANDLERS);\r\n\r\nexport const createRequestProxyFactory = (handlers, cacheImpl) => (\r\n  new RequestProxyFactory(handlers, cacheImpl)\r\n);\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/RequestProxyFactory.js"],"sourceRoot":""}