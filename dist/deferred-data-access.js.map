{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5c0eaa69306b0b9035a2","webpack:///./source/utils/isResource.js","webpack:///./source/utils/TARGET_INTERNALS.js","webpack:///./source/utils/TARGET_DATA.js","webpack:///./source/request/Target.js","webpack:///./source/command/Descriptor.js","webpack:///./source/resource/ResourcePool.js","webpack:///./source/utils/Deferred.js","webpack:///./source/utils/getRawResource.js","webpack:///./source/utils/IConvertible.js","webpack:///./node_modules/event-dispatcher/dist/event-dispatcher.js","webpack:///./source/resource/Resource.js","webpack:///./source/utils/getResourcePoolId.js","webpack:///./source/utils/getResourceId.js","webpack:///./source/command/internal/ProxyCommands.js","webpack:///./source/utils/getResourceType.js","webpack:///./source/utils/TargetStatus.js","webpack:///./source/utils/createRequestPackage.js","webpack:///./source/utils/getResourceData.js","webpack:///./source/utils/getId.js","webpack:///./source/command/internal/RequestCommands.js","webpack:///./source/command/Reserved.js","webpack:///./source/request/Factory.js","webpack:///./source/resource/Converter.js","webpack:///./source/utils/isResourceConvertible.js","webpack:///./source/resource/PoolRegistry.js","webpack:///./source/index.js","webpack:///./source/DataAccessInterface.js","webpack:///./source/utils/areProxiesAvailable.js","webpack:///./source/request/target/Internals.js","webpack:///(webpack)/buildin/module.js","webpack:///./source/request/target/Queue.js","webpack:///./source/request/target/Children.js","webpack:///./source/request/Handlers.js","webpack:///./source/utils/filterRequestHandlers.js","webpack:///./source/request/ProxyFactory.js","webpack:///./source/request/Decorator.js","webpack:///./source/command/CallbackFactory.js"],"names":["object","Symbol","PROMISE_FIELD","getRequestPromise","request","Target","promise","requestHandlers","handlePromise","data","isResource","then","target","catch","isActive","canBeDestroyed","destroy","toJSON","isTemporary","temporary","setTemporary","value","Boolean","getStatus","status","isPending","TargetStatus","PENDING","getQueueLength","list","queue","length","getQueueCommands","map","name","hadChildPromises","getRawPromise","getRequestChildren","children","getChildren","getLastChild","getChildrenCount","sendRequest","createRequestTarget","DEFAULT_IS_TEMPORARY","Descriptor","type","handler","undefined","cacheable","virtual","resourceType","String","createDescriptor","command","descriptor","Object","freeze","addDescriptorTo","Array","push","descriptorGeneratorFactory","ResourcePoolEvents","RESOURCE_ADDED","RESOURCE_REMOVED","POOL_CLEAR","POOL_CLEARED","POOL_DESTROYED","MAP_FIELD","validTargets","isValidTarget","setValidTargets","reduce","getDefaultValidTargets","ResourcePool","Map","defineProperties","id","getId","resource","has","get","createResource","set","hasEventListener","dispatchEvent","delete","key","clear","events","DefaultResourcePool","Error","defaultResourcePool","createResourcePool","Deferred","Promise","resolve","reject","createDeferred","pool","IConvertible","webpackUniversalModuleDefinition","root","factory","exports","module","modules","installedModules","__webpack_require__","moduleId","i","l","call","m","c","d","getter","o","defineProperty","configurable","enumerable","n","__esModule","getDefault","getModuleExports","property","prototype","hasOwnProperty","p","s","Event","_EventDispatcher","_EventDispatcher2","_interopRequireDefault","obj","default","_typeof","iterator","constructor","_createClass","props","writable","Constructor","protoProps","staticProps","_classCallCheck","instance","TypeError","hasOwnProp","arguments","defaultPrevented","isDefaultPrevented","preventDefault","ListenersRunner","listeners","onStopped","onComplete","_this","index","immediatelyStopped","stopImmediatePropagation","run","event","listener","augmentEvent","clearEvent","eventObject","stopPropagation","listenerRemoved","EventListeners","_this2","_listeners","_runners","removeRunner","runner","splice","indexOf","createList","eventType","priorityOpt","priority","parseInt","getPrioritiesByKey","add","handlers","result","priorities","remove","_this3","getOwnPropertyNames","_loop","handlerIndex","forEach","removeAll","createRunner","stopped","sort","a","b","_handlers","_runner","EventDispatcher","eventPreprocessor","noInit","initialize","_eventPreprocessor","addEventListener","removeEventListener","removeAllEventListeners","getEvent","isObject","eventOrType","optionalData","create","getPoolId","Resource","poolId","active","internals","keys","ProxyCommandNames","GET","SET","APPLY","DELETE_PROPERTY","ProxyCommandFields","apply","deleteProperty","ProxyCommandsClass","names","fields","createGETDescriptor","createSETDescriptor","createAPPLYDescriptor","ProxyCommands","createDescriptors","args","field","Function","getResourceType","RESOLVED","REJECTED","DESTROYED","targetId","cmd","getRawResource","base","Date","now","RequestCommandNames","DESTROY","RequestCommandFields","RequestCommands","createDESTROYDescriptor","Factory","cacheImpl","cache","decorator","createDecorator","available","pack","createRequestFactory","ConverterEvents","RESOURCE_CREATED","RESOURCE_CONVERTED","Converter","registry","setConverter","isResourceConvertible","getResourcePoolId","isRegistered","getResourceId","linkConvertHandler","item","resourceToObject","lookupArray","lookupObject","objectToResource","createResourceConverter","PoolRegistryEvents","RESOURCE_POOL_CREATED","RESOURCE_POOL_REGISTERED","RESOURCE_POOL_REMOVED","POOLS_FIELD","PoolRegistry","handlePoolDestroyed","register","createPoolRegistry","DataAccessInterface","descriptors","proxyEnabled","poolRegistry","areProxiesAvailable","createHandlers","resourceConverter","createProxyFactory","createPool","poolDestroyedHandler","setHandlers","parse","dummy","api","Proxy","Internals","requestTarget","handlePromiseResolve","link","getResourceData","sendQueue","rejectQueue","deferred","handlePromiseReject","Abc","console","log","send","handleRequest","message","child","hasHandler","applyRequest","registerChild","addToQueue","handle","createRequestPackage","handleResolve","handleReject","Queue","callback","error","Children","DEFAULT_KEY","areProxyHandlersAvailable","throwError","required","HandlersEvents","HANDLERS_UPDATED","Handlers","properties","converter","setHandlersByType","descrs","filterHandlers","getPropertyNames","parentRequest","resultRequest","lookupForPending","all","handleImmediately","getHandler","nonEmptyListIndex","findIndex","applyDescriptor","Reserved","filterArray","filterHash","getOwnPropertySymbols","EXCLUSIONS","caller","toString","createFunctionWrapper","requestTargetProxy","wrapWithProxy","proxyGet","wrapper","proxyApply","thisValue","proxySet","proxyHas","proxyDeleteProperty","proxyOwnKeys","proxyEnumerate","proxyGetOwnPropertyDescriptor","getOwnPropertyDescriptor","createProxyHandlers","ownKeys","enumerate","PROXY_HANDLERS","ProxyFactory","setFactory","getCached","createCached","applyProxyWithDefaultHandlers","Decorator","members","getPropertyHandlers","createHandlerFor","factoryWrapper","propertyName","commandType","checkState","getChildRequest","commandHandler","CallbackFactory","isTemporaryFn","childRequest"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;AC7DA;AACA;AACA;AACA;;yDAEe,UAACA,MAAD;AAAA,SAAYA,kBAAkB,mEAAlB,IACzBA,kBAAkB,gEADO,IAExBA;AACC;AACA;AACA;AACA;AACA,UAAOA,OAAO,kEAAP,CAAP,MAAoC,QAApC;AACA;AACA;AACA,UAAOA,OAAO,6DAAP,CAAP,MAA+B,QARhC,CAFY;AAAA,CAAf,E;;;;;;;ACLA,yDAAeC,OAAO,0BAAP,CAAf,E;;;;;;;ACAA,yDAAe,gBAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;;AAEA,IAAMC,gBAAgBD,OAAO,yBAAP,CAAtB;;AAEA,IAAME,oBAAoB,SAApBA,iBAAoB,CAACC,OAAD;AAAA,SAAcA,QAAQ,wEAAR,KAA6BA,QAAQF,aAAR,CAA3C;AAAA,CAA1B;;AAEA;;;;;;;IAMMG,M;AACJ,kBAAYC,OAAZ,EAAqBC,eAArB,EAAsC;AAAA;;AAAA;;AACpC,SAAK,wEAAL,IAAyB,IAAI,kEAAJ,CAAc,IAAd,EAAoBD,OAApB,EAA6BC,eAA7B,CAAzB;;AAEA,QAAMC,gBAAgB,SAAhBA,aAAgB,CAACC,IAAD,EAAU;AAC9B,UAAI,CAAC,0EAAAC,CAAWD,IAAX,CAAL,EAAuB;AACrB,cAAKP,aAAL,IAAsBI,OAAtB;AACA,eAAO,MAAK,wEAAL,CAAP;AACD;AACF,KALD;;AAOAA,YAAQK,IAAR,CAAaH,aAAb,EAA4BA,aAA5B;AACD;;;;2BAEa;AACZ,UAAMI,SAAST,kBAAkB,IAAlB,CAAf;AACA,aAAOS,OAAOD,IAAP,yBAAP;AACD;;;6BAEc;AACb,UAAMC,SAAST,kBAAkB,IAAlB,CAAf;AACA,aAAOS,OAAOC,KAAP,yBAAP;AACD;;;;;;AAGI,IAAMC,WAAW,SAAXA,QAAW,CAACF,MAAD;AAAA,SACtBA,UACGA,OAAO,wEAAP,CADH,GAC8BA,OAAO,wEAAP,EAAyBE,QAAzB,EAD9B,GACoE,KAF9C;AAAA,CAAjB;;AAKA,IAAMC,iBAAiB,SAAjBA,cAAiB,CAACH,MAAD;AAAA,SAC5BA,UACGA,OAAO,wEAAP,CADH,GAC8BA,OAAO,wEAAP,EAAyBG,cAAzB,EAD9B,GAC0E,KAF9C;AAAA,CAAvB;;AAKA,IAAMC,UAAU,SAAVA,OAAU,CAACJ,MAAD;AAAA,SACrBA,UACAA,OAAO,wEAAP,CADA,GAC2BA,OAAO,wEAAP,EAAyBI,OAAzB,EAD3B,GACgE,IAF3C;AAAA,CAAhB;;AAKA,IAAMC,SAAS,SAATA,MAAS,CAACL,MAAD;AAAA,SACpBA,UACGA,OAAO,wEAAP,CADH,GAC8BA,OAAO,wEAAP,EAAyBK,MAAzB,EAD9B,GACkE,IAF9C;AAAA,CAAf;;AAKA,IAAMC,cAAc,SAAdA,WAAc,CAACN,MAAD;AAAA,SACzBA,UACGA,OAAO,wEAAP,CADH,IAC+BA,OAAO,wEAAP,EAAyBO,SAF/B;AAAA,CAApB;;AAKA,IAAMC,eAAe,SAAfA,YAAe,CAACR,MAAD,EAASS,KAAT,EAAmB;AAC7C,MAAIT,UAAUA,OAAO,wEAAP,CAAd,EAAwC;AACtCA,WAAO,wEAAP,EAAyBO,SAAzB,GAAqCG,QAAQD,KAAR,CAArC;AACD;AACF,CAJM;;AAMA,IAAME,YAAY,SAAZA,SAAY,CAACX,MAAD;AAAA,SACvBA,UACAA,OAAO,wEAAP,CADA,GAC2BA,OAAO,wEAAP,EAAyBY,MADpD,GAC6D,IAFtC;AAAA,CAAlB;;AAKA,IAAMC,YAAY,SAAZA,SAAY,CAACJ,KAAD;AAAA,SACvBE,UAAUF,KAAV,MAAqB,oEAAAK,CAAaC,OADX;AAAA,CAAlB;;AAIA,IAAMC,iBAAiB,SAAjBA,cAAiB,CAAChB,MAAD,EAAY;AACxC,MAAMiB,OAAOjB,UAAUA,OAAO,wEAAP,CAAV,GAAqCA,OAAO,wEAAP,EAAyBkB,KAA9D,GAAsE,IAAnF;AACA,SAAOD,OAAOA,KAAKE,MAAZ,GAAqB,CAA5B;AACD,CAHM;;AAKA,IAAMC,mBAAmB,SAAnBA,gBAAmB,CAACpB,MAAD,EAAY;AAC1C,MAAMkB,QAAQlB,UAAUA,OAAO,wEAAP,CAAV,GAAqCA,OAAO,wEAAP,EAAyBkB,KAA9D,GAAsE,IAApF;AACA,MAAIA,KAAJ,EAAW;AACT,WAAOA,MAAMG,GAAN,CAAU;AAAA;AAAA,UAAEC,IAAF;;AAAA,aAAYA,IAAZ;AAAA,KAAV,CAAP;AACA;AACD;AACD,SAAO,EAAP;AACD,CAPM;;AASA,IAAMC,mBAAmB,SAAnBA,gBAAmB,CAACvB,MAAD;AAAA,SAAYU,QAAQV,UAC/CA,OAAO,wEAAP,CAD+C,IAE/CA,OAAO,wEAAP,EAAyBuB,gBAFc,CAAZ;AAAA,CAAzB;;AAIA,IAAMC,gBAAgB,SAAhBA,aAAgB,CAACxB,MAAD;AAAA,SAC3BA,UACGA,OAAO,wEAAP,CADH,GAC8BA,OAAO,wEAAP,EAAyBN,OADvD,GACiE,IAFtC;AAAA,CAAtB;;AAKP,IAAM+B,qBAAqB,SAArBA,kBAAqB,CAACzB,MAAD;AAAA,SACzBA,UACGA,OAAO,wEAAP,CADH,GAC8BA,OAAO,wEAAP,EAAyB0B,QADvD,GACkE,IAFzC;AAAA,CAA3B;;AAKO,IAAMC,cAAc,SAAdA,WAAc,CAAC3B,MAAD,EAAY;AACrC,MAAMiB,OAAOQ,mBAAmBzB,MAAnB,CAAb;AACA,SAAOiB,oCAAWA,IAAX,KAAmB,EAA1B;AACD,CAHM;;AAKA,IAAMW,eAAe,SAAfA,YAAe,CAAC5B,MAAD,EAAY;AACtC,MAAMiB,OAAOQ,mBAAmBzB,MAAnB,CAAb;AACA,SAAOiB,QAAQA,KAAKE,MAAb,GAAsBF,KAAKA,KAAKE,MAAL,GAAc,CAAnB,CAAtB,GAA8C,IAArD;AACD,CAHM;;AAKA,IAAMU,mBAAmB,SAAnBA,gBAAmB,CAAC7B,MAAD,EAAY;AAC1C,MAAMiB,OAAOQ,mBAAmBzB,MAAnB,CAAb;AACA,SAAOiB,OAAOA,KAAKE,MAAZ,GAAqB,CAA5B;AACD,CAHM;;AAKP;AACO,IAAMW,cAAc,SAAdA,WAAc,CAAC9B,MAAD,EAAY;AACrC,MAAMiB,OAAOQ,mBAAmBzB,MAAnB,CAAb;AACA,SAAOiB,OAAOA,KAAKE,MAAZ,GAAqB,CAA5B;AACD,CAHM;;AAKA,IAAMY,sBAAsB,SAAtBA,mBAAsB,CAACrC,OAAD,EAAUC,eAAV;AAAA,SACjC,IAAIF,MAAJ,CAAWC,OAAX,EAAoBC,eAApB,CADiC;AAAA,CAA5B;;AAIP,yDAAeF,MAAf,E;;;;;;;;;;;;;;;ACrIO,IAAMuC,uBAAuB,SAAvBA,oBAAuB;AAAA,SAAM,KAAN;AAAA,CAA7B;;IAEDC,U;AACJ,sBAAYC,IAAZ,EAAkBC,OAAlB,EAA2Bb,IAA3B,EAAiC;AAAA;;AAC/B,SAAKA,IAAL,GAAYA,SAASc,SAAT,GAAqBd,IAArB,GAA4BY,IAAxC;AACA,SAAKA,IAAL,GAAYA,IAAZ;AACA,SAAKC,OAAL,GAAeA,OAAf;AACA;;;AAGA,SAAK7B,WAAL,GAAmB0B,oBAAnB;AACA,SAAKK,SAAL,GAAiB,IAAjB;AACA,SAAKC,OAAL,GAAe,KAAf;AACA,SAAKC,YAAL,GAAoB,IAApB;AACD;;;;+BAEU;AACT,aAAO,gCAA6BC,OAAO,KAAKlB,IAAZ,CAA7B,yBACIkB,OAAO,KAAKN,IAAZ,CADJ,sBACoC,KAAKI,OADzC,UAAP;AAED;;;;;;AAGI,IAAMG,mBAAmB,SAAnBA,gBAAmB,CAC9BC,OAD8B,EAE9BP,OAF8B,EAG9Bb,IAH8B,EAQ3B;AAAA,MAJHhB,WAIG,uEAJW8B,SAIX;AAAA,MAHHG,YAGG,uEAHY,IAGZ;AAAA,MAFHF,SAEG,uEAFS,IAET;AAAA,MADHC,OACG,uEADO,KACP;;AACH,MAAMK,aAAa,IAAIV,UAAJ,CAAeS,OAAf,EAAwBP,OAAxB,EAAiCb,IAAjC,CAAnB;AACAqB,aAAWJ,YAAX,GAA0BA,YAA1B;AACAI,aAAWN,SAAX,GAAuBA,SAAvB;AACAM,aAAWL,OAAX,GAAqBA,OAArB;AACA,MAAIhC,WAAJ,EAAiB;AACfqC,eAAWrC,WAAX,GAAyBA,WAAzB;AACD;AACD;AACA,SAAOsC,OAAOC,MAAP,CAAcF,UAAd,CAAP;AACD,CAlBM;;AAoBA,IAAMG,kBAAkB,SAAlBA,eAAkB,CAACH,UAAD,EAAa3C,MAAb,EAAwB;AACrD,MAAIA,kBAAkB+C,KAAtB,EAA6B;AAC3B/C,WAAOgD,IAAP,CAAYL,UAAZ;AACD,GAFD,MAEO,IAAI3C,MAAJ,EAAY;AACjBA,WAAO2C,WAAWrB,IAAlB,IAA0BqB,UAA1B;AACD;AACF,CANM;;AAQA,IAAMM,6BAA6B,SAA7BA,0BAA6B,CAACP,OAAD,EAAUpB,IAAV;AAAA,SACxC,UACEa,OADF,EAEEnC,MAFF,EAOK;AAAA,QAJHM,WAIG,uEAJW0B,oBAIX;AAAA,QAHHO,YAGG,uEAHY,IAGZ;AAAA,QAFHF,SAEG,uEAFS,IAET;AAAA,QADHC,OACG,uEADO,KACP;;AACH,QAAMK,aAAaF,iBACjBC,OADiB,EAEjBP,OAFiB,EAGjBb,IAHiB,EAIjBhB,WAJiB,EAKjBiC,YALiB,EAMjBF,SANiB,EAOjBC,OAPiB,CAAnB;AASAQ,oBAAgBH,UAAhB,EAA4B3C,MAA5B;AACA,WAAO4C,OAAOC,MAAP,CAAcF,UAAd,CAAP;AACD,GApBuC;AAAA,CAAnC;;AAsBP,yDAAeV,UAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxEA;AACA;AACA;AACA;;AAEO,IAAMiB,qBAAqBN,OAAOC,MAAP,CAAc;AAC9CM,kBAAgB,eAD8B;AAE9CC,oBAAkB,iBAF4B;AAG9CC,cAAY,WAHkC;AAI9CC,gBAAc,aAJgC;AAK9CC,kBAAgB;AAL8B,CAAd,CAA3B;;AAQA,IAAMC,YAAYnE,OAAO,mBAAP,CAAlB;;AAEP,IAAIoE,eAAe,EAAnB;;AAEO,IAAMC,gBAAgB,SAAhBA,aAAgB,CAAC1D,MAAD;AAAA,SAC3B,CAAC,0EAAAF,CAAWE,MAAX,CAAD,IACGU,QAAQ+C,oBAAoBzD,MAApB,yCAAoBA,MAApB,EAAR,CAFwB;AAAA,CAAtB;;AAKA,IAAM2D,kBAAkB,SAAlBA,eAAkB,CAAC1C,IAAD,EAAU;AACvCwC,iBAAexC,KAAK2C,MAAL,CAAY,UAACH,YAAD,EAAezD,MAAf,EAA0B;AACnDyD,iBAAazD,MAAb,IAAuB,IAAvB;;AAEA,WAAOyD,YAAP;AACD,GAJc,EAIZ,EAJY,CAAf;AAKD,CANM;;AAQA,IAAMI,yBAAyB,SAAzBA,sBAAyB;AAAA,SAAM,CAAC,QAAD,EAAW,UAAX,CAAN;AAAA,CAA/B;;IAEDC,Y;;;AACJ,0BAAc;AAAA;;AAAA;;AAEZ,UAAKN,SAAL,IAAkB,IAAIO,GAAJ,EAAlB;AACAnB,WAAOoB,gBAAP,QAA8B;AAC5BC,UAAI;AACFxD,eAAO,qEAAAyD;AADL;AADwB,KAA9B;AAHY;AAQb;;;;wBAEGzD,K,EAAoB;AAAA,UAAbyB,IAAa,uEAAN,IAAM;;AACtB,UAAMb,MAAM,KAAKmC,SAAL,CAAZ;AACA,UAAIW,WAAW,IAAf;AACA,UAAIT,cAAcjD,KAAd,CAAJ,EAA0B;AACxB,YAAIY,IAAI+C,GAAJ,CAAQ3D,KAAR,CAAJ,EAAoB;AAClB0D,qBAAW9C,IAAIgD,GAAJ,CAAQ5D,KAAR,CAAX;AACD,SAFD,MAEO;AACL0D,qBAAW,yEAAAG,CAAe,IAAf,EAAqB7D,KAArB,EAA4ByB,gBAAezB,KAAf,yCAAeA,KAAf,EAA5B,CAAX;AACAY,cAAIkD,GAAJ,CAAQJ,SAASF,EAAjB,EAAqBE,QAArB;AACA9C,cAAIkD,GAAJ,CAAQ9D,KAAR,EAAe0D,QAAf;AACA,cAAI,KAAKK,gBAAL,CAAsBtB,mBAAmBC,cAAzC,CAAJ,EAA8D;AAC5D,iBAAKsB,aAAL,CAAmBvB,mBAAmBC,cAAtC,EAAsDgB,QAAtD;AACD;AACF;AACF;;AAED,aAAOA,QAAP;AACD;;;wBAEGnE,M,EAAQ;AACV,aAAO,KAAKwD,SAAL,EAAgBY,GAAhB,CAAoBpE,MAApB,CAAP;AACD;;;wBAEGA,M,EAAQ;AACV,aAAO,KAAKwD,SAAL,EAAgBa,GAAhB,CAAoBrE,MAApB,CAAP;AACD;;;2BAEMS,K,EAAO;AACZ,UAAMY,MAAM,KAAKmC,SAAL,CAAZ;AACA,UAAMW,WAAW9C,IAAIgD,GAAJ,CAAQ5D,KAAR,CAAjB;AACA,UAAI0D,QAAJ,EAAc;AACZ9C,YAAIqD,MAAJ,CAAWP,SAASF,EAApB;AACA5C,YAAIqD,MAAJ,CAAWP,SAAS1D,KAApB;AACA,YAAI,KAAK+D,gBAAL,CAAsBtB,mBAAmBE,gBAAzC,CAAJ,EAAgE;AAC9D,eAAKqB,aAAL,CAAmBvB,mBAAmBE,gBAAtC,EAAwDe,QAAxD;AACD;AACDA,iBAAS/D,OAAT;AACD;AACF;;;4BAEO;AACN,UAAMiB,MAAM,KAAKmC,SAAL,CAAZ;AACA,UAAI,KAAKgB,gBAAL,CAAsBtB,mBAAmBG,UAAzC,CAAJ,EAA0D;AACxD,aAAKoB,aAAL,CAAmBvB,mBAAmBG,UAAtC,EAAkD,IAAlD;AACD;;AAJK;AAAA;AAAA;;AAAA;AAMN,6BAA8BhC,GAA9B,8HAAmC;AAAA;;AAAA;;AAAA,cAAvBsD,GAAuB;AAAA,cAAlBR,QAAkB;;AACjC,cAAI,OAAOQ,GAAP,KAAe,QAAf,IAA2BA,QAAQR,SAASF,EAAhD,EAAoD;AAClDE,qBAAS/D,OAAT;AACD;AACF;AAVK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAYNiB,UAAIuD,KAAJ;;AAEA,UAAI,KAAKJ,gBAAL,CAAsBtB,mBAAmBI,YAAzC,CAAJ,EAA4D;AAC1D,aAAKmB,aAAL,CAAmBvB,mBAAmBI,YAAtC,EAAoD,IAApD;AACD;AACF;;;+BAEU;AACT,aAAO5C,QAAQ,KAAK8C,SAAL,CAAR,CAAP;AACD;;;8BAES;AACR,WAAKoB,KAAL;AACA;AACA,aAAO,KAAKpB,SAAL,CAAP;AACA,UAAI,KAAKgB,gBAAL,CAAsBtB,mBAAmBK,cAAzC,CAAJ,EAA8D;AAC5D;AACA,aAAKkB,aAAL,CAAmBvB,mBAAmBK,cAAtC,EAAsD,IAAtD;AACD;AACF;;;;EAlFwB,wD;;AAArBO,Y,CAoFGe,M,GAAS3B,kB;;IAGZ4B,mB;;;;;;;;;;;;AACJ;8BACU;AACR,YAAM,IAAIC,KAAJ,CAAU,2CAAV,CAAN;AACD;;;;EAJ+BjB,Y;;AAO3B,IAAMkB,sBAAsB,IAAIF,mBAAJ,EAA5B;;AAEA,IAAMG,qBAAqB,SAArBA,kBAAqB;AAAA,SAAM,IAAInB,YAAJ,EAAN;AAAA,CAA3B;;AAEPH,gBAAgBE,wBAAhB;;AAEA,yDAAeC,YAAf,E;;;;;;;;;;ICpIMoB,Q,GACJ,oBAAc;AAAA;;AAAA;;AACZ,OAAKxF,OAAL,GAAe,IAAIyF,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC9C,UAAKD,OAAL,GAAeA,OAAf;AACA,UAAKC,MAAL,GAAcA,MAAd;AACD,GAHc,CAAf;AAID,C;;AAGI,IAAMC,iBAAiB,SAAjBA,cAAiB;AAAA,SAAM,IAAIJ,QAAJ,EAAN;AAAA,CAAvB;AACP,yDAAeA,QAAf,E;;;;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;;yDAEe,UAAC9F,MAAD,EAASmG,IAAT,EAAkB;AAC/BA,SAAOA,QAAQ,mFAAf;;AAEA,MAAInG,kBAAkB,mEAAtB,EAAgC;AAC9B,WAAOA,OAAOiB,MAAP,EAAP;AACD,GAFD,MAEO,IAAI,QAAOjB,OAAO,kEAAP,CAAP,MAAoC,QAAxC,EAAkD;AACvD,WAAO,uEAAAiB,CAAOjB,MAAP,CAAP;AACD,GAFM,MAEA,IAAIA,kBAAkB,8DAAlB,IAAkC,OAAOA,MAAP,KAAkB,UAAxD,EAAoE;AACzE,WAAOmG,KAAKhB,GAAL,CAASnF,MAAT,EAAiBiB,MAAjB,EAAP;AACD,GAFM,MAEA,IAAI,oEAAAP,CAAWV,MAAX,CAAJ,EAAwB;AAC7B,WAAOA,MAAP;AACD;;AAED,SAAO,IAAP;AACD,CAdD,E;;;;;;;;;ACPA;;;;;IAKMoG,Y;;;;AAIN,yDAAeA,YAAf,E;;;;;;;;ACTA,CAAC,SAASC,gCAAT,CAA0CC,IAA1C,EAAgDC,OAAhD,EAAyD;AACzD,MAAG,iCAAOC,OAAP,OAAmB,QAAnB,IAA+B,iCAAOC,MAAP,OAAkB,QAApD,EACCA,OAAOD,OAAP,GAAiBD,SAAjB,CADD,KAEK,IAAG,IAAH,EACJ,iCAAO,EAAP,oCAAWA,OAAX;AAAA;AAAA;AAAA,qGADI,KAEA,IAAG,QAAOC,OAAP,0CAAOA,OAAP,OAAmB,QAAtB,EACJA,QAAQ,iBAAR,IAA6BD,SAA7B,CADI,KAGJD,KAAK,iBAAL,IAA0BC,SAA1B;AACD,CATD,EASG,IATH,EASS,YAAW;AACpB,SAAO,SAAU,UAASG,OAAT,EAAkB;AAAE;AACrC,cADmC,CACzB;AACV,cAAU,IAAIC,mBAAmB,EAAvB;AACV;AACA,cAJmC,CAIzB;AACV,cAAU,SAASC,mBAAT,CAA6BC,QAA7B,EAAuC;AACjD;AACA,gBAFiD,CAEtC;AACX,gBAAW,IAAGF,iBAAiBE,QAAjB,CAAH,EAA+B;AAC1C,kBAAY,OAAOF,iBAAiBE,QAAjB,EAA2BL,OAAlC;AACZ;AAAY;AACZ,gBANiD,CAMtC;AACX,gBAAW,IAAIC,SAASE,iBAAiBE,QAAjB,IAA6B;AACrD,kBAAYC,GAAGD,QADsC;AAErD,kBAAYE,GAAG,KAFsC;AAGrD,kBAAYP,SAAS;AACrB,kBAJqD,EAA1C;AAKX;AACA,gBAbiD,CAatC;AACX,gBAAWE,QAAQG,QAAR,EAAkBG,IAAlB,CAAuBP,OAAOD,OAA9B,EAAuCC,MAAvC,EAA+CA,OAAOD,OAAtD,EAA+DI,mBAA/D;AACX;AACA,gBAhBiD,CAgBtC;AACX,gBAAWH,OAAOM,CAAP,GAAW,IAAX;AACX;AACA,gBAnBiD,CAmBtC;AACX,gBAAW,OAAON,OAAOD,OAAd;AACX;AAAW;AACX;AACA;AACA,cA7BmC,CA6BzB;AACV,cAAUI,oBAAoBK,CAApB,GAAwBP,OAAxB;AACV;AACA,cAhCmC,CAgCzB;AACV,cAAUE,oBAAoBM,CAApB,GAAwBP,gBAAxB;AACV;AACA,cAnCmC,CAmCzB;AACV,cAAUC,oBAAoBO,CAApB,GAAwB,UAASX,OAAT,EAAkBtE,IAAlB,EAAwBkF,MAAxB,EAAgC;AAClE,gBAAW,IAAG,CAACR,oBAAoBS,CAApB,CAAsBb,OAAtB,EAA+BtE,IAA/B,CAAJ,EAA0C;AACrD,kBAAYsB,OAAO8D,cAAP,CAAsBd,OAAtB,EAA+BtE,IAA/B,EAAqC;AACjD,oBAAaqF,cAAc,KADsB;AAEjD,oBAAaC,YAAY,IAFwB;AAGjD,oBAAavC,KAAKmC;AAClB,oBAJiD,EAArC;AAKZ;AAAY;AACZ;AAAW,OARD;AASV;AACA,cA9CmC,CA8CzB;AACV,cAAUR,oBAAoBa,CAApB,GAAwB,UAAShB,MAAT,EAAiB;AACnD,gBAAW,IAAIW,SAASX,UAAUA,OAAOiB,UAAjB;AACxB,gBAAY,SAASC,UAAT,GAAsB;AAAE,iBAAOlB,OAAO,SAAP,CAAP;AAA2B,SADvC;AAExB,gBAAY,SAASmB,gBAAT,GAA4B;AAAE,iBAAOnB,MAAP;AAAgB,SAF/C;AAGX,gBAAWG,oBAAoBO,CAApB,CAAsBC,MAAtB,EAA8B,GAA9B,EAAmCA,MAAnC;AACX,gBAAW,OAAOA,MAAP;AACX;AAAW,OAND;AAOV;AACA,cAvDmC,CAuDzB;AACV,cAAUR,oBAAoBS,CAApB,GAAwB,UAASrH,MAAT,EAAiB6H,QAAjB,EAA2B;AAAE,eAAOrE,OAAOsE,SAAP,CAAiBC,cAAjB,CAAgCf,IAAhC,CAAqChH,MAArC,EAA6C6H,QAA7C,CAAP;AAAgE,OAArH;AACV;AACA,cA1DmC,CA0DzB;AACV,cAAUjB,oBAAoBoB,CAApB,GAAwB,6BAAxB;AACV;AACA,cA7DmC,CA6DzB;AACV,cAAU,OAAOpB,oBAAoBA,oBAAoBqB,CAApB,GAAwB,CAA5C,CAAP;AACV;AAAU,KA/DM;AAgEhB;AACA,YAAU;AACV;AACA,SAAO,UAASxB,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAEtD;;AAGApD,aAAO8D,cAAP,CAAsBd,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CnF,eAAO;AADoC,OAA7C;AAGAmF,cAAQ0B,KAAR,GAAgBlF,SAAhB;;AAEA,UAAImF,mBAAmBvB,oBAAoB,CAApB,CAAvB;;AAEA,UAAIwB,oBAAoBC,uBAAuBF,gBAAvB,CAAxB;;AAEA,eAASE,sBAAT,CAAgCC,GAAhC,EAAqC;AAAE,eAAOA,OAAOA,IAAIZ,UAAX,GAAwBY,GAAxB,GAA8B,EAAEC,SAASD,GAAX,EAArC;AAAwD;;AAE/F9B,cAAQ+B,OAAR,GAAkBH,kBAAkBG,OAApC;AACA/B,cAAQ0B,KAAR,GAAgBC,iBAAiBD,KAAjC;;AAEA;AAAO,KArBG;AAsBV;AACA,SAAO,UAASzB,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAEtD;;AAGApD,aAAO8D,cAAP,CAAsBd,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CnF,eAAO;AADoC,OAA7C;;AAIA,UAAImH,UAAU,OAAOvI,MAAP,KAAkB,UAAlB,IAAgC,SAAOA,OAAOwI,QAAd,MAA2B,QAA3D,GAAsE,UAAUH,GAAV,EAAe;AAAE,sBAAcA,GAAd,0CAAcA,GAAd;AAAoB,OAA3G,GAA8G,UAAUA,GAAV,EAAe;AAAE,eAAOA,OAAO,OAAOrI,MAAP,KAAkB,UAAzB,IAAuCqI,IAAII,WAAJ,KAAoBzI,MAA3D,IAAqEqI,QAAQrI,OAAO6H,SAApF,GAAgG,QAAhG,UAAkHQ,GAAlH,0CAAkHA,GAAlH,CAAP;AAA+H,OAA5Q;;AAEA,UAAIK,eAAe,YAAY;AAAE,iBAAS/D,gBAAT,CAA0BhE,MAA1B,EAAkCgI,KAAlC,EAAyC;AAAE,eAAK,IAAI9B,IAAI,CAAb,EAAgBA,IAAI8B,MAAM7G,MAA1B,EAAkC+E,GAAlC,EAAuC;AAAE,gBAAIvD,aAAaqF,MAAM9B,CAAN,CAAjB,CAA2BvD,WAAWiE,UAAX,GAAwBjE,WAAWiE,UAAX,IAAyB,KAAjD,CAAwDjE,WAAWgE,YAAX,GAA0B,IAA1B,CAAgC,IAAI,WAAWhE,UAAf,EAA2BA,WAAWsF,QAAX,GAAsB,IAAtB,CAA4BrF,OAAO8D,cAAP,CAAsB1G,MAAtB,EAA8B2C,WAAWgC,GAAzC,EAA8ChC,UAA9C;AAA4D;AAAE,SAAC,OAAO,UAAUuF,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,cAAID,UAAJ,EAAgBnE,iBAAiBkE,YAAYhB,SAA7B,EAAwCiB,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBpE,iBAAiBkE,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,SAAhN;AAAmN,OAA9hB,EAAnB;;AAEA,eAASG,eAAT,CAAyBC,QAAzB,EAAmCJ,WAAnC,EAAgD;AAAE,YAAI,EAAEI,oBAAoBJ,WAAtB,CAAJ,EAAwC;AAAE,gBAAM,IAAIK,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,UAAIC,aAAa,SAASA,UAAT,CAAoBxI,MAApB,EAA4BsB,IAA5B,EAAkC;AACjD,eAAOsB,OAAOsE,SAAP,CAAiBC,cAAjB,CAAgCf,IAAhC,CAAqCpG,MAArC,EAA6CsB,IAA7C,CAAP;AACD,OAFD,CAfsD,CAiBnD;;;;;AAKH,UAAIgG,QAAQ1B,QAAQ0B,KAAR,GAAgB,YAAY;AACtC,iBAASA,KAAT,CAAepF,IAAf,EAAqB;AACnB,cAAIrC,OAAO4I,UAAUtH,MAAV,GAAmB,CAAnB,IAAwBsH,UAAU,CAAV,MAAiBrG,SAAzC,GAAqDqG,UAAU,CAAV,CAArD,GAAoE,IAA/E;;AAEAJ,0BAAgB,IAAhB,EAAsBf,KAAtB;;AAEA,eAAKpF,IAAL,GAAYA,IAAZ;AACA,eAAKrC,IAAL,GAAYA,IAAZ;AACA,eAAK6I,gBAAL,GAAwB,KAAxB;AACD;;AAEDX,qBAAaT,KAAb,EAAoB,CAAC;AACnB3C,eAAK,QADc;AAEnBlE,iBAAO,SAASJ,MAAT,GAAkB;AACvB,mBAAO,EAAE6B,MAAM,KAAKA,IAAb,EAAmBrC,MAAM,KAAKA,IAA9B,EAAP;AACD;AAJkB,SAAD,EAKjB;AACD8E,eAAK,oBADJ;AAEDlE,iBAAO,SAASkI,kBAAT,GAA8B;AACnC,mBAAO,KAAKD,gBAAZ;AACD;AAJA,SALiB,EAUjB;AACD/D,eAAK,gBADJ;AAEDlE,iBAAO,SAASmI,cAAT,GAA0B;AAC/B,iBAAKF,gBAAL,GAAwB,IAAxB;AACD;AAJA,SAViB,CAApB;;AAiBA,eAAOpB,KAAP;AACD,OA7B2B,EAA5B;;AA+BA,UAAIuB,kBAAkB,YAAY;AAChC,iBAASA,eAAT,CAAyBC,SAAzB,EAAoCC,SAApC,EAA+CC,UAA/C,EAA2D;AACzD,cAAIC,QAAQ,IAAZ;;AAEAZ,0BAAgB,IAAhB,EAAsBQ,eAAtB;;AAEA,eAAKK,KAAL,GAAa,CAAC,CAAd;AACA,eAAKC,kBAAL,GAA0B,KAA1B;;AAEA,eAAKC,wBAAL,GAAgC,YAAY;AAC1CH,kBAAME,kBAAN,GAA2B,IAA3B;AACD,WAFD;;AAIA,eAAKL,SAAL,GAAiBA,SAAjB;AACA,eAAKC,SAAL,GAAiBA,SAAjB;AACA,eAAKC,UAAL,GAAkBA,UAAlB;AACD;;AAEDjB,qBAAac,eAAb,EAA8B,CAAC;AAC7BlE,eAAK,KADwB;AAE7BlE,iBAAO,SAAS4I,GAAT,CAAaC,KAAb,EAAoBtJ,MAApB,EAA4B;AACjC,gBAAIuJ,WAAW,KAAK,CAApB;AACA,gBAAIT,YAAY,KAAKA,SAArB;;AAEA,iBAAKU,YAAL,CAAkBF,KAAlB;AACA;AACA;AACA,iBAAK,KAAKJ,KAAL,GAAa,CAAlB,EAAqB,KAAKA,KAAL,GAAaJ,UAAU3H,MAA5C,EAAoD,KAAK+H,KAAL,EAApD,EAAkE;AAChE,kBAAI,KAAKC,kBAAT,EAA6B;AAC7BI,yBAAWT,UAAU,KAAKI,KAAf,CAAX;AACAK,uBAASnD,IAAT,CAAcpG,MAAd,EAAsBsJ,KAAtB;AACD;AACD,iBAAKG,UAAL,CAAgBH,KAAhB;AACA,iBAAKN,UAAL,CAAgB,IAAhB;AACD;AAhB4B,SAAD,EAiB3B;AACDrE,eAAK,cADJ;AAEDlE,iBAAO,SAAS+I,YAAT,CAAsBE,WAAtB,EAAmC;AACxC,gBAAIJ,QAAQI,WAAZ;AACAJ,kBAAMK,eAAN,GAAwB,KAAKZ,SAA7B;AACAO,kBAAMF,wBAAN,GAAiC,KAAKA,wBAAtC;AACD;;AAED;;AARC,SAjB2B,EA2B3B;AACDzE,eAAK,YADJ;AAEDlE,iBAAO,SAASgJ,UAAT,CAAoBC,WAApB,EAAiC;AACtC,gBAAIJ,QAAQI,WAAZ;AACA,mBAAOJ,MAAMK,eAAb;AACA,mBAAOL,MAAMF,wBAAb;AACD;AANA,SA3B2B,EAkC3B;AACDzE,eAAK,iBADJ;AAEDlE,iBAAO,SAASmJ,eAAT,CAAyBd,SAAzB,EAAoCI,KAApC,EAA2C;AAChD,gBAAIJ,cAAc,KAAKA,SAAnB,IAAgCI,SAAS,KAAKA,KAAlD,EAAyD;AACvD,mBAAKA,KAAL;AACD;AACF;AANA,SAlC2B,CAA9B;;AA2CA,eAAOL,eAAP;AACD,OA9DqB,EAAtB;;AAgEA,UAAIgB,iBAAiB,YAAY;AAC/B,iBAASA,cAAT,GAA0B;AACxB,cAAIC,SAAS,IAAb;;AAEAzB,0BAAgB,IAAhB,EAAsBwB,cAAtB;;AAEA,eAAKE,UAAL,GAAkB,EAAlB;AACA,eAAKC,QAAL,GAAgB,EAAhB;;AAEA,eAAKC,YAAL,GAAoB,UAAUC,MAAV,EAAkB;AACpCJ,mBAAOE,QAAP,CAAgBG,MAAhB,CAAuBL,OAAOE,QAAP,CAAgBI,OAAhB,CAAwBF,MAAxB,CAAvB,EAAwD,CAAxD;AACD,WAFD;AAGD;AACD;;;;;;;;;AAUAnC,qBAAa8B,cAAb,EAA6B,CAAC;AAC5BlF,eAAK,YADuB;AAE5BlE,iBAAO,SAAS4J,UAAT,CAAoBC,SAApB,EAA+BC,WAA/B,EAA4C;AACjD,gBAAIC,WAAWC,SAASF,WAAT,EAAsB,EAAtB,CAAf;AACA,gBAAIvK,SAAS,KAAK0K,kBAAL,CAAwBJ,SAAxB,CAAb;AACA,gBAAI3F,MAAMnC,OAAOgI,QAAP,CAAV;AACA,gBAAI/J,QAAQ,KAAK,CAAjB;AACA,gBAAI+H,WAAWxI,MAAX,EAAmB2E,GAAnB,CAAJ,EAA6B;AAC3BlE,sBAAQT,OAAO2E,GAAP,CAAR;AACD,aAFD,MAEO;AACLlE,sBAAQ,EAAR;AACAT,qBAAO2E,GAAP,IAAclE,KAAd;AACD;AACD,mBAAOA,KAAP;AACD;AAd2B,SAAD,EAe1B;AACDkE,eAAK,oBADJ;AAEDlE,iBAAO,SAASiK,kBAAT,CAA4B/F,GAA5B,EAAiC;AACtC,gBAAIlE,QAAQ,KAAK,CAAjB;AACA,gBAAI+H,WAAW,KAAKuB,UAAhB,EAA4BpF,GAA5B,CAAJ,EAAsC;AACpClE,sBAAQ,KAAKsJ,UAAL,CAAgBpF,GAAhB,CAAR;AACD,aAFD,MAEO;AACLlE,sBAAQ,EAAR;AACA,mBAAKsJ,UAAL,CAAgBpF,GAAhB,IAAuBlE,KAAvB;AACD;AACD,mBAAOA,KAAP;AACD;AAXA,SAf0B,EA2B1B;AACDkE,eAAK,KADJ;AAEDlE,iBAAO,SAASkK,GAAT,CAAaL,SAAb,EAAwBnI,OAAxB,EAAiCqI,QAAjC,EAA2C;AAChD,gBAAII,WAAW,KAAKP,UAAL,CAAgBC,SAAhB,EAA2BE,QAA3B,CAAf;AACA,gBAAII,SAASR,OAAT,CAAiBjI,OAAjB,IAA4B,CAAhC,EAAmC;AACjCyI,uBAAS5H,IAAT,CAAcb,OAAd;AACD;AACF;AAPA,SA3B0B,EAmC1B;AACDwC,eAAK,KADJ;AAEDlE,iBAAO,SAAS2D,GAAT,CAAakG,SAAb,EAAwB;AAC7B,gBAAIE,WAAW,KAAK,CAApB;AACA,gBAAIK,SAAS,KAAb;AACA,gBAAIC,aAAa,KAAKJ,kBAAL,CAAwBJ,SAAxB,CAAjB;AACA,gBAAIQ,UAAJ,EAAgB;AACd,mBAAKN,QAAL,IAAiBM,UAAjB,EAA6B;AAC3B,oBAAItC,WAAWsC,UAAX,EAAuBN,QAAvB,CAAJ,EAAsC;AACpCK,2BAAS,IAAT;AACA;AACD;AACF;AACF;AACD,mBAAOA,MAAP;AACD;AAfA,SAnC0B,EAmD1B;AACDlG,eAAK,QADJ;AAEDlE,iBAAO,SAASsK,MAAT,CAAgBT,SAAhB,EAA2BnI,OAA3B,EAAoC;AACzC,gBAAI6I,SAAS,IAAb;;AAEA,gBAAIF,aAAa,KAAKJ,kBAAL,CAAwBJ,SAAxB,CAAjB;AACA,gBAAIQ,UAAJ,EAAgB;AACd,kBAAI7J,OAAO2B,OAAOqI,mBAAP,CAA2BH,UAA3B,CAAX;AACA,kBAAI3J,SAASF,KAAKE,MAAlB;;AAEA,kBAAI+J,QAAQ,SAASA,KAAT,CAAehC,KAAf,EAAsB;AAChC,oBAAIsB,WAAWvJ,KAAKiI,KAAL,CAAf;AACA,oBAAI0B,WAAWE,WAAWN,QAAX,CAAf;AACA,oBAAIW,eAAeP,SAASR,OAAT,CAAiBjI,OAAjB,CAAnB;AACA,oBAAIgJ,gBAAgB,CAApB,EAAuB;AACrBP,2BAAST,MAAT,CAAgBgB,YAAhB,EAA8B,CAA9B;AACA,sBAAI,CAACP,SAASzJ,MAAd,EAAsB;AACpB,2BAAO2J,WAAWN,QAAX,CAAP;AACD;AACDQ,yBAAOhB,QAAP,CAAgBoB,OAAhB,CAAwB,UAAUlB,MAAV,EAAkB;AACxCA,2BAAON,eAAP,CAAuBgB,QAAvB,EAAiCO,YAAjC;AACD,mBAFD;AAGD;AACF,eAbD;;AAeA,mBAAK,IAAIjC,QAAQ,CAAjB,EAAoBA,QAAQ/H,MAA5B,EAAoC+H,OAApC,EAA6C;AAC3CgC,sBAAMhC,KAAN;AACD;AACF;AACF;AA7BA,SAnD0B,EAiF1B;AACDvE,eAAK,WADJ;AAEDlE,iBAAO,SAAS4K,SAAT,CAAmBf,SAAnB,EAA8B;AACnC,mBAAO,KAAKP,UAAL,CAAgBO,SAAhB,CAAP;AACD;AAJA,SAjF0B,EAsF1B;AACD3F,eAAK,cADJ;AAEDlE,iBAAO,SAAS6K,YAAT,CAAsBV,QAAtB,EAAgC7B,SAAhC,EAA2C;AAChD,gBAAImB,SAAS,IAAIrB,eAAJ,CAAoB+B,QAApB,EAA8B7B,SAA9B,EAAyC,KAAKkB,YAA9C,CAAb;AACA,iBAAKD,QAAL,CAAchH,IAAd,CAAmBkH,MAAnB;AACA,mBAAOA,MAAP;AACD;AANA,SAtF0B,EA6F1B;AACDvF,eAAK,MADJ;AAEDlE,iBAAO,SAAS2F,IAAT,CAAckD,KAAd,EAAqBtJ,MAArB,EAA6B;AAClC,gBAAI8K,aAAa,KAAKJ,kBAAL,CAAwBpB,MAAMpH,IAA9B,CAAjB;AACA,gBAAIqJ,UAAU,KAAd;AACA,gBAAI5B,kBAAkB,SAASA,eAAT,GAA2B;AAC/C4B,wBAAU,IAAV;AACD,aAFD;AAGA,gBAAIT,UAAJ,EAAgB;AACd;AACA,kBAAI7J,OAAO2B,OAAOqI,mBAAP,CAA2BH,UAA3B,EAAuCU,IAAvC,CAA4C,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AACrE,uBAAOD,IAAIC,CAAX;AACD,eAFU,CAAX;AAGA,kBAAIvK,SAASF,KAAKE,MAAlB;;AAEA,mBAAK,IAAI+H,QAAQ,CAAjB,EAAoBA,QAAQ/H,MAA5B,EAAoC+H,OAApC,EAA6C;AAC3C,oBAAIqC,OAAJ,EAAa;AACb,oBAAII,YAAYb,WAAW7J,KAAKiI,KAAL,CAAX,CAAhB;AACA;AACA;AACA,oBAAIyC,SAAJ,EAAe;AACb,sBAAIC,UAAU,KAAKN,YAAL,CAAkBK,SAAlB,EAA6BhC,eAA7B,CAAd;AACAiC,0BAAQvC,GAAR,CAAYC,KAAZ,EAAmBtJ,MAAnB;AACA,sBAAI4L,QAAQzC,kBAAZ,EAAgC;AACjC;AACF;AACF;AACF;AA3BA,SA7F0B,CAA7B;;AA2HA,eAAOU,cAAP;AACD,OAnJoB,EAArB;;AAqJA,UAAIgC,kBAAkB,YAAY;AAChC,iBAASA,eAAT,GAA2B;AACzB,cAAIC,oBAAoBrD,UAAUtH,MAAV,GAAmB,CAAnB,IAAwBsH,UAAU,CAAV,MAAiBrG,SAAzC,GAAqDqG,UAAU,CAAV,CAArD,GAAoE,IAA5F;AACA,cAAIsD,SAAStD,UAAUtH,MAAV,GAAmB,CAAnB,IAAwBsH,UAAU,CAAV,MAAiBrG,SAAzC,GAAqDqG,UAAU,CAAV,CAArD,GAAoE,KAAjF;;AAEAJ,0BAAgB,IAAhB,EAAsBwD,eAAtB;;AAEA,cAAI,CAACE,MAAL,EAAa;AACX,iBAAKC,UAAL,CAAgBF,iBAAhB;AACD;AACF;;AAED;;;;AAKA/D,qBAAa8D,eAAb,EAA8B,CAAC;AAC7BlH,eAAK,YADwB;AAE7BlE,iBAAO,SAASuL,UAAT,GAAsB;AAC3B,gBAAIF,oBAAoBrD,UAAUtH,MAAV,GAAmB,CAAnB,IAAwBsH,UAAU,CAAV,MAAiBrG,SAAzC,GAAqDqG,UAAU,CAAV,CAArD,GAAoE,IAA5F;;AAEA,iBAAKwD,kBAAL,GAA0BH,iBAA1B;AACA,iBAAK/B,UAAL,GAAkB,IAAIF,cAAJ,EAAlB;AACD;AAP4B,SAAD,EAQ3B;AACDlF,eAAK,kBADJ;AAEDlE,iBAAO,SAASyL,gBAAT,CAA0B5B,SAA1B,EAAqCf,QAArC,EAA+C;AACpD,gBAAIiB,WAAW/B,UAAUtH,MAAV,GAAmB,CAAnB,IAAwBsH,UAAU,CAAV,MAAiBrG,SAAzC,GAAqDqG,UAAU,CAAV,CAArD,GAAoE,CAAnF;;AAEA,iBAAKsB,UAAL,CAAgBY,GAAhB,CAAoBL,SAApB,EAA+Bf,QAA/B,EAAyC,CAACiB,QAAD,IAAa,CAAtD;AACD;AANA,SAR2B,EAe3B;AACD7F,eAAK,kBADJ;AAEDlE,iBAAO,SAAS+D,gBAAT,CAA0B8F,SAA1B,EAAqC;AAC1C,mBAAO,KAAKP,UAAL,CAAgB3F,GAAhB,CAAoBkG,SAApB,CAAP;AACD;AAJA,SAf2B,EAoB3B;AACD3F,eAAK,qBADJ;AAEDlE,iBAAO,SAAS0L,mBAAT,CAA6B7B,SAA7B,EAAwCf,QAAxC,EAAkD;AACvD,iBAAKQ,UAAL,CAAgBgB,MAAhB,CAAuBT,SAAvB,EAAkCf,QAAlC;AACD;AAJA,SApB2B,EAyB3B;AACD5E,eAAK,yBADJ;AAEDlE,iBAAO,SAAS2L,uBAAT,CAAiC9B,SAAjC,EAA4C;AACjD,iBAAKP,UAAL,CAAgBsB,SAAhB,CAA0Bf,SAA1B;AACD;AAJA,SAzB2B,EA8B3B;AACD3F,eAAK,eADJ;AAEDlE,iBAAO,SAASgE,aAAT,CAAuB6E,KAAvB,EAA8BzJ,IAA9B,EAAoC;AACzC,gBAAI6J,cAAcmC,gBAAgBQ,QAAhB,CAAyB/C,KAAzB,EAAgCzJ,IAAhC,CAAlB;AACA,gBAAI,KAAKoM,kBAAT,EAA6B;AAC3BvC,4BAAc,KAAKuC,kBAAL,CAAwB7F,IAAxB,CAA6B,IAA7B,EAAmCsD,WAAnC,CAAd;AACD;AACD,iBAAKK,UAAL,CAAgB3D,IAAhB,CAAqBsD,WAArB;AACD;AARA,SA9B2B,CAA9B,EAuCI,CAAC;AACH/E,eAAK,UADF;AAEHlE,iBAAO,SAAS6L,QAAT,CAAkB7L,KAAlB,EAAyB;AAC9B,mBAAO,CAAC,OAAOA,KAAP,KAAiB,WAAjB,GAA+B,WAA/B,GAA6CmH,QAAQnH,KAAR,CAA9C,MAAkE,QAAlE,IAA8EA,UAAU,IAA/F;AACD;AAJE,SAAD,EAKD;AACDkE,eAAK,UADJ;AAEDlE,iBAAO,SAAS4L,QAAT,CAAkBE,WAAlB,EAA+BC,YAA/B,EAA6C;AAClD,gBAAIlD,QAAQiD,WAAZ;AACA,gBAAI,CAACV,gBAAgBS,QAAhB,CAAyBC,WAAzB,CAAL,EAA4C;AAC1CjD,sBAAQ,IAAIuC,gBAAgBvE,KAApB,CAA0B9E,OAAO+J,WAAP,CAA1B,EAA+CC,YAA/C,CAAR;AACD;AACD,mBAAOlD,KAAP;AACD;AARA,SALC,EAcD;AACD3E,eAAK,QADJ;AAEDlE,iBAAO,SAASgM,MAAT,CAAgBX,iBAAhB,EAAmC;AACxC,mBAAO,IAAID,eAAJ,CAAoBC,iBAApB,CAAP;AACD;;AAED;;AANC,SAdC,CAvCJ;;AA+DA,eAAOD,eAAP;AACD,OAjFqB,EAAtB;;AAmFAA,sBAAgBvE,KAAhB,GAAwBA,KAAxB;;AAEA1B,cAAQ+B,OAAR,GAAkBkE,eAAlB;;AAEA;AAAO,KAxXG;AAyXV,YA1bgB;AAAhB;AA2bC,CArcD;AAscA,4C;;;;;;;;;;;;;;;;;;;;ACtcA;AACA;AACA;;AAEA,IAAMa,YAAY,SAAZA,SAAY,CAACnH,IAAD;AAAA,SAAWA,OAAOA,KAAKtB,EAAZ,GAAiB,IAA5B;AAAA,CAAlB;;AAEA;;;;IAGM0I,Q;AACJ,oBAAYpH,IAAZ,EAAkB9E,KAAlB,EAAyByB,IAAzB,EAA+B+B,EAA/B,EAAmC;AAAA;AAAA;;AAAA;;AAAA,SAuCnC5D,MAvCmC,GAuC1B;AAAA,iCACN,mEADM,EACQ;AACb4D,YAAI,MAAKA,EADI;AAEb/B,cAAM,MAAKA,IAFE;AAGb0K,gBAAQ,MAAKA;AAHA,OADR;AAAA,KAvC0B;;AACjChK,WAAOoB,gBAAP,CAAwB,IAAxB,sEACG,wEADH,EACsB;AAClBvD,aAAO;AACL8E,kBADK;AAEL9E,oBAFK;AAGLyB,kBAHK;AAIL+B,cAJK;AAKL4I,gBAAQ,IALH;AAMLD,gBAAQF,UAAUnH,IAAV;AANH;AADW,KADtB,0CAWG,mEAXH,EAWiB;AACblB,WAAK,KAAKhE;AADG,KAXjB;AAeD;;;;8BA+BS;AACR,UAAMyM,YAAY,KAAK,wEAAL,CAAlB;AADQ,UAEA7I,EAFA,GAEa6I,SAFb,CAEA7I,EAFA;AAAA,UAEIsB,IAFJ,GAEauH,SAFb,CAEIvH,IAFJ;;;AAIR,UAAI,CAACuH,UAAUD,MAAf,EAAuB;AACrB;AACD;;AAEDC,gBAAUD,MAAV,GAAmB,KAAnB;AACAtH,WAAKwF,MAAL,CAAY9G,EAAZ;;AAEArB,aAAOmK,IAAP,CAAYD,SAAZ,EAAuBzL,GAAvB,CAA2B,UAACC,IAAD;AAAA,eAAU,OAAOwL,UAAUxL,IAAV,CAAjB;AAAA,OAA3B;AACD;;;wBAxCY;AACX,aAAOZ,QAAQ,KAAK,wEAAL,EAAuBmM,MAA/B,CAAP;AACD;;;wBAEW;AACV,aAAO,KAAK,wEAAL,EAAuBpM,KAA9B;AACD;;;wBAEU;AACT,aAAO,KAAK,wEAAL,EAAuByB,IAAvB,YAAsC,KAAK,wEAAL,EAAuBzB,KAA7D,CAAP;AACD;;;wBAEQ;AACP,aAAO,KAAK,wEAAL,EAAuBwD,EAA9B;AACD;;;wBAEY;AACX,aAAO,KAAK,wEAAL,EAAuB2I,MAA9B;AACD;;;;;;AAyBI,IAAMtI,iBAAiB,SAAjBA,cAAiB,CAACiB,IAAD,EAAO9E,KAAP,EAAc8B,YAAd;AAAA,MAA4B0B,EAA5B,uEAAiC,IAAjC;AAAA,SAC5B,IAAI0I,QAAJ,CAAapH,IAAb,EAAmB9E,KAAnB,EAA0B8B,YAA1B,EAAwC0B,MAAM,qEAAAC,EAA9C,CAD4B;AAAA,CAAvB;;AAIP,yDAAeyI,QAAf,E;;;;;;;;;;;;AC5EA;AACA;AACA;;AAEA,yDAAe,UAACvN,MAAD,EAAY;AACzB,MAAI,QAAOA,OAAO,kEAAP,CAAP,MAAoC,QAAxC,EAAkD;AAChD,WAAOA,OAAO,kEAAP,EAAyBwN,MAAhC;AACD,GAFD,MAEO,IAAI,oEAAA9M,CAAWV,MAAX,CAAJ,EAAwB;AAC7B,WAAOA,OAAO,6DAAP,EAAoBwN,MAA3B;AACD;AACD,SAAO,IAAP;AACD,CAPD,E;;;;;;;;;;;;ACJA;AACA;AACA;;AAEA,yDAAe,UAACxN,MAAD,EAAY;AACzB;AACA,MAAI,QAAOA,OAAO,kEAAP,CAAP,MAAoC,QAAxC,EAAkD;AAChD,WAAOA,OAAO,kEAAP,EAAyB6E,EAAhC;AACD,GAFD,MAEO,IAAI,oEAAAnE,CAAWV,MAAX,CAAJ,EAAwB;AAC7B,WAAOA,OAAO,6DAAP,EAAoB6E,EAA3B;AACD;;AAED,SAAO,IAAP;AACD,CATD,E;;;;;;;;;;;;;;;ACJA;;AAKO,IAAM+I,oBAAoBpK,OAAOC,MAAP,CAAc;AAC7CoK,OAAK,KADwC;AAE7CC,OAAK,KAFwC;AAG7CC,SAAO,OAHsC;AAI7CC,mBAAiB;AAJ4B,CAAd,CAA1B;;AAOA,IAAMC,qBAAqBzK,OAAOC,MAAP,CAAc;AAC9CwB,OAAKhF,OAAO,qBAAP,CADyC;AAE9CkF,OAAKlF,OAAO,qBAAP,CAFyC;AAG9CiO,SAAOjO,OAAO,uBAAP,CAHuC;AAI9CkO,kBAAgBlO,OAAO,gCAAP;AAJ8B,CAAd,CAA3B;;IAODmO,kB;AACJ,gCAAc;AAAA;;AAAA,SAIdC,KAJc,GAINT,iBAJM;AAAA,SAKdU,MALc,GAKLL,kBALK;AAAA,SAwBdM,mBAxBc,GAwBQ,uFAAA1K,CACpB+J,kBAAkBC,GADE,EAEpBI,mBAAmBhJ,GAFC,CAxBR;AAAA,SA4BduJ,mBA5Bc,GA4BQ,uFAAA3K,CACpB+J,kBAAkBE,GADE,EAEpBG,mBAAmB9I,GAFC,CA5BR;AAAA,SAgCdsJ,qBAhCc,GAgCU,uFAAA5K,CACtB+J,kBAAkBG,KADI,EAEtBE,mBAAmBC,KAFG,CAhCV;;AACZ1K,WAAOC,MAAP,CAAc,IAAd;AACD;;;;wBAKU;AACT,aAAO,CACLmK,kBAAkBC,GADb,EAELD,kBAAkBE,GAFb,EAGLF,kBAAkBG,KAHb,EAILH,kBAAkBI,eAJb,CAAP;AAMD;;;wBAEc;AACb,aAAO,CACLJ,kBAAkBC,GADb,EAELD,kBAAkBE,GAFb,EAGLF,kBAAkBG,KAHb,CAAP;AAKD;;;;;;AAgBH,IAAMW,gBAAgB,IAAIN,kBAAJ,EAAtB;;AAEO,IAAMO,oBAAoB,SAApBA,iBAAoB,CAC/BnD,QAD+B,EAO5B;AAAA,MALH5K,MAKG,uEALM,EAKN;AAAA,MAJHM,WAIG,uEAJW8B,SAIX;AAAA,MAHHG,YAGG,uEAHY,IAGZ;AAAA,MAFHF,SAEG,uEAFS,IAET;AAAA,MADHC,OACG,uEADO,KACP;;AACH,MAAM0L,OAAO,CAAC1N,WAAD,EAAciC,YAAd,EAA4BF,SAA5B,EAAuCC,OAAvC,CAAb;AACAwL,gBAAc7M,IAAd,CAAmBmK,OAAnB,CAA2B,UAAC9J,IAAD,EAAU;AACnC,QAAMa,UAAUyI,SAAStJ,IAAT,CAAhB;AACA,QAAM2M,QAAQZ,mBAAmB/L,IAAnB,CAAd;;AAEA,QAAIa,mBAAmB+L,QAAvB,EAAiC;AAC/B,UAAIvL,aAAa,qEAAAF,mBAAiBnB,IAAjB,EAAuBa,OAAvB,EAAgC8L,KAAhC,SAA0CD,IAA1C,EAAjB;AACArL,mBAAaC,OAAOC,MAAP,CAAcF,UAAd,CAAb;;AAEA,UAAI3C,kBAAkB+C,KAAtB,EAA6B;AAC3B/C,eAAOgD,IAAP,CAAYL,UAAZ;AACD,OAFD,MAEO,IAAI3C,MAAJ,EAAY;AACjBA,eAAOiO,KAAP,IAAgBtL,UAAhB;AACD;AACF;AACF,GAdD;;AAgBA,SAAO3C,MAAP;AACD,CA1BM;;AA4BP,yDAAe8N,aAAf,E;;;;;;;;;;;;ACxFA;AACA;AACA;;AAEA,IAAMK,kBAAkB,SAAlBA,eAAkB,CAAC/O,MAAD,EAAY;AAClC,MAAI,QAAOA,OAAO,kEAAP,CAAP,MAAoC,QAAxC,EAAkD;AAChD,WAAOA,OAAO,kEAAP,EAAyB8C,IAAhC;AACD,GAFD,MAEO,IAAI,oEAAApC,CAAWV,MAAX,CAAJ,EAAwB;AAC7B,WAAOA,OAAO,6DAAP,EAAoB8C,IAA3B;AACD;;AAED,SAAO,IAAP;AACD,CARD;;AAUA,yDAAeiM,eAAf,E;;;;;;;ACdA,yDAAevL,OAAOC,MAAP,CAAc;AAC3B9B,WAAS,SADkB;AAE3BqN,YAAU,UAFiB;AAG3BC,YAAU,UAHiB;AAI3BC,aAAW;AAJgB,CAAd,CAAf,E;;;;;;;ACAA,yDAAe,UAACpM,IAAD,EAAO8L,IAAP,EAAaO,QAAb,EAA0B;AACvC,MAAM1D,SAAS;AACb3I,cADa;AAEbsM,SAAKR,KAAK,CAAL,CAFQ,EAEC;AACdvN,WAAOuN,KAAK,CAAL,CAHM,EAGG;AAChBhO,YAAQuO;AAJK,GAAf;;AAOA;AACA3L,SAAO8D,cAAP,CAAsBmE,MAAtB,EAA8B,MAA9B,EAAsC;AACpCpK,WAAOuN;AAD6B,GAAtC;;AAIA,SAAOnD,MAAP;AACD,CAdD,E;;;;;;;;;ACAA;AACA;;AAEA,yDAAe,UAACzL,MAAD,EAAY;AACzB,MAAMS,OAAO,wEAAA4O,CAAerP,MAAf,CAAb;AACA,SAAOS,OAAOA,KAAK,6DAAL,CAAP,GAA2B,IAAlC;AACD,CAHD,E;;;;;;;ACHA,IAAM6O,eAAaC,KAAKC,GAAL,EAAb,MAAN;AACA,IAAI1F,QAAQ,CAAZ;AACA,yDAAe;AAAA,cAASwF,IAAT,GAAgB,EAAExF,KAAlB,SAA2ByF,KAAKC,GAAL,EAA3B;AAAA,CAAf,E;;;;;;;;;;;;ACFA;;AAEO,IAAMC,sBAAsBjM,OAAOC,MAAP,CAAc;AAC/CiM,WAAS;AADsC,CAAd,CAA5B;;AAIA,IAAMC,uBAAuBnM,OAAOC,MAAP,CAAc;AAChDiM,WAASzP,OAAO,oBAAP;AADuC,CAAd,CAA7B;;AAIP;;;;;;;IAMM2P,e,GACJ,2BAAc;AAAA;;AAAA,OAIdvB,KAJc,GAINoB,mBAJM;AAAA,OAKdnB,MALc,GAKLqB,oBALK;;AAAA,OAOdE,uBAPc,GAOY,UAAC9M,OAAD,EAAUnC,MAAV,EAAqB;AAC7C,QAAM2C,aAAa,IAAI,4DAAJ,CACjBkM,oBAAoBC,OADH,EAEjB3M,OAFiB,EAGjB4M,qBAAqBD,OAHJ,CAAnB;AAKAnM,eAAWN,SAAX,GAAuB,KAAvB;AACAM,eAAWL,OAAX,GAAqB,IAArB;AACAQ,IAAA,4EAAAA,CAAgBH,UAAhB,EAA4B3C,MAA5B;AACA,WAAO4C,OAAOC,MAAP,CAAcF,UAAd,CAAP;AACD,GAjBa;;AACZC,SAAOC,MAAP,CAAc,IAAd;AACD,C;;AAmBH,yDAAe,IAAImM,eAAJ,EAAf,E;;;;;;;ACtCA;;;AAGA,yDAAepM,OAAOC,MAAP,CAAc;AAC3B;;;AAGA4K,SAAO7K,OAAOC,MAAP,CAAc;AACnB;AACA9C,UAAM,IAFa;AAGnB;AACAE,WAAO;AAJY,GAAd;AAJoB,CAAd,CAAf,E;;;;;;;;;;;;;;ACHA;AACA;;IAEMiP,O;AACJ;;;;;;;;AAUA,mBAAYtE,QAAZ,EAAwD;AAAA,QAAlCuE,SAAkC,uEAAtB,IAAsB;AAAA,QAAhBpD,MAAgB,uEAAP,KAAO;;AAAA;;AACtD,QAAIA,MAAJ,EAAY;AACV;AACD;;AAED,SAAKqD,KAAL,GAAaD,SAAb;AACA,SAAKvE,QAAL,GAAgBA,QAAhB;AACA,SAAKyE,SAAL,GAAiB,2EAAAC,CAAgB,IAAhB,EAAsB1E,QAAtB,CAAjB;AACD;;;;2BAEMlL,O,EAAS;AACd,UAAMF,UAAU,4EAAAuC,CAAoBrC,OAApB,EAA6B,KAAKkL,QAAlC,CAAhB;AACA,UAAI,KAAKA,QAAL,CAAc2E,SAAlB,EAA6B;AAC3B,aAAKF,SAAL,CAAe/B,KAAf,CAAqB9N,OAArB;AACD;AACD,aAAOA,OAAP;AACD;;;8BAES8B,I,EAAMkO,I,EAAM;AACpB,aAAO,KAAKJ,KAAL,IAAc,KAAKA,KAAL,CAAW/K,GAAX,CAAe/C,IAAf,EAAqBkO,IAArB,CAArB;AACD;;;iCAEY9P,O,EAAS4B,I,EAAMkO,I,EAAM;AAChC,UAAIhQ,UAAU,IAAd;AACA,UAAI,KAAK4P,KAAT,EAAgB;AACd5P,kBAAU,KAAKiN,MAAL,CAAY/M,OAAZ,CAAV;AACA,aAAK0P,KAAL,CAAW7K,GAAX,CAAejD,IAAf,EAAqBkO,IAArB,EAA2BhQ,OAA3B;AACD;AACD,aAAOA,OAAP;AACD;;;;;;AAII,IAAMiQ,uBAAuB,SAAvBA,oBAAuB,CAAC7E,QAAD,EAAWuE,SAAX;AAAA,SAClC,IAAID,OAAJ,CAAYtE,QAAZ,EAAsBuE,SAAtB,CADkC;AAAA,CAA7B;;AAIP,yDAAeD,OAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO,IAAMQ,kBAAkB9M,OAAOC,MAAP,CAAc;AAC3C8M,oBAAkB,iBADyB;AAE3CC,sBAAoB;AAFuB,CAAd,CAAxB;;AAKP;;;;;;;;;;;;;;;;;;IAiBMC,S;;;AACJ,qBAAYlK,OAAZ,EAAqBmK,QAArB,EAA+BvK,IAA/B,EAAsD;AAAA,QAAjBqF,QAAiB,uEAAN,IAAM;;AAAA;;AAAA;;AAEpD,UAAKjF,OAAL,GAAeA,OAAf;AACA,UAAKJ,IAAL,GAAYA,IAAZ;AACA,UAAKuK,QAAL,GAAgBA,QAAhB;;AAEA,QAAIlF,QAAJ,EAAc;AACZA,eAASmF,YAAT;AACD;AARmD;AASrD;;;;qCAEgBlQ,I,EAAM;AACrB,UAAIgL,eAAJ;;AAEA,UAAI,qFAAAmF,CAAsBnQ,IAAtB,CAAJ,EAAiC;AAC/BgL,iBAAS,8EAAA4D,CAAe5O,IAAf,EAAqB,KAAK0F,IAA1B,CAAT;AACD,OAFD,MAEO,IAAI,OAAO1F,KAAKQ,MAAZ,KAAuB,UAA3B,EAAuC;AAC5CwK,iBAAShL,KAAKQ,MAAL,EAAT;AACD,OAFM,MAEA;AACL,eAAOR,IAAP;AACD;;AAED,UAAI,KAAK2E,gBAAL,CAAsBkL,gBAAgBE,kBAAtC,CAAJ,EAA+D;AAC7D,aAAKnL,aAAL,CAAmBiL,gBAAgBE,kBAAnC,EAAuD;AACrD/P,oBADqD;AAErDgL;AAFqD,SAAvD;AAID;;AAED,aAAOA,MAAP;AACD;;AAED;;;;;;;;;qCAMiBhL,I,EAAM;AACrB,UAAIgL,SAAShL,IAAb;;AAEA,UAAI,0EAAAC,CAAWD,IAAX,CAAJ,EAAsB;AACpB,YAAM+M,SAAS,iFAAAqD,CAAkBpQ,IAAlB,CAAf;;AAEA,YAAI,KAAKiQ,QAAL,CAAcI,YAAd,CAA2BtD,MAA3B,CAAJ,EAAwC;AAAE;AACxC,cAAM5M,SAAS,KAAK8P,QAAL,CAAczL,GAAd,CAAkBuI,MAAlB,EAA0BvI,GAA1B,CAA8B,6EAAA8L,CAActQ,IAAd,CAA9B,CAAf;;AAEA,cAAIG,MAAJ,EAAY;AACV6K,qBAAS7K,OAAOS,KAAhB;AACD;AAEF,SAPD,MAOO;AAAE;AACPoK,mBAAS,KAAKlF,OAAL,CAAa8G,MAAb,CAAoBtH,QAAQC,OAAR,CAAgBvF,IAAhB,CAApB,CAAT;AACD;AACF;;AAED,UAAIgL,WAAWhL,IAAX,IAAmB,KAAK2E,gBAAL,CAAsBkL,gBAAgBC,gBAAtC,CAAvB,EAAgF;AAC9E,aAAKlL,aAAL,CAAmBiL,gBAAgBC,gBAAnC,EAAqD;AACnD9P,oBADmD;AAEnDgL;AAFmD,SAArD;AAID;;AAED,aAAOA,MAAP;AACD;;AAED;;;;;;;;;;gCAOY5J,I,EAAMmP,kB,EAAoB;AAAA;;AACpC,aAAOnP,KAAKI,GAAL,CAAS,UAACgP,IAAD;AAAA,eAAUD,mBAAmBhK,IAAnB,SAA8BiK,IAA9B,CAAV;AAAA,OAAT,CAAP;AACD;;AAED;;;;;;;;;;iCAOaxQ,I,EAAMuQ,kB,EAAoB;AAAA;;AACrC,aAAOxN,OAAOqI,mBAAP,CAA2BpL,IAA3B,EACJ+D,MADI,CACG,UAACiH,MAAD,EAASvJ,IAAT,EAAkB;AACxB,YAAIsB,OAAOsE,SAAP,CAAiBC,cAAjB,CAAgCf,IAAhC,CAAqCvG,IAArC,EAA2CyB,IAA3C,CAAJ,EAAsD;AACpDuJ,iBAAOvJ,IAAP,IAAe8O,mBAAmBhK,IAAnB,SAA8BvG,KAAKyB,IAAL,CAA9B,CAAf;AACD;;AAED,eAAOuJ,MAAP;AACD,OAPI,EAOF,EAPE,CAAP;AAQD;;AAED;;;;;;;;;2BAMOhL,I,EAAM;AACX,UAAIgL,SAAShL,IAAb;;AAEA,UAAIA,SAASuC,SAAT,IAAsBvC,SAAS,IAAnC,EAAyC;AACvC,YAAI,qFAAAmQ,CAAsBnQ,IAAtB,CAAJ,EAAiC;AAC/B;AACAgL,mBAAS,KAAKyF,gBAAL,CAAsBzQ,IAAtB,CAAT;AACD,SAHD,MAGO,IAAIA,gBAAgBkD,KAApB,EAA2B;AAChC;AACA8H,mBAAS,KAAK0F,WAAL,CAAiB1Q,IAAjB,EAAuB,KAAKyQ,gBAA5B,CAAT;AACD,SAHM,MAGA,IAAIzQ,KAAKiI,WAAL,KAAqBlF,MAAzB,EAAiC;AACtC;AACAiI,mBAAS,KAAK2F,YAAL,CAAkB3Q,IAAlB,EAAwB,KAAKyQ,gBAA7B,CAAT;AACD;AACF;AACD,aAAOzF,MAAP;AACD;;AAED;;;;;;;;;0BAMMhL,I,EAAM;AACV,UAAIgL,SAAShL,IAAb;;AAEA,UAAIA,SAASuC,SAAT,IAAsBvC,SAAS,IAAnC,EAAyC;AACvC,YAAI,0EAAAC,CAAWD,IAAX,CAAJ,EAAsB;AAAE;AACtBgL,mBAAS,KAAK4F,gBAAL,CAAsB5Q,IAAtB,CAAT;AACD,SAFD,MAEO,IAAIA,gBAAgBkD,KAApB,EAA2B;AAAE;AAClC8H,mBAAS,KAAK0F,WAAL,CAAiB1Q,IAAjB,EAAuB,KAAK4Q,gBAA5B,CAAT;AACD,SAFM,MAEA,IAAI5Q,KAAKiI,WAAL,KAAqBlF,MAAzB,EAAiC;AACtCiI,mBAAS,KAAK2F,YAAL,CAAkB3Q,IAAlB,EAAwB,KAAK4Q,gBAA7B,CAAT;AACD;AACF;;AAED,aAAO5F,MAAP;AACD;;AAED;;;;;;;;qCAKiBhL,I,EAAM;AACrB,UAAMgL,SAAS,EAAf;;AAEA,UAAMF,MAAM,SAANA,GAAM,CAAClK,KAAD,EAAW;AACrB,YAAI,0EAAAI,CAAUJ,KAAV,CAAJ,EAAsB;AACpBoK,iBAAO7H,IAAP,CAAYvC,KAAZ;AACD;AACD,eAAOA,KAAP;AACD,OALD;;AAOA,UAAI,QAAOZ,IAAP,yCAAOA,IAAP,OAAgB,QAAhB,IAA4BA,SAAS,IAAzC,EAA+C;AAC7C,YAAI,0EAAAgB,CAAUhB,IAAV,CAAJ,EAAqB;AACnBgL,iBAAO7H,IAAP,CAAYnD,IAAZ;AACD,SAFD,MAEO,IAAIA,gBAAgBkD,KAApB,EAA2B;AAChC,eAAKwN,WAAL,CAAiB1Q,IAAjB,EAAuB8K,GAAvB;AACD,SAFM,MAEA,IAAI9K,KAAKiI,WAAL,KAAqBlF,MAAzB,EAAiC;AACtC,eAAK4N,YAAL,CAAkB3Q,IAAlB,EAAwB8K,GAAxB;AACD;AACF;AACD,aAAOE,MAAP;AACD;;;;EAvKqB,wD;;AA4KxB;;;;;;;;;AA5KMgF,S,CAyKGhL,M,GAAS6K,e;AAUX,IAAMgB,0BAA0B,SAA1BA,uBAA0B,CAAC/K,OAAD,EAAUmK,QAAV,EAAoBvK,IAApB,EAA0BqF,QAA1B;AAAA,SACrC,IAAIiF,SAAJ,CAAclK,OAAd,EAAuBmK,QAAvB,EAAiCvK,IAAjC,EAAuCqF,QAAvC,CADqC;AAAA,CAAhC;;AAIP,yDAAeiF,SAAf,E;;;;;;;;;ACrNA;AACA;;AAEA,yDAAe,UAAChQ,IAAD;AAAA,SACb,oEAAAC,CAAWD,IAAX,KACG,OAAOA,IAAP,KAAgB,UADnB,IAEGA,gBAAgB,8DAHN;AAAA,CAAf,E;;;;;;;;;;;;;;;;;;;;ACHA;AACA;;AAMO,IAAM8Q,qBAAqB/N,OAAOC,MAAP,CAAc;AAC9C+N,yBAAuB,qBADuB;AAE9CC,4BAA0B,wBAFoB;AAG9CC,yBAAuB;AAHuB,CAAd,CAA3B;;AAMP,IAAMC,cAAc1R,OAAO,+BAAP,CAApB;;AAEA;;;;;;IAKM2R,Y;;;AACJ,0BAAc;AAAA;;AAAA;;AAAA,UAQdC,mBARc,GAQQ,UAAC3H,KAAD,EAAW;AAC/B,YAAKyB,MAAL,CAAYzB,MAAMzJ,IAAlB;AACD,KAVa;;AAEZ,UAAKkR,WAAL,IAAoB,EAApB;;AAEA;AACA,UAAKG,QAAL,CAAc,0EAAd;AALY;AAMb;;;;;;AAMD;;;;iCAIa;AACX,UAAM3L,OAAO,iFAAAN,EAAb;AACA,UAAI,KAAKT,gBAAL,CAAsBmM,mBAAmBC,qBAAzC,CAAJ,EAAqE;AACnE,aAAKnM,aAAL,CAAmBkM,mBAAmBC,qBAAtC,EAA6DrL,IAA7D;AACD;AACD,WAAK2L,QAAL,CAAc3L,IAAd;AACA,aAAOA,IAAP;AACD;;AAED;;;;;;;6BAISA,I,EAAM;AACb,UAAI3C,OAAOsE,SAAP,CAAiBC,cAAjB,CAAgCf,IAAhC,CAAqC,KAAK2K,WAAL,CAArC,EAAwDxL,KAAKtB,EAA7D,CAAJ,EAAsE;AACtE,WAAK8M,WAAL,EAAkBxL,KAAKtB,EAAvB,IAA6BsB,IAA7B;AACAA,WAAK2G,gBAAL,CAAsB,yEAAAhJ,CAAmBK,cAAzC,EAAyD,KAAK0N,mBAA9D;AACA,UAAI,KAAKzM,gBAAL,CAAsBmM,mBAAmBE,wBAAzC,CAAJ,EAAwE;AACtE,aAAKpM,aAAL,CAAmBkM,mBAAmBE,wBAAtC,EAAgEtL,IAAhE;AACD;AACF;;AAED;;;;;;;;wBAKIqH,M,EAAQ;AACV,aAAO,KAAKmE,WAAL,EAAkBnE,MAAlB,KAA6B,IAApC;AACD;;AAED;;;;;;;;iCAKarH,I,EAAM;AACjB,aAAO3C,OAAOsE,SAAP,CAAiBC,cAAjB,CAAgCf,IAAhC,CACL,KAAK2K,WAAL,CADK,EAELxL,gBAAgB,8DAAhB,GAA+BA,KAAKtB,EAApC,GAAyCzB,OAAO+C,IAAP,CAFpC,CAAP;AAID;;AAED;;;;;;;;2BAKOA,I,EAAM;AACX,UAAIsF,SAAS,KAAb;AACAtF,aAAOA,gBAAgB,8DAAhB,GAA+BA,IAA/B,GAAsC,KAAKlB,GAAL,CAASkB,IAAT,CAA7C;AACA,UAAIA,IAAJ,EAAU;AACRA,aAAK4G,mBAAL,CAAyB,yEAAAjJ,CAAmBK,cAA5C,EAA4D,KAAK0N,mBAAjE;AACApG,iBAAS,OAAO,KAAKkG,WAAL,EAAkBxL,KAAKtB,EAAvB,CAAhB;AACD;AACD,UAAI,KAAKO,gBAAL,CAAsBmM,mBAAmBG,qBAAzC,CAAJ,EAAqE;AACnE,aAAKrM,aAAL,CAAmBkM,mBAAmBG,qBAAtC,EAA6DvL,IAA7D;AACD;AACD,aAAOsF,MAAP;AACD;;;;EA5EwB,wD;;AAArBmG,Y,CA8EGnM,M,GAAS8L,kB;;;AAGX,IAAMQ,qBAAqB,SAArBA,kBAAqB;AAAA,SAAM,IAAIH,YAAJ,EAAN;AAAA,CAA3B;;AAEP,yDAAeA,YAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+DAAe,qEAAf;;;;;;;;;;;;;;;;;;;;;;;;;ACnBA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEMI,mB;;AAEJ;;;;;;;;;;;AAWA,+BACEC,WADF,EAME;AAAA,QAJAC,YAIA,uEAJe,IAIf;AAAA,QAHAC,YAGA,uEAHe,IAGf;AAAA,QAFAhM,IAEA,uEAFO,IAEP;AAAA,QADA4J,SACA,uEADY,IACZ;;AAAA;;AACA,SAAKoC,YAAL,GAAoBA,YAApB;AACA,SAAKhM,IAAL,GAAYA,IAAZ;AACA,SAAK6J,KAAL,GAAaD,SAAb;AACA,SAAKnD,UAAL,CAAgBqF,WAAhB,EAA6BC,YAA7B;AACD;;;;+BAEUD,W,EAAaC,Y,EAAc;AAAA;;AACpC,UAAIA,gBAAgB,CAAC,mFAAAE,EAArB,EAA4C;AAC1C,cAAM,IAAIzM,KAAJ,CAAU,+CAAV,CAAN;AACD;;AAED,WAAK6F,QAAL,GAAgB,iFAAA6G,CAAeH,YAAf,CAAhB;AACA,WAAKI,iBAAL,GAAyB,4FAAAhB,CACvB,KAAK/K,OADkB,EAEvB,KAAK4L,YAFkB,EAGvB,KAAKhM,IAHkB,EAIvB,KAAKqF,QAJkB,CAAzB;;AAOA,UAAI0G,YAAJ,EAAkB;AAChB,aAAK3L,OAAL,GAAe,yFAAAgM,CAAmB,KAAK/G,QAAxB,EAAkC,KAAKwE,KAAvC,CAAf;AACD,OAFD,MAEO;AACL,aAAKzJ,OAAL,GAAe,sFAAA8J,CAAqB,KAAK7E,QAA1B,EAAoC,KAAKwE,KAAzC,CAAf;AACD;;AAED,UAAI,CAAC,KAAKmC,YAAV,EAAwB;AACtB,aAAKA,YAAL,GAAoB,0FAAAJ,EAApB;AACD;;AAED,UAAI,KAAK5L,IAAT,EAAe;AACb,aAAKgM,YAAL,CAAkBL,QAAlB,CAA2B,KAAK3L,IAAhC;AACD,OAFD,MAEO,IAAI,KAAKA,IAAL,KAAcnD,SAAlB,EAA6B;AAClC,aAAKmD,IAAL,GAAY,KAAKgM,YAAL,CAAkBK,UAAlB,EAAZ;AACD,OAFM,MAEA;AACL,aAAKrM,IAAL,GAAY,mFAAZ;AACD;;AAED,UAAMsM,uBAAuB,SAAvBA,oBAAuB,GAAM;AACjC,cAAKtM,IAAL,CAAU4G,mBAAV,CAA8B,kFAAAjJ,CAAmBK,cAAjD,EAAiEsO,oBAAjE;AACA,cAAKtM,IAAL,GAAY,MAAKgM,YAAL,CAAkBK,UAAlB,EAAZ;AACA,cAAKrM,IAAL,CAAU2G,gBAAV,CAA2B,kFAAAhJ,CAAmBK,cAA9C,EAA8DsO,oBAA9D;AACD,OAJD;;AAMA,WAAKjH,QAAL,CAAckH,WAAd,CAA0BT,WAA1B;AACA,WAAK9L,IAAL,CAAU2G,gBAAV,CAA2B,kFAAAhJ,CAAmBK,cAA9C,EAA8DsO,oBAA9D;AACD;;;0BAMKhS,I,EAAM;AACV,aAAO,KAAK6R,iBAAL,CAAuBK,KAAvB,CAA6BlS,IAA7B,CAAP;AACD;;;2BAEMA,I,EAAM;AACX,aAAO,KAAK6R,iBAAL,CAAuBrR,MAAvB,CAA8BR,IAA9B,CAAP;AACD;;;kCAEasE,Q,EAAU;AACtB;;;AAGA,UAAIoB,aAAJ;AACA,UAAI,0EAAAzF,CAAWqE,QAAX,CAAJ,EAA0B;AACxBoB,eAAO,KAAKgM,YAAL,CAAkBlN,GAAlB,CAAsB,iFAAA4L,CAAkB9L,QAAlB,CAAtB,CAAP;AACA,eAAOoB,QAAQA,KAAKnB,GAAL,CAAS,6EAAA+L,CAAchM,QAAd,CAAT,CAAf;AACD;AACD,aAAO,KAAP;AACD;;;wBAtBkB;AACjB,aAAO,KAAKyG,QAAL,CAAc0G,YAArB;AACD;;;;;;AAuBI,IAAM7E,SAAS,SAATA,MAAS,CAAC7B,QAAD,EAAW0G,YAAX,EAAyBC,YAAzB,EAAuChM,IAAvC,EAA6C4J,SAA7C;AAAA,SACpB,IAAIiC,mBAAJ,CAAwBxG,QAAxB,EAAkC0G,YAAlC,EAAgDC,YAAhD,EAA8DhM,IAA9D,EAAoE4J,SAApE,CADoB;AAAA,CAAf;;AAGA,IAAM6C,QAAQ,SAARA,KAAQ,CAACpH,QAAD,EAAW0G,YAAX,EAAyBC,YAAzB,EAAuChM,IAAvC,EAA6C4J,SAA7C,EAA2D;AAC9E,MAAM8C,MAAM,IAAIb,mBAAJ,CAAwBxG,QAAxB,EAAkC0G,YAAlC,EAAgDC,YAAhD,EAA8DhM,IAA9D,EAAoE4J,SAApE,CAAZ;AACA,SAAO8C,IAAIF,KAAJ,CAAUnH,UAAV,CAAP;AACD,CAHM;;AAKP,yDAAewG,mBAAf,E;;;;;;;ACnHA,yDAAe;AAAA,SAAO,OAAOc,KAAP,KAAiB,UAAxB;AAAA,CAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAKMC,S;AACJ,qBAAYC,aAAZ,EAA2B1S,OAA3B,EAAoCC,eAApC,EAAqD;AAAA;;AAAA;;AAAA,SAqBrD0S,oBArBqD,GAqB9B,UAAC5R,KAAD,EAAW;AAChC,YAAKG,MAAL,GAAc,oEAAAE,CAAasN,QAA3B;AACA,UAAI,0EAAAtO,CAAWW,KAAX,CAAJ,EAAuB;AACrB,cAAK6R,IAAL,GAAY,+EAAAC,CAAgB9R,KAAhB,CAAZ;AACA;;;;AAIA;AACAA,gBAAQ,EAAET,QAAQ,MAAKoS,aAAf,EAAR;AACA,cAAKI,SAAL;AACA;;;;AAIA,YAAI,MAAKjS,SAAT,EAAoB;AAClB,gBAAKH,OAAL;AACD;AACF,OAhBD,MAgBO;AAAE;AACP,cAAKqS,WAAL,CAAiB,+DAAjB;AACD;AACD,YAAKC,QAAL,CAActN,OAAd,CAAsB3E,KAAtB;AACA,aAAO,MAAKiS,QAAZ;AACD,KA5CoD;;AAAA,SA8CrDC,mBA9CqD,GA8C/B,UAAClS,KAAD,EAAW;AAC/B,YAAKG,MAAL,GAAc,oEAAAE,CAAauN,QAA3B;AACA,YAAKoE,WAAL,CAAiB,0DAAjB;AACA,YAAKC,QAAL,CAAcrN,MAAd,CAAqB5E,KAArB;AACA,aAAO,MAAKiS,QAAZ;AACD,KAnDoD;;AACnD,SAAK/S,eAAL,GAAuBA,eAAvB;AACA,SAAKyS,aAAL,GAAqBA,aAArB;AACA,SAAKE,IAAL,GAAY,EAAZ;AACA;AACA,SAAK/R,SAAL,GAAiB6B,SAAjB;AACA,SAAKb,gBAAL,GAAwB,KAAxB;AACA,SAAKX,MAAL,GAAc,oEAAAE,CAAaC,OAA3B;AACA,SAAKG,KAAL,GAAa,IAAI,uDAAJ,EAAb;;AARmD,QAS7C0R,GAT6C;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,MASjC7P,KATiC;;AAUnD8P,YAAQC,GAAR,CAAY,OAAZ,EAAqBF,GAArB,EAA0B,IAAIA,GAAJ,EAA1B;AACA,SAAKlR,QAAL,GAAgB,IAAI,0DAAJ,EAAhB;AACA,SAAKgR,QAAL,GAAgB,+EAAApN,EAAhB;AACA,SAAK5F,OAAL,GAAe,KAAKgT,QAAL,CAAchT,OAA7B;AACA;AACA;AACAA,YACGK,IADH,CACQ,KAAKsS,oBADb,EAEGpS,KAFH,CAES,KAAK0S,mBAFd;AAGD;;;;gCA8CW;AACV,WAAKzR,KAAL,CAAW6R,IAAX,CAAgB,KAAKT,IAAL,CAAUrO,EAA1B,EAA8B,KAAK+O,aAAnC;AACAH,cAAQC,GAAR,CAAY,YAAZ;AACA,WAAK5R,KAAL,GAAa,IAAb;AACD;;;kCAE2B;AAAA,UAAhB+R,OAAgB,uEAAN,IAAM;;AAC1B,WAAK/R,KAAL,CAAWmE,MAAX,CAAkB,IAAIN,KAAJ,CAAUkO,WAAW,2CAArB,CAAlB;AACA,WAAK/R,KAAL,GAAa,IAAb;AACD;;;gCAEWI,I,EAAMkO,I,EAAqC;AAAA,UAA/BkD,QAA+B,uEAApB,IAAoB;AAAA,UAAdQ,KAAc,uEAAN,IAAM;;AACrD,UAAIxT,UAAU,IAAd;;AAEA,UAAI,KAAKC,eAAL,CAAqBwT,UAArB,CAAgC7R,IAAhC,CAAJ,EAA2C;AACzC5B,kBAAU,KAAK0T,YAAL,CAAkB9R,IAAlB,EAAwBkO,IAAxB,EAA8BkD,YAAY,+EAAApN,EAA1C,EAA4D4N,KAA5D,CAAV;AACD,OAFD,MAEO;AACL,cAAM,IAAInO,KAAJ,2BAAkCzD,IAAlC,0BAAN;AACD;;AAED,UAAI4R,KAAJ,EAAW;AACT,aAAKG,aAAL,CAAmBH,KAAnB;AACD;;AAED,aAAOxT,OAAP;AACD;;;+BAEU4B,I,EAAMkO,I,EAAqC;AAAA,UAA/BkD,QAA+B,uEAApB,IAAoB;AAAA,UAAdQ,KAAc,uEAAN,IAAM;;AACpD,UAAI,CAAC,KAAKhS,KAAV,EAAiB;AACf,cAAM,IAAI6D,KAAJ,CAAU,+DAAV,CAAN;AACD;;AAED,WAAK7D,KAAL,CAAWyJ,GAAX,CAAerJ,IAAf,EAAqBkO,IAArB,EAA2BkD,QAA3B,EAAqCQ,KAArC;AACD;;;iCAEY5R,I,EAAMkO,I,EAAqC;AAAA,UAA/BkD,QAA+B,uEAApB,IAAoB;AAAA,UAAdQ,KAAc,uEAAN,IAAM;;AACtD,UAAIxT,gBAAJ;;AAEA;AACA,UAAIgT,QAAJ,EAAc;AACZhT,kBAAUgT,SAAShT,OAAnB;AACD;;AAED,cAAQ,KAAKkB,MAAb;AACE,aAAK,oEAAAE,CAAaC,OAAlB;AACE,eAAKuS,UAAL,CAAgBhS,IAAhB,EAAsBkO,IAAtB,EAA4BkD,QAA5B,EAAsCQ,KAAtC;AACA;AACF,aAAK,oEAAApS,CAAauN,QAAlB;AACE3O,oBAAUyF,QAAQE,MAAR,CAAe,IAAIN,KAAJ,CAAU,0DAAV,CAAf,CAAV;AACA;AACF,aAAK,oEAAAjE,CAAawN,SAAlB;AACE5O,oBAAUyF,QAAQE,MAAR,CAAe,IAAIN,KAAJ,CAAU,2DAAV,CAAf,CAAV;AACA;AACF,aAAK,oEAAAjE,CAAasN,QAAlB;AACE,eAAK4E,aAAL,CAAmB1R,IAAnB,EAAyBkO,IAAzB,EAA+BkD,QAA/B,EAAyCQ,KAAzC;AACA;AACF;AACE;AAdJ;;AAiBA,aAAOxT,OAAP;AACD;;;kCAEa4B,I,EAAMkO,I,EAAMkD,Q,EAAUQ,K,EAAO;AACzC,WAAKvT,eAAL,CAAqB4T,MAArB,CAA4B,KAAKnB,aAAjC,EAAgD9Q,IAAhD,EAAsDkO,IAAtD,EAA4DkD,QAA5D,EAAsEQ,KAAtE;AACD;;;kCAEaA,K,EAAO;AACnB,WAAKxR,QAAL,CAAcwP,QAAd,CAAuBgC,KAAvB;AACD;;;+BAEU;AACT,aAAO,KAAKtS,MAAL,KAAgB,oEAAAE,CAAaC,OAA7B,IAAwC,KAAKH,MAAL,KAAgB,oEAAAE,CAAasN,QAA5E;AACD;;;qCAEgB;AACf,aAAO,KAAKxN,MAAL,KAAgB,oEAAAE,CAAasN,QAA7B,IAAyC,KAAKxN,MAAL,KAAgB,oEAAAE,CAAauN,QAA7E;AACD;;;8BAES;AACR,UAAI3O,UAAU,IAAd;AACA,UAAI,KAAKS,cAAL,EAAJ,EAA2B;AACzB;AACA,YAAI,KAAKS,MAAL,KAAgB,oEAAAE,CAAasN,QAAjC,EAA2C;AACzC1O,oBAAU,KAAKoC,WAAL,CACR,+FAAAiN,CAAqBD,OADb,EAER,oFAAA0E,CACE,8FAAA3E,CAAoBC,OADtB,EAEE,CAAC,IAAD,EAAO,IAAP,CAFF,EAGE,KAAK7K,EAHP,CAFQ,CAAV;AAQD,SATD,MASO;AACLvE,oBAAUyF,QAAQC,OAAR,EAAV;AACD;AACD,aAAKxE,MAAL,GAAc,oEAAAE,CAAawN,SAA3B;AACD,OAfD,MAeO;AACL5O,kBAAUyF,QAAQE,MAAR,CAAe,IAAIN,KAAJ,CAAU,sCAAV,CAAf,CAAV;AACD;AACD,aAAOrF,OAAP;AACD;;;yBAEI+T,a,EAAeC,Y,EAAc;AAChC,UAAMR,QAAQ,KAAKxT,OAAL,CAAaK,IAAb,CAAkB0T,aAAlB,EAAiCC,YAAjC,CAAd;AACA,WAAKnS,gBAAL,GAAwB,IAAxB;AACA,aAAO2R,KAAP;AACD;;;2BAEKQ,Y,EAAc;AAClB,UAAMR,QAAQ,KAAKxT,OAAL,CAAaO,KAAb,CAAmByT,YAAnB,CAAd;AACA,WAAKnS,gBAAL,GAAwB,IAAxB;AACA,aAAO2R,KAAP;AACD;;;6BAEQ;AACP,iCACG,mEADH,EACiB;AACbjP,YAAI,KAAKqO,IAAL,CAAUrO,EADD;AAEb/B,cAAM,KAAKoQ,IAAL,CAAUpQ,IAFH;AAGb0K,gBAAQ,KAAK0F,IAAL,CAAU1F;AAHL,OADjB;AAOD;;;wBAtIY;AACX,aAAO,KAAK0F,IAAL,CAAU1F,MAAV,IAAoB,IAA3B;AACD;;;wBAEU;AACT,aAAO,KAAK0F,IAAL,CAAUpQ,IAAV,IAAkB,IAAzB;AACD;;;wBAEQ;AACP,aAAO,KAAKoQ,IAAL,CAAUrO,EAAV,IAAgB,IAAvB;AACD;;;;;;AA+HH,yDAAekO,SAAf,E;;;;;;AC5MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;;;;ICrBMwB,K;;;AACJ,mBAAc;AAAA;;AAAA;AAEb;;;;wBAEGrS,I,EAAMkO,I,EAAMkD,Q,EAAUQ,K,EAAO;AAC/B,WAAKlQ,IAAL,CAAU;AACR1B,kBADQ;AAERkO,kBAFQ;AAGRkD,0BAHQ;AAIRQ;AAJQ,OAAV;AAMD;;;yBAEIjP,E,EAAI2P,Q,EAAU;AACjB,WAAKxI,OAAL,CAAa,gBAKP;AAAA,YAJJ9J,IAII,QAJJA,IAII;AAAA,YAHJkO,IAGI,QAHJA,IAGI;AAAA,YAFJkD,QAEI,QAFJA,QAEI;AAAA,YADJQ,KACI,QADJA,KACI;;AACJ1D,aAAKxP,MAAL,GAAciE,EAAd;AACA2P,iBAAStS,IAAT,EAAekO,IAAf,EAAqBkD,QAArB,EAA+BQ,KAA/B;AACD,OARD;AASD;;;2BAEMD,O,EAAS;AACd,UAAMY,QAAQ,IAAI9O,KAAJ,CAAUkO,WAAW,2CAArB,CAAd;AACA,WAAK7H,OAAL,CAAa;AAAA,YAAGsH,QAAH,SAAGA,QAAH;AAAA,eAAkBA,SAASrN,MAAT,CAAgBwO,KAAhB,CAAlB;AAAA,OAAb;AACD;;;;EA7BiB9Q,K;;AAgCpB,yDAAe4Q,KAAf,E;;;;;;;;;;;;;;;;AChCA;;IAEMG,Q;;;;;;;;;;;6BACKZ,K,EAAO;AAAA;;AACd,UAAM/Q,UAAU,SAAVA,OAAU,GAAM;AACpB,YAAM+G,QAAQ,OAAKkB,OAAL,CAAa8I,KAAb,CAAd;AACA,YAAIhK,SAAS,CAAb,EAAgB;AACd,iBAAKiB,MAAL,CAAYjB,KAAZ,EAAmB,CAAnB;AACD;AACF,OALD;;AAOA1H,MAAA,sEAAAA,CAAc0R,KAAd,EAAqBnT,IAArB,CAA0BoC,OAA1B,EAAmCA,OAAnC;AACA,WAAKa,IAAL,CAAUkQ,KAAV;AACD;;;;EAXoBnQ,K;;AAcvB,yDAAe+Q,QAAf,E;;;;;;;;;;;;;;;;;;;;AChBA;AACA;AACA;AACA;;AAEA;;;;;AAKA,IAAMC,cAAc,EAApB;;AAEO,IAAMC,4BAA4B,SAA5BA,yBAA4B,CAACpJ,QAAD,EAAWqJ,UAAX,EAA0B;AACjE,MAAIpJ,SAAS,IAAb;AACAiD,EAAA,gFAAAA,CAAcoG,QAAd,CAAuB9I,OAAvB,CAA+B,UAAC9J,IAAD,EAAU;AACvC,QAAI,EAAE,2FAAA+L,CAAmB/L,IAAnB,KAA4BsJ,QAA9B,CAAJ,EAA6C;AAC3CC,eAAS,KAAT;AACA,UAAIoJ,UAAJ,EAAgB;AACd,cAAM,IAAIlP,KAAJ,oCAA2CzD,IAA3C,sBAAN;AACD;AACF;AACF,GAPD;;AASA,SAAOuJ,MAAP;AACD,CAZM;;AAcA,IAAMsJ,iBAAiBvR,OAAOC,MAAP,CAAc;AAC1CuR,oBAAkB;AADwB,CAAd,CAAvB;;IAIDC,Q;AACJ,sBAAkC;AAAA,QAAtB/C,YAAsB,uEAAP,KAAO;;AAAA;;AAChC;AACA,SAAKgD,UAAL,GAAkB,EAAlB;AACA,SAAKjD,WAAL,GAAmB,EAAnB;AACA,SAAKC,YAAL,GAAoB5Q,QAAQ4Q,YAAR,CAApB;AACA,SAAKiD,SAAL,GAAiB,IAAjB;AACD;;;;iCAUYA,S,EAAW;AACtB,WAAKA,SAAL,GAAiBA,SAAjB;AACD;;;gCAEW3J,Q,EAAU;AAAA;;AACpB,WAAK4J,iBAAL,CAAuBT,WAAvB,EAAoCnJ,QAApC;;AAEAhI,aAAOmK,IAAP,CAAYnC,QAAZ,EAAsBQ,OAAtB,CAA8B,UAAC9J,IAAD,EAAU;AACtC,YAAMY,OAAO0I,SAAStJ,IAAT,CAAb;AACA,YAAIY,SAASA,KAAK4F,WAAL,KAAqBlF,MAArB,IAA+BV,gBAAgBa,KAAxD,CAAJ,EAAoE;AAClE,gBAAKyR,iBAAL,CAAuBlT,IAAvB,EAA6BY,IAA7B;AACD;AACF,OALD;;AAOA,UAAI,KAAKoP,YAAT,EAAuB;AACrB0C,kCAA0B,KAAK3C,WAAL,CAAiB0C,WAAjB,CAA1B,EAAyD,IAAzD;AACD;AACF;;;sCAEiB7R,I,EAAM0I,Q,EAAU;AAChC,UAAM6J,SAAS,EAAf;AACA,UAAMzM,QAAQ,EAAd;AACA0M,MAAA,qFAAAA,CAAe9J,QAAf,EAAyB6J,MAAzB,EAAiCzM,KAAjC;AACA,WAAKqJ,WAAL,CAAiBnP,IAAjB,IAAyBuS,MAAzB;AACA,WAAKH,UAAL,CAAgBpS,IAAhB,IAAwB8F,KAAxB;AACD;;;+BAEU1G,I,EAAMY,I,EAAM;AACrB,aACE,KAAKmP,WAAL,CAAiBnP,IAAjB,KACKU,OAAOsE,SAAP,CAAiBC,cAAjB,CAAgCf,IAAhC,CAAqC,KAAKiL,WAAL,CAAiBnP,IAAjB,CAArC,EAA6DZ,IAA7D,CAFA,IAKH,KAAK+P,WAAL,CAAiB0C,WAAjB,KACGnR,OAAOsE,SAAP,CAAiBC,cAAjB,CAAgCf,IAAhC,CAAqC,KAAKiL,WAAL,CAAiB0C,WAAjB,CAArC,EAAoEzS,IAApE,CANP;AAQD;;;wCAEmBY,I,EAAM;AACxB,UAAIjB,OAAO,KAAKqT,UAAL,CAAgBpS,IAAhB,CAAX;AACA,UAAI,CAACjB,IAAL,EAAW;AACTiB,eAAO6R,WAAP;AACA9S,eAAO,KAAKqT,UAAL,CAAgBpS,IAAhB,CAAP;AACD;;AAED,aAAOjB,oCAAWA,IAAX,KAAmB,EAA1B;AACD;;;qCAEgBiB,I,EAAM;AACrB,aAAO,KAAKyS,gBAAL,CAAsBzS,IAAtB,EACJb,GADI,CACA,UAACsB,UAAD;AAAA,eAAgBA,WAAWrB,IAA3B;AAAA,OADA,CAAP;AAED;;;gCAEWY,I,EAAM;AAChB,UAAI,KAAKmP,WAAL,CAAiBnP,IAAjB,CAAJ,EAA4B;AAC1B,iCACK,KAAKmP,WAAL,CAAiBnP,IAAjB,CADL,EAEK,KAAKmP,WAAL,CAAiB0C,WAAjB,CAFL;AAID;;AAED,+BACK,KAAK1C,WAAL,CAAiB0C,WAAjB,CADL;AAGD;;;+BAEUzS,I,EAAMY,I,EAAM;AACrB,UAAMC,UACJ,KAAKkP,WAAL,CAAiBnP,IAAjB,KACK,KAAKmP,WAAL,CAAiBnP,IAAjB,EAAuBZ,IAAvB,CAFS,IAKZ,KAAK+P,WAAL,CAAiB0C,WAAjB,KACG,KAAK1C,WAAL,CAAiB0C,WAAjB,EAA8BzS,IAA9B,CANP;;AASA,aAAOa,WAAW,IAAlB;AACD;;;2BAEMyS,a,EAAetT,I,EAAMkO,I,EAAMkD,Q,EAAUmC,a,EAAe;AAAA;;AACzD,UAAM5T,OAAO,KAAKsT,SAAL,GAAiB,KAAKA,SAAL,CAAeO,gBAAf,CAAgCtF,KAAK/O,KAArC,CAAjB,GAA+D,IAA5E;AACA,UAAIQ,QAAQA,KAAKE,MAAjB,EAAyB;AACvB;AACA;AACAgE,gBAAQ4P,GAAR,CAAY9T,IAAZ,EAAkBlB,IAAlB,CAAuB,YAAM;AAC3B,iBAAKiV,iBAAL,CAAuBJ,aAAvB,EAAsCtT,IAAtC,EAA4CkO,IAA5C,EAAkDkD,QAAlD,EAA4DmC,aAA5D;AACD,SAFD;AAGD,OAND,MAMO;AACL,aAAKG,iBAAL,CAAuBJ,aAAvB,EAAsCtT,IAAtC,EAA4CkO,IAA5C,EAAkDkD,QAAlD,EAA4DmC,aAA5D;AACD;AACF;;;sCAEiBD,a,EAAetT,I,EAAMzB,I,EAAM6S,Q,EAAUmC,a,EAAe;AACpE;;;AAGA,UAAM1S,UAAU,KAAK8S,UAAL,CAAgB3T,IAAhB,EAAsB,+EAAA6M,CAAgByG,aAAhB,CAAtB,CAAhB;AACA,UAAIzS,mBAAmB,oEAAvB,EAAmC;AACjC;AACAA,gBAAQA,OAAR,CAAgByS,aAAhB,EAA+B/U,IAA/B,EAAqC6S,QAArC,EAA+CmC,aAA/C;AACD,OAHD,MAGO;AACL,cAAM,IAAI9P,KAAJ,8BAAqCzD,IAArC,sBAAN;AACD;AACF;;;wBA/Ge;AAAA;;AACd,UAAM4T,oBAAoBtS,OAAOqI,mBAAP,CAA2B,KAAKqJ,UAAhC,EAA4Ca,SAA5C,CAAsD,UAAC7T,IAAD,EAAU;AACxF,YAAML,OAAO,OAAKqT,UAAL,CAAgBhT,IAAhB,CAAb;AACA,eAAOZ,QAAQO,QAAQA,KAAKE,MAArB,CAAP;AACD,OAHyB,CAA1B;AAIA,aAAO+T,qBAAqB,CAA5B;AACD;;;;;;AAfGb,Q,CA0HGxP,M,GAASsP,c;;;AAGX,IAAM1C,iBAAiB,SAAjBA,cAAiB,CAACH,YAAD;AAAA,SAAkB,IAAI+C,QAAJ,CAAa/C,YAAb,CAAlB;AAAA,CAAvB;;AAEP,0EAAe+C,QAAf,E;;;;;;;;;;;AC7JA;AACA;;AAGA;;;;;;;AAOA,IAAMe,kBAAkB,SAAlBA,eAAkB,CAACzS,UAAD,EAAa0O,WAAb,EAA0BiD,UAA1B,EAAyC;AAAA,MACvDhT,IADuD,GAC9CqB,UAD8C,CACvDrB,IADuD;;AAE/D,MAAIA,QAAQ,kEAAA+T,CAAS5H,KAArB,EAA4B;AAC1B,UAAM,IAAI1I,KAAJ,YAAmBzD,IAAnB,qDAAN;AACD;AACD,MACEsB,OAAOsE,SAAP,CAAiBC,cAAjB,CAAgCf,IAAhC,CAAqCiL,WAArC,EAAkD/P,IAAlD,KACG+P,YAAY/P,IAAZ,aAA6B,oEAFlC,EAGE;AACA,UAAM,IAAIyD,KAAJ,qCAA4CvC,OAAOlB,IAAP,CAA5C,6BAAN;AACD;AACD+P,cAAY/P,IAAZ,IAAoBqB,UAApB;AACA,MAAI,CAACA,WAAWL,OAAhB,EAAyB;AACvBgS,eAAWtR,IAAX,CAAgBL,UAAhB;AACD;AACF,CAfD;;AAiBA;;;;;AAKA,IAAM2S,cAAc,SAAdA,WAAc,CAAC1K,QAAD,EAAWyG,WAAX,EAAwBiD,UAAxB,EAAuC;AACzD1J,WAASQ,OAAT,CAAiB,UAAC3K,KAAD,EAAW;AAC1B,QAAIA,iBAAiB,oEAArB,EAAiC;AAC/B2U,sBAAgB3U,KAAhB,EAAuB4Q,WAAvB,EAAoCiD,UAApC;AACD;AACF,GAJD;AAKD,CAND;;AAQA;;;;;;AAMA,IAAMiB,aAAa,SAAbA,UAAa,CAAC3K,QAAD,EAAWyG,WAAX,EAAwBiD,UAAxB,EAAuC;AACxD,MAAI,CAAC1J,QAAL,EAAe;AACf,+BACKhI,OAAOqI,mBAAP,CAA2BL,QAA3B,CADL,sBAEKhI,OAAO4S,qBAAP,CAA6B5K,QAA7B,CAFL,GAGGQ,OAHH,CAGW,UAAC9J,IAAD,EAAU;AACnB,QAAIb,QAAQmK,SAAStJ,IAAT,CAAZ;AACA,QAAI,OAAOb,KAAP,KAAiB,UAArB,EAAiC;AAC/BA,cAAQ,qFAAAgC,CAAiBnB,IAAjB,EAAuBb,KAAvB,CAAR;AACD;AACD,QAAIA,iBAAiB,oEAArB,EAAiC;AAC/B2U,sBAAgB3U,KAAhB,EAAuB4Q,WAAvB,EAAoCiD,UAApC;AACD;AACF,GAXD;AAYD,CAdD;;AAgBA;;;;;;AAMA,yDAAe,UAAC1J,QAAD,EAAWyG,WAAX,EAAwBiD,UAAxB,EAAuC;AACpD,MAAI1J,oBAAoB7H,KAAxB,EAA+B;AAC7BuS,gBAAY1K,QAAZ,EAAsByG,WAAtB,EAAmCiD,UAAnC;AACD,GAFD,MAEO;AACLiB,eAAW3K,QAAX,EAAqByG,WAArB,EAAkCiD,UAAlC;AACD;AACF,CAND,E;;;;;;;;;;;;;;;;;;;;;;;;;;ACrEA;AACA;;AAEA,IAAMmB,aAAa;AACjB;;;AAGAhN,aAAW,IAJM;AAKjBiN,UAAQ,IALS;AAMjBxO,aAAW;AANM,CAAnB;;AASA,IAAMyO,WAAW,SAAXA,QAAW;AAAA,kCAA6BnT,OAAO,MAAKxC,MAAZ,CAA7B;AAAA,CAAjB;;AAEA,IAAM4V,wBAAwB,SAAxBA,qBAAwB,CAAC5V,MAAD,EAAY;AACxC;AACA,WAAS6V,kBAAT,GAA8B,CAC7B;;AAEDA,qBAAmB7V,MAAnB,GAA4BA,MAA5B;AACA6V,qBAAmBF,QAAnB,GAA8BA,QAA9B;;AAEA,SAAOE,kBAAP;AACD,CATD;;AAWA,IAAMC,gBAAgB,SAAhBA,aAAgB,CAAC9V,MAAD,EAAS4K,QAAT;AAAA,SAAsB,IAAIsH,KAAJ,CAAU0D,sBAAsB5V,MAAtB,CAAV,EAAyC4K,QAAzC,CAAtB;AAAA,CAAtB;;AAEA,IAAMmL,WAAW,SAAXA,QAAW,CAACC,OAAD,EAAU1U,IAAV,EAAmB;AAAA,MAC1BtB,MAD0B,GACfgW,OADe,CAC1BhW,MAD0B;;AAElC,MAAIsB,QAAQtB,MAAR,IAAkBsB,QAAQmU,UAA1B,IAAwC,QAAOnU,IAAP,yCAAOA,IAAP,OAAgB,QAA5D,EAAsE;AACpE,WAAOtB,OAAOsB,IAAP,CAAP;AACD;AACD;AACA,SAAOtB,OAAO,2FAAAqN,CAAmBhJ,GAA1B,EAA+B/C,IAA/B,CAAP;AACD,CAPD;;AASA;AACA,IAAM2U,aAAa,SAAbA,UAAa,CAACD,OAAD,EAAUE,SAAV,EAAqBlI,IAArB;AAAA,SACjBgI,QAAQhW,MAAR,CAAe,2FAAAqN,CAAmBC,KAAlC,EAAyC,IAAzC,EAA+CU,IAA/C,CADiB;AAAA,CAAnB;;AAIA,IAAMmI,WAAW,SAAXA,QAAW,CAACH,OAAD,EAAU1U,IAAV,EAAgBb,KAAhB,EAA0B;AAAA,MACjCT,MADiC,GACtBgW,OADsB,CACjChW,MADiC;;;AAGzC,MAAIsB,QAAQtB,MAAR,IAAkBsB,QAAQmU,UAA1B,IAAwC,QAAOnU,IAAP,yCAAOA,IAAP,OAAgB,QAA5D,EAAsE;AACpEtB,WAAOsB,IAAP,IAAeb,KAAf;AACA,WAAOA,KAAP;AACD;;AAED,MAAI,2FAAA4M,CAAmB9I,GAAnB,IAA0BvE,MAA9B,EAAsC;AACpCA,WAAO,2FAAAqN,CAAmB9I,GAA1B,EAA+BjD,IAA/B,EAAqCb,KAArC;AACA,WAAO,IAAP;AACD;;AAED,SAAO,KAAP;AACD,CAdD;;AAgBA,IAAM2V,WAAW,SAAXA,QAAW,CAACJ,OAAD,EAAU1U,IAAV;AAAA,SACfsB,OAAOsE,SAAP,CAAiBC,cAAjB,CAAgCf,IAAhC,CAAqC4P,QAAQhW,MAA7C,EAAqDsB,IAArD,CADe;AAAA,CAAjB;;AAIA,IAAM+U,sBAAsB,SAAtBA,mBAAsB,CAACL,OAAD,EAAU1U,IAAV,EAAmB;AAAA,MACrCtB,MADqC,GAC1BgW,OAD0B,CACrChW,MADqC;;AAE7C,MAAI,2FAAAqN,CAAmBE,cAAnB,IAAqCvN,MAAzC,EAAiD;AAC/CA,WAAO,2FAAAqN,CAAmBE,cAA1B,EAA0CjM,IAA1C;AACA,WAAO,IAAP;AACD;;AAED,SAAO,KAAP;AACD,CARD;;AAUA,IAAMgV,eAAe,SAAfA,YAAe,CAACN,OAAD,EAAa;AAAA,MACxBhW,MADwB,GACbgW,OADa,CACxBhW,MADwB;;AAEhC,sCAAW4C,OAAOqI,mBAAP,CAA2BjL,MAA3B,CAAX,sBAAkD4C,OAAOqI,mBAAP,CAA2BwK,UAA3B,CAAlD;AACD,CAHD;;AAKA,IAAMc,iBAAiB,SAAjBA,cAAiB,CAACP,OAAD,EAAa;AAAA,MAC1BhW,MAD0B,GACfgW,OADe,CAC1BhW,MAD0B;;AAElC,SAAO,6BACF4C,OAAOqI,mBAAP,CAA2BjL,MAA3B,CADE,sBAEF4C,OAAOqI,mBAAP,CAA2BwK,UAA3B,CAFE,GAGLpW,OAAOwI,QAHF,GAAP;AAID,CAND;;AAQA,IAAM2O,gCAAgC,SAAhCA,6BAAgC,CAACR,OAAD,EAAU1U,IAAV,EAAmB;AACvD,MAAIsB,OAAOsE,SAAP,CAAiBC,cAAjB,CAAgCf,IAAhC,CAAqCqP,UAArC,EAAiDnU,IAAjD,CAAJ,EAA4D;AAC1D,WAAOsB,OAAO6T,wBAAP,CAAgCT,OAAhC,EAAyC1U,IAAzC,CAAP;AACD;AACD,SAAOsB,OAAO6T,wBAAP,CAAgCT,QAAQhW,MAAxC,EAAgDsB,IAAhD,CAAP;AACD,CALD;;AAOA;;;;AAIO,IAAMoV,sBAAsB,SAAtBA,mBAAsB;AAAA,MAAC9L,QAAD,uEAAY,EAAZ;AAAA;AACjCvG,SAAK0R,QAD4B;AAEjCzI,WAAO2I,UAF0B;AAGjC1R,SAAK4R,QAH4B;AAIjC/R,SAAKgS,QAJ4B;AAKjC7I,oBAAgB8I,mBALiB;AAMjCM,aAASL,YANwB;AAOjCM,eAAWL,cAPsB;AAQjCE,8BAA0BD;AARO,KAS9B5L,QAT8B;AAAA,CAA5B;;AAYP,IAAMiM,iBAAiBH,qBAAvB;;IAEMI,Y;;;AACJ,wBAAYlM,QAAZ,EAAsBuE,SAAtB,EAAiC;AAAA;;AAAA,6HACzB,IADyB,EACnB,IADmB,EACb,IADa;;AAG/B,WAAKvE,QAAL,GAAgBA,QAAhB;AACA,WAAKjF,OAAL,GAAe,8EAAA8J,CAAqB7E,QAArB,EAA+BuE,SAA/B,CAAf;AACA,WAAKxJ,OAAL,CAAa0J,SAAb,CAAuB0H,UAAvB;AAL+B;AAMhC;;;;2BAEMrX,O,EAAS;AACd,UAAM4I,WAAW,KAAK3C,OAAL,CAAa8G,MAAb,CAAoB/M,OAApB,CAAjB;;AAEA,UAAI,KAAKkL,QAAL,CAAc2E,SAAlB,EAA6B;AAC3B,eAAOuG,cAAcxN,QAAd,EAAwBuO,cAAxB,CAAP;AACD;;AAED,aAAOvO,QAAP;AACD;;;8BAEShH,I,EAAMkO,I,EAAM;AACpB,aAAO,KAAK7J,OAAL,CAAaqR,SAAb,CAAuB1V,IAAvB,EAA6BkO,IAA7B,CAAP;AACD;;;iCAEY9P,O,EAAS4B,I,EAAMkO,I,EAAM;AAChC,UAAMlH,WAAW,KAAK3C,OAAL,CAAasR,YAAb,CAA0BvX,OAA1B,EAAmC4B,IAAnC,EAAyCkO,IAAzC,CAAjB;;AAEA,UAAI,KAAK5E,QAAL,CAAc2E,SAAlB,EAA6B;AAC3B,eAAOuG,cAAcxN,QAAd,EAAwBuO,cAAxB,CAAP;AACD;;AAED,aAAOvO,QAAP;AACD;;;;EA/BwB,yD;;AAmCpB,IAAM4O,gCAAgC,SAAhCA,6BAAgC,CAAClX,MAAD;AAAA,SAAY8V,cAAc9V,MAAd,EAAsB6W,cAAtB,CAAZ;AAAA,CAAtC;;AAEA,IAAMlF,qBAAqB,SAArBA,kBAAqB,CAAC/G,QAAD,EAAWuE,SAAX;AAAA,SAChC,IAAI2H,YAAJ,CAAiBlM,QAAjB,EAA2BuE,SAA3B,CADgC;AAAA,CAA3B;;AAIP,0EAAe2H,YAAf,E;;;;;;;;;;;;;;ACtJA;AACA;;IAEMK,S;AACJ,qBAAYxR,OAAZ,EAAqBiF,QAArB,EAA+B;AAAA;;AAC7B,SAAKA,QAAL,GAAgBA,QAAhB;AACA,SAAKwM,OAAL,GAAe,IAAI,yEAAJ,CAAoBzR,OAApB,CAAf;AACD;;;;0BAEKnG,O,EAAS;AAAA;;AACb,UAAI,CAAC,KAAKoL,QAAL,CAAc2E,SAAnB,EAA8B;AAC5B,eAAO/P,OAAP;AACD;;AAED,UAAM6R,cAAc,KAAKzG,QAAL,CAAcyM,mBAAd,CAAkC,+EAAAlJ,CAAgB3O,OAAhB,CAAlC,CAApB;AACA,aAAO6R,YAAYjG,OAAZ,CAAoB,UAACzI,UAAD,EAAgB;AACzCnD,gBAAQmD,WAAWrB,IAAnB,IAA2B,MAAK8V,OAAL,CAAa/S,GAAb,CAAiB1B,UAAjB,CAA3B;AACD,OAFM,CAAP;AAGD;;;+BAEUgD,O,EAAS;AAClB,UAAIA,OAAJ,EAAa;AACX,aAAKyR,OAAL,CAAaL,UAAb,CAAwBpR,OAAxB;AACD;AACF;;;;;;AAGI,IAAM2J,kBAAkB,SAAlBA,eAAkB,CAAC3J,OAAD,EAAUiF,QAAV;AAAA,SAC7B,IAAIuM,SAAJ,CAAcxR,OAAd,EAAuBiF,QAAvB,CAD6B;AAAA,CAAxB;;AAIP,0EAAeuM,SAAf,E;;;;;;;;;;;;;;;AC/BA;AACA;AACA;AACA;;AAEA,IAAMG,mBAAmB,SAAnBA,gBAAmB,CACvBC,cADuB,EAEvBC,YAFuB,EAGvBC,WAHuB,EAIvBnX,WAJuB,EAKvB+B,SALuB,EAMpB;AAAA,MACKsD,OADL,GAC8C4R,cAD9C,CACK5R,OADL;AAAA,MACc+R,UADd,GAC8CH,cAD9C,CACcG,UADd;AAAA,MAC0BC,eAD1B,GAC8CJ,cAD9C,CAC0BI,eAD1B;;;AAGH,WAASC,cAAT,CAAwBlV,OAAxB,EAAiCjC,KAAjC,EAAiD;AAC/C,QAAIoK,eAAJ;AACA,QAAInL,gBAAJ;AACA,QAAI,KAAK,wEAAL,CAAJ,EAA4B;AAAA,wCAHasO,IAGb;AAHaA,YAGb;AAAA;;AAC1B,UAAMwB,OAAO,oFAAAgE,CACXiE,WADW,GAEV/U,OAFU,EAEDjC,KAFC,SAESuN,IAFT,GAGX,KAAK,wEAAL,EAAuB/J,EAHZ,CAAb;AAKA;AACA,UAAMzE,UAAUmY,gBAAgBH,YAAhB,EAA8BhI,IAA9B,EAAoCnN,SAApC,CAAhB;AACAwI,eAASrL,QAAQ0T,KAAjB;AACA,UAAI1T,QAAQkT,QAAZ,EAAsB;AACpBhT,kBAAU,KAAK,wEAAL,EAAuBoC,WAAvB,CAAmC0V,YAAnC,EAAiDhI,IAAjD,EAAuDhQ,QAAQkT,QAA/D,EAAyE7H,MAAzE,CAAV;AACA,YAAInL,OAAJ,EAAa;AACX,cAAIY,WAAJ,EAAiB;AACf;AACA;AACAoX,uBAAWhY,OAAX,EAAoBY,WAApB,EAAiC,IAAjC,EAAuCuK,MAAvC,EAA+C2E,IAA/C;AACD;AACF,SAND,MAMO;AACL3E,mBAAS,IAAT;AACAnL,oBAAUyF,QAAQE,MAAR,CAAe,IAAIN,KAAJ,CAAU,uDAAV,CAAf,CAAV;AACD;AACF;AACF,KAtBD,MAsBO;AACLrF,gBAAUyF,QAAQE,MAAR,CAAe,IAAIN,KAAJ,CAAU,+DAAV,CAAf,CAAV;AACD;AACD,WAAO8F,UAAUlF,QAAQ8G,MAAR,CAAe/M,OAAf,CAAjB;AACD;;AAED,SAAOkY,cAAP;AACD,CAzCD;;IA2CMC,e;AAIJ,6BAA4B;AAAA;;AAAA,QAAhBlS,OAAgB,uEAAN,IAAM;;AAAA;;AAAA,SAH5ByR,OAG4B,GAHlB,IAAIrT,GAAJ,EAGkB;AAAA,SAF5B4B,OAE4B,GAFlB,IAEkB;;AAAA,SA6B5BgS,eA7B4B,GA6BV,UAACH,YAAD,EAAehI,IAAf,EAAqBnN,SAArB,EAAmC;AACnD,UAAI6Q,cAAJ;AACA,UAAIR,iBAAJ;;AAEA,UAAIrQ,SAAJ,EAAe;AACb6Q,gBAAQ,MAAKvN,OAAL,CAAaqR,SAAb,CAAuBQ,YAAvB,EAAqChI,IAArC,CAAR;AACD;;AAED,UAAI,CAAC0D,KAAL,EAAY;AACVR,mBAAW,+EAAApN,EAAX;AACA,YAAIjD,SAAJ,EAAe;AACb6Q,kBAAQ,MAAKvN,OAAL,CAAasR,YAAb,CAA0BvE,SAAShT,OAAnC,EAA4C8X,YAA5C,EAA0DhI,IAA1D,CAAR;AACD,SAFD,MAEO;AACL0D,kBAAQ,MAAKvN,OAAL,CAAa8G,MAAb,CAAoBiG,SAAShT,OAA7B,EAAsC8X,YAAtC,EAAoDhI,IAApD,CAAR;AACD;AACF;AACD,aAAO,EAAE0D,YAAF,EAASR,kBAAT,EAAP;AACD,KA9C2B;;AAAA,SAgD5BgF,UAhD4B,GAgDf,UAAChY,OAAD,EAAUoY,aAAV,EAAyBlD,aAAzB,EAAwCmD,YAAxC,EAAsDvI,IAAtD,EAA+D;AAC1E,UAAI9P,OAAJ,EAAa;AACXA,gBAAQK,IAAR,CAAa,UAACF,IAAD,EAAU;AACrB,cAAMS,cAAcI,QAAQoX,cAAclD,aAAd,EAA6BmD,YAA7B,EAA2CvI,IAA3C,EAAiD3P,IAAjD,CAAR,CAApB;AACAW,UAAA,6EAAAA,CAAauX,YAAb,EAA2BzX,WAA3B;AACD,SAHD;AAID;AACF,KAvD2B;;AAC1B,SAAKyW,UAAL,CAAgBpR,OAAhB;AACD;;AAED;;;;;;;;;wBAKIhD,U,EAAY;AACd,UAAM6U,eAAe7U,WAAWrB,IAAhC;AACA,UAAI,CAAC,KAAK8V,OAAL,CAAahT,GAAb,CAAiBoT,YAAjB,CAAL,EAAqC;AACnC,aAAKJ,OAAL,CAAa7S,GAAb,CACEiT,YADF,EAEE,KAAK/K,MAAL,CACE9J,WAAWrB,IADb,EAEEqB,WAAWT,IAFb,EAGES,WAAWrC,WAHb,EAIEqC,WAAWN,SAJb,CAFF;AASD;AACD,aAAO,KAAK+U,OAAL,CAAa/S,GAAb,CAAiBmT,YAAjB,CAAP;AACD;;;2BAEMA,Y,EAAcC,W,EAAanX,W,EAAa+B,S,EAAW;AACxD,aAAOiV,iBAAiB,IAAjB,EAAuBE,YAAvB,EAAqCC,WAArC,EAAkDnX,WAAlD,EAA+D+B,SAA/D,CAAP;AACD;;;+BA8BUsD,O,EAAS;AAClB,WAAKA,OAAL,GAAeA,OAAf;AACD;;;;;;AAGH,yDAAekS,eAAf,E","file":"deferred-data-access.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"DataAccessInterface\"] = factory();\n\telse\n\t\troot[\"DataAccessInterface\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"http://localhost:8081/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 25);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5c0eaa69306b0b9035a2","import TARGET_INTERNALS from './TARGET_INTERNALS';\nimport TARGET_DATA from './TARGET_DATA';\nimport Target from '../request/Target';\nimport Resource from '../resource/Resource';\n\nexport default (object) => object instanceof Resource ||\n  object instanceof Target ||\n  (object && (\n    // this case for Targets and Resources which contain\n    // data in TARGET_INTERNALS Symbol\n    // We check for their types above but in cases when Proxies are enabled\n    // their type will be Function and verification will come to this case\n    typeof object[TARGET_INTERNALS] === 'object' ||\n    // this case for RAW resources passed via JSON conversion,\n    // look like {'resource::data': {id: '1111', poolId: '22222'}}\n    typeof object[TARGET_DATA] === 'object'\n  ));\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/isResource.js","export default Symbol('request.target:internals');\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/TARGET_INTERNALS.js","export default 'resource::data';\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/TARGET_DATA.js","import TARGET_INTERNALS from '../utils/TARGET_INTERNALS';\nimport TargetStatus from '../utils/TargetStatus';\nimport isResource from '../utils/isResource';\nimport Internals from './target/Internals';\n\nconst PROMISE_FIELD = Symbol('request.target::promise');\n\nconst getRequestPromise = (request) => (request[TARGET_INTERNALS] || request[PROMISE_FIELD]);\n\n/**\n * The object that will be available on other side\n * @class DataAccessInterface.RequestTarget\n * @param _promise {Promise}\n * @param _requestHandlers {Handlers}\n */\nclass Target {\n  constructor(promise, requestHandlers) {\n    this[TARGET_INTERNALS] = new Internals(this, promise, requestHandlers);\n\n    const handlePromise = (data) => {\n      if (!isResource(data)) {\n        this[PROMISE_FIELD] = promise;\n        delete this[TARGET_INTERNALS];\n      }\n    };\n\n    promise.then(handlePromise, handlePromise);\n  }\n\n  then(...args) {\n    const target = getRequestPromise(this);\n    return target.then(...args);\n  }\n\n  catch(...args) {\n    const target = getRequestPromise(this);\n    return target.catch(...args);\n  }\n}\n\nexport const isActive = (target) => (\n  target\n  && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].isActive() : false\n);\n\nexport const canBeDestroyed = (target) => (\n  target\n  && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].canBeDestroyed() : false\n);\n\nexport const destroy = (target) => (\n  target &&\n  target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].destroy() : null\n);\n\nexport const toJSON = (target) => (\n  target\n  && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].toJSON() : null\n);\n\nexport const isTemporary = (target) => (\n  target\n  && target[TARGET_INTERNALS] && target[TARGET_INTERNALS].temporary\n);\n\nexport const setTemporary = (target, value) => {\n  if (target && target[TARGET_INTERNALS]) {\n    target[TARGET_INTERNALS].temporary = Boolean(value);\n  }\n};\n\nexport const getStatus = (target) => (\n  target &&\n  target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].status : null\n);\n\nexport const isPending = (value) => (\n  getStatus(value) === TargetStatus.PENDING\n);\n\nexport const getQueueLength = (target) => {\n  const list = target && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].queue : null;\n  return list ? list.length : 0;\n};\n\nexport const getQueueCommands = (target) => {\n  const queue = target && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].queue : null;\n  if (queue) {\n    return queue.map(([name]) => name);\n    // return queue.map(([name, pack]) => pack.type);\n  }\n  return [];\n};\n\nexport const hadChildPromises = (target) => Boolean(target\n  && target[TARGET_INTERNALS]\n  && target[TARGET_INTERNALS].hadChildPromises);\n\nexport const getRawPromise = (target) => (\n  target\n  && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].promise : null\n);\n\nconst getRequestChildren = (target) => (\n  target\n  && target[TARGET_INTERNALS] ? target[TARGET_INTERNALS].children : null\n);\n\nexport const getChildren = (target) => {\n  const list = getRequestChildren(target);\n  return list ? [...list] : [];\n};\n\nexport const getLastChild = (target) => {\n  const list = getRequestChildren(target);\n  return list && list.length ? list[list.length - 1] : null;\n};\n\nexport const getChildrenCount = (target) => {\n  const list = getRequestChildren(target);\n  return list ? list.length : 0;\n};\n\n// FIXME Is it used? Why its similar to getChildrenCount()?\nexport const sendRequest = (target) => {\n  const list = getRequestChildren(target);\n  return list ? list.length : 0;\n};\n\nexport const createRequestTarget = (promise, requestHandlers) => (\n  new Target(promise, requestHandlers)\n);\n\nexport default Target;\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/Target.js","export const DEFAULT_IS_TEMPORARY = () => false;\n\nclass Descriptor {\n  constructor(type, handler, name) {\n    this.name = name !== undefined ? name : type;\n    this.type = type;\n    this.handler = handler;\n    /**\n     * @type {function(): boolean}\n     */\n    this.isTemporary = DEFAULT_IS_TEMPORARY;\n    this.cacheable = true;\n    this.virtual = false;\n    this.resourceType = null;\n  }\n\n  toString() {\n    return `[Command Descriptor(name=\"${String(this.name)}\", ` +\n      `type=\"${String(this.type)}\", virtual=\"${this.virtual}\")]`;\n  }\n}\n\nexport const createDescriptor = (\n  command,\n  handler,\n  name,\n  isTemporary = undefined,\n  resourceType = null,\n  cacheable = true,\n  virtual = false,\n) => {\n  const descriptor = new Descriptor(command, handler, name);\n  descriptor.resourceType = resourceType;\n  descriptor.cacheable = cacheable;\n  descriptor.virtual = virtual;\n  if (isTemporary) {\n    descriptor.isTemporary = isTemporary;\n  }\n  // We can use Object.freeze(), it keeps class/constructor information\n  return Object.freeze(descriptor);\n};\n\nexport const addDescriptorTo = (descriptor, target) => {\n  if (target instanceof Array) {\n    target.push(descriptor);\n  } else if (target) {\n    target[descriptor.name] = descriptor;\n  }\n};\n\nexport const descriptorGeneratorFactory = (command, name) =>\n  (\n    handler,\n    target,\n    isTemporary = DEFAULT_IS_TEMPORARY,\n    resourceType = null,\n    cacheable = true,\n    virtual = false,\n  ) => {\n    const descriptor = createDescriptor(\n      command,\n      handler,\n      name,\n      isTemporary,\n      resourceType,\n      cacheable,\n      virtual,\n    );\n    addDescriptorTo(descriptor, target);\n    return Object.freeze(descriptor);\n  };\n\nexport default Descriptor;\n\n\n\n// WEBPACK FOOTER //\n// ./source/command/Descriptor.js","import EventDispatcher from 'event-dispatcher';\nimport getId from '../utils/getId';\nimport isResource from '../utils/isResource';\nimport { createResource } from './Resource';\n\nexport const ResourcePoolEvents = Object.freeze({\n  RESOURCE_ADDED: 'resourceAdded',\n  RESOURCE_REMOVED: 'resourceRemoved',\n  POOL_CLEAR: 'poolClear',\n  POOL_CLEARED: 'poolCleared',\n  POOL_DESTROYED: 'poolDestroyed',\n});\n\nexport const MAP_FIELD = Symbol('ResourcePool::map');\n\nlet validTargets = {};\n\nexport const isValidTarget = (target) => (\n  !isResource(target)\n  && Boolean(validTargets[typeof target])\n);\n\nexport const setValidTargets = (list) => {\n  validTargets = list.reduce((validTargets, target) => {\n    validTargets[target] = true;\n\n    return validTargets;\n  }, {});\n};\n\nexport const getDefaultValidTargets = () => ['object', 'function'];\n\nclass ResourcePool extends EventDispatcher {\n  constructor() {\n    super();\n    this[MAP_FIELD] = new Map();\n    Object.defineProperties(this, {\n      id: {\n        value: getId(),\n      },\n    });\n  }\n\n  set(value, type = null) {\n    const map = this[MAP_FIELD];\n    let resource = null;\n    if (isValidTarget(value)) {\n      if (map.has(value)) {\n        resource = map.get(value);\n      } else {\n        resource = createResource(this, value, type || typeof value);\n        map.set(resource.id, resource);\n        map.set(value, resource);\n        if (this.hasEventListener(ResourcePoolEvents.RESOURCE_ADDED)) {\n          this.dispatchEvent(ResourcePoolEvents.RESOURCE_ADDED, resource);\n        }\n      }\n    }\n\n    return resource;\n  }\n\n  has(target) {\n    return this[MAP_FIELD].has(target);\n  }\n\n  get(target) {\n    return this[MAP_FIELD].get(target);\n  }\n\n  remove(value) {\n    const map = this[MAP_FIELD];\n    const resource = map.get(value);\n    if (resource) {\n      map.delete(resource.id);\n      map.delete(resource.value);\n      if (this.hasEventListener(ResourcePoolEvents.RESOURCE_REMOVED)) {\n        this.dispatchEvent(ResourcePoolEvents.RESOURCE_REMOVED, resource);\n      }\n      resource.destroy();\n    }\n  }\n\n  clear() {\n    const map = this[MAP_FIELD];\n    if (this.hasEventListener(ResourcePoolEvents.POOL_CLEAR)) {\n      this.dispatchEvent(ResourcePoolEvents.POOL_CLEAR, this);\n    }\n\n    for (const [key, resource] of map) {\n      if (typeof key === 'string' && key === resource.id) {\n        resource.destroy();\n      }\n    }\n\n    map.clear();\n\n    if (this.hasEventListener(ResourcePoolEvents.POOL_CLEARED)) {\n      this.dispatchEvent(ResourcePoolEvents.POOL_CLEARED, this);\n    }\n  }\n\n  isActive() {\n    return Boolean(this[MAP_FIELD]);\n  }\n\n  destroy() {\n    this.clear();\n    // intentionally make it not usable after its destroyed\n    delete this[MAP_FIELD];\n    if (this.hasEventListener(ResourcePoolEvents.POOL_DESTROYED)) {\n      // FIXME why for second parameter?\n      this.dispatchEvent(ResourcePoolEvents.POOL_DESTROYED, this);\n    }\n  }\n\n  static events = ResourcePoolEvents;\n}\n\nclass DefaultResourcePool extends ResourcePool {\n  // INFO default ResourcePool should not be destroyable;\n  destroy() {\n    throw new Error('Default ResourcePool cannot be destroyed.');\n  }\n}\n\nexport const defaultResourcePool = new DefaultResourcePool();\n\nexport const createResourcePool = () => new ResourcePool();\n\nsetValidTargets(getDefaultValidTargets());\n\nexport default ResourcePool;\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/ResourcePool.js","class Deferred {\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve;\n      this.reject = reject;\n    });\n  }\n}\n\nexport const createDeferred = () => new Deferred();\nexport default Deferred;\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/Deferred.js","import TARGET_INTERNALS from './TARGET_INTERNALS';\nimport IConvertible from './IConvertible';\nimport isResource from './isResource';\nimport { toJSON } from '../request/Target';\nimport { defaultResourcePool } from '../resource/ResourcePool';\nimport Resource from '../resource/Resource';\n\nexport default (object, pool) => {\n  pool = pool || defaultResourcePool;\n\n  if (object instanceof Resource) {\n    return object.toJSON();\n  } else if (typeof object[TARGET_INTERNALS] === 'object') {\n    return toJSON(object);\n  } else if (object instanceof IConvertible || typeof object === 'function') {\n    return pool.set(object).toJSON();\n  } else if (isResource(object)) {\n    return object;\n  }\n\n  return null;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getRawResource.js","/**\n * Interface for all resource types, these will be treated as resources automatically\n * @interface\n * @alias DataAccessInterface.IConvertible\n */\nclass IConvertible {\n\n}\n\nexport default IConvertible;\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/IConvertible.js","(function webpackUniversalModuleDefinition(root, factory) {\r\n\tif(typeof exports === 'object' && typeof module === 'object')\r\n\t\tmodule.exports = factory();\r\n\telse if(typeof define === 'function' && define.amd)\r\n\t\tdefine([], factory);\r\n\telse if(typeof exports === 'object')\r\n\t\texports[\"EventDispatcher\"] = factory();\r\n\telse\r\n\t\troot[\"EventDispatcher\"] = factory();\r\n})(this, function() {\r\nreturn /******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {};\r\n/******/\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n/******/\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId]) {\r\n/******/ \t\t\treturn installedModules[moduleId].exports;\r\n/******/ \t\t}\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\ti: moduleId,\r\n/******/ \t\t\tl: false,\r\n/******/ \t\t\texports: {}\r\n/******/ \t\t};\r\n/******/\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n/******/\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.l = true;\r\n/******/\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n/******/\r\n/******/\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__webpack_require__.m = modules;\r\n/******/\r\n/******/ \t// expose the module cache\r\n/******/ \t__webpack_require__.c = installedModules;\r\n/******/\r\n/******/ \t// define getter function for harmony exports\r\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\r\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\r\n/******/ \t\t\tObject.defineProperty(exports, name, {\r\n/******/ \t\t\t\tconfigurable: false,\r\n/******/ \t\t\t\tenumerable: true,\r\n/******/ \t\t\t\tget: getter\r\n/******/ \t\t\t});\r\n/******/ \t\t}\r\n/******/ \t};\r\n/******/\r\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\r\n/******/ \t__webpack_require__.n = function(module) {\r\n/******/ \t\tvar getter = module && module.__esModule ?\r\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\r\n/******/ \t\t\tfunction getModuleExports() { return module; };\r\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\r\n/******/ \t\treturn getter;\r\n/******/ \t};\r\n/******/\r\n/******/ \t// Object.prototype.hasOwnProperty.call\r\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\r\n/******/\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__webpack_require__.p = \"http://localhost:8081/dist/\";\r\n/******/\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ([\r\n/* 0 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.Event = undefined;\r\n\r\nvar _EventDispatcher = __webpack_require__(1);\r\n\r\nvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\nexports.default = _EventDispatcher2.default;\r\nexports.Event = _EventDispatcher.Event;\r\n\r\n/***/ }),\r\n/* 1 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\n\r\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar hasOwnProp = function hasOwnProp(target, name) {\r\n  return Object.prototype.hasOwnProperty.call(target, name);\r\n}; /**\r\n    * Created by Oleg Galaburda on 09.02.16.\r\n    * \r\n    */\r\n\r\nvar Event = exports.Event = function () {\r\n  function Event(type) {\r\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\r\n\r\n    _classCallCheck(this, Event);\r\n\r\n    this.type = type;\r\n    this.data = data;\r\n    this.defaultPrevented = false;\r\n  }\r\n\r\n  _createClass(Event, [{\r\n    key: 'toJSON',\r\n    value: function toJSON() {\r\n      return { type: this.type, data: this.data };\r\n    }\r\n  }, {\r\n    key: 'isDefaultPrevented',\r\n    value: function isDefaultPrevented() {\r\n      return this.defaultPrevented;\r\n    }\r\n  }, {\r\n    key: 'preventDefault',\r\n    value: function preventDefault() {\r\n      this.defaultPrevented = true;\r\n    }\r\n  }]);\r\n\r\n  return Event;\r\n}();\r\n\r\nvar ListenersRunner = function () {\r\n  function ListenersRunner(listeners, onStopped, onComplete) {\r\n    var _this = this;\r\n\r\n    _classCallCheck(this, ListenersRunner);\r\n\r\n    this.index = -1;\r\n    this.immediatelyStopped = false;\r\n\r\n    this.stopImmediatePropagation = function () {\r\n      _this.immediatelyStopped = true;\r\n    };\r\n\r\n    this.listeners = listeners;\r\n    this.onStopped = onStopped;\r\n    this.onComplete = onComplete;\r\n  }\r\n\r\n  _createClass(ListenersRunner, [{\r\n    key: 'run',\r\n    value: function run(event, target) {\r\n      var listener = void 0;\r\n      var listeners = this.listeners;\r\n\r\n      this.augmentEvent(event);\r\n      // TODO this has to be handled in separate object ListenersRunner that should be\r\n      // created for each call() call and asked for index validation on each listener remove.\r\n      for (this.index = 0; this.index < listeners.length; this.index++) {\r\n        if (this.immediatelyStopped) break;\r\n        listener = listeners[this.index];\r\n        listener.call(target, event);\r\n      }\r\n      this.clearEvent(event);\r\n      this.onComplete(this);\r\n    }\r\n  }, {\r\n    key: 'augmentEvent',\r\n    value: function augmentEvent(eventObject) {\r\n      var event = eventObject;\r\n      event.stopPropagation = this.onStopped;\r\n      event.stopImmediatePropagation = this.stopImmediatePropagation;\r\n    }\r\n\r\n    /* eslint class-methods-use-this: \"off\" */\r\n\r\n  }, {\r\n    key: 'clearEvent',\r\n    value: function clearEvent(eventObject) {\r\n      var event = eventObject;\r\n      delete event.stopPropagation;\r\n      delete event.stopImmediatePropagation;\r\n    }\r\n  }, {\r\n    key: 'listenerRemoved',\r\n    value: function listenerRemoved(listeners, index) {\r\n      if (listeners === this.listeners && index <= this.index) {\r\n        this.index--;\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return ListenersRunner;\r\n}();\r\n\r\nvar EventListeners = function () {\r\n  function EventListeners() {\r\n    var _this2 = this;\r\n\r\n    _classCallCheck(this, EventListeners);\r\n\r\n    this._listeners = {};\r\n    this._runners = [];\r\n\r\n    this.removeRunner = function (runner) {\r\n      _this2._runners.splice(_this2._runners.indexOf(runner), 1);\r\n    };\r\n  }\r\n  /**\r\n   * key - event Type\r\n   * value - hash of priorities\r\n   *    key - priority\r\n   *    value - list of handlers\r\n   * @type {Object<string, Object.<string, Array<number, Function>>>}\r\n   * @private\r\n   */\r\n\r\n\r\n  _createClass(EventListeners, [{\r\n    key: 'createList',\r\n    value: function createList(eventType, priorityOpt) {\r\n      var priority = parseInt(priorityOpt, 10);\r\n      var target = this.getPrioritiesByKey(eventType);\r\n      var key = String(priority);\r\n      var value = void 0;\r\n      if (hasOwnProp(target, key)) {\r\n        value = target[key];\r\n      } else {\r\n        value = [];\r\n        target[key] = value;\r\n      }\r\n      return value;\r\n    }\r\n  }, {\r\n    key: 'getPrioritiesByKey',\r\n    value: function getPrioritiesByKey(key) {\r\n      var value = void 0;\r\n      if (hasOwnProp(this._listeners, key)) {\r\n        value = this._listeners[key];\r\n      } else {\r\n        value = {};\r\n        this._listeners[key] = value;\r\n      }\r\n      return value;\r\n    }\r\n  }, {\r\n    key: 'add',\r\n    value: function add(eventType, handler, priority) {\r\n      var handlers = this.createList(eventType, priority);\r\n      if (handlers.indexOf(handler) < 0) {\r\n        handlers.push(handler);\r\n      }\r\n    }\r\n  }, {\r\n    key: 'has',\r\n    value: function has(eventType) {\r\n      var priority = void 0;\r\n      var result = false;\r\n      var priorities = this.getPrioritiesByKey(eventType);\r\n      if (priorities) {\r\n        for (priority in priorities) {\r\n          if (hasOwnProp(priorities, priority)) {\r\n            result = true;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n  }, {\r\n    key: 'remove',\r\n    value: function remove(eventType, handler) {\r\n      var _this3 = this;\r\n\r\n      var priorities = this.getPrioritiesByKey(eventType);\r\n      if (priorities) {\r\n        var list = Object.getOwnPropertyNames(priorities);\r\n        var length = list.length;\r\n\r\n        var _loop = function _loop(index) {\r\n          var priority = list[index];\r\n          var handlers = priorities[priority];\r\n          var handlerIndex = handlers.indexOf(handler);\r\n          if (handlerIndex >= 0) {\r\n            handlers.splice(handlerIndex, 1);\r\n            if (!handlers.length) {\r\n              delete priorities[priority];\r\n            }\r\n            _this3._runners.forEach(function (runner) {\r\n              runner.listenerRemoved(handlers, handlerIndex);\r\n            });\r\n          }\r\n        };\r\n\r\n        for (var index = 0; index < length; index++) {\r\n          _loop(index);\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: 'removeAll',\r\n    value: function removeAll(eventType) {\r\n      delete this._listeners[eventType];\r\n    }\r\n  }, {\r\n    key: 'createRunner',\r\n    value: function createRunner(handlers, onStopped) {\r\n      var runner = new ListenersRunner(handlers, onStopped, this.removeRunner);\r\n      this._runners.push(runner);\r\n      return runner;\r\n    }\r\n  }, {\r\n    key: 'call',\r\n    value: function call(event, target) {\r\n      var priorities = this.getPrioritiesByKey(event.type);\r\n      var stopped = false;\r\n      var stopPropagation = function stopPropagation() {\r\n        stopped = true;\r\n      };\r\n      if (priorities) {\r\n        // getOwnPropertyNames() or keys()?\r\n        var list = Object.getOwnPropertyNames(priorities).sort(function (a, b) {\r\n          return a - b;\r\n        });\r\n        var length = list.length;\r\n\r\n        for (var index = 0; index < length; index++) {\r\n          if (stopped) break;\r\n          var _handlers = priorities[list[index]];\r\n          // in case if all handlers of priority were removed while event\r\n          // was dispatched and handlers become undefined.\r\n          if (_handlers) {\r\n            var _runner = this.createRunner(_handlers, stopPropagation);\r\n            _runner.run(event, target);\r\n            if (_runner.immediatelyStopped) break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return EventListeners;\r\n}();\r\n\r\nvar EventDispatcher = function () {\r\n  function EventDispatcher() {\r\n    var eventPreprocessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\r\n    var noInit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\r\n\r\n    _classCallCheck(this, EventDispatcher);\r\n\r\n    if (!noInit) {\r\n      this.initialize(eventPreprocessor);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n\r\n\r\n  _createClass(EventDispatcher, [{\r\n    key: 'initialize',\r\n    value: function initialize() {\r\n      var eventPreprocessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\r\n\r\n      this._eventPreprocessor = eventPreprocessor;\r\n      this._listeners = new EventListeners();\r\n    }\r\n  }, {\r\n    key: 'addEventListener',\r\n    value: function addEventListener(eventType, listener) {\r\n      var priority = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\r\n\r\n      this._listeners.add(eventType, listener, -priority || 0);\r\n    }\r\n  }, {\r\n    key: 'hasEventListener',\r\n    value: function hasEventListener(eventType) {\r\n      return this._listeners.has(eventType);\r\n    }\r\n  }, {\r\n    key: 'removeEventListener',\r\n    value: function removeEventListener(eventType, listener) {\r\n      this._listeners.remove(eventType, listener);\r\n    }\r\n  }, {\r\n    key: 'removeAllEventListeners',\r\n    value: function removeAllEventListeners(eventType) {\r\n      this._listeners.removeAll(eventType);\r\n    }\r\n  }, {\r\n    key: 'dispatchEvent',\r\n    value: function dispatchEvent(event, data) {\r\n      var eventObject = EventDispatcher.getEvent(event, data);\r\n      if (this._eventPreprocessor) {\r\n        eventObject = this._eventPreprocessor.call(this, eventObject);\r\n      }\r\n      this._listeners.call(eventObject);\r\n    }\r\n  }], [{\r\n    key: 'isObject',\r\n    value: function isObject(value) {\r\n      return (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value !== null;\r\n    }\r\n  }, {\r\n    key: 'getEvent',\r\n    value: function getEvent(eventOrType, optionalData) {\r\n      var event = eventOrType;\r\n      if (!EventDispatcher.isObject(eventOrType)) {\r\n        event = new EventDispatcher.Event(String(eventOrType), optionalData);\r\n      }\r\n      return event;\r\n    }\r\n  }, {\r\n    key: 'create',\r\n    value: function create(eventPreprocessor) {\r\n      return new EventDispatcher(eventPreprocessor);\r\n    }\r\n\r\n    /* eslint no-undef: \"off\" */\r\n\r\n  }]);\r\n\r\n  return EventDispatcher;\r\n}();\r\n\r\nEventDispatcher.Event = Event;\r\n\r\nexports.default = EventDispatcher;\r\n\r\n/***/ })\r\n/******/ ]);\r\n});\r\n//# sourceMappingURL=event-dispatcher.js.map\n\n\n// WEBPACK FOOTER //\n// ./node_modules/event-dispatcher/dist/event-dispatcher.js","import TARGET_DATA from '../utils/TARGET_DATA';\nimport TARGET_INTERNALS from '../utils/TARGET_INTERNALS';\nimport getId from '../utils/getId';\n\nconst getPoolId = (pool) => (pool ? pool.id : null);\n\n/**\n * @exports Resource\n */\nclass Resource {\n  constructor(pool, value, type, id) {\n    Object.defineProperties(this, {\n      [TARGET_INTERNALS]: {\n        value: {\n          pool,\n          value,\n          type,\n          id,\n          active: true,\n          poolId: getPoolId(pool),\n        },\n      },\n      [TARGET_DATA]: {\n        get: this.toJSON,\n      },\n    });\n  }\n\n\n  get active() {\n    return Boolean(this[TARGET_INTERNALS].active);\n  }\n\n  get value() {\n    return this[TARGET_INTERNALS].value;\n  }\n\n  get type() {\n    return this[TARGET_INTERNALS].type || typeof this[TARGET_INTERNALS].value;\n  }\n\n  get id() {\n    return this[TARGET_INTERNALS].id;\n  }\n\n  get poolId() {\n    return this[TARGET_INTERNALS].poolId;\n  }\n\n  toJSON = () => ({\n    [TARGET_DATA]: {\n      id: this.id,\n      type: this.type,\n      poolId: this.poolId,\n    },\n  });\n\n  destroy() {\n    const internals = this[TARGET_INTERNALS];\n    const { id, pool } = internals;\n\n    if (!internals.active) {\n      return;\n    }\n\n    internals.active = false;\n    pool.remove(id);\n\n    Object.keys(internals).map((name) => delete internals[name]);\n  }\n}\n\nexport const createResource = (pool, value, resourceType, id = null) => (\n  new Resource(pool, value, resourceType, id || getId())\n);\n\nexport default Resource;\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/Resource.js","import TARGET_INTERNALS from './TARGET_INTERNALS';\nimport TARGET_DATA from './TARGET_DATA';\nimport isResource from './isResource';\n\nexport default (object) => {\n  if (typeof object[TARGET_INTERNALS] === 'object') {\n    return object[TARGET_INTERNALS].poolId;\n  } else if (isResource(object)) {\n    return object[TARGET_DATA].poolId;\n  }\n  return null;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getResourcePoolId.js","import TARGET_INTERNALS from './TARGET_INTERNALS';\nimport TARGET_DATA from './TARGET_DATA';\nimport isResource from './isResource';\n\nexport default (object) => {\n  // if (object instanceof Resource || object instanceof Target) {\n  if (typeof object[TARGET_INTERNALS] === 'object') {\n    return object[TARGET_INTERNALS].id;\n  } else if (isResource(object)) {\n    return object[TARGET_DATA].id;\n  }\n\n  return null;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getResourceId.js","import {\n  createDescriptor,\n  descriptorGeneratorFactory,\n} from '../Descriptor';\n\nexport const ProxyCommandNames = Object.freeze({\n  GET: 'get',\n  SET: 'set',\n  APPLY: 'apply',\n  DELETE_PROPERTY: 'deleteProperty',\n});\n\nexport const ProxyCommandFields = Object.freeze({\n  get: Symbol('proxy.commands::get'),\n  set: Symbol('proxy.commands::set'),\n  apply: Symbol('proxy.commands::apply'),\n  deleteProperty: Symbol('proxy.commands::deleteProperty'),\n});\n\nclass ProxyCommandsClass {\n  constructor() {\n    Object.freeze(this);\n  }\n\n  names = ProxyCommandNames;\n  fields = ProxyCommandFields;\n\n  get list() {\n    return [\n      ProxyCommandNames.GET,\n      ProxyCommandNames.SET,\n      ProxyCommandNames.APPLY,\n      ProxyCommandNames.DELETE_PROPERTY,\n    ];\n  }\n\n  get required() {\n    return [\n      ProxyCommandNames.GET,\n      ProxyCommandNames.SET,\n      ProxyCommandNames.APPLY,\n    ];\n  }\n\n  createGETDescriptor = descriptorGeneratorFactory(\n    ProxyCommandNames.GET,\n    ProxyCommandFields.get,\n  );\n  createSETDescriptor = descriptorGeneratorFactory(\n    ProxyCommandNames.SET,\n    ProxyCommandFields.set,\n  );\n  createAPPLYDescriptor = descriptorGeneratorFactory(\n    ProxyCommandNames.APPLY,\n    ProxyCommandFields.apply,\n  );\n}\n\nconst ProxyCommands = new ProxyCommandsClass();\n\nexport const createDescriptors = (\n  handlers,\n  target = {},\n  isTemporary = undefined,\n  resourceType = null,\n  cacheable = true,\n  virtual = false,\n) => {\n  const args = [isTemporary, resourceType, cacheable, virtual];\n  ProxyCommands.list.forEach((name) => {\n    const handler = handlers[name];\n    const field = ProxyCommandFields[name];\n\n    if (handler instanceof Function) {\n      let descriptor = createDescriptor(name, handler, field, ...args);\n      descriptor = Object.freeze(descriptor);\n\n      if (target instanceof Array) {\n        target.push(descriptor);\n      } else if (target) {\n        target[field] = descriptor;\n      }\n    }\n  });\n\n  return target;\n};\n\nexport default ProxyCommands;\n\n\n\n// WEBPACK FOOTER //\n// ./source/command/internal/ProxyCommands.js","import TARGET_INTERNALS from './TARGET_INTERNALS';\nimport TARGET_DATA from './TARGET_DATA';\nimport isResource from './isResource';\n\nconst getResourceType = (object) => {\n  if (typeof object[TARGET_INTERNALS] === 'object') {\n    return object[TARGET_INTERNALS].type;\n  } else if (isResource(object)) {\n    return object[TARGET_DATA].type;\n  }\n\n  return null;\n};\n\nexport default getResourceType;\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getResourceType.js","export default Object.freeze({\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n  DESTROYED: 'destroyed',\n});\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/TargetStatus.js","export default (type, args, targetId) => {\n  const result = {\n    type,\n    cmd: args[0], // cmd,\n    value: args[1], // value,\n    target: targetId,\n  };\n\n  // FIXME why? probably to make it not enumerable?.. fuck, dunno\n  Object.defineProperty(result, 'args', {\n    value: args,\n  });\n\n  return result;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/createRequestPackage.js","import TARGET_DATA from './TARGET_DATA';\nimport getRawResource from './getRawResource';\n\nexport default (object) => {\n  const data = getRawResource(object);\n  return data ? data[TARGET_DATA] : null;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getResourceData.js","const base = `DA/${Date.now()}/`;\nlet index = 0;\nexport default () => `${base}${++index}/${Date.now()}`;\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getId.js","import Descriptor, { addDescriptorTo } from '../Descriptor';\n\nexport const RequestCommandNames = Object.freeze({\n  DESTROY: '::destroy.resource',\n});\n\nexport const RequestCommandFields = Object.freeze({\n  DESTROY: Symbol('::destroy.resource'),\n});\n\n/**\n * Destroy is unique type that exists for every Target\n * and does not have a method on its instances. This type will\n * be send each time Target.destroy() is applied to\n * Target in stance.\n */\nclass RequestCommands {\n  constructor() {\n    Object.freeze(this);\n  }\n\n  names = RequestCommandNames;\n  fields = RequestCommandFields;\n\n  createDESTROYDescriptor = (handler, target) => {\n    const descriptor = new Descriptor(\n      RequestCommandNames.DESTROY,\n      handler,\n      RequestCommandFields.DESTROY,\n    );\n    descriptor.cacheable = false;\n    descriptor.virtual = true;\n    addDescriptorTo(descriptor, target);\n    return Object.freeze(descriptor);\n  };\n\n}\n\nexport default new RequestCommands();\n\n\n\n// WEBPACK FOOTER //\n// ./source/command/internal/RequestCommands.js","/**\n * Reserved words\n */\nexport default Object.freeze({\n  /**\n   * Contains property names that cannot be used for Descriptor's\n   */\n  names: Object.freeze({\n    // INFO Exposed Promise method, cannot be overwritten by type\n    then: true,\n    // INFO Exposed Promise method, cannot be overwritten by type\n    catch: true,\n  }),\n});\n\n\n\n// WEBPACK FOOTER //\n// ./source/command/Reserved.js","import { createDecorator } from './Decorator';\nimport { createRequestTarget } from './Target';\n\nclass Factory {\n  /*\n   function DummyCacheImpl() {\n   this.get = function(name, pack) {\n\n   };\n   this.set = function(name, pack, request) {\n\n   };\n   }\n   */\n  constructor(handlers, cacheImpl = null, noInit = false) {\n    if (noInit) {\n      return;\n    }\n\n    this.cache = cacheImpl;\n    this.handlers = handlers;\n    this.decorator = createDecorator(this, handlers);\n  }\n\n  create(promise) {\n    const request = createRequestTarget(promise, this.handlers);\n    if (this.handlers.available) {\n      this.decorator.apply(request);\n    }\n    return request;\n  }\n\n  getCached(name, pack) {\n    return this.cache && this.cache.get(name, pack);\n  }\n\n  createCached(promise, name, pack) {\n    let request = null;\n    if (this.cache) {\n      request = this.create(promise);\n      this.cache.set(name, pack, request);\n    }\n    return request;\n  }\n\n}\n\nexport const createRequestFactory = (handlers, cacheImpl) => (\n  new Factory(handlers, cacheImpl)\n);\n\nexport default Factory;\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/Factory.js","import EventDispatcher from 'event-dispatcher';\nimport getResourcePoolId from '../utils/getResourcePoolId';\nimport getResourceId from '../utils/getResourceId';\nimport isResource from '../utils/isResource';\nimport isResourceConvertible from '../utils/isResourceConvertible';\nimport getRawResource from '../utils/getRawResource';\nimport { isPending } from '../request/Target';\n\nexport const ConverterEvents = Object.freeze({\n  RESOURCE_CREATED: 'resourceCreated',\n  RESOURCE_CONVERTED: 'resourceConverted',\n});\n\n/**\n * Resource converter contains bunch of methods to lookup for resources\n * and registering them, converting them into RAWResource or into\n * Targets, depending on their origin.\n * Before sending data, bundled resources should be registered in ResourcePool\n * and then converted to RAWResource objects.\n * After data received, its RAWResources should be converted to Targets\n * for not resolved resources or to resource target values otherwise.\n * Resource can be resolved by its `id` and `poolId`, if Converter\n * can find ResourcePool with id from poolId, it will try to get target\n * resource value and replace with it RAWResource object.\n * If ResourcePool not found, Converter assumes that resource come from\n * other origin/environment and creates Target object that can be target\n * object for commands.\n * Converter while handling data does not look deeply, so its developer\n * responsibility to convert deeply nested resource targets.\n */\nclass Converter extends EventDispatcher {\n  constructor(factory, registry, pool, handlers = null) {\n    super();\n    this.factory = factory;\n    this.pool = pool;\n    this.registry = registry;\n\n    if (handlers) {\n      handlers.setConverter(this);\n    }\n  }\n\n  resourceToObject(data) {\n    let result;\n\n    if (isResourceConvertible(data)) {\n      result = getRawResource(data, this.pool);\n    } else if (typeof data.toJSON === 'function') {\n      result = data.toJSON();\n    } else {\n      return data;\n    }\n\n    if (this.hasEventListener(ConverterEvents.RESOURCE_CONVERTED)) {\n      this.dispatchEvent(ConverterEvents.RESOURCE_CONVERTED, {\n        data,\n        result,\n      });\n    }\n\n    return result;\n  }\n\n  /**\n   * @method DataAccessInterface.ResourceConverter#objectToResource\n   * @param {*} data\n   * @returns {*}\n   * @private\n   */\n  objectToResource(data) {\n    let result = data;\n\n    if (isResource(data)) {\n      const poolId = getResourcePoolId(data);\n\n      if (this.registry.isRegistered(poolId)) { // target object is stored in current pool\n        const target = this.registry.get(poolId).get(getResourceId(data));\n\n        if (target) {\n          result = target.value;\n        }\n\n      } else { // target object has another origin, should be wrapped\n        result = this.factory.create(Promise.resolve(data));\n      }\n    }\n\n    if (result !== data && this.hasEventListener(ConverterEvents.RESOURCE_CREATED)) {\n      this.dispatchEvent(ConverterEvents.RESOURCE_CREATED, {\n        data,\n        result,\n      });\n    }\n\n    return result;\n  }\n\n  /**\n   * @method DataAccessInterface.ResourceConverter#lookupArray\n   * @param list\n   * @param linkConvertHandler\n   * @returns {Array}\n   * @private\n   */\n  lookupArray(list, linkConvertHandler) {\n    return list.map((item) => linkConvertHandler.call(this, item));\n  }\n\n  /**\n   * @method DataAccessInterface.ResourceConverter#lookupObject\n   * @param {*} data\n   * @param {Function} linkConvertHandler\n   * @returns {*}\n   * @private\n   */\n  lookupObject(data, linkConvertHandler) {\n    return Object.getOwnPropertyNames(data)\n      .reduce((result, name) => {\n        if (Object.prototype.hasOwnProperty.call(data, name)) {\n          result[name] = linkConvertHandler.call(this, data[name]);\n        }\n\n        return result;\n      }, {});\n  }\n\n  /**\n   * @method DataAccessInterface.ResourceConverter#toJSON\n   * @param {*} data\n   * @returns {*}\n   * @private\n   */\n  toJSON(data) {\n    let result = data;\n\n    if (data !== undefined && data !== null) {\n      if (isResourceConvertible(data)) {\n        // if data is Target, Resource, IConvertible, Function or RAW resource data\n        result = this.resourceToObject(data);\n      } else if (data instanceof Array) {\n        // if data is Array of values, check its\n        result = this.lookupArray(data, this.resourceToObject);\n      } else if (data.constructor === Object) {\n        // only Object instances can be looked up, other object types must be converted by hand\n        result = this.lookupObject(data, this.resourceToObject);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * @method DataAccessInterface.ResourceConverter#parse\n   * @param {*} data\n   * @returns {*}\n   * @private\n   */\n  parse(data) {\n    let result = data;\n\n    if (data !== undefined && data !== null) {\n      if (isResource(data)) { // if data is RAW resource data\n        result = this.objectToResource(data);\n      } else if (data instanceof Array) { // if data is Array of values, check its\n        result = this.lookupArray(data, this.objectToResource);\n      } else if (data.constructor === Object) {\n        result = this.lookupObject(data, this.objectToResource);\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * @method DataAccessInterface.ResourceConverter#lookupForPending\n   * @param {*} data\n   * @returns {Array}\n   */\n  lookupForPending(data) {\n    const result = [];\n\n    const add = (value) => {\n      if (isPending(value)) {\n        result.push(value);\n      }\n      return value;\n    };\n\n    if (typeof data === 'object' && data !== null) {\n      if (isPending(data)) {\n        result.push(data);\n      } else if (data instanceof Array) {\n        this.lookupArray(data, add);\n      } else if (data.constructor === Object) {\n        this.lookupObject(data, add);\n      }\n    }\n    return result;\n  }\n\n  static events = ConverterEvents;\n}\n\n/**\n * @param {RequestFactory} factory\n * @param {DataAccessInterface.ResourcePoolRegistry} registry\n * @param {DataAccessInterface.ResourcePool} pool\n * @param {Handlers} handlers\n * @returns {ResourceConverter}\n */\nexport const createResourceConverter = (factory, registry, pool, handlers) => (\n  new Converter(factory, registry, pool, handlers)\n);\n\nexport default Converter;\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/Converter.js","import isResource from './isResource';\nimport IConvertible from './IConvertible';\n\nexport default (data) => (\n  isResource(data)\n  || typeof data === 'function'\n  || data instanceof IConvertible\n);\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/isResourceConvertible.js","import EventDispatcher from 'event-dispatcher';\nimport ResourcePool, {\n  createResourcePool,\n  ResourcePoolEvents,\n  defaultResourcePool,\n} from './ResourcePool';\n\nexport const PoolRegistryEvents = Object.freeze({\n  RESOURCE_POOL_CREATED: 'resourcePoolCreated',\n  RESOURCE_POOL_REGISTERED: 'resourcePoolRegistered',\n  RESOURCE_POOL_REMOVED: 'resourcePoolRemoved',\n});\n\nconst POOLS_FIELD = Symbol('resource.pool.registry::pools');\n\n/**\n * @classdesc Collection of ResourcePool instances. Allows lookup for ResourcePool by its Id.\n * When ResourcePool is registered in PoolRegistry, it subscribes to\n * ResourcePool POOL_DESTROYED event and removes pool from registry after its destroyed.\n */\nclass PoolRegistry extends EventDispatcher {\n  constructor() {\n    super();\n    this[POOLS_FIELD] = {};\n\n    // every registry should keep default pool, so you can have access from anywhere\n    this.register(defaultResourcePool);\n  }\n\n  handlePoolDestroyed = (event) => {\n    this.remove(event.data);\n  }\n\n  /**\n   * Create and register ResourcePool\n   * @returns {DataAccessInterface.ResourcePool} New ResourcePool instance\n   */\n  createPool() {\n    const pool = createResourcePool();\n    if (this.hasEventListener(PoolRegistryEvents.RESOURCE_POOL_CREATED)) {\n      this.dispatchEvent(PoolRegistryEvents.RESOURCE_POOL_CREATED, pool);\n    }\n    this.register(pool);\n    return pool;\n  }\n\n  /**\n   * Register ResourcePool instance.\n   * @param pool {DataAccessInterface.ResourcePool} ResourcePool instance to be registered\n   */\n  register(pool) {\n    if (Object.prototype.hasOwnProperty.call(this[POOLS_FIELD], pool.id)) return;\n    this[POOLS_FIELD][pool.id] = pool;\n    pool.addEventListener(ResourcePoolEvents.POOL_DESTROYED, this.handlePoolDestroyed);\n    if (this.hasEventListener(PoolRegistryEvents.RESOURCE_POOL_REGISTERED)) {\n      this.dispatchEvent(PoolRegistryEvents.RESOURCE_POOL_REGISTERED, pool);\n    }\n  }\n\n  /**\n   * Retrieve ResourcePool instance from registry by its Id.\n   * @param poolId {String} ResourcePool instance Id\n   * @returns {DataAccessInterface.ResourcePool|null}\n   */\n  get(poolId) {\n    return this[POOLS_FIELD][poolId] || null;\n  }\n\n  /**\n   * Check if ResourcePool registered in this registry instance.\n   * @param pool {DataAccessInterface.ResourcePool|String} ResourcePool instance or its Id.\n   * @returns {Boolean}\n   */\n  isRegistered(pool) {\n    return Object.prototype.hasOwnProperty.call(\n      this[POOLS_FIELD],\n      pool instanceof ResourcePool ? pool.id : String(pool),\n    );\n  }\n\n  /**\n   * Remove ResourcePool from current registry instance.\n   * @param pool {DataAccessInterface.ResourcePool|String} ResourcePool instance or its Id.\n   * @returns {Boolean}\n   */\n  remove(pool) {\n    let result = false;\n    pool = pool instanceof ResourcePool ? pool : this.get(pool);\n    if (pool) {\n      pool.removeEventListener(ResourcePoolEvents.POOL_DESTROYED, this.handlePoolDestroyed);\n      result = delete this[POOLS_FIELD][pool.id];\n    }\n    if (this.hasEventListener(PoolRegistryEvents.RESOURCE_POOL_REMOVED)) {\n      this.dispatchEvent(PoolRegistryEvents.RESOURCE_POOL_REMOVED, pool);\n    }\n    return result;\n  }\n\n  static events = PoolRegistryEvents;\n}\n\nexport const createPoolRegistry = () => new PoolRegistry();\n\nexport default PoolRegistry;\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/PoolRegistry.js","import DataAccessInterface, { create, dummy } from './DataAccessInterface';\nimport Deferred, { createDeferred } from './utils/Deferred';\nimport Descriptor from './command/Descriptor';\nimport Reserved from './command/Reserved';\nimport RequestCommands from './command/internal/RequestCommands';\nimport ProxyCommands from './command/internal/ProxyCommands';\nimport Target from './request/Target';\nimport ResourcePool from './resource/ResourcePool';\nimport PoolRegistry from './resource/PoolRegistry';\nimport Converter from './resource/Converter';\nimport IConvertible from './utils/IConvertible';\nimport isResourceConvertible from './utils/isResourceConvertible';\nimport getRawResource from './utils/getRawResource';\nimport getResourceData from './utils/getResourceData';\nimport getResourceId from './utils/getResourceId';\nimport getResourcePoolId from './utils/getResourcePoolId';\nimport getResourceType from './utils/getResourceType';\nimport isResource from './utils/isResource';\n\nexport default DataAccessInterface;\n\nexport {\n  create,\n  dummy,\n  createDeferred,\n  Deferred,\n  Descriptor,\n  Reserved,\n  RequestCommands,\n  ProxyCommands,\n  Target,\n  ResourcePool,\n  PoolRegistry,\n  Converter,\n  IConvertible,\n  isResourceConvertible,\n  getRawResource,\n  getResourceData,\n  getResourceId,\n  getResourcePoolId,\n  getResourceType,\n  isResource,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./source/index.js","/**\n * @exports DataAccessInterface\n */\n\nimport areProxiesAvailable from './utils/areProxiesAvailable';\nimport isResource from './utils/isResource';\nimport getResourcePoolId from './utils/getResourcePoolId';\nimport getResourceId from './utils/getResourceId';\nimport { createHandlers } from './request/Handlers';\nimport { createProxyFactory } from './request/ProxyFactory';\nimport { createRequestFactory } from './request/Factory';\nimport { defaultResourcePool, ResourcePoolEvents } from './resource/ResourcePool';\nimport { createResourceConverter } from './resource/Converter';\nimport { createPoolRegistry } from './resource/PoolRegistry';\n\nclass DataAccessInterface {\n\n  /**\n   * @class DataAccessInterface\n   * @classdesc Facade of Deferred Data Access library, it holds all\n   * of public API -- objects like ResourcePool and methods to work\n   * with resources.\n   * @param {Descriptor[]|Object.<string, Function|Descriptor>} descriptors\n   * @param {boolean} [proxyEnabled=false]\n   * @param {ResourcePoolRegistry} [poolRegistry]\n   * @param {ResourcePool} [pool]\n   * @param {ICacheImpl} [cacheImpl]\n   */\n  constructor(\n    descriptors,\n    proxyEnabled = true,\n    poolRegistry = null,\n    pool = null,\n    cacheImpl = null,\n  ) {\n    this.poolRegistry = poolRegistry;\n    this.pool = pool;\n    this.cache = cacheImpl;\n    this.initialize(descriptors, proxyEnabled);\n  }\n\n  initialize(descriptors, proxyEnabled) {\n    if (proxyEnabled && !areProxiesAvailable()) {\n      throw new Error('Proxies are not available in this environment');\n    }\n\n    this.handlers = createHandlers(proxyEnabled);\n    this.resourceConverter = createResourceConverter(\n      this.factory,\n      this.poolRegistry,\n      this.pool,\n      this.handlers,\n    );\n\n    if (proxyEnabled) {\n      this.factory = createProxyFactory(this.handlers, this.cache);\n    } else {\n      this.factory = createRequestFactory(this.handlers, this.cache);\n    }\n\n    if (!this.poolRegistry) {\n      this.poolRegistry = createPoolRegistry();\n    }\n\n    if (this.pool) {\n      this.poolRegistry.register(this.pool);\n    } else if (this.pool !== undefined) {\n      this.pool = this.poolRegistry.createPool();\n    } else {\n      this.pool = defaultResourcePool;\n    }\n\n    const poolDestroyedHandler = () => {\n      this.pool.removeEventListener(ResourcePoolEvents.POOL_DESTROYED, poolDestroyedHandler);\n      this.pool = this.poolRegistry.createPool();\n      this.pool.addEventListener(ResourcePoolEvents.POOL_DESTROYED, poolDestroyedHandler);\n    };\n\n    this.handlers.setHandlers(descriptors);\n    this.pool.addEventListener(ResourcePoolEvents.POOL_DESTROYED, poolDestroyedHandler);\n  }\n\n  get proxyEnabled() {\n    return this.handlers.proxyEnabled;\n  }\n\n  parse(data) {\n    return this.resourceConverter.parse(data);\n  }\n\n  toJSON(data) {\n    return this.resourceConverter.toJSON(data);\n  }\n\n  isOwnResource(resource) {\n    /**\n     * @type {DataAccessInterface.ResourcePool}\n     */\n    let pool;\n    if (isResource(resource)) {\n      pool = this.poolRegistry.get(getResourcePoolId(resource));\n      return pool && pool.has(getResourceId(resource));\n    }\n    return false;\n  }\n}\n\nexport const create = (handlers, proxyEnabled, poolRegistry, pool, cacheImpl) =>\n  new DataAccessInterface(handlers, proxyEnabled, poolRegistry, pool, cacheImpl);\n\nexport const dummy = (handlers, proxyEnabled, poolRegistry, pool, cacheImpl) => {\n  const api = new DataAccessInterface(handlers, proxyEnabled, poolRegistry, pool, cacheImpl);\n  return api.parse(handlers());\n};\n\nexport default DataAccessInterface;\n\n\n\n\n// WEBPACK FOOTER //\n// ./source/DataAccessInterface.js","export default () => (typeof Proxy === 'function');\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/areProxiesAvailable.js","import TargetStatus from '../../utils/TargetStatus';\nimport { createDeferred } from '../../utils/Deferred';\nimport TARGET_DATA from '../../utils/TARGET_DATA';\nimport createRequestPackage from '../../utils/createRequestPackage';\nimport isResource from '../../utils/isResource';\nimport getResourceData from '../../utils/getResourceData';\nimport Queue from './Queue';\nimport Children from './Children';\nimport {\n  RequestCommandFields,\n  RequestCommandNames,\n} from '../../command//internal/RequestCommands';\n\nclass Internals {\n  constructor(requestTarget, promise, requestHandlers) {\n    this.requestHandlers = requestHandlers;\n    this.requestTarget = requestTarget;\n    this.link = {};\n    // INFO this should be not initialized i.e. keep it undefined, this will be checked later\n    this.temporary = undefined;\n    this.hadChildPromises = false;\n    this.status = TargetStatus.PENDING;\n    this.queue = new Queue();\n    class Abc extends Array {}\n    console.log(' --- ', Abc, new Abc());\n    this.children = new Children();\n    this.deferred = createDeferred();\n    this.promise = this.deferred.promise;\n    // FIXME why we have to use own deferred object? use passed promise\n    // chain of events should not be altered\n    promise\n      .then(this.handlePromiseResolve)\n      .catch(this.handlePromiseReject);\n  }\n\n  handlePromiseResolve = (value) => {\n    this.status = TargetStatus.RESOLVED;\n    if (isResource(value)) {\n      this.link = getResourceData(value);\n      /*\n       INFO Sending \"this\" as result of resolve() handler, causes infinite\n       loop of this.then(), so I've used wrapper object\n      */\n      // FIXME Check if Proxy wrapper will work with promise result, probably not\n      value = { target: this.requestTarget };\n      this.sendQueue();\n      /*\n      In theory, at time of these lines executing, \"temporary\" property should be\n      already set via _commandHandler() set from Decorator\n       */\n      if (this.temporary) {\n        this.destroy();\n      }\n    } else { // else { value must be passed as is }\n      this.rejectQueue('Target of the call is not a resource and call cannot be sent.');\n    }\n    this.deferred.resolve(value);\n    delete this.deferred;\n  };\n\n  handlePromiseReject = (value) => {\n    this.status = TargetStatus.REJECTED;\n    this.rejectQueue('Target of the call was rejected and call cannot be sent.');\n    this.deferred.reject(value);\n    delete this.deferred;\n  };\n\n  get poolId() {\n    return this.link.poolId || null;\n  }\n\n  get type() {\n    return this.link.type || null;\n  }\n\n  get id() {\n    return this.link.id || null;\n  }\n\n  sendQueue() {\n    this.queue.send(this.link.id, this.handleRequest);\n    console.log('queue sent');\n    this.queue = null;\n  }\n\n  rejectQueue(message = null) {\n    this.queue.reject(new Error(message || 'This request was rejected before sending.'));\n    this.queue = null;\n  }\n\n  sendRequest(name, pack, deferred = null, child = null) {\n    let promise = null;\n\n    if (this.requestHandlers.hasHandler(name)) {\n      promise = this.applyRequest(name, pack, deferred || createDeferred(), child);\n    } else {\n      throw new Error(`Request handler for \"${name}\" is not registered.`);\n    }\n\n    if (child) {\n      this.registerChild(child);\n    }\n\n    return promise;\n  }\n\n  addToQueue(name, pack, deferred = null, child = null) {\n    if (!this.queue) {\n      throw new Error('Request does not contain queue, probably too little too late.');\n    }\n\n    this.queue.add(name, pack, deferred, child);\n  }\n\n  applyRequest(name, pack, deferred = null, child = null) {\n    let promise;\n\n    // FIXME can deferred be null at this point?\n    if (deferred) {\n      promise = deferred.promise;\n    }\n\n    switch (this.status) {\n      case TargetStatus.PENDING:\n        this.addToQueue(name, pack, deferred, child);\n        break;\n      case TargetStatus.REJECTED:\n        promise = Promise.reject(new Error('Target object was rejected and cannot be used for calls.'));\n        break;\n      case TargetStatus.DESTROYED:\n        promise = Promise.reject(new Error('Target object was destroyed and cannot be used for calls.'));\n        break;\n      case TargetStatus.RESOLVED:\n        this.handleRequest(name, pack, deferred, child);\n        break;\n      default:\n        break;\n    }\n\n    return promise;\n  }\n\n  handleRequest(name, pack, deferred, child) {\n    this.requestHandlers.handle(this.requestTarget, name, pack, deferred, child);\n  }\n\n  registerChild(child) {\n    this.children.register(child);\n  }\n\n  isActive() {\n    return this.status === TargetStatus.PENDING || this.status === TargetStatus.RESOLVED;\n  }\n\n  canBeDestroyed() {\n    return this.status === TargetStatus.RESOLVED || this.status === TargetStatus.REJECTED;\n  }\n\n  destroy() {\n    let promise = null;\n    if (this.canBeDestroyed()) {\n      // INFO I should not clear children list, since they are pending and requests already sent.\n      if (this.status === TargetStatus.RESOLVED) {\n        promise = this.sendRequest(\n          RequestCommandFields.DESTROY,\n          createRequestPackage(\n            RequestCommandNames.DESTROY,\n            [null, null],\n            this.id,\n          ),\n        );\n      } else {\n        promise = Promise.resolve();\n      }\n      this.status = TargetStatus.DESTROYED;\n    } else {\n      promise = Promise.reject(new Error('Invalid or already destroyed target.'));\n    }\n    return promise;\n  }\n\n  then(handleResolve, handleReject) {\n    const child = this.promise.then(handleResolve, handleReject);\n    this.hadChildPromises = true;\n    return child;\n  }\n\n  catch(handleReject) {\n    const child = this.promise.catch(handleReject);\n    this.hadChildPromises = true;\n    return child;\n  }\n\n  toJSON() {\n    return {\n      [TARGET_DATA]: {\n        id: this.link.id,\n        type: this.link.type,\n        poolId: this.link.poolId,\n      },\n    };\n  }\n}\n\nexport default Internals;\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/Internals.js","module.exports = function(module) {\n\tif(!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif(!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 29\n// module chunks = 0","class Queue extends Array {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  add(name, pack, deferred, child) {\r\n    this.push({\r\n      name,\r\n      pack,\r\n      deferred,\r\n      child,\r\n    });\r\n  }\r\n\r\n  send(id, callback) {\r\n    this.forEach(({\r\n      name,\r\n      pack,\r\n      deferred,\r\n      child,\r\n    }) => {\r\n      pack.target = id;\r\n      callback(name, pack, deferred, child);\r\n    });\r\n  }\r\n\r\n  reject(message) {\r\n    const error = new Error(message || 'This request was rejected before sending.');\r\n    this.forEach(({ deferred }) => deferred.reject(error));\r\n  }\r\n}\r\n\r\nexport default Queue;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/Queue.js","import { getRawPromise } from '../Target';\r\n\r\nclass Children extends Array {\r\n  register(child) {\r\n    const handler = () => {\r\n      const index = this.indexOf(child);\r\n      if (index >= 0) {\r\n        this.splice(index, 1);\r\n      }\r\n    };\r\n\r\n    getRawPromise(child).then(handler, handler);\r\n    this.push(child);\r\n  }\r\n}\r\n\r\nexport default Children;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/Children.js","import Descriptor from '../command/Descriptor';\nimport ProxyCommands, { ProxyCommandFields } from '../command/internal/ProxyCommands';\nimport filterHandlers from '../utils/filterRequestHandlers';\nimport getResourceType from '../utils/getResourceType';\n\n/**\n * Key for default type for handlers that will be applied to any\n * resource that does not have type-specific handlers registered\n * @type {string}\n */\nconst DEFAULT_KEY = '';\n\nexport const areProxyHandlersAvailable = (handlers, throwError) => {\n  let result = true;\n  ProxyCommands.required.forEach((name) => {\n    if (!(ProxyCommandFields[name] in handlers)) {\n      result = false;\n      if (throwError) {\n        throw new Error(`For Proxy interface, handler \"${name}\" should be set.`);\n      }\n    }\n  });\n\n  return result;\n};\n\nexport const HandlersEvents = Object.freeze({\n  HANDLERS_UPDATED: 'handlersUpdated',\n});\n\nclass Handlers {\n  constructor(proxyEnabled = false) {\n    // named collection of Descriptor lists that may be applied\n    this.properties = {};\n    this.descriptors = {};\n    this.proxyEnabled = Boolean(proxyEnabled);\n    this.converter = null;\n  }\n\n  get available() {\n    const nonEmptyListIndex = Object.getOwnPropertyNames(this.properties).findIndex((name) => {\n      const list = this.properties[name];\n      return Boolean(list && list.length);\n    });\n    return nonEmptyListIndex >= 0;\n  }\n\n  setConverter(converter) {\n    this.converter = converter;\n  }\n\n  setHandlers(handlers) {\n    this.setHandlersByType(DEFAULT_KEY, handlers);\n\n    Object.keys(handlers).forEach((name) => {\n      const type = handlers[name];\n      if (type && (type.constructor === Object || type instanceof Array)) {\n        this.setHandlersByType(name, type);\n      }\n    });\n\n    if (this.proxyEnabled) {\n      areProxyHandlersAvailable(this.descriptors[DEFAULT_KEY], true);\n    }\n  }\n\n  setHandlersByType(type, handlers) {\n    const descrs = {};\n    const props = [];\n    filterHandlers(handlers, descrs, props);\n    this.descriptors[type] = descrs;\n    this.properties[type] = props;\n  }\n\n  hasHandler(name, type) {\n    return (\n      this.descriptors[type]\n        && Object.prototype.hasOwnProperty.call(this.descriptors[type], name)\n    )\n      || (\n        this.descriptors[DEFAULT_KEY]\n        && Object.prototype.hasOwnProperty.call(this.descriptors[DEFAULT_KEY], name)\n      );\n  }\n\n  getPropertyHandlers(type) {\n    let list = this.properties[type];\n    if (!list) {\n      type = DEFAULT_KEY;\n      list = this.properties[type];\n    }\n\n    return list ? [...list] : [];\n  }\n\n  getPropertyNames(type) {\n    return this.getPropertyNames(type)\n      .map((descriptor) => descriptor.name);\n  }\n\n  getHandlers(type) {\n    if (this.descriptors[type]) {\n      return {\n        ...this.descriptors[type],\n        ...this.descriptors[DEFAULT_KEY],\n      };\n    }\n\n    return {\n      ...this.descriptors[DEFAULT_KEY],\n    };\n  }\n\n  getHandler(name, type) {\n    const handler = (\n      this.descriptors[type]\n        && this.descriptors[type][name]\n    )\n      || (\n        this.descriptors[DEFAULT_KEY]\n        && this.descriptors[DEFAULT_KEY][name]\n      );\n\n    return handler || null;\n  }\n\n  handle(parentRequest, name, pack, deferred, resultRequest) {\n    const list = this.converter ? this.converter.lookupForPending(pack.value) : null;\n    if (list && list.length) {\n      // FIXME Need to test on all platforms: In other browsers this might not work\n      // because may need list of Promise objects, not Targets\n      Promise.all(list).then(() => {\n        this.handleImmediately(parentRequest, name, pack, deferred, resultRequest);\n      });\n    } else {\n      this.handleImmediately(parentRequest, name, pack, deferred, resultRequest);\n    }\n  }\n\n  handleImmediately(parentRequest, name, data, deferred, resultRequest) {\n    /**\n     * @type {DataAccessInterface.Descriptor|null}\n     */\n    const handler = this.getHandler(name, getResourceType(parentRequest));\n    if (handler instanceof Descriptor) {\n      // INFO result should be applied to deferred.resolve() or deferred.reject()\n      handler.handler(parentRequest, data, deferred, resultRequest);\n    } else {\n      throw new Error(`Command descriptor for \"${name}\" was not found.`);\n    }\n  }\n\n  static events = HandlersEvents;\n}\n\nexport const createHandlers = (proxyEnabled) => new Handlers(proxyEnabled);\n\nexport default Handlers;\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/Handlers.js","import Descriptor, { createDescriptor } from '../command/Descriptor';\nimport Reserved from '../command/Reserved';\n\n\n/**\n * Checks for Descriptor uniqueness and reserved words usage.\n * @param {DataAccessInterface.Descriptor} descriptor\n * @param {Object.<string, DataAccessInterface.Descriptor>} descriptors\n * @param {Array.<number, DataAccessInterface.Descriptor>} properties\n * @private\n */\nconst applyDescriptor = (descriptor, descriptors, properties) => {\n  const { name } = descriptor;\n  if (name in Reserved.names) {\n    throw new Error(`Name \"${name}\" is reserved and cannot be used in descriptor.`);\n  }\n  if (\n    Object.prototype.hasOwnProperty.call(descriptors, name)\n    && descriptors[name] instanceof Descriptor\n  ) {\n    throw new Error(`Field names should be unique, \"${String(name)}\" field has duplicates.`);\n  }\n  descriptors[name] = descriptor;\n  if (!descriptor.virtual) {\n    properties.push(descriptor);\n  }\n};\n\n/**\n * @param {Array} handlers\n * @param {Object} descriptors\n * @private\n */\nconst filterArray = (handlers, descriptors, properties) => {\n  handlers.forEach((value) => {\n    if (value instanceof Descriptor) {\n      applyDescriptor(value, descriptors, properties);\n    }\n  });\n};\n\n/**\n * @param {Object} handlers\n * @param {Object.<string, DataAccessInterface.Descriptor>} descriptors\n * @param {Array.<number, DataAccessInterface.Descriptor>} properties\n * @private\n */\nconst filterHash = (handlers, descriptors, properties) => {\n  if (!handlers) return;\n  ([\n    ...Object.getOwnPropertyNames(handlers),\n    ...Object.getOwnPropertySymbols(handlers),\n  ]).forEach((name) => {\n    let value = handlers[name];\n    if (typeof value === 'function') {\n      value = createDescriptor(name, value);\n    }\n    if (value instanceof Descriptor) {\n      applyDescriptor(value, descriptors, properties);\n    }\n  });\n};\n\n/**\n * @method Handlers.filterHandlers\n * @param {Array|Object} handlers\n * @param {Object.<string, DataAccessInterface.Descriptor>} descriptors\n * @param {Array.<number, DataAccessInterface.Descriptor>} properties\n */\nexport default (handlers, descriptors, properties) => {\n  if (handlers instanceof Array) {\n    filterArray(handlers, descriptors, properties);\n  } else {\n    filterHash(handlers, descriptors, properties);\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/filterRequestHandlers.js","import Factory, { createRequestFactory } from './Factory';\nimport { ProxyCommandFields } from '../command/internal/ProxyCommands';\n\nconst EXCLUSIONS = {\n  /*\n   INFO arguments and caller were included because they are required function properties\n   */\n  arguments: true,\n  caller: true,\n  prototype: true,\n};\n\nconst toString = () => `[RequestTargetProxy ${String(this.target)}]`;\n\nconst createFunctionWrapper = (target) => {\n  // INFO Target must be a function so I could use Proxy.call() interceptor.\n  function requestTargetProxy() {\n  }\n\n  requestTargetProxy.target = target;\n  requestTargetProxy.toString = toString;\n\n  return requestTargetProxy;\n};\n\nconst wrapWithProxy = (target, handlers) => new Proxy(createFunctionWrapper(target), handlers);\n\nconst proxyGet = (wrapper, name) => {\n  const { target } = wrapper;\n  if (name in target || name in EXCLUSIONS || typeof name === 'symbol') {\n    return target[name];\n  }\n  // INFO Proxy should be already applied, so no need in additional wrapping\n  return target[ProxyCommandFields.get](name);\n};\n\n// INFO Proxy should be already applied, so no need in additional wrapping\nconst proxyApply = (wrapper, thisValue, args) => (\n  wrapper.target[ProxyCommandFields.apply](null, args)\n);\n\nconst proxySet = (wrapper, name, value) => {\n  const { target } = wrapper;\n\n  if (name in target || name in EXCLUSIONS || typeof name === 'symbol') {\n    target[name] = value;\n    return value;\n  }\n\n  if (ProxyCommandFields.set in target) {\n    target[ProxyCommandFields.set](name, value);\n    return true;\n  }\n\n  return false;\n};\n\nconst proxyHas = (wrapper, name) => (\n  Object.prototype.hasOwnProperty.call(wrapper.target, name)\n);\n\nconst proxyDeleteProperty = (wrapper, name) => {\n  const { target } = wrapper;\n  if (ProxyCommandFields.deleteProperty in target) {\n    target[ProxyCommandFields.deleteProperty](name);\n    return true;\n  }\n\n  return false;\n};\n\nconst proxyOwnKeys = (wrapper) => {\n  const { target } = wrapper;\n  return [...Object.getOwnPropertyNames(target), ...Object.getOwnPropertyNames(EXCLUSIONS)];\n};\n\nconst proxyEnumerate = (wrapper) => {\n  const { target } = wrapper;\n  return [\n    ...Object.getOwnPropertyNames(target),\n    ...Object.getOwnPropertyNames(EXCLUSIONS),\n  ][Symbol.iterator]();\n};\n\nconst proxyGetOwnPropertyDescriptor = (wrapper, name) => {\n  if (Object.prototype.hasOwnProperty.call(EXCLUSIONS, name)) {\n    return Object.getOwnPropertyDescriptor(wrapper, name);\n  }\n  return Object.getOwnPropertyDescriptor(wrapper.target, name);\n};\n\n/**\n * Builds proper handlers hash for Proxy\n * @returns {Function}\n */\nexport const createProxyHandlers = (handlers = {}) => ({\n  get: proxyGet,\n  apply: proxyApply,\n  set: proxySet,\n  has: proxyHas,\n  deleteProperty: proxyDeleteProperty,\n  ownKeys: proxyOwnKeys,\n  enumerate: proxyEnumerate,\n  getOwnPropertyDescriptor: proxyGetOwnPropertyDescriptor,\n  ...handlers,\n});\n\nconst PROXY_HANDLERS = createProxyHandlers();\n\nclass ProxyFactory extends Factory {\n  constructor(handlers, cacheImpl) {\n    super(null, null, true);\n\n    this.handlers = handlers;\n    this.factory = createRequestFactory(handlers, cacheImpl);\n    this.factory.decorator.setFactory(this);\n  }\n\n  create(promise) {\n    const instance = this.factory.create(promise);\n\n    if (this.handlers.available) {\n      return wrapWithProxy(instance, PROXY_HANDLERS);\n    }\n\n    return instance;\n  }\n\n  getCached(name, pack) {\n    return this.factory.getCached(name, pack);\n  }\n\n  createCached(promise, name, pack) {\n    const instance = this.factory.createCached(promise, name, pack);\n\n    if (this.handlers.available) {\n      return wrapWithProxy(instance, PROXY_HANDLERS);\n    }\n\n    return instance;\n  }\n\n}\n\nexport const applyProxyWithDefaultHandlers = (target) => wrapWithProxy(target, PROXY_HANDLERS);\n\nexport const createProxyFactory = (handlers, cacheImpl) => (\n  new ProxyFactory(handlers, cacheImpl)\n);\n\nexport default ProxyFactory;\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/ProxyFactory.js","import CallbackFactory from '../command/CallbackFactory';\nimport getResourceType from '../utils/getResourceType';\n\nclass Decorator {\n  constructor(factory, handlers) {\n    this.handlers = handlers;\n    this.members = new CallbackFactory(factory);\n  }\n\n  apply(request) {\n    if (!this.handlers.available) {\n      return request;\n    }\n\n    const descriptors = this.handlers.getPropertyHandlers(getResourceType(request));\n    return descriptors.forEach((descriptor) => {\n      request[descriptor.name] = this.members.get(descriptor);\n    });\n  }\n\n  setFactory(factory) {\n    if (factory) {\n      this.members.setFactory(factory);\n    }\n  }\n}\n\nexport const createDecorator = (factory, handlers) => (\n  new Decorator(factory, handlers)\n);\n\nexport default Decorator;\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/Decorator.js","import TARGET_INTERNALS from '../utils/TARGET_INTERNALS';\nimport { createDeferred } from '../utils/Deferred';\nimport createRequestPackage from '../utils/createRequestPackage';\nimport { setTemporary } from '../request/Target';\n\nconst createHandlerFor = (\n  factoryWrapper,\n  propertyName,\n  commandType,\n  isTemporary,\n  cacheable,\n) => {\n  const { factory, checkState, getChildRequest } = factoryWrapper;\n\n  function commandHandler(command, value, ...args) {\n    let result;\n    let promise;\n    if (this[TARGET_INTERNALS]) {\n      const pack = createRequestPackage(\n        commandType,\n        [command, value, ...args],\n        this[TARGET_INTERNALS].id,\n      );\n      // FIXME Explicitly pass scope\n      const request = getChildRequest(propertyName, pack, cacheable);\n      result = request.child;\n      if (request.deferred) {\n        promise = this[TARGET_INTERNALS].sendRequest(propertyName, pack, request.deferred, result);\n        if (promise) {\n          if (isTemporary) {\n            // FIXME isTemporary must be called before `result` was resolved\n            // FIXME remove default `isTemporary`, if not defined just skip\n            checkState(promise, isTemporary, this, result, pack);\n          }\n        } else {\n          result = null;\n          promise = Promise.reject(new Error('Initial request failed and didn\\'t result in promise.'));\n        }\n      }\n    } else {\n      promise = Promise.reject(new Error('Target object is not a resource, so cannot be used for calls.'));\n    }\n    return result || factory.create(promise);\n  }\n\n  return commandHandler;\n};\n\nclass CallbackFactory {\n  members = new Map();\n  factory = null;\n\n  constructor(factory = null) {\n    this.setFactory(factory);\n  }\n\n  /**\n   * @param {Descriptor} descriptor\n   * @returns {Function}\n   * @private\n   */\n  get(descriptor) {\n    const propertyName = descriptor.name;\n    if (!this.members.has(propertyName)) {\n      this.members.set(\n        propertyName,\n        this.create(\n          descriptor.name,\n          descriptor.type,\n          descriptor.isTemporary,\n          descriptor.cacheable,\n        ),\n      );\n    }\n    return this.members.get(propertyName);\n  }\n\n  create(propertyName, commandType, isTemporary, cacheable) {\n    return createHandlerFor(this, propertyName, commandType, isTemporary, cacheable);\n  }\n\n  getChildRequest = (propertyName, pack, cacheable) => {\n    let child;\n    let deferred;\n\n    if (cacheable) {\n      child = this.factory.getCached(propertyName, pack);\n    }\n\n    if (!child) {\n      deferred = createDeferred();\n      if (cacheable) {\n        child = this.factory.createCached(deferred.promise, propertyName, pack);\n      } else {\n        child = this.factory.create(deferred.promise, propertyName, pack);\n      }\n    }\n    return { child, deferred };\n  };\n\n  checkState = (promise, isTemporaryFn, parentRequest, childRequest, pack) => {\n    if (promise) {\n      promise.then((data) => {\n        const isTemporary = Boolean(isTemporaryFn(parentRequest, childRequest, pack, data));\n        setTemporary(childRequest, isTemporary);\n      });\n    }\n  };\n\n  setFactory(factory) {\n    this.factory = factory;\n  }\n}\n\nexport default CallbackFactory;\n\n\n\n// WEBPACK FOOTER //\n// ./source/command/CallbackFactory.js"],"sourceRoot":""}