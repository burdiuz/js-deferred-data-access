{"version":3,"file":"worker-interface.umd.js","sources":["../../../packages/worker-interface/node_modules/@actualwave/deferred-data-access/utils/src/utils.js","../../../packages/worker-interface/node_modules/@actualwave/deferred-data-access/command/src/command.js","../../../packages/worker-interface/node_modules/@actualwave/deferred-data-access/command/src/command-chain.js","../../../packages/worker-interface/node_modules/@actualwave/deferred-data-access/proxy/src/command.js","../../../packages/worker-interface/node_modules/@actualwave/deferred-data-access/proxy/src/types.js","../../../packages/worker-interface/node_modules/@actualwave/deferred-data-access/proxy/src/proxy.js","../../../node_modules/@actualwave/has-own/index.es.js","../../../packages/worker-interface/node_modules/@actualwave/deferred-data-access/proxy/src/utils.js","../../../packages/worker-interface/node_modules/@actualwave/deferred-data-access/proxy/src/traps.js","../../../packages/worker-interface/node_modules/@actualwave/deferred-data-access/core/core.js","../../../node_modules/@actualwave/weak-storage/index.es.js","../../../packages/worker-interface/node_modules/@actualwave/deferred-data-access/resource/src/resource.js","../../../packages/worker-interface/node_modules/@actualwave/deferred-data-access/resource/src/utils.js","../../../packages/worker-interface/node_modules/@actualwave/deferred-data-access/resource/src/resource-pool.js","../../../packages/worker-interface/node_modules/@actualwave/deferred-data-access/resource/src/default-resource-pool.js","../../../packages/worker-interface/node_modules/@actualwave/deferred-data-access/resource/src/resource-pool-registry.js","../../../../../packages/worker-interface/src/utils.ts","../../../../../packages/worker-interface/src/handshake.ts","../../../../../packages/worker-interface/src/request.ts","../../../../../packages/worker-interface/src/worker-interface.ts"],"sourcesContent":["const DATE_NOW = Date.now() - Math.floor(Math.random() * 1000);\r\nlet index = 0;\r\nexport var ReservedPropertyNames;\r\n(function (ReservedPropertyNames) {\r\n    ReservedPropertyNames[\"THEN\"] = \"then\";\r\n    ReservedPropertyNames[\"CATCH\"] = \"catch\";\r\n})(ReservedPropertyNames || (ReservedPropertyNames = {}));\r\nexport const isReservedPropertyName = (name) => name === ReservedPropertyNames.THEN || name === ReservedPropertyNames.CATCH;\r\nexport const reject = async (message) => {\r\n    throw message;\r\n};\r\nexport const createUIDGenerator = (key = '') => {\r\n    const prefix = `${key ? `${key}/` : ''}${DATE_NOW}/`;\r\n    return () => `${prefix}${++index};`;\r\n};\r\nexport const generateId = createUIDGenerator();\r\nexport class IdOwner {\r\n    constructor(id = generateId()) {\r\n        this.id = id;\r\n    }\r\n}\r\n//# sourceMappingURL=utils.js.map","export class Command {\r\n    constructor(type, name, value, context) {\r\n        this.type = type;\r\n        this.name = name;\r\n        this.value = value;\r\n        this.context = context;\r\n    }\r\n    toObject(includeContext = false) {\r\n        const { type, name, value, context } = this;\r\n        return {\r\n            type,\r\n            name,\r\n            value,\r\n            context: includeContext ? context : undefined,\r\n        };\r\n    }\r\n    toJSON(includeContext = false) {\r\n        const { type, name, value, context } = this;\r\n        return JSON.stringify([\r\n            type,\r\n            name,\r\n            value,\r\n            includeContext ? context : undefined,\r\n        ]);\r\n    }\r\n    static fromJSON(jsonString) {\r\n        const [type, name, value, context] = JSON.parse(jsonString);\r\n        return new Command(type, name, value, context);\r\n    }\r\n}\r\n//# sourceMappingURL=command.js.map","import { Command } from './command';\r\nexport class CommandChain extends Command {\r\n    constructor(prev, type, name, value, context) {\r\n        super(type, name, value, context);\r\n        this.prev = prev;\r\n    }\r\n    *[Symbol.iterator]() {\r\n        let item = this;\r\n        while (item) {\r\n            yield item;\r\n            item = item.prev;\r\n        }\r\n    }\r\n    isTail() {\r\n        return !this.prev;\r\n    }\r\n    forEach(callback) {\r\n        let node = this;\r\n        do {\r\n            callback(node);\r\n            node = node.prev;\r\n        } while (node);\r\n    }\r\n    map(callback) {\r\n        let node = this;\r\n        const list = [];\r\n        do {\r\n            list.push(callback(node));\r\n            node = node.prev;\r\n        } while (node);\r\n        return list;\r\n    }\r\n    reduce(callback, base) {\r\n        let node = this;\r\n        let result = base;\r\n        do {\r\n            result = callback(result, node);\r\n            node = node.prev;\r\n        } while (node);\r\n        return result;\r\n    }\r\n    static fromCommand({ type, name, value, context }, prev) {\r\n        return new CommandChain(prev, type, name, value, context);\r\n    }\r\n}\r\n//# sourceMappingURL=command-chain.js.map","import { CommandChain } from '@actualwave/deferred-data-access/command';\r\nexport var ProxyCommand;\r\n(function (ProxyCommand) {\r\n    ProxyCommand[\"GET\"] = \"P:get\";\r\n    ProxyCommand[\"SET\"] = \"P:set\";\r\n    ProxyCommand[\"APPLY\"] = \"P:apply\";\r\n    ProxyCommand[\"DELETE_PROPERTY\"] = \"P:del\";\r\n    // If proxy works in lazy mode and APPLY command has previous GET command, this will be generated.\r\n    ProxyCommand[\"METHOD_CALL\"] = \"P:call\";\r\n})(ProxyCommand || (ProxyCommand = {}));\r\nexport const generateProxyCommand = (head, type, name, value, context, lazy) => {\r\n    if (type === ProxyCommand.APPLY && lazy && head?.type === ProxyCommand.GET) {\r\n        return new CommandChain(head.prev, ProxyCommand.METHOD_CALL, head.name, value, head.context);\r\n    }\r\n    return new CommandChain(head, type, name, value, context);\r\n};\r\nexport const getMethodName = ({ prev }) => prev?.name;\r\nexport const getMethodCallContext = ({ prev }) => prev?.context;\r\n//# sourceMappingURL=command.js.map","export const EXCLUSIONS = {\r\n    /*\r\n     INFO arguments and caller were included because they are required function properties\r\n     https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/arguments\r\n     */\r\n    arguments: true,\r\n    caller: true,\r\n    prototype: true,\r\n};\r\nexport const API_PROP = Symbol('P:api');\r\n//# sourceMappingURL=types.js.map","import { API_PROP } from './types';\r\nexport const wrapWithProxy = (\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ntarget, traps, api = {}) => {\r\n    const wrapper = Object.assign(typeof target === 'function'\r\n        ? function $RequestFn(...args) {\r\n            return target.apply(this, args);\r\n        }\r\n        : function $Request() {\r\n            // because\r\n        }, {\r\n        target,\r\n        [API_PROP]: { getTarget: () => target, ...api },\r\n    });\r\n    return new Proxy(wrapper, traps);\r\n};\r\nexport const isWrappedWithProxy = (obj) => !!(obj && obj[API_PROP]);\r\nexport const unwrapProxy = (obj) => obj && obj[API_PROP] && obj[API_PROP].getTarget() || obj;\r\n//# sourceMappingURL=proxy.js.map","export const hasOwn = (\n  (has) =>\n  (target, property) =>\n  Boolean(target && has.call(target, property))\n)(Object.prototype.hasOwnProperty);\n\nexport default hasOwn;","import { hasOwn } from '@actualwave/has-own';\r\nimport { ProxyCommand, getMethodCallContext } from './command';\r\nimport { API_PROP, EXCLUSIONS } from './types';\r\nexport const isNameExcluded = (name) => name === API_PROP || hasOwn(EXCLUSIONS, name);\r\nexport const isNameSymbol = (name) => typeof name === 'symbol';\r\nexport const followCommandChain = async (head, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ncontext) => {\r\n    let target = context;\r\n    if (!context) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        target = head.prev\r\n            ? await followCommandChain(head.prev)\r\n            : head.context;\r\n    }\r\n    const { type, name, value } = head;\r\n    switch (type) {\r\n        case ProxyCommand.GET:\r\n            return target[name];\r\n        case ProxyCommand.APPLY:\r\n            return target.apply(getMethodCallContext(head), value);\r\n    }\r\n    throw new Error(`Unknown command \"${type}\" cannot be followed, only ProxyCommand.GET and APPLY are allowed.`);\r\n};\r\n//# sourceMappingURL=utils.js.map","import { ProxyCommand } from './command';\r\nimport { EXCLUSIONS } from './types';\r\nimport { isNameExcluded } from './utils';\r\nconst createGetTrap = (handler) => (wrapper, name) => {\r\n    const { target } = wrapper;\r\n    if (isNameExcluded(name)) {\r\n        return wrapper[name];\r\n    }\r\n    // We expect that user of the lib will wrap with Proxy explicitly whatever they want\r\n    return handler(ProxyCommand.GET, name, undefined, target);\r\n};\r\nconst createApplyTrap = (handler) => ({ target }, thisValue, args) => {\r\n    // thisValue is being ignored for now\r\n    // target is a function that should be applied\r\n    return handler(ProxyCommand.APPLY, undefined, args, target);\r\n};\r\nconst createSetTrap = (handler) => ({ target }, name, value) => {\r\n    if (isNameExcluded(name)) {\r\n        return false;\r\n    }\r\n    /* TODO why this might be needed?\r\n    if (isNameSymbol(name)) {\r\n      target.then((context: any) => {\r\n        context[name] = value;\r\n      });\r\n\r\n      return false;\r\n    }\r\n    */\r\n    handler(ProxyCommand.SET, name, value, target);\r\n    return true;\r\n};\r\nconst createDeletePropertyTrap = (handler) => (wrapper, name) => {\r\n    if (isNameExcluded(name)) {\r\n        return false;\r\n    }\r\n    handler(ProxyCommand.DELETE_PROPERTY, name, undefined, wrapper.target);\r\n    return true;\r\n};\r\nconst proxyHasTrap = (wrapper, name) => {\r\n    if (isNameExcluded(name)) {\r\n        return wrapper[name];\r\n    }\r\n    return false;\r\n};\r\nconst proxyOwnKeysTrap = () => Object.getOwnPropertyNames(EXCLUSIONS);\r\n// INFO You cannot enumerate properties of request object, this may possibly require processing a lot of data\r\nconst proxyEnumerateTrap = () => Object.getOwnPropertyNames(EXCLUSIONS)[Symbol.iterator]();\r\nconst proxyGetOwnPropertyDescriptorTrap = (wrapper, name) => {\r\n    if (isNameExcluded(name)) {\r\n        return Object.getOwnPropertyDescriptor(wrapper, name);\r\n    }\r\n    return Object.getOwnPropertyDescriptor(wrapper.target, name);\r\n};\r\nexport const createProxyTrapsObject = (handler) => ({\r\n    get: createGetTrap(handler),\r\n    apply: createApplyTrap(handler),\r\n    set: createSetTrap(handler),\r\n    deleteProperty: createDeletePropertyTrap(handler),\r\n    has: proxyHasTrap,\r\n    ownKeys: proxyOwnKeysTrap,\r\n    enumerate: proxyEnumerateTrap,\r\n    getOwnPropertyDescriptor: proxyGetOwnPropertyDescriptorTrap,\r\n});\r\n//# sourceMappingURL=traps.js.map","import { isReservedPropertyName, ReservedPropertyNames, } from '@actualwave/deferred-data-access/utils';\r\nimport { CommandChain, } from '@actualwave/deferred-data-access/command';\r\nimport { wrapWithProxy, createProxyTrapsObject, ProxyCommand, generateProxyCommand, } from '@actualwave/deferred-data-access/proxy';\r\nconst EMPTY_PROMISE = Promise.resolve(undefined);\r\nconst isPromiseActivity = (command) => {\r\n    const { type } = command;\r\n    if (type === ProxyCommand.GET || type === ProxyCommand.METHOD_CALL) {\r\n        return isReservedPropertyName(command.name);\r\n    }\r\n    if (type === ProxyCommand.APPLY) {\r\n        return isReservedPropertyName(command.prev?.name);\r\n    }\r\n    return false;\r\n};\r\nconst executePromiseMethod = (context, name, args) => {\r\n    switch (name) {\r\n        case ReservedPropertyNames.THEN:\r\n            return context.then(...args);\r\n        case ReservedPropertyNames.CATCH:\r\n            return context.catch(...args);\r\n        default:\r\n            throw new Error(`Unexpected Error: Promise method \"${String(name)}\" could not be called.`);\r\n    }\r\n};\r\nconst applyPromiseActivity = (command, commandHandler, lazy, wrap) => {\r\n    switch (command.type) {\r\n        case ProxyCommand.GET: {\r\n            const { name, prev } = command;\r\n            let { context } = command;\r\n            if (lazy) {\r\n                // then() / catch() on lazy means we should call handler and subscribe to promise\r\n                if (!prev) {\r\n                    throw new Error(`Unexpected Error: Proxy command GET has unknown context.`);\r\n                }\r\n                // When lazy, context is a dummy promise, so we have to call handler with previous command and then use it as a context.\r\n                context = commandHandler(prev, prev.context, wrap);\r\n            }\r\n            else {\r\n                // then() / catch() on non-lazy means we handler already called, just subscribe to promise of it\r\n                /*\r\n                   When not lazy, this promise was already created and is a context to this action.\r\n                   Without wrapper we may get this error:\r\n                   Uncaught TypeError: Method Promise.prototype.then called on incompatible receiver undefined\r\n                */\r\n                //return (context as any)[name as string](...(value as never[]));\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            return (...args) => context[name](...args);\r\n        }\r\n        case ProxyCommand.METHOD_CALL:\r\n            if (!command.context) {\r\n                throw new Error(`Unexpected Error: Could not apply Promise method of unknown context.`);\r\n            }\r\n            return executePromiseMethod(command.context, command.name, command.value);\r\n        case ProxyCommand.APPLY:\r\n            {\r\n                const { prev } = command;\r\n                if (!prev?.context || !prev?.name) {\r\n                    throw new Error(`Unexpected Error: Could not apply Promise method of unknown context.`);\r\n                }\r\n                return executePromiseMethod(prev.context, prev.name, command.value);\r\n            }\r\n            break;\r\n        default:\r\n            throw new Error(`Command type \"${command.type}\" could not be executed as a Promise command.`);\r\n            break;\r\n    }\r\n};\r\nexport const handle = (commandHandler, lazy = true) => (context, command) => {\r\n    const wrap = (context, command) => {\r\n        const traps = createProxyTrapsObject((type, name, value, context) => {\r\n            const childCommand = generateProxyCommand(command, type, name, value, context, lazy);\r\n            let result;\r\n            if (isPromiseActivity(childCommand)) {\r\n                return applyPromiseActivity(childCommand, commandHandler, lazy, wrap);\r\n            }\r\n            else if ((type === ProxyCommand.APPLY || type === ProxyCommand.GET) &&\r\n                lazy) {\r\n                result = EMPTY_PROMISE;\r\n            }\r\n            else {\r\n                result = commandHandler(childCommand, context, wrap);\r\n            }\r\n            // anything coming not from Promise methods is always wrapped\r\n            return wrap(result, childCommand);\r\n        });\r\n        return wrapWithProxy(context, traps, {\r\n            getCommand() {\r\n                return command;\r\n            },\r\n            dropCommandChain() {\r\n                if (command) {\r\n                    delete command.prev;\r\n                }\r\n            },\r\n        });\r\n    };\r\n    return wrap(Promise.resolve(context), command ? CommandChain.fromCommand(command) : undefined);\r\n};\r\n//# sourceMappingURL=core.js.map","class KeysIterator {\r\n    constructor(map) {\r\n        this.map = map;\r\n        this.mapIterator = this.map.keys();\r\n    }\r\n    [Symbol.iterator]() {\r\n        return new KeysIterator(this.map);\r\n    }\r\n    next() {\r\n        let key;\r\n        let value;\r\n        let done;\r\n        do {\r\n            ({ done, value: key } = this.mapIterator.next());\r\n            if (!done) {\r\n                value = this.map.get(key).deref();\r\n            }\r\n        } while (!done && !value);\r\n        return {\r\n            done,\r\n            value: key,\r\n        };\r\n    }\r\n}\n\nclass ValuesIterator {\r\n    constructor(mapIterator) {\r\n        this.mapIterator = mapIterator;\r\n    }\r\n    [Symbol.iterator]() {\r\n        return new ValuesIterator(this.mapIterator[Symbol.iterator]());\r\n    }\r\n    next() {\r\n        let ref;\r\n        let value;\r\n        let done;\r\n        do {\r\n            ({ done, value: ref } = this.mapIterator.next());\r\n            if (done) {\r\n                value = undefined;\r\n            }\r\n            else {\r\n                value = ref.deref();\r\n            }\r\n        } while (!done && !value);\r\n        return {\r\n            done,\r\n            value,\r\n        };\r\n    }\r\n}\n\nclass EntriesIterator {\r\n    constructor(mapIterator) {\r\n        this.mapIterator = mapIterator;\r\n    }\r\n    [Symbol.iterator]() {\r\n        return new EntriesIterator(this.mapIterator[Symbol.iterator]());\r\n    }\r\n    next() {\r\n        let entries;\r\n        let value;\r\n        let done;\r\n        do {\r\n            ({ done, value: entries } = this.mapIterator.next());\r\n            if (done) {\r\n                entries = undefined;\r\n            }\r\n            else {\r\n                value = entries[1].deref();\r\n                entries = [entries[0], value];\r\n            }\r\n        } while (!done && !value);\r\n        return {\r\n            done,\r\n            entries,\r\n        };\r\n    }\r\n}\n\nclass WeakValueMap {\r\n    constructor(autoVerify = true) {\r\n        this.map = new Map();\r\n        if (autoVerify) {\r\n            this.finalizer = new FinalizationRegistry((key) => {\r\n                const ref = this.map.get(key);\r\n                if (!ref || !ref.deref()) {\r\n                    this.map.delete(key);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    get size() {\r\n        return this.map.size;\r\n    }\r\n    keys() {\r\n        return new KeysIterator(this.map);\r\n    }\r\n    values() {\r\n        return new ValuesIterator(this.map.values());\r\n    }\r\n    entries() {\r\n        return new EntriesIterator(this.map.entries());\r\n    }\r\n    set(key, value) {\r\n        this.map.set(key, new WeakRef(value));\r\n    }\r\n    get(key) {\r\n        const ref = this.map.get(key);\r\n        return ref && ref.deref();\r\n    }\r\n    has(key) {\r\n        return !!this.get(key);\r\n    }\r\n    delete(key) {\r\n        return this.map.delete(key);\r\n    }\r\n    clear() {\r\n        this.map.clear();\r\n    }\r\n    forEach(callback) {\r\n        this.map.forEach((ref, key) => {\r\n            const value = ref.deref();\r\n            if (value) {\r\n                callback(value, key, this);\r\n            }\r\n        });\r\n    }\r\n    verify() {\r\n        const map = new Map();\r\n        this.map.forEach((ref, key) => {\r\n            const value = ref.deref();\r\n            if (value) {\r\n                map.set(key, ref);\r\n            }\r\n        });\r\n        this.map.clear();\r\n        this.map = map;\r\n    }\r\n}\n\nclass WeakStorage extends WeakValueMap {\r\n    constructor(autoVerify) {\r\n        super(autoVerify);\r\n        this.byValues = new WeakMap();\r\n    }\r\n    set(key, value) {\r\n        super.set(key, value);\r\n        this.byValues.set(key, value);\r\n    }\r\n    getKey(value) {\r\n        return this.byValues.get(value);\r\n    }\r\n    delete(key) {\r\n        const value = this.get(key);\r\n        if (value) {\r\n            this.byValues.delete(value);\r\n        }\r\n        return super.delete(key);\r\n    }\r\n    clear() {\r\n        super.clear();\r\n        this.byValues = new WeakMap();\r\n    }\r\n}\n\nexport { WeakStorage, WeakValueMap };\n","import { IdOwner } from '@actualwave/deferred-data-access/utils';\r\nexport class Resource extends IdOwner {\r\n    constructor(pool, type) {\r\n        super();\r\n        this.pool = pool;\r\n        this.type = type;\r\n    }\r\n    toObject() {\r\n        return { id: this.id, poolId: this.pool.id, type: this.type };\r\n    }\r\n    toJSON() {\r\n        return JSON.stringify(this.toObject());\r\n    }\r\n}\r\nexport const createResource = (pool, target, type) => new Resource(pool, type || typeof target);\r\nexport const isResourceObject = (obj) => obj &&\r\n    // type signature is not enough for non-ts env\r\n    typeof obj === 'object' &&\r\n    typeof obj.id === 'string' &&\r\n    typeof obj.poolId === 'string';\r\n//# sourceMappingURL=resource.js.map","const validTargets = new Set();\r\nexport const getDefaultValidTargets = () => ['object', 'function'];\r\nexport const isValidTarget = (value) => validTargets.has(typeof value);\r\nexport const setValidTargets = (list) => {\r\n    validTargets.clear();\r\n    list.forEach((item) => validTargets.add(item));\r\n};\r\nsetValidTargets(getDefaultValidTargets());\r\n//# sourceMappingURL=utils.js.map","/* eslint-disable @typescript-eslint/ban-types */\r\nimport { IdOwner } from '@actualwave/deferred-data-access/utils';\r\nimport { WeakValueMap } from '@actualwave/weak-storage';\r\nimport { createResource } from './resource';\r\nimport { isValidTarget } from './utils';\r\nexport class ResourcePool extends IdOwner {\r\n    constructor() {\r\n        super(...arguments);\r\n        // { [string]: weakref }\r\n        this.refs = new WeakValueMap();\r\n        // { [weakref]: Resource }\r\n        this.resources = new WeakMap();\r\n    }\r\n    get active() {\r\n        return !!this.resources;\r\n    }\r\n    set(target, type) {\r\n        let resource = null;\r\n        if (!isValidTarget(target)) {\r\n            return resource;\r\n        }\r\n        resource = this.resources.get(target);\r\n        if (!resource) {\r\n            resource = createResource(this, target, type);\r\n            this.refs.set(resource.id, target);\r\n            this.resources.set(target, resource);\r\n        }\r\n        return resource;\r\n    }\r\n    has(target) {\r\n        return this.resources.has(target);\r\n    }\r\n    get({ id }) {\r\n        return this.getById(id);\r\n    }\r\n    getById(id) {\r\n        return this.refs.get(id);\r\n    }\r\n    getResource(target) {\r\n        return this.resources.get(target);\r\n    }\r\n    remove(target) {\r\n        const resource = this.resources.get(target);\r\n        if (resource) {\r\n            this.refs.delete(resource.id);\r\n            return this.resources.delete(target);\r\n        }\r\n        return false;\r\n    }\r\n    clear() {\r\n        for (const key of this.refs.keys()) {\r\n            const target = this.refs.get(key);\r\n            this.resources.delete(target);\r\n        }\r\n        this.refs.clear();\r\n    }\r\n}\r\n//# sourceMappingURL=resource-pool.js.map","import { ResourcePool } from \"./resource-pool\";\r\nconst generateGetDefaultResourcePool = (pool) => () => {\r\n    if (!pool) {\r\n        pool = new ResourcePool();\r\n    }\r\n    return pool;\r\n};\r\nexport const getDefaultResourcePool = generateGetDefaultResourcePool();\r\n//# sourceMappingURL=default-resource-pool.js.map","import { hasOwn } from '@actualwave/has-own';\r\nimport { IdOwner } from '@actualwave/deferred-data-access/utils';\r\nimport { getDefaultResourcePool } from './default-resource-pool';\r\nimport { ResourcePool } from './resource-pool';\r\nexport class ResourcePoolRegistry extends IdOwner {\r\n    constructor() {\r\n        super();\r\n        this.pools = {};\r\n        this.register(getDefaultResourcePool());\r\n    }\r\n    /**\r\n     * Create and register ResourcePool\r\n     */\r\n    createPool() {\r\n        const pool = new ResourcePool();\r\n        this.register(pool);\r\n        return pool;\r\n    }\r\n    /**\r\n     * Register ResourcePool instance.\r\n     */\r\n    register(pool) {\r\n        if (hasOwn(this.pools, pool.id))\r\n            return false;\r\n        this.pools[pool.id] = pool;\r\n        return true;\r\n    }\r\n    /**\r\n     * Retrieve ResourcePool instance from registry by its Id.\r\n     */\r\n    get(poolId) {\r\n        return this.pools[poolId] || null;\r\n    }\r\n    /**\r\n     * Check if ResourcePool registered in this registry instance.\r\n     */\r\n    isRegistered(pool) {\r\n        return hasOwn(this.pools, pool.id);\r\n    }\r\n    /**\r\n     * Remove ResourcePool from current registry instance.\r\n     */\r\n    remove(pool) {\r\n        const poolId = typeof pool === 'string' ? pool : pool.id;\r\n        return delete this.pools[poolId];\r\n    }\r\n}\r\nconst generateGetRegistry = (registry) => () => {\r\n    if (!registry) {\r\n        registry = new ResourcePoolRegistry();\r\n    }\r\n    return registry;\r\n};\r\nexport const getRegistry = generateGetRegistry();\r\n//# sourceMappingURL=resource-pool-registry.js.map",null,null,null,null],"names":["generateId"],"mappings":"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"}