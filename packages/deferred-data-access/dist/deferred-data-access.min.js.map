{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///deferred-data-access.min.js","webpack:///webpack/bootstrap f0dccc0509c8a8386d84","webpack:///./source/utils/isResource.js","webpack:///./source/utils/TARGET_INTERNALS.js","webpack:///./source/utils/TARGET_DATA.js","webpack:///./source/request/target/getInternals.js","webpack:///./source/command/Descriptor.js","webpack:///./source/utils/hasOwnProperty.js","webpack:///./source/request/Target.js","webpack:///./source/resource/ResourcePool.js","webpack:///./source/utils/reject.js","webpack:///./source/utils/TargetStatus.js","webpack:///./source/utils/Deferred.js","webpack:///./source/request/target/toJSON.js","webpack:///./source/resource/Resource.js","webpack:///./source/utils/getId.js","webpack:///./source/utils/getResourcePoolId.js","webpack:///./source/utils/getResourceId.js","webpack:///./source/command/internal/ProxyCommands.js","webpack:///./source/utils/getResourceType.js","webpack:///./node_modules/event-dispatcher/dist/event-dispatcher.js","webpack:///./source/utils/IConvertible.js","webpack:///./source/utils/getRawResource.js","webpack:///./source/utils/createRequestPackage.js","webpack:///./source/command/internal/RequestCommands.js","webpack:///./source/command/Reserved.js","webpack:///./source/request/Factory.js","webpack:///./source/resource/Converter.js","webpack:///./source/utils/isResourceConvertible.js","webpack:///./source/resource/PoolRegistry.js","webpack:///./source/index.js","webpack:///./source/DataAccessInterface.js","webpack:///./source/utils/areProxiesAvailable.js","webpack:///./source/request/target/Internals.js","webpack:///./source/request/target/SubTargets.js","webpack:///./source/request/target/Queue.js","webpack:///./source/request/target/Children.js","webpack:///./source/request/target/getRawPromise.js","webpack:///./source/utils/createForeignResource.js","webpack:///./source/request/Handlers.js","webpack:///./source/utils/filterRequestHandlers.js","webpack:///./source/request/ProxyFactory.js","webpack:///./source/request/Decorator.js","webpack:///./source/command/CallbackFactory.js","webpack:///./source/command/Flow.js","webpack:///./source/request/target/setTemporary.js","webpack:///(webpack)/buildin/module.js","webpack:///./source/request/target/isRequest.js","webpack:///./source/request/target/isPending.js","webpack:///./source/request/target/getStatus.js","webpack:///./source/utils/getResourceData.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__","__WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__","__WEBPACK_IMPORTED_MODULE_2__request_Target__","__WEBPACK_IMPORTED_MODULE_3__resource_Resource__","isResource","Symbol","__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__","target","_classCallCheck","instance","Constructor","TypeError","createDescriptor","addDescriptorTo","descriptorGeneratorFactory","__WEBPACK_IMPORTED_MODULE_0__utils_isResource__","DEFAULT_IS_TEMPORARY","parent","child","Descriptor","command","handler","propertyName","arguments","length","undefined","isTemporary","cacheable","virtual","resourceType","descriptor","freeze","Array","push","createRequestTarget","__WEBPACK_IMPORTED_MODULE_1__target_Internals__","_createClass","defineProperties","props","writable","key","protoProps","staticProps","Target","promise","requestHandlers","value","_TARGET_INTERNALS","then","apply","_TARGET_INTERNALS2","catch","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","ResourcePoolEvents","defaultResourcePool","createResourcePool","__WEBPACK_IMPORTED_MODULE_0_event_dispatcher__","__WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default","__WEBPACK_IMPORTED_MODULE_1__utils_getId__","__WEBPACK_IMPORTED_MODULE_2__utils_isResource__","__WEBPACK_IMPORTED_MODULE_3__Resource__","__WEBPACK_IMPORTED_MODULE_4__request_target_isRequest__","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","iterator","next","done","err","isArray","_typeof","obj","RESOURCE_ADDED","RESOURCE_REMOVED","POOL_CLEAR","POOL_CLEARED","POOL_DESTROYED","MAP_FIELD","validTargets","isValidTarget","Boolean","ResourcePool","_EventDispatcher","_this","getPrototypeOf","Map","id","type","map","resource","has","set","hasEventListener","dispatchEvent","delete","destroy","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_ref","_ref2","return","clear","a","events","DefaultResourcePool","_ResourcePool","Error","list","reduce","message","Promise","reject","PENDING","RESOLVED","REJECTED","DESTROYED","createDeferred","Deferred","resolve","__WEBPACK_IMPORTED_MODULE_0__getInternals__","internals","toJSON","_defineProperty","createResource","__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_DATA__","__WEBPACK_IMPORTED_MODULE_1__utils_TARGET_INTERNALS__","__WEBPACK_IMPORTED_MODULE_2__request_target_getInternals__","__WEBPACK_IMPORTED_MODULE_3__utils_getId__","getPoolId","pool","Resource","_Object$definePropert","$id","$type","$poolId","poolId","active","remove","keys","base","Date","now","index","__WEBPACK_IMPORTED_MODULE_2__isResource__","ProxyCommandFields","__WEBPACK_IMPORTED_MODULE_0__Descriptor__","ProxyCommandNames","GET","SET","APPLY","DELETE_PROPERTY","deleteProperty","ProxyCommandsClass","names","fields","createGETDescriptor","createSETDescriptor","createAPPLYDescriptor","ProxyCommands","getResourceType","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","_typeof2","Event","_EventDispatcher2","default","hasOwnProp","data","defaultPrevented","ListenersRunner","listeners","onStopped","onComplete","immediatelyStopped","stopImmediatePropagation","event","listener","augmentEvent","clearEvent","eventObject","stopPropagation","EventListeners","_this2","_listeners","_runners","removeRunner","runner","splice","indexOf","eventType","priorityOpt","priority","parseInt","getPrioritiesByKey","String","handlers","createList","result","priorities","_this3","getOwnPropertyNames","handlerIndex","forEach","listenerRemoved","stopped","sort","b","_handlers","_runner","createRunner","run","EventDispatcher","eventPreprocessor","noInit","initialize","_eventPreprocessor","add","removeAll","getEvent","eventOrType","optionalData","isObject","IConvertible","__WEBPACK_IMPORTED_MODULE_1__IConvertible__","__WEBPACK_IMPORTED_MODULE_3__request_target_toJSON__","__WEBPACK_IMPORTED_MODULE_4__resource_ResourcePool__","__WEBPACK_IMPORTED_MODULE_5__resource_Resource__","args","RequestCommandNames","RequestCommandFields","DESTROY","RequestCommands","createDESTROYDescriptor","NO_INIT","createRequestFactory","__WEBPACK_IMPORTED_MODULE_0__Decorator__","__WEBPACK_IMPORTED_MODULE_1__Target__","Factory","cacheImpl","cache","decorator","pack","request","available","createResourceConverter","__WEBPACK_IMPORTED_MODULE_1__utils_hasOwnProperty__","__WEBPACK_IMPORTED_MODULE_2__utils_getResourcePoolId__","__WEBPACK_IMPORTED_MODULE_3__utils_getResourceId__","__WEBPACK_IMPORTED_MODULE_4__utils_isResource__","__WEBPACK_IMPORTED_MODULE_5__utils_isResourceConvertible__","__WEBPACK_IMPORTED_MODULE_6__utils_getRawResource__","__WEBPACK_IMPORTED_MODULE_7__request_target_isPending__","ConverterEvents","RESOURCE_CREATED","RESOURCE_CONVERTED","Converter","registry","setConverter","isRegistered","linkConvertHandler","item","resourceToObject","lookupArray","lookupObject","objectToResource","__WEBPACK_IMPORTED_MODULE_0__isResource__","createPoolRegistry","__WEBPACK_IMPORTED_MODULE_2__ResourcePool__","PoolRegistryEvents","RESOURCE_POOL_CREATED","RESOURCE_POOL_REGISTERED","RESOURCE_POOL_REMOVED","POOLS_FIELD","PoolRegistry","handlePoolDestroyed","register","addEventListener","removeEventListener","__WEBPACK_IMPORTED_MODULE_0__DataAccessInterface__","__WEBPACK_IMPORTED_MODULE_1__utils_Deferred__","__WEBPACK_IMPORTED_MODULE_2__command_Descriptor__","__WEBPACK_IMPORTED_MODULE_3__command_Reserved__","__WEBPACK_IMPORTED_MODULE_4__command_internal_RequestCommands__","__WEBPACK_IMPORTED_MODULE_5__command_internal_ProxyCommands__","__WEBPACK_IMPORTED_MODULE_6__request_Target__","__WEBPACK_IMPORTED_MODULE_7__resource_ResourcePool__","__WEBPACK_IMPORTED_MODULE_8__resource_PoolRegistry__","__WEBPACK_IMPORTED_MODULE_9__resource_Converter__","__WEBPACK_IMPORTED_MODULE_10__utils_IConvertible__","__WEBPACK_IMPORTED_MODULE_11__utils_isResourceConvertible__","__WEBPACK_IMPORTED_MODULE_12__utils_getRawResource__","__WEBPACK_IMPORTED_MODULE_13__utils_getResourceData__","__WEBPACK_IMPORTED_MODULE_14__utils_getResourceId__","__WEBPACK_IMPORTED_MODULE_15__utils_getResourcePoolId__","__WEBPACK_IMPORTED_MODULE_16__utils_getResourceType__","__WEBPACK_IMPORTED_MODULE_17__utils_isResource__","__WEBPACK_IMPORTED_MODULE_0__utils_areProxiesAvailable__","__WEBPACK_IMPORTED_MODULE_1__utils_isResource__","__WEBPACK_IMPORTED_MODULE_4__utils_createForeignResource__","__WEBPACK_IMPORTED_MODULE_5__request_Handlers__","__WEBPACK_IMPORTED_MODULE_6__request_ProxyFactory__","__WEBPACK_IMPORTED_MODULE_7__request_Factory__","__WEBPACK_IMPORTED_MODULE_8__resource_ResourcePool__","__WEBPACK_IMPORTED_MODULE_10__resource_PoolRegistry__","DataAccessInterface","descriptors","proxyEnabled","poolRegistry","createPool","resourceConverter","poolDestroyedHandler","setCommands","parse","Proxy","__WEBPACK_IMPORTED_MODULE_0__utils_reject__","__WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__","__WEBPACK_IMPORTED_MODULE_2__utils_TARGET_DATA__","__WEBPACK_IMPORTED_MODULE_3__utils_createRequestPackage__","__WEBPACK_IMPORTED_MODULE_5__SubTargets__","Internals","_SubTargets","handlePromiseResolve","status","parentResolved","temporary","handlePromiseReject","parentRejected","hadChildPromises","setParent","canBeDestroyed","send","handleResolve","handleReject","__WEBPACK_IMPORTED_MODULE_2__utils_TargetStatus__","__WEBPACK_IMPORTED_MODULE_3__Queue__","__WEBPACK_IMPORTED_MODULE_4__Children__","SubTargets","_Children","children","handleSubRequest","_this$parent","handle","queue","hasQueue","hasCommand","handleSend","_toConsumableArray","arr2","from","createQueue","__WEBPACK_IMPORTED_MODULE_0__utils_Deferred__","__WEBPACK_IMPORTED_MODULE_1__toJSON__","Queue","deferred","concat","callback","targetJSON","error","_ref3","__WEBPACK_IMPORTED_MODULE_0__getRawPromise__","Children","__WEBPACK_IMPORTED_MODULE_0__TARGET_DATA__","__WEBPACK_IMPORTED_MODULE_1__getId__","createHandlers","__WEBPACK_IMPORTED_MODULE_0__command_Descriptor__","__WEBPACK_IMPORTED_MODULE_1__command_internal_ProxyCommands__","__WEBPACK_IMPORTED_MODULE_2__utils_hasOwnProperty__","__WEBPACK_IMPORTED_MODULE_3__utils_filterRequestHandlers__","__WEBPACK_IMPORTED_MODULE_4__utils_getResourceType__","DEFAULT_KEY","areProxyHandlersAvailable","throwError","required","HandlersEvents","HANDLERS_UPDATED","Handlers","properties","converter","setCommandsByType","descrs","getPropertyCommands","assign","parentRequest","resultRequest","lookupForPending","all","callImmediately","getCommand","findIndex","__WEBPACK_IMPORTED_MODULE_0__hasOwnProperty__","__WEBPACK_IMPORTED_MODULE_1__command_Descriptor__","__WEBPACK_IMPORTED_MODULE_2__command_Reserved__","applyDescriptor","filterArray","filterHash","getOwnPropertySymbols","createProxyFactory","__WEBPACK_IMPORTED_MODULE_0__Factory__","__WEBPACK_IMPORTED_MODULE_2__command_internal_ProxyCommands__","EXCLUSIONS","caller","createFunctionWrapper","requestTargetProxy","wrapWithProxy","proxyGet","wrapper","proxyApply","thisValue","proxySet","proxyHas","proxyDeleteProperty","proxyOwnKeys","proxyEnumerate","proxyGetOwnPropertyDescriptor","getOwnPropertyDescriptor","proxyGetPrototypeOf","PROXY_HANDLERS","ownKeys","enumerate","ProxyFactory","_Factory","setFactory","getCached","createDecorator","__WEBPACK_IMPORTED_MODULE_0__command_CallbackFactory__","__WEBPACK_IMPORTED_MODULE_1__utils_getResourceType__","Decorator","members","__WEBPACK_IMPORTED_MODULE_0__Flow__","createHandlerFor","flow","isTemporaryFn","commandHandler","_len","_key","CallbackFactory","__WEBPACK_IMPORTED_MODULE_0__request_target_getInternals__","__WEBPACK_IMPORTED_MODULE_1__request_target_toJSON__","__WEBPACK_IMPORTED_MODULE_2__utils_reject__","__WEBPACK_IMPORTED_MODULE_4__request_target_setTemporary__","Flow","makeChildReqest","rejectCall","checkState","childRequest","webpackPolyfill","deprecate","paths","__WEBPACK_IMPORTED_MODULE_0__getStatus__","__WEBPACK_IMPORTED_MODULE_1__getRawResource__"],"mappings":"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","file":"deferred-data-access.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"DataAccessInterface\"] = factory();\n\telse\n\t\troot[\"DataAccessInterface\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"DataAccessInterface\"] = factory();\n\telse\n\t\troot[\"DataAccessInterface\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"http://localhost:8081/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 28);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__request_Target__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__resource_Resource__ = __webpack_require__(12);\n\n\n/* in case of circular dependency make empty base classes\r\n   for both Target and Resource and check for them:\r\n\r\n   Target will have:\r\ns    class Target extends TargetBase {\r\n\r\n   this function will have:\r\n    object instanceof TargetBase\r\n */\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (object) {\n  if (!object) return false;\n\n  if (object instanceof __WEBPACK_IMPORTED_MODULE_3__resource_Resource__[\"b\" /* default */]\n  // this case for RAW resources passed via JSON conversion,\n  // look like {'resource::data': {$id: '1111', $poolId: '22222'}}\n  || object[__WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__[\"a\" /* default */]] // (object[TARGET_DATA] && typeof object[TARGET_DATA] === 'object')\n  ) {\n      return true;\n    } else if (object instanceof __WEBPACK_IMPORTED_MODULE_2__request_Target__[\"b\" /* default */] || object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]] // (object[TARGET_INTERNALS] && typeof object[TARGET_INTERNALS] === 'object')\n  ) {\n      // now all targets have internals in them, so we have to check if id and poolId are valid\n      // to treat target as resource. In case of Proxy enabled instanceof will be Function,\n      // so we have to check for internals.\n      return object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]].isResource();\n    }\n\n  return false;\n});\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (Symbol('request.target:internals'));\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ('resource::data');\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__ = __webpack_require__(1);\n/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (target) {\n  return target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]];\n});\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export DEFAULT_IS_TEMPORARY */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return createDescriptor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return addDescriptorTo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return descriptorGeneratorFactory; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_isResource__ = __webpack_require__(0);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n// It will make all resources temporary and user must explicitly set resource permanent\nvar DEFAULT_IS_TEMPORARY = function DEFAULT_IS_TEMPORARY(parent, child) {\n  return Object(__WEBPACK_IMPORTED_MODULE_0__utils_isResource__[\"a\" /* default */])(child);\n};\n\nvar Descriptor =\n// FIXME type > command; name > propertyName\nfunction Descriptor(command, handler) {\n  var propertyName = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n\n  _classCallCheck(this, Descriptor);\n\n  this.propertyName = propertyName !== undefined ? propertyName : command;\n  this.command = command;\n  this.handler = handler;\n  /**\r\n   * @type {function(): boolean}\r\n   */\n  this.isTemporary = DEFAULT_IS_TEMPORARY;\n  this.cacheable = true;\n  // FIXME no need to pass virtual, check for propertyName is null -- its virtual then\n  this.virtual = false;\n  this.resourceType = null;\n};\n\nvar createDescriptor = function createDescriptor(command, handler, propertyName) {\n  var isTemporary = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : DEFAULT_IS_TEMPORARY;\n  var resourceType = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n  var cacheable = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n  var virtual = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n\n  var descriptor = new Descriptor(command, handler, propertyName);\n  descriptor.resourceType = resourceType;\n  descriptor.cacheable = cacheable;\n  descriptor.virtual = virtual;\n  if (isTemporary) {\n    descriptor.isTemporary = isTemporary;\n  }\n  // We can use Object.freeze(), it keeps class/constructor information\n  return Object.freeze(descriptor);\n};\n\nvar addDescriptorTo = function addDescriptorTo(descriptor, target) {\n  if (target instanceof Array) {\n    target.push(descriptor);\n  } else if (target) {\n    target[descriptor.propertyName] = descriptor;\n  }\n};\n\nvar descriptorGeneratorFactory = function descriptorGeneratorFactory(command, propertyName) {\n  return function (handler, target) {\n    var isTemporary = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_IS_TEMPORARY;\n    var resourceType = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    var cacheable = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n    var virtual = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n\n    var descriptor = createDescriptor(command, handler, propertyName, isTemporary, resourceType, cacheable, virtual);\n    addDescriptorTo(descriptor, target);\n    return Object.freeze(descriptor);\n  };\n};\n\n/* harmony default export */ __webpack_exports__[\"c\"] = (Descriptor);\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ((function (hasOwnProperty) {\n  return function (target, property) {\n    return hasOwnProperty.call(target, property);\n  };\n})(Object.prototype.hasOwnProperty));\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createRequestTarget; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__target_Internals__ = __webpack_require__(31);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n/**\r\n * The object that will be available on other side\r\n * @class DataAccessInterface.RequestTarget\r\n * @param _promise {Promise}\r\n * @param _requestHandlers {Handlers}\r\n */\n\nvar Target = function () {\n  function Target(promise, requestHandlers) {\n    _classCallCheck(this, Target);\n\n    this[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]] = new __WEBPACK_IMPORTED_MODULE_1__target_Internals__[\"a\" /* default */](this, promise, requestHandlers);\n  }\n\n  _createClass(Target, [{\n    key: 'then',\n    value: function then() {\n      var _TARGET_INTERNALS;\n\n      return (_TARGET_INTERNALS = this[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]]).then.apply(_TARGET_INTERNALS, arguments);\n    }\n  }, {\n    key: 'catch',\n    value: function _catch() {\n      var _TARGET_INTERNALS2;\n\n      return (_TARGET_INTERNALS2 = this[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]]).catch.apply(_TARGET_INTERNALS2, arguments);\n    }\n  }]);\n\n  return Target;\n}();\n\nvar createRequestTarget = function createRequestTarget(promise, requestHandlers) {\n  return new Target(promise, requestHandlers);\n};\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (Target);\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ResourcePoolEvents; });\n/* unused harmony export MAP_FIELD */\n/* unused harmony export isValidTarget */\n/* unused harmony export setValidTargets */\n/* unused harmony export getDefaultValidTargets */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return defaultResourcePool; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return createResourcePool; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_event_dispatcher__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_event_dispatcher__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_getId__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_isResource__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Resource__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__request_target_isRequest__ = __webpack_require__(45);\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\nvar ResourcePoolEvents = Object.freeze({\n  RESOURCE_ADDED: 'resourceAdded',\n  RESOURCE_REMOVED: 'resourceRemoved',\n  POOL_CLEAR: 'poolClear',\n  POOL_CLEARED: 'poolCleared',\n  POOL_DESTROYED: 'poolDestroyed'\n});\n\nvar MAP_FIELD = Symbol('ResourcePool::map');\n\nvar validTargets = {};\n\nvar isValidTarget = function isValidTarget(target) {\n  return !Object(__WEBPACK_IMPORTED_MODULE_2__utils_isResource__[\"a\" /* default */])(target) && !Object(__WEBPACK_IMPORTED_MODULE_4__request_target_isRequest__[\"a\" /* default */])(target) && Boolean(validTargets[typeof target === 'undefined' ? 'undefined' : _typeof(target)]);\n};\n\nvar setValidTargets = function setValidTargets(list) {\n  validTargets = list.reduce(function (validTargets, target) {\n    validTargets[target] = true;\n\n    return validTargets;\n  }, {});\n};\n\nvar getDefaultValidTargets = function getDefaultValidTargets() {\n  return ['object', 'function'];\n};\n\nvar ResourcePool = function (_EventDispatcher) {\n  _inherits(ResourcePool, _EventDispatcher);\n\n  function ResourcePool() {\n    _classCallCheck(this, ResourcePool);\n\n    var _this = _possibleConstructorReturn(this, (ResourcePool.__proto__ || Object.getPrototypeOf(ResourcePool)).call(this));\n\n    _this[MAP_FIELD] = new Map();\n    Object.defineProperties(_this, {\n      id: {\n        value: Object(__WEBPACK_IMPORTED_MODULE_1__utils_getId__[\"a\" /* default */])()\n      }\n    });\n    return _this;\n  }\n\n  _createClass(ResourcePool, [{\n    key: 'set',\n    value: function set(value) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      var map = this[MAP_FIELD];\n      var resource = null;\n      if (isValidTarget(value)) {\n        if (map.has(value)) {\n          resource = map.get(value);\n        } else {\n          resource = Object(__WEBPACK_IMPORTED_MODULE_3__Resource__[\"a\" /* createResource */])(this, value, type || (typeof value === 'undefined' ? 'undefined' : _typeof(value)));\n          map.set(resource.id, resource);\n          map.set(value, resource);\n          if (this.hasEventListener(ResourcePoolEvents.RESOURCE_ADDED)) {\n            this.dispatchEvent(ResourcePoolEvents.RESOURCE_ADDED, resource);\n          }\n        }\n      }\n\n      return resource;\n    }\n  }, {\n    key: 'has',\n    value: function has(target) {\n      return this[MAP_FIELD].has(target);\n    }\n  }, {\n    key: 'get',\n    value: function get(target) {\n      return this[MAP_FIELD].get(target);\n    }\n  }, {\n    key: 'remove',\n    value: function remove(value) {\n      var map = this[MAP_FIELD];\n      var resource = map.get(value);\n      if (resource) {\n        map.delete(resource.id);\n        map.delete(resource.value);\n        if (this.hasEventListener(ResourcePoolEvents.RESOURCE_REMOVED)) {\n          this.dispatchEvent(ResourcePoolEvents.RESOURCE_REMOVED, resource);\n        }\n        resource.destroy();\n      }\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      var map = this[MAP_FIELD];\n      if (this.hasEventListener(ResourcePoolEvents.POOL_CLEAR)) {\n        this.dispatchEvent(ResourcePoolEvents.POOL_CLEAR, this);\n      }\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = map[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _ref = _step.value;\n\n          var _ref2 = _slicedToArray(_ref, 2);\n\n          var key = _ref2[0];\n          var resource = _ref2[1];\n\n          if (typeof key === 'string' && key === resource.id) {\n            resource.destroy();\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      map.clear();\n\n      if (this.hasEventListener(ResourcePoolEvents.POOL_CLEARED)) {\n        this.dispatchEvent(ResourcePoolEvents.POOL_CLEARED, this);\n      }\n    }\n  }, {\n    key: 'isActive',\n    value: function isActive() {\n      return Boolean(this[MAP_FIELD]);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this.clear();\n      // intentionally make it not usable after its destroyed\n      delete this[MAP_FIELD];\n      if (this.hasEventListener(ResourcePoolEvents.POOL_DESTROYED)) {\n        // FIXME why for second parameter?\n        this.dispatchEvent(ResourcePoolEvents.POOL_DESTROYED, this);\n      }\n    }\n  }]);\n\n  return ResourcePool;\n}(__WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default.a);\n\nResourcePool.events = ResourcePoolEvents;\n\nvar DefaultResourcePool = function (_ResourcePool) {\n  _inherits(DefaultResourcePool, _ResourcePool);\n\n  function DefaultResourcePool() {\n    _classCallCheck(this, DefaultResourcePool);\n\n    return _possibleConstructorReturn(this, (DefaultResourcePool.__proto__ || Object.getPrototypeOf(DefaultResourcePool)).apply(this, arguments));\n  }\n\n  _createClass(DefaultResourcePool, [{\n    key: 'destroy',\n\n    // INFO default ResourcePool should not be destroyable;\n    value: function destroy() {\n      throw new Error('Default ResourcePool cannot be destroyed.');\n    }\n  }]);\n\n  return DefaultResourcePool;\n}(ResourcePool);\n\nvar defaultResourcePool = new DefaultResourcePool();\n\nvar createResourcePool = function createResourcePool() {\n  return new ResourcePool();\n};\n\nsetValidTargets(getDefaultValidTargets());\n\n/* harmony default export */ __webpack_exports__[\"c\"] = (ResourcePool);\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (message) {\n  return Promise.reject(new Error(message));\n});\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object.freeze({\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n  DESTROYED: 'destroyed'\n}));\n\n/***/ }),\n/* 10 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createDeferred; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Deferred = function Deferred() {\n  var _this = this;\n\n  _classCallCheck(this, Deferred);\n\n  this.promise = new Promise(function (resolve, reject) {\n    _this.resolve = resolve;\n    _this.reject = reject;\n  });\n};\n\nvar createDeferred = function createDeferred() {\n  return new Deferred();\n};\n/* harmony default export */ __webpack_exports__[\"b\"] = (Deferred);\n\n/***/ }),\n/* 11 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__getInternals__ = __webpack_require__(3);\n/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (target) {\n  var internals = Object(__WEBPACK_IMPORTED_MODULE_0__getInternals__[\"a\" /* default */])(target);\n  return internals ? internals.toJSON() : undefined;\n});\n\n/***/ }),\n/* 12 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createResource; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__request_target_getInternals__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_getId__ = __webpack_require__(13);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\nvar getPoolId = function getPoolId(pool) {\n  return pool ? pool.id : null;\n};\n\n/**\r\n * @exports Resource\r\n */\n\nvar Resource = function () {\n  function Resource(pool, value, type, id) {\n    var _this = this,\n        _Object$definePropert;\n\n    _classCallCheck(this, Resource);\n\n    this.toJSON = function () {\n      return _defineProperty({}, __WEBPACK_IMPORTED_MODULE_0__utils_TARGET_DATA__[\"a\" /* default */], {\n        $id: _this.id,\n        $type: _this.type,\n        $poolId: _this.poolId\n      });\n    };\n\n    Object.defineProperties(this, (_Object$definePropert = {}, _defineProperty(_Object$definePropert, __WEBPACK_IMPORTED_MODULE_1__utils_TARGET_INTERNALS__[\"a\" /* default */], {\n      value: {\n        pool: pool,\n        value: value,\n        type: type,\n        id: id,\n        active: true,\n        poolId: getPoolId(pool)\n      }\n    }), _defineProperty(_Object$definePropert, __WEBPACK_IMPORTED_MODULE_0__utils_TARGET_DATA__[\"a\" /* default */], {\n      get: this.toJSON\n    }), _Object$definePropert));\n  }\n\n  _createClass(Resource, [{\n    key: 'destroy',\n    value: function destroy() {\n      var internals = Object(__WEBPACK_IMPORTED_MODULE_2__request_target_getInternals__[\"a\" /* default */])(this);\n      var id = internals.id,\n          pool = internals.pool;\n\n\n      if (!internals.active) {\n        return;\n      }\n\n      internals.active = false;\n      pool.remove(id);\n\n      Object.keys(internals).map(function (name) {\n        return delete internals[name];\n      });\n    }\n  }, {\n    key: 'active',\n    get: function get() {\n      return Boolean(Object(__WEBPACK_IMPORTED_MODULE_2__request_target_getInternals__[\"a\" /* default */])(this).active);\n    }\n  }, {\n    key: 'value',\n    get: function get() {\n      return Object(__WEBPACK_IMPORTED_MODULE_2__request_target_getInternals__[\"a\" /* default */])(this).value;\n    }\n  }, {\n    key: 'type',\n    get: function get() {\n      return Object(__WEBPACK_IMPORTED_MODULE_2__request_target_getInternals__[\"a\" /* default */])(this).type || _typeof(Object(__WEBPACK_IMPORTED_MODULE_2__request_target_getInternals__[\"a\" /* default */])(this).value);\n    }\n  }, {\n    key: 'id',\n    get: function get() {\n      return Object(__WEBPACK_IMPORTED_MODULE_2__request_target_getInternals__[\"a\" /* default */])(this).id;\n    }\n  }, {\n    key: 'poolId',\n    get: function get() {\n      return Object(__WEBPACK_IMPORTED_MODULE_2__request_target_getInternals__[\"a\" /* default */])(this).poolId;\n    }\n  }]);\n\n  return Resource;\n}();\n\nvar createResource = function createResource(pool, value, resourceType) {\n  var id = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  return new Resource(pool, value, resourceType, id || Object(__WEBPACK_IMPORTED_MODULE_3__utils_getId__[\"a\" /* default */])());\n};\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (Resource);\n\n/***/ }),\n/* 13 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar base = \"DA/\" + Date.now() + \"/\";\nvar index = 0;\n/* harmony default export */ __webpack_exports__[\"a\"] = (function () {\n  return \"\" + base + ++index + \"/\" + Date.now();\n});\n\n/***/ }),\n/* 14 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__isResource__ = __webpack_require__(0);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (object) {\n  if (_typeof(object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]]) === 'object') {\n    return object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]].poolId;\n  } else if (Object(__WEBPACK_IMPORTED_MODULE_2__isResource__[\"a\" /* default */])(object)) {\n    return object[__WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__[\"a\" /* default */]].$poolId;\n  }\n  return null;\n});\n\n/***/ }),\n/* 15 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__isResource__ = __webpack_require__(0);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (object) {\n  // if (object instanceof Resource || object instanceof Target) {\n  if (_typeof(object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]]) === 'object') {\n    return object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]].id;\n  } else if (Object(__WEBPACK_IMPORTED_MODULE_2__isResource__[\"a\" /* default */])(object)) {\n    return object[__WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__[\"a\" /* default */]].$id;\n  }\n\n  return null;\n});\n\n/***/ }),\n/* 16 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export ProxyCommandNames */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ProxyCommandFields; });\n/* unused harmony export createDescriptors */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Descriptor__ = __webpack_require__(4);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar ProxyCommandNames = Object.freeze({\n  GET: 'get',\n  SET: 'set',\n  APPLY: 'apply',\n  DELETE_PROPERTY: 'deleteProperty'\n});\n\nvar ProxyCommandFields = Object.freeze({\n  get: Symbol('proxy.commands::get'),\n  set: Symbol('proxy.commands::set'),\n  apply: Symbol('proxy.commands::apply'),\n  deleteProperty: Symbol('proxy.commands::deleteProperty')\n});\n\nvar ProxyCommandsClass = function () {\n  function ProxyCommandsClass() {\n    _classCallCheck(this, ProxyCommandsClass);\n\n    this.names = ProxyCommandNames;\n    this.fields = ProxyCommandFields;\n    this.createGETDescriptor = Object(__WEBPACK_IMPORTED_MODULE_0__Descriptor__[\"d\" /* descriptorGeneratorFactory */])(ProxyCommandNames.GET, ProxyCommandFields.get);\n    this.createSETDescriptor = Object(__WEBPACK_IMPORTED_MODULE_0__Descriptor__[\"d\" /* descriptorGeneratorFactory */])(ProxyCommandNames.SET, ProxyCommandFields.set);\n    this.createAPPLYDescriptor = Object(__WEBPACK_IMPORTED_MODULE_0__Descriptor__[\"d\" /* descriptorGeneratorFactory */])(ProxyCommandNames.APPLY, ProxyCommandFields.apply);\n\n    Object.freeze(this);\n  }\n\n  _createClass(ProxyCommandsClass, [{\n    key: 'list',\n    get: function get() {\n      return [ProxyCommandNames.GET, ProxyCommandNames.SET, ProxyCommandNames.APPLY, ProxyCommandNames.DELETE_PROPERTY];\n    }\n  }, {\n    key: 'required',\n    get: function get() {\n      return [ProxyCommandNames.GET, ProxyCommandNames.SET, ProxyCommandNames.APPLY];\n    }\n  }]);\n\n  return ProxyCommandsClass;\n}();\n\nvar ProxyCommands = new ProxyCommandsClass();\n\nvar createDescriptors = function createDescriptors(handlers) {\n  var target = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var isTemporary = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n  var resourceType = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  var cacheable = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n  var virtual = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n\n  var args = [isTemporary, resourceType, cacheable, virtual];\n  ProxyCommands.list.forEach(function (name) {\n    var handler = handlers[name];\n    var field = ProxyCommandFields[name];\n\n    if (handler instanceof Function) {\n      var descriptor = __WEBPACK_IMPORTED_MODULE_0__Descriptor__[\"b\" /* createDescriptor */].apply(undefined, [name, handler, field].concat(args));\n      descriptor = Object.freeze(descriptor);\n\n      if (target instanceof Array) {\n        target.push(descriptor);\n      } else if (target) {\n        target[field] = descriptor;\n      }\n    }\n  });\n\n  return target;\n};\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (ProxyCommands);\n\n/***/ }),\n/* 17 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__isResource__ = __webpack_require__(0);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\n\n\n\nvar getResourceType = function getResourceType(object) {\n  if (_typeof(object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]]) === 'object') {\n    return object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]].type;\n  } else if (Object(__WEBPACK_IMPORTED_MODULE_2__isResource__[\"a\" /* default */])(object)) {\n    return object[__WEBPACK_IMPORTED_MODULE_1__TARGET_DATA__[\"a\" /* default */]].$type;\n  }\n\n  return null;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (getResourceType);\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var _typeof2 = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function webpackUniversalModuleDefinition(root, factory) {\n  if (( false ? 'undefined' : _typeof2(exports)) === 'object' && ( false ? 'undefined' : _typeof2(module)) === 'object') module.exports = factory();else if (true) !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));else if ((typeof exports === 'undefined' ? 'undefined' : _typeof2(exports)) === 'object') exports[\"EventDispatcher\"] = factory();else root[\"EventDispatcher\"] = factory();\n})(this, function () {\n  return (/******/function (modules) {\n      // webpackBootstrap\n      /******/ // The module cache\n      /******/var installedModules = {};\n      /******/\n      /******/ // The require function\n      /******/function __webpack_require__(moduleId) {\n        /******/\n        /******/ // Check if module is in cache\n        /******/if (installedModules[moduleId]) {\n          /******/return installedModules[moduleId].exports;\n          /******/\n        }\n        /******/ // Create a new module (and put it into the cache)\n        /******/var module = installedModules[moduleId] = {\n          /******/i: moduleId,\n          /******/l: false,\n          /******/exports: {}\n          /******/ };\n        /******/\n        /******/ // Execute the module function\n        /******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        /******/\n        /******/ // Flag the module as loaded\n        /******/module.l = true;\n        /******/\n        /******/ // Return the exports of the module\n        /******/return module.exports;\n        /******/\n      }\n      /******/\n      /******/\n      /******/ // expose the modules object (__webpack_modules__)\n      /******/__webpack_require__.m = modules;\n      /******/\n      /******/ // expose the module cache\n      /******/__webpack_require__.c = installedModules;\n      /******/\n      /******/ // define getter function for harmony exports\n      /******/__webpack_require__.d = function (exports, name, getter) {\n        /******/if (!__webpack_require__.o(exports, name)) {\n          /******/Object.defineProperty(exports, name, {\n            /******/configurable: false,\n            /******/enumerable: true,\n            /******/get: getter\n            /******/ });\n          /******/\n        }\n        /******/\n      };\n      /******/\n      /******/ // getDefaultExport function for compatibility with non-harmony modules\n      /******/__webpack_require__.n = function (module) {\n        /******/var getter = module && module.__esModule ?\n        /******/function getDefault() {\n          return module['default'];\n        } :\n        /******/function getModuleExports() {\n          return module;\n        };\n        /******/__webpack_require__.d(getter, 'a', getter);\n        /******/return getter;\n        /******/\n      };\n      /******/\n      /******/ // Object.prototype.hasOwnProperty.call\n      /******/__webpack_require__.o = function (object, property) {\n        return Object.prototype.hasOwnProperty.call(object, property);\n      };\n      /******/\n      /******/ // __webpack_public_path__\n      /******/__webpack_require__.p = \"http://localhost:8081/dist/\";\n      /******/\n      /******/ // Load entry module and return exports\n      /******/return __webpack_require__(__webpack_require__.s = 0);\n      /******/\n    }(\n    /************************************************************************/\n    /******/[\n    /* 0 */\n    /***/function (module, exports, __webpack_require__) {\n\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Event = undefined;\n\n      var _EventDispatcher = __webpack_require__(1);\n\n      var _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\n\n      function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : { default: obj };\n      }\n\n      exports.default = _EventDispatcher2.default;\n      exports.Event = _EventDispatcher.Event;\n\n      /***/\n    },\n    /* 1 */\n    /***/function (module, exports, __webpack_require__) {\n\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var _typeof = typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\" ? function (obj) {\n        return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);\n      } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);\n      };\n\n      var _createClass = function () {\n        function defineProperties(target, props) {\n          for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n          }\n        }return function (Constructor, protoProps, staticProps) {\n          if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n        };\n      }();\n\n      function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n          throw new TypeError(\"Cannot call a class as a function\");\n        }\n      }\n\n      var hasOwnProp = function hasOwnProp(target, name) {\n        return Object.prototype.hasOwnProperty.call(target, name);\n      }; /**\r\n          * Created by Oleg Galaburda on 09.02.16.\r\n          * \r\n          */\n\n      var Event = exports.Event = function () {\n        function Event(type) {\n          var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n          _classCallCheck(this, Event);\n\n          this.type = type;\n          this.data = data;\n          this.defaultPrevented = false;\n        }\n\n        _createClass(Event, [{\n          key: 'toJSON',\n          value: function toJSON() {\n            return { type: this.type, data: this.data };\n          }\n        }, {\n          key: 'isDefaultPrevented',\n          value: function isDefaultPrevented() {\n            return this.defaultPrevented;\n          }\n        }, {\n          key: 'preventDefault',\n          value: function preventDefault() {\n            this.defaultPrevented = true;\n          }\n        }]);\n\n        return Event;\n      }();\n\n      var ListenersRunner = function () {\n        function ListenersRunner(listeners, onStopped, onComplete) {\n          var _this = this;\n\n          _classCallCheck(this, ListenersRunner);\n\n          this.index = -1;\n          this.immediatelyStopped = false;\n\n          this.stopImmediatePropagation = function () {\n            _this.immediatelyStopped = true;\n          };\n\n          this.listeners = listeners;\n          this.onStopped = onStopped;\n          this.onComplete = onComplete;\n        }\n\n        _createClass(ListenersRunner, [{\n          key: 'run',\n          value: function run(event, target) {\n            var listener = void 0;\n            var listeners = this.listeners;\n\n            this.augmentEvent(event);\n            // TODO this has to be handled in separate object ListenersRunner that should be\n            // created for each call() call and asked for index validation on each listener remove.\n            for (this.index = 0; this.index < listeners.length; this.index++) {\n              if (this.immediatelyStopped) break;\n              listener = listeners[this.index];\n              listener.call(target, event);\n            }\n            this.clearEvent(event);\n            this.onComplete(this);\n          }\n        }, {\n          key: 'augmentEvent',\n          value: function augmentEvent(eventObject) {\n            var event = eventObject;\n            event.stopPropagation = this.onStopped;\n            event.stopImmediatePropagation = this.stopImmediatePropagation;\n          }\n\n          /* eslint class-methods-use-this: \"off\" */\n\n        }, {\n          key: 'clearEvent',\n          value: function clearEvent(eventObject) {\n            var event = eventObject;\n            delete event.stopPropagation;\n            delete event.stopImmediatePropagation;\n          }\n        }, {\n          key: 'listenerRemoved',\n          value: function listenerRemoved(listeners, index) {\n            if (listeners === this.listeners && index <= this.index) {\n              this.index--;\n            }\n          }\n        }]);\n\n        return ListenersRunner;\n      }();\n\n      var EventListeners = function () {\n        function EventListeners() {\n          var _this2 = this;\n\n          _classCallCheck(this, EventListeners);\n\n          this._listeners = {};\n          this._runners = [];\n\n          this.removeRunner = function (runner) {\n            _this2._runners.splice(_this2._runners.indexOf(runner), 1);\n          };\n        }\n        /**\r\n         * key - event Type\r\n         * value - hash of priorities\r\n         *    key - priority\r\n         *    value - list of handlers\r\n         * @type {Object<string, Object.<string, Array<number, Function>>>}\r\n         * @private\r\n         */\n\n        _createClass(EventListeners, [{\n          key: 'createList',\n          value: function createList(eventType, priorityOpt) {\n            var priority = parseInt(priorityOpt, 10);\n            var target = this.getPrioritiesByKey(eventType);\n            var key = String(priority);\n            var value = void 0;\n            if (hasOwnProp(target, key)) {\n              value = target[key];\n            } else {\n              value = [];\n              target[key] = value;\n            }\n            return value;\n          }\n        }, {\n          key: 'getPrioritiesByKey',\n          value: function getPrioritiesByKey(key) {\n            var value = void 0;\n            if (hasOwnProp(this._listeners, key)) {\n              value = this._listeners[key];\n            } else {\n              value = {};\n              this._listeners[key] = value;\n            }\n            return value;\n          }\n        }, {\n          key: 'add',\n          value: function add(eventType, handler, priority) {\n            var handlers = this.createList(eventType, priority);\n            if (handlers.indexOf(handler) < 0) {\n              handlers.push(handler);\n            }\n          }\n        }, {\n          key: 'has',\n          value: function has(eventType) {\n            var priority = void 0;\n            var result = false;\n            var priorities = this.getPrioritiesByKey(eventType);\n            if (priorities) {\n              for (priority in priorities) {\n                if (hasOwnProp(priorities, priority)) {\n                  result = true;\n                  break;\n                }\n              }\n            }\n            return result;\n          }\n        }, {\n          key: 'remove',\n          value: function remove(eventType, handler) {\n            var _this3 = this;\n\n            var priorities = this.getPrioritiesByKey(eventType);\n            if (priorities) {\n              var list = Object.getOwnPropertyNames(priorities);\n              var length = list.length;\n\n              var _loop = function _loop(index) {\n                var priority = list[index];\n                var handlers = priorities[priority];\n                var handlerIndex = handlers.indexOf(handler);\n                if (handlerIndex >= 0) {\n                  handlers.splice(handlerIndex, 1);\n                  if (!handlers.length) {\n                    delete priorities[priority];\n                  }\n                  _this3._runners.forEach(function (runner) {\n                    runner.listenerRemoved(handlers, handlerIndex);\n                  });\n                }\n              };\n\n              for (var index = 0; index < length; index++) {\n                _loop(index);\n              }\n            }\n          }\n        }, {\n          key: 'removeAll',\n          value: function removeAll(eventType) {\n            delete this._listeners[eventType];\n          }\n        }, {\n          key: 'createRunner',\n          value: function createRunner(handlers, onStopped) {\n            var runner = new ListenersRunner(handlers, onStopped, this.removeRunner);\n            this._runners.push(runner);\n            return runner;\n          }\n        }, {\n          key: 'call',\n          value: function call(event, target) {\n            var priorities = this.getPrioritiesByKey(event.type);\n            var stopped = false;\n            var stopPropagation = function stopPropagation() {\n              stopped = true;\n            };\n            if (priorities) {\n              // getOwnPropertyNames() or keys()?\n              var list = Object.getOwnPropertyNames(priorities).sort(function (a, b) {\n                return a - b;\n              });\n              var length = list.length;\n\n              for (var index = 0; index < length; index++) {\n                if (stopped) break;\n                var _handlers = priorities[list[index]];\n                // in case if all handlers of priority were removed while event\n                // was dispatched and handlers become undefined.\n                if (_handlers) {\n                  var _runner = this.createRunner(_handlers, stopPropagation);\n                  _runner.run(event, target);\n                  if (_runner.immediatelyStopped) break;\n                }\n              }\n            }\n          }\n        }]);\n\n        return EventListeners;\n      }();\n\n      var EventDispatcher = function () {\n        function EventDispatcher() {\n          var eventPreprocessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n          var noInit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n          _classCallCheck(this, EventDispatcher);\n\n          if (!noInit) {\n            this.initialize(eventPreprocessor);\n          }\n        }\n\n        /**\r\n         * @private\r\n         */\n\n        _createClass(EventDispatcher, [{\n          key: 'initialize',\n          value: function initialize() {\n            var eventPreprocessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n            this._eventPreprocessor = eventPreprocessor;\n            this._listeners = new EventListeners();\n          }\n        }, {\n          key: 'addEventListener',\n          value: function addEventListener(eventType, listener) {\n            var priority = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n            this._listeners.add(eventType, listener, -priority || 0);\n          }\n        }, {\n          key: 'hasEventListener',\n          value: function hasEventListener(eventType) {\n            return this._listeners.has(eventType);\n          }\n        }, {\n          key: 'removeEventListener',\n          value: function removeEventListener(eventType, listener) {\n            this._listeners.remove(eventType, listener);\n          }\n        }, {\n          key: 'removeAllEventListeners',\n          value: function removeAllEventListeners(eventType) {\n            this._listeners.removeAll(eventType);\n          }\n        }, {\n          key: 'dispatchEvent',\n          value: function dispatchEvent(event, data) {\n            var eventObject = EventDispatcher.getEvent(event, data);\n            if (this._eventPreprocessor) {\n              eventObject = this._eventPreprocessor.call(this, eventObject);\n            }\n            this._listeners.call(eventObject);\n          }\n        }], [{\n          key: 'isObject',\n          value: function isObject(value) {\n            return (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value !== null;\n          }\n        }, {\n          key: 'getEvent',\n          value: function getEvent(eventOrType, optionalData) {\n            var event = eventOrType;\n            if (!EventDispatcher.isObject(eventOrType)) {\n              event = new EventDispatcher.Event(String(eventOrType), optionalData);\n            }\n            return event;\n          }\n        }, {\n          key: 'create',\n          value: function create(eventPreprocessor) {\n            return new EventDispatcher(eventPreprocessor);\n          }\n\n          /* eslint no-undef: \"off\" */\n\n        }]);\n\n        return EventDispatcher;\n      }();\n\n      EventDispatcher.Event = Event;\n\n      exports.default = EventDispatcher;\n\n      /***/\n    }]\n    /******/)\n  );\n});\n//# sourceMappingURL=event-dispatcher.js.map\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(44)(module)))\n\n/***/ }),\n/* 19 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * Interface for all resource types, these will be treated as resources automatically\r\n * @interface\r\n */\nvar IConvertible = function IConvertible() {\n  _classCallCheck(this, IConvertible);\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (IConvertible);\n\n/***/ }),\n/* 20 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__IConvertible__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__isResource__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__request_target_toJSON__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__resource_ResourcePool__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__resource_Resource__ = __webpack_require__(12);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (object, pool) {\n  pool = pool || __WEBPACK_IMPORTED_MODULE_4__resource_ResourcePool__[\"d\" /* defaultResourcePool */];\n\n  if (object instanceof __WEBPACK_IMPORTED_MODULE_5__resource_Resource__[\"b\" /* default */]) {\n    return object.toJSON();\n  } else if (_typeof(object[__WEBPACK_IMPORTED_MODULE_0__TARGET_INTERNALS__[\"a\" /* default */]]) === 'object') {\n    return Object(__WEBPACK_IMPORTED_MODULE_3__request_target_toJSON__[\"a\" /* default */])(object);\n  } else if (object instanceof __WEBPACK_IMPORTED_MODULE_1__IConvertible__[\"a\" /* default */] || typeof object === 'function') {\n    return pool.set(object).toJSON();\n  } else if (Object(__WEBPACK_IMPORTED_MODULE_2__isResource__[\"a\" /* default */])(object)) {\n    return object;\n  }\n\n  return null;\n});\n\n/***/ }),\n/* 21 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * All arguments are required\r\n * @param command Command name, Descriptor's name\r\n * @param propertyName Property name, this is the name of the handler called against target object\r\n * @param args Arguments passed to handler\r\n * @param target JSON object representing resource or target, its raw value\r\n * @returns {{command: *, args: *, target: *}}\r\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (propertyName, command, args, target) {\n  return {\n    propertyName: propertyName,\n    command: command,\n    args: args,\n    target: target\n  };\n});\n\n/***/ }),\n/* 22 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return RequestCommandNames; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RequestCommandFields; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Descriptor__ = __webpack_require__(4);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar RequestCommandNames = Object.freeze({\n  DESTROY: '::destroy.resource'\n});\n\nvar RequestCommandFields = Object.freeze({\n  DESTROY: Symbol('::destroy.resource')\n});\n\n/**\r\n * Destroy is unique type that exists for every Target\r\n * and does not have a method on its instances. This type will\r\n * be send each time Target.destroy() is applied to\r\n * Target in stance.\r\n */\n\nvar RequestCommands = function RequestCommands() {\n  _classCallCheck(this, RequestCommands);\n\n  this.names = RequestCommandNames;\n  this.fields = RequestCommandFields;\n\n  this.createDESTROYDescriptor = function (handler, target) {\n    var descriptor = new __WEBPACK_IMPORTED_MODULE_0__Descriptor__[\"c\" /* default */](RequestCommandNames.DESTROY, handler, RequestCommandFields.DESTROY);\n    descriptor.cacheable = false;\n    descriptor.virtual = true;\n    Object(__WEBPACK_IMPORTED_MODULE_0__Descriptor__[\"a\" /* addDescriptorTo */])(descriptor, target);\n    return Object.freeze(descriptor);\n  };\n\n  Object.freeze(this);\n};\n\n/* harmony default export */ __webpack_exports__[\"c\"] = (new RequestCommands());\n\n/***/ }),\n/* 23 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Reserved words\r\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object.freeze({\n  /**\r\n   * Contains property names that cannot be used for Descriptor's\r\n   */\n  names: Object.freeze({\n    // INFO Exposed Promise method, cannot be overwritten by type\n    then: true,\n    // INFO Exposed Promise method, cannot be overwritten by type\n    catch: true\n  })\n}));\n\n/***/ }),\n/* 24 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return NO_INIT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return createRequestFactory; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Decorator__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Target__ = __webpack_require__(6);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar NO_INIT = {};\n\nvar Factory = function () {\n  /*\r\n   function DummyCacheImpl() {\r\n   this.get = function(name, pack) {\r\n     };\r\n   this.set = function(name, pack, request) {\r\n     };\r\n   }\r\n   */\n  function Factory(handlers) {\n    var cacheImpl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    _classCallCheck(this, Factory);\n\n    this.cache = cacheImpl;\n    this.handlers = handlers;\n\n    if (handlers !== NO_INIT) {\n      this.decorator = Object(__WEBPACK_IMPORTED_MODULE_0__Decorator__[\"a\" /* createDecorator */])(this, handlers);\n    }\n  }\n\n  _createClass(Factory, [{\n    key: 'create',\n    value: function create(promise) {\n      var pack = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var cacheable = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      var request = Object(__WEBPACK_IMPORTED_MODULE_1__Target__[\"a\" /* createRequestTarget */])(promise, this.handlers);\n      if (this.handlers.available) {\n        this.decorator.apply(request);\n      }\n\n      if (this.cache && cacheable) {\n        this.cache.set(pack, request);\n      }\n\n      return request;\n    }\n  }, {\n    key: 'getCached',\n    value: function getCached(pack) {\n      return this.cache && this.cache.get(pack);\n    }\n  }]);\n\n  return Factory;\n}();\n\nvar createRequestFactory = function createRequestFactory(handlers, cacheImpl) {\n  return new Factory(handlers, cacheImpl);\n};\n\n/* harmony default export */ __webpack_exports__[\"c\"] = (Factory);\n\n/***/ }),\n/* 25 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export ConverterEvents */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createResourceConverter; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_event_dispatcher__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_event_dispatcher__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_hasOwnProperty__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_getResourcePoolId__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_getResourceId__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_isResource__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_isResourceConvertible__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils_getRawResource__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__request_target_isPending__ = __webpack_require__(46);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\nvar ConverterEvents = Object.freeze({\n  RESOURCE_CREATED: 'resourceCreated',\n  RESOURCE_CONVERTED: 'resourceConverted'\n});\n\n/**\r\n * Resource converter contains bunch of methods to lookup for resources\r\n * and registering them, converting them into RAWResource or into\r\n * Targets, depending on their origin.\r\n * Before sending data, bundled resources should be registered in ResourcePool\r\n * and then converted to RAWResource objects.\r\n * After data received, its RAWResources should be converted to Targets\r\n * for not resolved resources or to resource target values otherwise.\r\n * Resource can be resolved by its `id` and `poolId`, if Converter\r\n * can find ResourcePool with id from poolId, it will try to get target\r\n * resource value and replace with it RAWResource object.\r\n * If ResourcePool not found, Converter assumes that resource come from\r\n * other origin/environment and creates Target object that can be target\r\n * object for commands.\r\n * Converter while handling data does not look deeply, so its developer\r\n * responsibility to convert deeply nested resource targets.\r\n */\n\nvar Converter = function (_EventDispatcher) {\n  _inherits(Converter, _EventDispatcher);\n\n  function Converter(factory, registry, pool) {\n    var handlers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n    _classCallCheck(this, Converter);\n\n    var _this = _possibleConstructorReturn(this, (Converter.__proto__ || Object.getPrototypeOf(Converter)).call(this));\n\n    _this.factory = factory;\n    _this.pool = pool;\n    _this.registry = registry;\n\n    if (handlers) {\n      handlers.setConverter(_this);\n    }\n    return _this;\n  }\n\n  _createClass(Converter, [{\n    key: 'resourceToObject',\n    value: function resourceToObject(data) {\n      var result = void 0;\n\n      if (Object(__WEBPACK_IMPORTED_MODULE_5__utils_isResourceConvertible__[\"a\" /* default */])(data)) {\n        result = Object(__WEBPACK_IMPORTED_MODULE_6__utils_getRawResource__[\"a\" /* default */])(data, this.pool);\n      } else if (typeof data.toJSON === 'function') {\n        result = data.toJSON();\n      } else {\n        return data;\n      }\n\n      if (this.hasEventListener(ConverterEvents.RESOURCE_CONVERTED)) {\n        this.dispatchEvent(ConverterEvents.RESOURCE_CONVERTED, {\n          data: data,\n          result: result\n        });\n      }\n\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#objectToResource\r\n     * @param {*} data\r\n     * @returns {*}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'objectToResource',\n    value: function objectToResource(data) {\n      var result = data;\n\n      if (Object(__WEBPACK_IMPORTED_MODULE_4__utils_isResource__[\"a\" /* default */])(data)) {\n        var poolId = Object(__WEBPACK_IMPORTED_MODULE_2__utils_getResourcePoolId__[\"a\" /* default */])(data);\n\n        if (this.registry.isRegistered(poolId)) {\n          // target object is stored in current pool\n          var target = this.registry.get(poolId).get(Object(__WEBPACK_IMPORTED_MODULE_3__utils_getResourceId__[\"a\" /* default */])(data));\n\n          if (target) {\n            result = target.value;\n          }\n        } else {\n          // target object has another origin, should be wrapped\n          result = this.factory.create(Promise.resolve(data));\n        }\n      }\n\n      if (result !== data && this.hasEventListener(ConverterEvents.RESOURCE_CREATED)) {\n        this.dispatchEvent(ConverterEvents.RESOURCE_CREATED, {\n          data: data,\n          result: result\n        });\n      }\n\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#lookupArray\r\n     * @param list\r\n     * @param linkConvertHandler\r\n     * @returns {Array}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'lookupArray',\n    value: function lookupArray(list, linkConvertHandler) {\n      var _this2 = this;\n\n      return list.map(function (item) {\n        return linkConvertHandler.call(_this2, item);\n      });\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#lookupObject\r\n     * @param {*} data\r\n     * @param {Function} linkConvertHandler\r\n     * @returns {*}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'lookupObject',\n    value: function lookupObject(data, linkConvertHandler) {\n      var _this3 = this;\n\n      return Object.getOwnPropertyNames(data).reduce(function (result, name) {\n        if (Object(__WEBPACK_IMPORTED_MODULE_1__utils_hasOwnProperty__[\"a\" /* default */])(data, name)) {\n          result[name] = linkConvertHandler.call(_this3, data[name]);\n        }\n\n        return result;\n      }, {});\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#toJSON\r\n     * @param {*} data\r\n     * @returns {*}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON(data) {\n      var result = data;\n\n      if (data !== undefined && data !== null) {\n        if (Object(__WEBPACK_IMPORTED_MODULE_5__utils_isResourceConvertible__[\"a\" /* default */])(data)) {\n          // if data is Target, Resource, IConvertible, Function or RAW resource data\n          result = this.resourceToObject(data);\n        } else if (data instanceof Array) {\n          // if data is Array of values, check its\n          result = this.lookupArray(data, this.resourceToObject);\n        } else if (data.constructor === Object) {\n          // only Object instances can be looked up, other object types must be converted by hand\n          result = this.lookupObject(data, this.resourceToObject);\n        }\n      }\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#parse\r\n     * @param {*} data\r\n     * @returns {*}\r\n     * @private\r\n     */\n\n  }, {\n    key: 'parse',\n    value: function parse(data) {\n      var result = data;\n\n      if (data !== undefined && data !== null) {\n        if (Object(__WEBPACK_IMPORTED_MODULE_4__utils_isResource__[\"a\" /* default */])(data)) {\n          // if data is RAW resource data\n          result = this.objectToResource(data);\n        } else if (data instanceof Array) {\n          // if data is Array of values, check its\n          result = this.lookupArray(data, this.objectToResource);\n        } else if (data.constructor === Object) {\n          result = this.lookupObject(data, this.objectToResource);\n        }\n      }\n\n      return result;\n    }\n\n    /**\r\n     * @method DataAccessInterface.ResourceConverter#lookupForPending\r\n     * @param {*} data\r\n     * @returns {Array}\r\n     */\n    // FIXME for now data is always array\n\n  }, {\n    key: 'lookupForPending',\n    value: function lookupForPending(data) {\n      var result = [];\n\n      var add = function add(value) {\n        if (Object(__WEBPACK_IMPORTED_MODULE_7__request_target_isPending__[\"a\" /* default */])(value)) {\n          result.push(value);\n        }\n        return value;\n      };\n\n      if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) === 'object' && data !== null) {\n        if (Object(__WEBPACK_IMPORTED_MODULE_7__request_target_isPending__[\"a\" /* default */])(data)) {\n          result.push(data);\n        } else if (data instanceof Array) {\n          this.lookupArray(data, add);\n        } else if (data.constructor === Object) {\n          this.lookupObject(data, add);\n        }\n      }\n      return result;\n    }\n  }]);\n\n  return Converter;\n}(__WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default.a);\n\n/**\r\n * @param {RequestFactory} factory\r\n * @param {DataAccessInterface.ResourcePoolRegistry} registry\r\n * @param {DataAccessInterface.ResourcePool} pool\r\n * @param {Handlers} handlers\r\n * @returns {ResourceConverter}\r\n */\n\n\nConverter.events = ConverterEvents;\nvar createResourceConverter = function createResourceConverter(factory, registry, pool, handlers) {\n  return new Converter(factory, registry, pool, handlers);\n};\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (Converter);\n\n/***/ }),\n/* 26 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__isResource__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__IConvertible__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__request_Target__ = __webpack_require__(6);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (data) {\n  return Object(__WEBPACK_IMPORTED_MODULE_0__isResource__[\"a\" /* default */])(data) || data instanceof __WEBPACK_IMPORTED_MODULE_2__request_Target__[\"b\" /* default */] || typeof data === 'function' || data instanceof __WEBPACK_IMPORTED_MODULE_1__IConvertible__[\"a\" /* default */];\n});\n\n/***/ }),\n/* 27 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export PoolRegistryEvents */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createPoolRegistry; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_event_dispatcher__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_event_dispatcher__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_hasOwnProperty__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ResourcePool__ = __webpack_require__(7);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\nvar PoolRegistryEvents = Object.freeze({\n  RESOURCE_POOL_CREATED: 'resourcePoolCreated',\n  RESOURCE_POOL_REGISTERED: 'resourcePoolRegistered',\n  RESOURCE_POOL_REMOVED: 'resourcePoolRemoved'\n});\n\nvar POOLS_FIELD = Symbol('resource.pool.registry::pools');\n\n/**\r\n * @classdesc Collection of ResourcePool instances. Allows lookup for ResourcePool by its Id.\r\n * When ResourcePool is registered in PoolRegistry, it subscribes to\r\n * ResourcePool POOL_DESTROYED event and removes pool from registry after its destroyed.\r\n */\n\nvar PoolRegistry = function (_EventDispatcher) {\n  _inherits(PoolRegistry, _EventDispatcher);\n\n  function PoolRegistry() {\n    _classCallCheck(this, PoolRegistry);\n\n    var _this = _possibleConstructorReturn(this, (PoolRegistry.__proto__ || Object.getPrototypeOf(PoolRegistry)).call(this));\n\n    _this.handlePoolDestroyed = function (event) {\n      _this.remove(event.data);\n    };\n\n    _this[POOLS_FIELD] = {};\n\n    // every registry should keep default pool, so you can have access from anywhere\n    _this.register(__WEBPACK_IMPORTED_MODULE_2__ResourcePool__[\"d\" /* defaultResourcePool */]);\n    return _this;\n  }\n\n  _createClass(PoolRegistry, [{\n    key: 'createPool',\n\n\n    /**\r\n     * Create and register ResourcePool\r\n     * @returns {DataAccessInterface.ResourcePool} New ResourcePool instance\r\n     */\n    value: function createPool() {\n      var pool = Object(__WEBPACK_IMPORTED_MODULE_2__ResourcePool__[\"b\" /* createResourcePool */])();\n      if (this.hasEventListener(PoolRegistryEvents.RESOURCE_POOL_CREATED)) {\n        this.dispatchEvent(PoolRegistryEvents.RESOURCE_POOL_CREATED, pool);\n      }\n      this.register(pool);\n      return pool;\n    }\n\n    /**\r\n     * Register ResourcePool instance.\r\n     * @param pool {DataAccessInterface.ResourcePool} ResourcePool instance to be registered\r\n     */\n\n  }, {\n    key: 'register',\n    value: function register(pool) {\n      if (Object(__WEBPACK_IMPORTED_MODULE_1__utils_hasOwnProperty__[\"a\" /* default */])(this[POOLS_FIELD], pool.id)) return;\n      this[POOLS_FIELD][pool.id] = pool;\n      pool.addEventListener(__WEBPACK_IMPORTED_MODULE_2__ResourcePool__[\"a\" /* ResourcePoolEvents */].POOL_DESTROYED, this.handlePoolDestroyed);\n      if (this.hasEventListener(PoolRegistryEvents.RESOURCE_POOL_REGISTERED)) {\n        this.dispatchEvent(PoolRegistryEvents.RESOURCE_POOL_REGISTERED, pool);\n      }\n    }\n\n    /**\r\n     * Retrieve ResourcePool instance from registry by its Id.\r\n     * @param poolId {String} ResourcePool instance Id\r\n     * @returns {DataAccessInterface.ResourcePool|null}\r\n     */\n\n  }, {\n    key: 'get',\n    value: function get(poolId) {\n      return this[POOLS_FIELD][poolId] || null;\n    }\n\n    /**\r\n     * Check if ResourcePool registered in this registry instance.\r\n     * @param pool {DataAccessInterface.ResourcePool|String} ResourcePool instance or its Id.\r\n     * @returns {Boolean}\r\n     */\n\n  }, {\n    key: 'isRegistered',\n    value: function isRegistered(pool) {\n      return Object(__WEBPACK_IMPORTED_MODULE_1__utils_hasOwnProperty__[\"a\" /* default */])(this[POOLS_FIELD], pool instanceof __WEBPACK_IMPORTED_MODULE_2__ResourcePool__[\"c\" /* default */] ? pool.id : String(pool));\n    }\n\n    /**\r\n     * Remove ResourcePool from current registry instance.\r\n     * @param pool {DataAccessInterface.ResourcePool|String} ResourcePool instance or its Id.\r\n     * @returns {Boolean}\r\n     */\n\n  }, {\n    key: 'remove',\n    value: function remove(pool) {\n      var result = false;\n      pool = pool instanceof __WEBPACK_IMPORTED_MODULE_2__ResourcePool__[\"c\" /* default */] ? pool : this.get(pool);\n      if (pool) {\n        pool.removeEventListener(__WEBPACK_IMPORTED_MODULE_2__ResourcePool__[\"a\" /* ResourcePoolEvents */].POOL_DESTROYED, this.handlePoolDestroyed);\n        result = delete this[POOLS_FIELD][pool.id];\n      }\n      if (this.hasEventListener(PoolRegistryEvents.RESOURCE_POOL_REMOVED)) {\n        this.dispatchEvent(PoolRegistryEvents.RESOURCE_POOL_REMOVED, pool);\n      }\n      return result;\n    }\n  }]);\n\n  return PoolRegistry;\n}(__WEBPACK_IMPORTED_MODULE_0_event_dispatcher___default.a);\n\nPoolRegistry.events = PoolRegistryEvents;\n\n\nvar createPoolRegistry = function createPoolRegistry() {\n  return new PoolRegistry();\n};\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (PoolRegistry);\n\n/***/ }),\n/* 28 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__DataAccessInterface__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_Deferred__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__command_Descriptor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__command_Reserved__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__command_internal_RequestCommands__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__command_internal_ProxyCommands__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__request_Target__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__resource_ResourcePool__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__resource_PoolRegistry__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__resource_Converter__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__utils_IConvertible__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__utils_isResourceConvertible__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__utils_getRawResource__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__utils_getResourceData__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__utils_getResourceId__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__utils_getResourcePoolId__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__utils_getResourceType__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__utils_isResource__ = __webpack_require__(0);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"create\", function() { return __WEBPACK_IMPORTED_MODULE_0__DataAccessInterface__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"dummy\", function() { return __WEBPACK_IMPORTED_MODULE_0__DataAccessInterface__[\"dummy\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"createDeferred\", function() { return __WEBPACK_IMPORTED_MODULE_1__utils_Deferred__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Deferred\", function() { return __WEBPACK_IMPORTED_MODULE_1__utils_Deferred__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Descriptor\", function() { return __WEBPACK_IMPORTED_MODULE_2__command_Descriptor__[\"c\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Reserved\", function() { return __WEBPACK_IMPORTED_MODULE_3__command_Reserved__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"RequestCommands\", function() { return __WEBPACK_IMPORTED_MODULE_4__command_internal_RequestCommands__[\"c\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"ProxyCommands\", function() { return __WEBPACK_IMPORTED_MODULE_5__command_internal_ProxyCommands__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Target\", function() { return __WEBPACK_IMPORTED_MODULE_6__request_Target__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"ResourcePool\", function() { return __WEBPACK_IMPORTED_MODULE_7__resource_ResourcePool__[\"c\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"PoolRegistry\", function() { return __WEBPACK_IMPORTED_MODULE_8__resource_PoolRegistry__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Converter\", function() { return __WEBPACK_IMPORTED_MODULE_9__resource_Converter__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"IConvertible\", function() { return __WEBPACK_IMPORTED_MODULE_10__utils_IConvertible__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"isResourceConvertible\", function() { return __WEBPACK_IMPORTED_MODULE_11__utils_isResourceConvertible__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"getRawResource\", function() { return __WEBPACK_IMPORTED_MODULE_12__utils_getRawResource__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"getResourceData\", function() { return __WEBPACK_IMPORTED_MODULE_13__utils_getResourceData__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"getResourceId\", function() { return __WEBPACK_IMPORTED_MODULE_14__utils_getResourceId__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"getResourcePoolId\", function() { return __WEBPACK_IMPORTED_MODULE_15__utils_getResourcePoolId__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"getResourceType\", function() { return __WEBPACK_IMPORTED_MODULE_16__utils_getResourceType__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"isResource\", function() { return __WEBPACK_IMPORTED_MODULE_17__utils_isResource__[\"a\"]; });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (__WEBPACK_IMPORTED_MODULE_0__DataAccessInterface__[\"b\" /* default */]);\n\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return create; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_areProxiesAvailable__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_isResource__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_getResourcePoolId__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_getResourceId__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_createForeignResource__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__request_Handlers__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__request_ProxyFactory__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__request_Factory__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__resource_ResourcePool__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__resource_Converter__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__resource_PoolRegistry__ = __webpack_require__(27);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * @exports DataAccessInterface\r\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar DataAccessInterface = function () {\n\n  /**\r\n   * @class DataAccessInterface\r\n   * @classdesc Facade of Deferred Data Access library, it holds all\r\n   * of public API -- objects like ResourcePool and methods to work\r\n   * with resources.\r\n   * @param {Descriptor[]|Object.<string, Function|Descriptor>} descriptors\r\n   * @param {boolean} [proxyEnabled=false]\r\n   * @param {ResourcePoolRegistry} [poolRegistry]\r\n   * @param {ResourcePool} [pool]\r\n   * @param {ICacheImpl} [cacheImpl]\r\n   */\n  function DataAccessInterface(descriptors) {\n    var proxyEnabled = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var poolRegistry = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var pool = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    var cacheImpl = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n\n    _classCallCheck(this, DataAccessInterface);\n\n    this.poolRegistry = poolRegistry;\n    this.pool = pool;\n    this.cache = cacheImpl;\n    this.initialize(descriptors, proxyEnabled);\n  }\n\n  _createClass(DataAccessInterface, [{\n    key: 'initialize',\n    value: function initialize(descriptors, proxyEnabled) {\n      var _this = this;\n\n      if (proxyEnabled && !Object(__WEBPACK_IMPORTED_MODULE_0__utils_areProxiesAvailable__[\"a\" /* default */])()) {\n        throw new Error('Proxies are not available in this environment');\n      }\n\n      this.handlers = Object(__WEBPACK_IMPORTED_MODULE_5__request_Handlers__[\"a\" /* createHandlers */])(proxyEnabled);\n\n      if (proxyEnabled) {\n        this.factory = Object(__WEBPACK_IMPORTED_MODULE_6__request_ProxyFactory__[\"a\" /* createProxyFactory */])(this.handlers, this.cache);\n      } else {\n        this.factory = Object(__WEBPACK_IMPORTED_MODULE_7__request_Factory__[\"b\" /* createRequestFactory */])(this.handlers, this.cache);\n      }\n\n      if (!this.poolRegistry) {\n        this.poolRegistry = Object(__WEBPACK_IMPORTED_MODULE_10__resource_PoolRegistry__[\"a\" /* createPoolRegistry */])();\n      }\n\n      if (this.pool) {\n        this.poolRegistry.register(this.pool);\n      } else if (this.pool !== undefined) {\n        this.pool = this.poolRegistry.createPool();\n      } else {\n        this.pool = __WEBPACK_IMPORTED_MODULE_8__resource_ResourcePool__[\"d\" /* defaultResourcePool */];\n      }\n\n      this.resourceConverter = Object(__WEBPACK_IMPORTED_MODULE_9__resource_Converter__[\"a\" /* createResourceConverter */])(this.factory, this.poolRegistry, this.pool, this.handlers);\n\n      var poolDestroyedHandler = function poolDestroyedHandler() {\n        _this.pool.removeEventListener(__WEBPACK_IMPORTED_MODULE_8__resource_ResourcePool__[\"a\" /* ResourcePoolEvents */].POOL_DESTROYED, poolDestroyedHandler);\n        _this.pool = _this.poolRegistry.createPool();\n        _this.pool.addEventListener(__WEBPACK_IMPORTED_MODULE_8__resource_ResourcePool__[\"a\" /* ResourcePoolEvents */].POOL_DESTROYED, poolDestroyedHandler);\n      };\n\n      this.handlers.setCommands(descriptors);\n      this.pool.addEventListener(__WEBPACK_IMPORTED_MODULE_8__resource_ResourcePool__[\"a\" /* ResourcePoolEvents */].POOL_DESTROYED, poolDestroyedHandler);\n    }\n  }, {\n    key: 'send',\n    value: function send(command, args) {\n      var target = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      return;\n    }\n  }, {\n    key: 'parse',\n    value: function parse(data) {\n      return this.resourceConverter.parse(data);\n    }\n  }, {\n    key: 'dummy',\n    value: function dummy() {\n      return this.parse(Object(__WEBPACK_IMPORTED_MODULE_4__utils_createForeignResource__[\"a\" /* default */])());\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON(data) {\n      return this.resourceConverter.toJSON(data);\n    }\n  }, {\n    key: 'isOwnResource',\n    value: function isOwnResource(resource) {\n      /**\r\n       * @type {DataAccessInterface.ResourcePool}\r\n       */\n      var pool = void 0;\n      if (Object(__WEBPACK_IMPORTED_MODULE_1__utils_isResource__[\"a\" /* default */])(resource)) {\n        pool = this.poolRegistry.get(Object(__WEBPACK_IMPORTED_MODULE_2__utils_getResourcePoolId__[\"a\" /* default */])(resource));\n        return pool && pool.has(Object(__WEBPACK_IMPORTED_MODULE_3__utils_getResourceId__[\"a\" /* default */])(resource));\n      }\n      return false;\n    }\n  }, {\n    key: 'proxyEnabled',\n    get: function get() {\n      return this.handlers.proxyEnabled;\n    }\n  }]);\n\n  return DataAccessInterface;\n}();\n\nvar create = function create(handlers) {\n  var proxyEnabled = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var poolRegistry = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var pool = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  var cacheImpl = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n  return new DataAccessInterface(handlers, proxyEnabled, poolRegistry, pool, cacheImpl);\n};\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (DataAccessInterface);\n\n/***/ }),\n/* 30 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (function () {\n  return typeof Proxy === 'function';\n});\n\n/***/ }),\n/* 31 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_reject__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_createRequestPackage__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__command_internal_RequestCommands__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__SubTargets__ = __webpack_require__(32);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\nvar Internals = function (_SubTargets) {\n  _inherits(Internals, _SubTargets);\n\n  function Internals(target, promise, handlers) {\n    _classCallCheck(this, Internals);\n\n    var _this = _possibleConstructorReturn(this, (Internals.__proto__ || Object.getPrototypeOf(Internals)).call(this));\n\n    _this.handlePromiseResolve = function (value) {\n      var result = { target: _this.target, value: value };\n      _this.data = value;\n      _this.status = __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].RESOLVED;\n      if (_this.isResource()) {\n        /*\r\n         INFO Sending \"this\" as result of resolve() handler, causes infinite\r\n         loop of this.then(), so I've used wrapper object\r\n        */\n        result.value = _this.target;\n      }\n\n      _this.parentResolved();\n\n      // FIXME isTemporary() was not called yet, as solution can move destruction out\n      if (_this.temporary) {\n        _this.destroy();\n      }\n\n      return result;\n    };\n\n    _this.handlePromiseReject = function (value) {\n      _this.status = __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].REJECTED;\n      _this.parentRejected('Target of the call was rejected and call cannot be sent.');\n      return Promise.reject(value);\n    };\n\n    _this.handlers = handlers;\n    _this.target = target;\n    // INFO this should be not initialized i.e. keep it undefined, this will be checked later\n    _this.data = undefined;\n    _this.temporary = undefined;\n    _this.hadChildPromises = false;\n    _this.status = __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].PENDING;\n    _this.promise = promise.then(_this.handlePromiseResolve).catch(_this.handlePromiseReject);\n    _this.setParent(_this);\n    return _this;\n  }\n\n  _createClass(Internals, [{\n    key: 'isResource',\n    value: function isResource() {\n      if (_typeof(this.data) === 'object' && this.data[__WEBPACK_IMPORTED_MODULE_2__utils_TARGET_DATA__[\"a\" /* default */]]) {\n        var data = this.data[__WEBPACK_IMPORTED_MODULE_2__utils_TARGET_DATA__[\"a\" /* default */]];\n        return Boolean(data.$poolId && data.$id);\n      }\n\n      return false;\n    }\n  }, {\n    key: 'isActive',\n    value: function isActive() {\n      return this.status === __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].PENDING || this.status === __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].RESOLVED;\n    }\n  }, {\n    key: 'canBeDestroyed',\n    value: function canBeDestroyed() {\n      return this.status === __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].RESOLVED || this.status === __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].REJECTED;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      var promise = null;\n      if (this.canBeDestroyed()) {\n        // INFO I should not clear children list, since they are pending and requests already sent.\n        if (this.status === __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].RESOLVED) {\n          promise = this.send(__WEBPACK_IMPORTED_MODULE_4__command_internal_RequestCommands__[\"a\" /* RequestCommandFields */].DESTROY, Object(__WEBPACK_IMPORTED_MODULE_3__utils_createRequestPackage__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_4__command_internal_RequestCommands__[\"b\" /* RequestCommandNames */].DESTROY, [], this.toJSON()));\n        } else {\n          promise = Promise.resolve();\n        }\n        this.status = __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].DESTROYED;\n      } else {\n        promise = Object(__WEBPACK_IMPORTED_MODULE_0__utils_reject__[\"a\" /* default */])('Invalid or already destroyed target.');\n      }\n\n      return promise;\n    }\n  }, {\n    key: 'then',\n    value: function then(handleResolve, handleReject) {\n      var child = this.promise.then(handleResolve, handleReject);\n      this.hadChildPromises = true;\n      return child;\n    }\n  }, {\n    key: 'catch',\n    value: function _catch(handleReject) {\n      var child = this.promise.catch(handleReject);\n      this.hadChildPromises = true;\n      return child;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.data;\n    }\n  }, {\n    key: 'poolId',\n    get: function get() {\n      return this.isResource() ? this.data[__WEBPACK_IMPORTED_MODULE_2__utils_TARGET_DATA__[\"a\" /* default */]].$poolId : null;\n    }\n  }, {\n    key: 'type',\n    get: function get() {\n      return this.isResource() ? this.data[__WEBPACK_IMPORTED_MODULE_2__utils_TARGET_DATA__[\"a\" /* default */]].$type : null;\n    }\n  }, {\n    key: 'id',\n    get: function get() {\n      return this.isResource() ? this.data[__WEBPACK_IMPORTED_MODULE_2__utils_TARGET_DATA__[\"a\" /* default */]].$id : null;\n    }\n  }]);\n\n  return Internals;\n}(__WEBPACK_IMPORTED_MODULE_5__SubTargets__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Internals);\n\n/***/ }),\n/* 32 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_reject__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_Deferred__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_TargetStatus__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Queue__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__Children__ = __webpack_require__(34);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\nvar SubTargets = function (_Children) {\n  _inherits(SubTargets, _Children);\n\n  function SubTargets() {\n    var parent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var children = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    _classCallCheck(this, SubTargets);\n\n    var _this = _possibleConstructorReturn(this, (SubTargets.__proto__ || Object.getPrototypeOf(SubTargets)).call(this, children));\n\n    _this.handleSubRequest = function (pack, child) {\n      var _this$parent = _this.parent,\n          handlers = _this$parent.handlers,\n          target = _this$parent.target;\n\n      return handlers.handle(target, pack, child);\n    };\n\n    _this.queue = null;\n    _this.setParent(parent);\n    return _this;\n  }\n\n  _createClass(SubTargets, [{\n    key: 'setParent',\n    value: function setParent(parent) {\n      this.parent = parent;\n    }\n  }, {\n    key: 'parentResolved',\n    value: function parentResolved() {\n      if (this.hasQueue()) {\n        this.queue.send(this.parent, this.handleSubRequest);\n        this.queue = null;\n      }\n    }\n  }, {\n    key: 'parentRejected',\n    value: function parentRejected() {\n      var message = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      this.queue.reject(new Error(message || 'This request was rejected before sending.'));\n      this.queue = null;\n    }\n  }, {\n    key: 'hasQueue',\n    value: function hasQueue() {\n      return Boolean(this.queue && this.queue.length);\n    }\n  }, {\n    key: 'send',\n    value: function send(pack) {\n      var child = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var propertyName = pack.propertyName;\n      var handlers = this.parent.handlers;\n\n      var promise = void 0;\n\n      if (!handlers.hasCommand(propertyName)) {\n        return Object(__WEBPACK_IMPORTED_MODULE_0__utils_reject__[\"a\" /* default */])('Request handler for \"' + propertyName + '\" is not registered.');\n      }\n\n      promise = this.handleSend(pack, child);\n\n      if (child) {\n        promise = this.register(child);\n      }\n\n      return promise;\n    }\n  }, {\n    key: 'handleSend',\n    value: function handleSend(pack) {\n      var child = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var status = this.parent.status;\n\n\n      switch (status) {\n        case __WEBPACK_IMPORTED_MODULE_2__utils_TargetStatus__[\"a\" /* default */].PENDING:\n          if (!this.queue) {\n            this.queue = Object(__WEBPACK_IMPORTED_MODULE_3__Queue__[\"a\" /* createQueue */])();\n          }\n\n          return this.queue.add(pack, child);\n        case __WEBPACK_IMPORTED_MODULE_2__utils_TargetStatus__[\"a\" /* default */].REJECTED:\n          return Object(__WEBPACK_IMPORTED_MODULE_0__utils_reject__[\"a\" /* default */])('Target object was rejected and cannot be used for calls.');\n        case __WEBPACK_IMPORTED_MODULE_2__utils_TargetStatus__[\"a\" /* default */].DESTROYED:\n          return Object(__WEBPACK_IMPORTED_MODULE_0__utils_reject__[\"a\" /* default */])('Target object was destroyed and cannot be used for calls.');\n        case __WEBPACK_IMPORTED_MODULE_2__utils_TargetStatus__[\"a\" /* default */].RESOLVED:\n          return this.handleSubRequest(pack, child);\n        default:\n          return Object(__WEBPACK_IMPORTED_MODULE_0__utils_reject__[\"a\" /* default */])('Target object is in unknown status \"' + status + '\".');\n      }\n    }\n  }]);\n\n  return SubTargets;\n}(__WEBPACK_IMPORTED_MODULE_4__Children__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (SubTargets);\n\n/***/ }),\n/* 33 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createQueue; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_Deferred__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__toJSON__ = __webpack_require__(11);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar Queue = function () {\n  function Queue() {\n    var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    _classCallCheck(this, Queue);\n\n    this.list = list;\n  }\n\n  _createClass(Queue, [{\n    key: 'add',\n    value: function add(pack, child) {\n      var deferred = Object(__WEBPACK_IMPORTED_MODULE_0__utils_Deferred__[\"a\" /* createDeferred */])();\n      this.list.push({\n        pack: pack,\n        deferred: deferred,\n        child: child\n      });\n\n      return deferred.promise;\n    }\n  }, {\n    key: 'getList',\n    value: function getList() {\n      return [].concat(_toConsumableArray(this.list));\n    }\n  }, {\n    key: 'getCommands',\n    value: function getCommands() {\n      // return this.list.map(([name, pack]) => pack.type);\n      return this.list.map(function (_ref) {\n        var propertyName = _ref.pack.propertyName;\n        return propertyName;\n      });\n    }\n  }, {\n    key: 'send',\n    value: function send(target, callback) {\n      // target reset is needed because, when request was made, target probably was in\n      // pending mode and may be didn't have proper data\n      var targetJSON = Object(__WEBPACK_IMPORTED_MODULE_1__toJSON__[\"a\" /* default */])(target);\n      this.list.forEach(function (_ref2) {\n        var pack = _ref2.pack,\n            deferred = _ref2.deferred,\n            child = _ref2.child;\n\n        pack.target = targetJSON;\n        deferred.resolve(callback(pack, child));\n      });\n      this.list = [];\n    }\n  }, {\n    key: 'reject',\n    value: function reject(message) {\n      var error = new Error(message || 'This request was rejected before sending.');\n      this.list.forEach(function (_ref3) {\n        var deferred = _ref3.deferred;\n        return deferred.reject(error);\n      });\n      this.list = [];\n    }\n  }, {\n    key: 'length',\n    get: function get() {\n      return this.list.length;\n    }\n  }]);\n\n  return Queue;\n}();\n\nvar createQueue = function createQueue() {\n  var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return new Queue(list);\n};\n\n/* unused harmony default export */ var _unused_webpack_default_export = (Queue);\n\n/***/ }),\n/* 34 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__getRawPromise__ = __webpack_require__(35);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar Children = function () {\n  function Children() {\n    var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    _classCallCheck(this, Children);\n\n    this.list = list;\n  }\n\n  _createClass(Children, [{\n    key: 'register',\n    value: function register(child) {\n      var _this = this;\n\n      var handler = function handler() {\n        var index = _this.list.indexOf(child);\n        if (index >= 0) {\n          _this.list.splice(index, 1);\n        }\n      };\n\n      this.list.push(child);\n      // getRawPromise() is needed to capture promise resolution directly,\n      // otherwise this .then() call will be counted in child.hadChildPromises.\n      return Object(__WEBPACK_IMPORTED_MODULE_0__getRawPromise__[\"a\" /* default */])(child).then(handler, handler);\n    }\n  }, {\n    key: 'getList',\n    value: function getList() {\n      return [].concat(_toConsumableArray(this.list));\n    }\n  }, {\n    key: 'contains',\n    value: function contains(item) {\n      return this.list.indexOf(item) >= 0;\n    }\n  }, {\n    key: 'length',\n    get: function get() {\n      return this.list.length;\n    }\n  }, {\n    key: 'lastItem',\n    get: function get() {\n      var length = this.list.length;\n\n      return length ? this.list[length - 1] : null;\n    }\n  }]);\n\n  return Children;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Children);\n\n/***/ }),\n/* 35 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__getInternals__ = __webpack_require__(3);\n/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (target) {\n  var internals = Object(__WEBPACK_IMPORTED_MODULE_0__getInternals__[\"a\" /* default */])(target);\n  return internals ? internals.promise : undefined;\n});\n\n/***/ }),\n/* 36 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__getId__ = __webpack_require__(13);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function () {\n  var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var resource = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  resource[__WEBPACK_IMPORTED_MODULE_0__TARGET_DATA__[\"a\" /* default */]] = {\n    $id: 'foreign-id-' + Object(__WEBPACK_IMPORTED_MODULE_1__getId__[\"a\" /* default */])(),\n    $type: type || (typeof resource === 'undefined' ? 'undefined' : _typeof(resource)),\n    $poolId: 'foreign-poolId-' + Object(__WEBPACK_IMPORTED_MODULE_1__getId__[\"a\" /* default */])()\n  };\n\n  return resource;\n});\n\n/***/ }),\n/* 37 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export areProxyHandlersAvailable */\n/* unused harmony export HandlersEvents */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createHandlers; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__command_Descriptor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__command_internal_ProxyCommands__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_hasOwnProperty__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_filterRequestHandlers__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_getResourceType__ = __webpack_require__(17);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n\n/**\r\n * Key for default type for handlers that will be applied to any\r\n * resource that does not have type-specific handlers registered\r\n * @type {string}\r\n */\nvar DEFAULT_KEY = '';\n\nvar areProxyHandlersAvailable = function areProxyHandlersAvailable(handlers) {\n  var throwError = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var result = true;\n  __WEBPACK_IMPORTED_MODULE_1__command_internal_ProxyCommands__[\"b\" /* default */].required.forEach(function (name) {\n    if (!(__WEBPACK_IMPORTED_MODULE_1__command_internal_ProxyCommands__[\"a\" /* ProxyCommandFields */][name] in handlers)) {\n      result = false;\n      if (throwError) {\n        throw new Error('For Proxy interface, handler \"' + name + '\" should be set.');\n      }\n    }\n  });\n\n  return result;\n};\n\nvar HandlersEvents = Object.freeze({\n  HANDLERS_UPDATED: 'handlersUpdated'\n});\n\nvar Handlers = function () {\n  function Handlers() {\n    var proxyEnabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    _classCallCheck(this, Handlers);\n\n    // named collection of Descriptor lists that may be applied\n    this.properties = _defineProperty({}, DEFAULT_KEY, []);\n    this.descriptors = _defineProperty({}, DEFAULT_KEY, []);\n    this.proxyEnabled = Boolean(proxyEnabled);\n    this.converter = null;\n  }\n\n  _createClass(Handlers, [{\n    key: 'setConverter',\n    value: function setConverter(converter) {\n      this.converter = converter;\n    }\n  }, {\n    key: 'setCommands',\n    value: function setCommands(handlers) {\n      var _this = this;\n\n      this.setCommandsByType(DEFAULT_KEY, handlers);\n\n      Object.keys(handlers).forEach(function (name) {\n        var handler = handlers[name];\n        if (handler && (handler.constructor === Object || handler instanceof Array)) {\n          _this.setCommandsByType(name, handler);\n        }\n      });\n\n      if (this.proxyEnabled) {\n        areProxyHandlersAvailable(this.descriptors[DEFAULT_KEY], true);\n      }\n    }\n  }, {\n    key: 'setCommandsByType',\n    value: function setCommandsByType(type, handlers) {\n      var descrs = {};\n      var props = [];\n      Object(__WEBPACK_IMPORTED_MODULE_3__utils_filterRequestHandlers__[\"a\" /* default */])(handlers, descrs, props);\n      this.descriptors[type] = descrs;\n      this.properties[type] = props;\n    }\n\n    // FIXME Not quite obvious that it checks against property name, not command name\n\n  }, {\n    key: 'hasCommand',\n    value: function hasCommand(propertyName) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_KEY;\n\n      return type && this.descriptors[type] && Object(__WEBPACK_IMPORTED_MODULE_2__utils_hasOwnProperty__[\"a\" /* default */])(this.descriptors[type], propertyName) || this.descriptors[DEFAULT_KEY] && Object(__WEBPACK_IMPORTED_MODULE_2__utils_hasOwnProperty__[\"a\" /* default */])(this.descriptors[DEFAULT_KEY], propertyName);\n    }\n  }, {\n    key: 'getPropertyCommands',\n    value: function getPropertyCommands() {\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n      var list = this.properties[type || DEFAULT_KEY] || [];\n      return [].concat(_toConsumableArray(list));\n    }\n  }, {\n    key: 'getPropertyNames',\n    value: function getPropertyNames() {\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n      return this.getPropertyCommands(type).map(function (descriptor) {\n        return descriptor.propertyName;\n      });\n    }\n  }, {\n    key: 'getCommands',\n    value: function getCommands() {\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_KEY;\n\n      if (type && this.descriptors[type]) {\n        return Object.assign({}, this.descriptors[DEFAULT_KEY], this.descriptors[type]);\n      }\n\n      return this.descriptors[DEFAULT_KEY];\n    }\n  }, {\n    key: 'getCommand',\n    value: function getCommand(propertyName) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_KEY;\n\n      var descriptor = this.descriptors[type] && this.descriptors[type][propertyName] || this.descriptors[DEFAULT_KEY] && this.descriptors[DEFAULT_KEY][propertyName];\n\n      return descriptor || null;\n    }\n  }, {\n    key: 'call',\n    value: function call(parentRequest, pack, resultRequest) {\n      var _this2 = this;\n\n      // FIXME should it also check for resultRequest to not appear in the list?\n      var list = this.converter ? this.converter.lookupForPending(pack.args) : null;\n\n      if (list && list.length) {\n        // FIXME Need to test on all platforms: might not work because may need list of\n        // Promise objects, not Targets\n        return Promise.all(list).then(function () {\n          return _this2.callImmediately(parentRequest, pack, resultRequest);\n        });\n      }\n\n      return this.callImmediately(parentRequest, pack, resultRequest);\n    }\n  }, {\n    key: 'callImmediately',\n    value: function callImmediately(parentRequest, pack, resultRequest) {\n      var propertyName = pack.propertyName;\n\n      var descriptor = this.getCommand(propertyName, Object(__WEBPACK_IMPORTED_MODULE_4__utils_getResourceType__[\"a\" /* default */])(parentRequest));\n      if (descriptor instanceof __WEBPACK_IMPORTED_MODULE_0__command_Descriptor__[\"c\" /* default */]) {\n        return new Promise(function (resolve) {\n          resolve(descriptor.handler(parentRequest, pack, resultRequest));\n        });\n      }\n\n      return reject('Command descriptor for \"' + name + '\" was not found.');\n    }\n  }, {\n    key: 'available',\n    get: function get() {\n      var _this3 = this;\n\n      var nonEmptyListIndex = Object.getOwnPropertyNames(this.properties).findIndex(function (name) {\n        var list = _this3.properties[name];\n        return Boolean(list && list.length);\n      });\n      return nonEmptyListIndex >= 0;\n    }\n  }]);\n\n  return Handlers;\n}();\n\nHandlers.events = HandlersEvents;\n\n\nvar createHandlers = function createHandlers(proxyEnabled) {\n  return new Handlers(proxyEnabled);\n};\n\n/* unused harmony default export */ var _unused_webpack_default_export = (Handlers);\n\n/***/ }),\n/* 38 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__hasOwnProperty__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__command_Descriptor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__command_Reserved__ = __webpack_require__(23);\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\n\n\n\n/**\r\n * Checks for Descriptor uniqueness and reserved words usage.\r\n * @param {DataAccessInterface.Descriptor} descriptor\r\n * @param {Object.<string, DataAccessInterface.Descriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.Descriptor>} properties\r\n * @private\r\n */\nvar applyDescriptor = function applyDescriptor(descriptor, descriptors, properties) {\n  var propertyName = descriptor.propertyName;\n\n  if (propertyName in __WEBPACK_IMPORTED_MODULE_2__command_Reserved__[\"a\" /* default */].names) {\n    throw new Error('Name \"' + propertyName + '\" is reserved and cannot be used in descriptor.');\n  }\n  if (Object(__WEBPACK_IMPORTED_MODULE_0__hasOwnProperty__[\"a\" /* default */])(descriptors, propertyName) && descriptors[propertyName] instanceof __WEBPACK_IMPORTED_MODULE_1__command_Descriptor__[\"c\" /* default */]) {\n    throw new Error('Field names should be unique, \"' + String(propertyName) + '\" field has duplicates.');\n  }\n  descriptors[propertyName] = descriptor;\n  // FIXME Check if new implementation uses virtual commands properly\n  if (!descriptor.virtual) {\n    properties.push(descriptor);\n  }\n};\n\n/**\r\n * @param {Array} handlers\r\n * @param {Object} descriptors\r\n * @private\r\n */\nvar filterArray = function filterArray(handlers, descriptors, properties) {\n  handlers.forEach(function (value) {\n    if (value instanceof __WEBPACK_IMPORTED_MODULE_1__command_Descriptor__[\"c\" /* default */]) {\n      applyDescriptor(value, descriptors, properties);\n    }\n  });\n};\n\n/**\r\n * @param {Object} handlers\r\n * @param {Object.<string, DataAccessInterface.Descriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.Descriptor>} properties\r\n * @private\r\n */\nvar filterHash = function filterHash(handlers, descriptors, properties) {\n  if (!handlers) return;\n  [].concat(_toConsumableArray(Object.getOwnPropertyNames(handlers)), _toConsumableArray(Object.getOwnPropertySymbols(handlers))).forEach(function (propertyName) {\n    var value = handlers[propertyName];\n    // FIXME unnecessary typeof(value is defined), could be replaced with instanceof\n    if (typeof value === 'function') {\n      value = Object(__WEBPACK_IMPORTED_MODULE_1__command_Descriptor__[\"b\" /* createDescriptor */])(propertyName, value);\n    }\n    if (value instanceof __WEBPACK_IMPORTED_MODULE_1__command_Descriptor__[\"c\" /* default */]) {\n      applyDescriptor(value, descriptors, properties);\n    }\n  });\n};\n\n/**\r\n * @method Handlers.filterHandlers\r\n * @param {Array|Object} handlers\r\n * @param {Object.<string, DataAccessInterface.Descriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.Descriptor>} properties\r\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (handlers, descriptors, properties) {\n  if (handlers instanceof Array) {\n    filterArray(handlers, descriptors, properties);\n  } else {\n    filterHash(handlers, descriptors, properties);\n  }\n});\n\n/***/ }),\n/* 39 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export createProxyHandlers */\n/* unused harmony export applyProxyWithDefaultHandlers */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createProxyFactory; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Factory__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_hasOwnProperty__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__command_internal_ProxyCommands__ = __webpack_require__(16);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\n\n\n\nvar EXCLUSIONS = {\n  /*\r\n   INFO arguments and caller were included because they are required function properties\r\n   */\n  arguments: true,\n  caller: true,\n  prototype: true\n};\n\nvar createFunctionWrapper = function createFunctionWrapper(target) {\n  // INFO Target must be a function so I could use Proxy.call() interceptor.\n  function requestTargetProxy() {}\n\n  requestTargetProxy.target = target;\n\n  return requestTargetProxy;\n};\n\nvar wrapWithProxy = function wrapWithProxy(target, handlers) {\n  return new Proxy(createFunctionWrapper(target), handlers);\n};\n\nvar proxyGet = function proxyGet(wrapper, name) {\n  var target = wrapper.target;\n\n  if (name in target || name in EXCLUSIONS || (typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'symbol') {\n    return target[name];\n  }\n  // INFO Proxy should be already applied, so no need in additional wrapping\n  return target[__WEBPACK_IMPORTED_MODULE_2__command_internal_ProxyCommands__[\"a\" /* ProxyCommandFields */].get](name);\n};\n\n// INFO Proxy should be already applied, so no need in additional wrapping\nvar proxyApply = function proxyApply(wrapper, thisValue, args) {\n  return wrapper.target[__WEBPACK_IMPORTED_MODULE_2__command_internal_ProxyCommands__[\"a\" /* ProxyCommandFields */].apply](null, args);\n};\n\nvar proxySet = function proxySet(wrapper, name, value) {\n  var target = wrapper.target;\n\n\n  if (name in target || name in EXCLUSIONS || (typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'symbol') {\n    target[name] = value;\n    return value;\n  }\n\n  if (__WEBPACK_IMPORTED_MODULE_2__command_internal_ProxyCommands__[\"a\" /* ProxyCommandFields */].set in target) {\n    target[__WEBPACK_IMPORTED_MODULE_2__command_internal_ProxyCommands__[\"a\" /* ProxyCommandFields */].set](name, value);\n    return true;\n  }\n\n  return false;\n};\n\nvar proxyHas = function proxyHas(wrapper, name) {\n  return Object(__WEBPACK_IMPORTED_MODULE_1__utils_hasOwnProperty__[\"a\" /* default */])(wrapper.target, name);\n};\n\nvar proxyDeleteProperty = function proxyDeleteProperty(wrapper, name) {\n  var target = wrapper.target;\n\n  if (__WEBPACK_IMPORTED_MODULE_2__command_internal_ProxyCommands__[\"a\" /* ProxyCommandFields */].deleteProperty in target) {\n    target[__WEBPACK_IMPORTED_MODULE_2__command_internal_ProxyCommands__[\"a\" /* ProxyCommandFields */].deleteProperty](name);\n    return true;\n  }\n\n  return false;\n};\n\nvar proxyOwnKeys = function proxyOwnKeys(wrapper) {\n  var target = wrapper.target;\n\n  return [].concat(_toConsumableArray(Object.getOwnPropertyNames(target)), _toConsumableArray(Object.getOwnPropertyNames(EXCLUSIONS)));\n};\n\nvar proxyEnumerate = function proxyEnumerate(wrapper) {\n  var target = wrapper.target;\n\n  return [].concat(_toConsumableArray(Object.getOwnPropertyNames(target)), _toConsumableArray(Object.getOwnPropertyNames(EXCLUSIONS)))[Symbol.iterator]();\n};\n\nvar proxyGetOwnPropertyDescriptor = function proxyGetOwnPropertyDescriptor(wrapper, name) {\n  if (Object(__WEBPACK_IMPORTED_MODULE_1__utils_hasOwnProperty__[\"a\" /* default */])(EXCLUSIONS, name)) {\n    return Object.getOwnPropertyDescriptor(wrapper, name);\n  }\n  return Object.getOwnPropertyDescriptor(wrapper.target, name);\n};\n\nvar proxyGetPrototypeOf = function proxyGetPrototypeOf(wrapper) {\n  return Object.getPrototypeOf(wrapper.target);\n};\n\n/**\r\n * Builds proper handlers hash for Proxy\r\n * @returns {Function}\r\n */\nvar createProxyHandlers = function createProxyHandlers() {\n  var handlers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return Object.assign({\n    get: proxyGet,\n    apply: proxyApply,\n    set: proxySet,\n    has: proxyHas,\n    deleteProperty: proxyDeleteProperty,\n    ownKeys: proxyOwnKeys,\n    enumerate: proxyEnumerate,\n    getOwnPropertyDescriptor: proxyGetOwnPropertyDescriptor,\n    getPrototypeOf: proxyGetPrototypeOf\n  }, handlers);\n};\n\nvar PROXY_HANDLERS = createProxyHandlers();\n\nvar ProxyFactory = function (_Factory) {\n  _inherits(ProxyFactory, _Factory);\n\n  function ProxyFactory(handlers, cacheImpl) {\n    _classCallCheck(this, ProxyFactory);\n\n    var _this = _possibleConstructorReturn(this, (ProxyFactory.__proto__ || Object.getPrototypeOf(ProxyFactory)).call(this, __WEBPACK_IMPORTED_MODULE_0__Factory__[\"a\" /* NO_INIT */]));\n\n    _this.handlers = handlers;\n    _this.factory = Object(__WEBPACK_IMPORTED_MODULE_0__Factory__[\"b\" /* createRequestFactory */])(handlers, cacheImpl);\n    _this.factory.decorator.setFactory(_this);\n    return _this;\n  }\n\n  _createClass(ProxyFactory, [{\n    key: 'create',\n    value: function create(promise) {\n      var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var pack = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var cacheable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      var instance = this.factory.create(promise, name, pack, cacheable);\n\n      if (this.handlers.available) {\n        return wrapWithProxy(instance, PROXY_HANDLERS);\n      }\n\n      return instance;\n    }\n  }, {\n    key: 'getCached',\n    value: function getCached(name, pack) {\n      return this.factory.getCached(name, pack);\n    }\n  }]);\n\n  return ProxyFactory;\n}(__WEBPACK_IMPORTED_MODULE_0__Factory__[\"c\" /* default */]);\n\nvar applyProxyWithDefaultHandlers = function applyProxyWithDefaultHandlers(target) {\n  return wrapWithProxy(target, PROXY_HANDLERS);\n};\n\nvar createProxyFactory = function createProxyFactory(handlers, cacheImpl) {\n  return new ProxyFactory(handlers, cacheImpl);\n};\n\n/* unused harmony default export */ var _unused_webpack_default_export = (ProxyFactory);\n\n/***/ }),\n/* 40 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createDecorator; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__command_CallbackFactory__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_getResourceType__ = __webpack_require__(17);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar Decorator = function () {\n  function Decorator(factory, handlers) {\n    _classCallCheck(this, Decorator);\n\n    this.handlers = handlers;\n    this.members = new __WEBPACK_IMPORTED_MODULE_0__command_CallbackFactory__[\"a\" /* default */](factory);\n  }\n\n  _createClass(Decorator, [{\n    key: 'apply',\n    value: function apply(request) {\n      var _this = this;\n\n      if (!this.handlers.available) {\n        return request;\n      }\n\n      var descriptors = this.handlers.getPropertyCommands(Object(__WEBPACK_IMPORTED_MODULE_1__utils_getResourceType__[\"a\" /* default */])(request));\n      return descriptors.forEach(function (descriptor) {\n        request[descriptor.propertyName] = _this.members.get(descriptor);\n      });\n    }\n  }, {\n    key: 'setFactory',\n    value: function setFactory(factory) {\n      if (factory) {\n        this.members.setFactory(factory);\n      }\n    }\n  }]);\n\n  return Decorator;\n}();\n\nvar createDecorator = function createDecorator(factory, handlers) {\n  return new Decorator(factory, handlers);\n};\n\n/* unused harmony default export */ var _unused_webpack_default_export = (Decorator);\n\n/***/ }),\n/* 41 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Flow__ = __webpack_require__(42);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar createHandlerFor = function createHandlerFor(flow, propertyName, command, isTemporaryFn, cacheable) {\n  function commandHandler() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return flow.apply(this, propertyName, command, args, isTemporaryFn, cacheable);\n  }\n\n  return commandHandler;\n};\n\nvar CallbackFactory = function () {\n  function CallbackFactory() {\n    var factory = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n    _classCallCheck(this, CallbackFactory);\n\n    this.members = new Map();\n    this.flow = null;\n\n    this.setFactory(factory);\n  }\n\n  /**\r\n   * @param {Descriptor} descriptor\r\n   * @returns {Function}\r\n   * @private\r\n   */\n\n\n  _createClass(CallbackFactory, [{\n    key: 'get',\n    value: function get(descriptor) {\n      var propertyName = descriptor.propertyName;\n\n      if (!this.members.has(propertyName)) {\n        this.members.set(propertyName, this.create(propertyName, descriptor.command, descriptor.isTemporary, descriptor.cacheable));\n      }\n\n      return this.members.get(propertyName);\n    }\n  }, {\n    key: 'create',\n    value: function create(propertyName, command, isTemporaryFn) {\n      var cacheable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      return createHandlerFor(this.flow, propertyName, command, isTemporaryFn, cacheable);\n    }\n  }, {\n    key: 'setFactory',\n    value: function setFactory(factory) {\n      this.flow = null;\n\n      if (factory) {\n        this.flow = new __WEBPACK_IMPORTED_MODULE_0__Flow__[\"a\" /* default */](factory);\n      }\n    }\n  }]);\n\n  return CallbackFactory;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (CallbackFactory);\n\n/***/ }),\n/* 42 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__request_target_getInternals__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__request_target_toJSON__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_reject__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_createRequestPackage__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__request_target_setTemporary__ = __webpack_require__(43);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n\nvar Flow = function () {\n  function Flow(factory) {\n    _classCallCheck(this, Flow);\n\n    this.factory = factory;\n  }\n\n  _createClass(Flow, [{\n    key: 'apply',\n    value: function apply(target, propertyName, command, args, isTemporaryFn) {\n      var cacheable = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n\n      var internals = Object(__WEBPACK_IMPORTED_MODULE_0__request_target_getInternals__[\"a\" /* default */])(target);\n\n      // call target must be a request target\n      if (internals) {\n        var pack = Object(__WEBPACK_IMPORTED_MODULE_3__utils_createRequestPackage__[\"a\" /* default */])(propertyName, command, args, Object(__WEBPACK_IMPORTED_MODULE_1__request_target_toJSON__[\"a\" /* default */])(target));\n\n        if (cacheable) {\n          var child = this.factory.getCached(pack);\n\n          if (child) {\n            return child;\n          }\n        }\n\n        return this.makeChildReqest(target, pack, isTemporaryFn, cacheable);\n      }\n\n      return this.rejectCall();\n    }\n  }, {\n    key: 'rejectCall',\n    value: function rejectCall() {\n      return this.factory.create(Object(__WEBPACK_IMPORTED_MODULE_2__utils_reject__[\"a\" /* default */])('Target object is not an instance of Target, so cannot be used for calls.'));\n    }\n  }, {\n    key: 'makeChildReqest',\n    value: function makeChildReqest(target, propertyName, pack, isTemporaryFn) {\n      var cacheable = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n      // this wil be populated on internals.send() call and passed into target's\n      // promise when it will be executed on next tick, so there are no need in deferred anymore\n      var promise = void 0;\n      var internals = Object(__WEBPACK_IMPORTED_MODULE_0__request_target_getInternals__[\"a\" /* default */])(target);\n      var child = this.factory.create(Promise.resolve().then(function () {\n        return promise;\n      }), propertyName, pack, cacheable);\n\n      promise = internals.send(propertyName, pack, child);\n      this.checkState(promise, isTemporaryFn, target, child, pack);\n      return child;\n    }\n  }, {\n    key: 'checkState',\n    value: function checkState(promise, isTemporaryFn, parentRequest, childRequest, pack) {\n      return promise.then(function (data) {\n        var isTemporary = Boolean(isTemporaryFn(parentRequest, childRequest, pack, data));\n        Object(__WEBPACK_IMPORTED_MODULE_4__request_target_setTemporary__[\"a\" /* default */])(childRequest, isTemporary);\n      });\n    }\n  }]);\n\n  return Flow;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Flow);\n\n/***/ }),\n/* 43 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__getInternals__ = __webpack_require__(3);\n/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (target, value) {\n  return Object(__WEBPACK_IMPORTED_MODULE_0__getInternals__[\"a\" /* default */])(target).temporary = Boolean(value);\n});\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(module) {\n\tif(!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif(!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__ = __webpack_require__(1);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (target) {\n  return Boolean(target && target[__WEBPACK_IMPORTED_MODULE_0__utils_TARGET_INTERNALS__[\"a\" /* default */]]);\n});\n\n/***/ }),\n/* 46 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__getStatus__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__ = __webpack_require__(9);\n/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (value) {\n  var status = Object(__WEBPACK_IMPORTED_MODULE_0__getStatus__[\"a\" /* default */])(value);\n  return status ? status === __WEBPACK_IMPORTED_MODULE_1__utils_TargetStatus__[\"a\" /* default */].PENDING : undefined;\n});\n\n/***/ }),\n/* 47 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__getInternals__ = __webpack_require__(3);\n/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (target) {\n  var internals = Object(__WEBPACK_IMPORTED_MODULE_0__getInternals__[\"a\" /* default */])(target);\n  return internals ? internals.status : undefined;\n});\n\n/***/ }),\n/* 48 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__TARGET_DATA__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__getRawResource__ = __webpack_require__(20);\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (object) {\n  var data = Object(__WEBPACK_IMPORTED_MODULE_1__getRawResource__[\"a\" /* default */])(object);\n  return data ? data[__WEBPACK_IMPORTED_MODULE_0__TARGET_DATA__[\"a\" /* default */]] : null;\n});\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// deferred-data-access.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"http://localhost:8081/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 28);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f0dccc0509c8a8386d84","import TARGET_INTERNALS from './TARGET_INTERNALS';\r\nimport TARGET_DATA from './TARGET_DATA';\r\n/* in case of circular dependency make empty base classes\r\n   for both Target and Resource and check for them:\r\n\r\n   Target will have:\r\ns    class Target extends TargetBase {\r\n\r\n   this function will have:\r\n    object instanceof TargetBase\r\n */\r\nimport Target from '../request/Target';\r\nimport Resource from '../resource/Resource';\r\n\r\nexport default (object) => {\r\n  if (!object) return false;\r\n\r\n  if (\r\n    object instanceof Resource\r\n    // this case for RAW resources passed via JSON conversion,\r\n    // look like {'resource::data': {$id: '1111', $poolId: '22222'}}\r\n    || object[TARGET_DATA] // (object[TARGET_DATA] && typeof object[TARGET_DATA] === 'object')\r\n  ) {\r\n    return true;\r\n  } else if (\r\n    object instanceof Target\r\n    || object[TARGET_INTERNALS] // (object[TARGET_INTERNALS] && typeof object[TARGET_INTERNALS] === 'object')\r\n  ) {\r\n    // now all targets have internals in them, so we have to check if id and poolId are valid\r\n    // to treat target as resource. In case of Proxy enabled instanceof will be Function,\r\n    // so we have to check for internals.\r\n    return object[TARGET_INTERNALS].isResource();\r\n  }\r\n\r\n  return false;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/isResource.js","export default Symbol('request.target:internals');\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/TARGET_INTERNALS.js","export default 'resource::data';\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/TARGET_DATA.js","/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\r\n\r\nimport TARGET_INTERNALS from '../../utils/TARGET_INTERNALS';\r\n\r\nexport default (target) => target[TARGET_INTERNALS];\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/getInternals.js","import isResource from '../utils/isResource';\r\n\r\n// It will make all resources temporary and user must explicitly set resource permanent\r\nexport const DEFAULT_IS_TEMPORARY = (parent, child) => isResource(child);\r\n\r\nclass Descriptor {\r\n  // FIXME type > command; name > propertyName\r\n  constructor(command, handler, propertyName = undefined) {\r\n    this.propertyName = propertyName !== undefined ? propertyName : command;\r\n    this.command = command;\r\n    this.handler = handler;\r\n    /**\r\n     * @type {function(): boolean}\r\n     */\r\n    this.isTemporary = DEFAULT_IS_TEMPORARY;\r\n    this.cacheable = true;\r\n    // FIXME no need to pass virtual, check for propertyName is null -- its virtual then\r\n    this.virtual = false;\r\n    this.resourceType = null;\r\n  }\r\n}\r\n\r\nexport const createDescriptor = (\r\n  command,\r\n  handler,\r\n  propertyName,\r\n  isTemporary = DEFAULT_IS_TEMPORARY,\r\n  resourceType = null,\r\n  cacheable = true,\r\n  virtual = false,\r\n) => {\r\n  const descriptor = new Descriptor(command, handler, propertyName);\r\n  descriptor.resourceType = resourceType;\r\n  descriptor.cacheable = cacheable;\r\n  descriptor.virtual = virtual;\r\n  if (isTemporary) {\r\n    descriptor.isTemporary = isTemporary;\r\n  }\r\n  // We can use Object.freeze(), it keeps class/constructor information\r\n  return Object.freeze(descriptor);\r\n};\r\n\r\nexport const addDescriptorTo = (descriptor, target) => {\r\n  if (target instanceof Array) {\r\n    target.push(descriptor);\r\n  } else if (target) {\r\n    target[descriptor.propertyName] = descriptor;\r\n  }\r\n};\r\n\r\nexport const descriptorGeneratorFactory = (command, propertyName) =>\r\n  (\r\n    handler,\r\n    target,\r\n    isTemporary = DEFAULT_IS_TEMPORARY,\r\n    resourceType = null,\r\n    cacheable = true,\r\n    virtual = false,\r\n  ) => {\r\n    const descriptor = createDescriptor(\r\n      command,\r\n      handler,\r\n      propertyName,\r\n      isTemporary,\r\n      resourceType,\r\n      cacheable,\r\n      virtual,\r\n    );\r\n    addDescriptorTo(descriptor, target);\r\n    return Object.freeze(descriptor);\r\n  };\r\n\r\nexport default Descriptor;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/command/Descriptor.js","export default ((hasOwnProperty) =>\r\n    (target, property) =>\r\n      hasOwnProperty.call(target, property))(Object.prototype.hasOwnProperty);\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/hasOwnProperty.js","import TARGET_INTERNALS from '../utils/TARGET_INTERNALS';\r\nimport Internals from './target/Internals';\r\n\r\n/**\r\n * The object that will be available on other side\r\n * @class DataAccessInterface.RequestTarget\r\n * @param _promise {Promise}\r\n * @param _requestHandlers {Handlers}\r\n */\r\nclass Target {\r\n  constructor(promise, requestHandlers) {\r\n    this[TARGET_INTERNALS] = new Internals(this, promise, requestHandlers);\r\n  }\r\n\r\n  then(...args) {\r\n    return this[TARGET_INTERNALS].then(...args);\r\n  }\r\n\r\n  catch(...args) {\r\n    return this[TARGET_INTERNALS].catch(...args);\r\n  }\r\n}\r\n\r\nexport const createRequestTarget = (promise, requestHandlers) => (\r\n  new Target(promise, requestHandlers)\r\n);\r\n\r\nexport default Target;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/Target.js","import EventDispatcher from 'event-dispatcher';\r\nimport getId from '../utils/getId';\r\nimport isResource from '../utils/isResource';\r\nimport { createResource } from './Resource';\r\nimport isRequest from '../request/target/isRequest';\r\n\r\nexport const ResourcePoolEvents = Object.freeze({\r\n  RESOURCE_ADDED: 'resourceAdded',\r\n  RESOURCE_REMOVED: 'resourceRemoved',\r\n  POOL_CLEAR: 'poolClear',\r\n  POOL_CLEARED: 'poolCleared',\r\n  POOL_DESTROYED: 'poolDestroyed',\r\n});\r\n\r\nexport const MAP_FIELD = Symbol('ResourcePool::map');\r\n\r\nlet validTargets = {};\r\n\r\nexport const isValidTarget = (target) => (\r\n  !isResource(target)\r\n  && !isRequest(target)\r\n  && Boolean(validTargets[typeof target])\r\n);\r\n\r\nexport const setValidTargets = (list) => {\r\n  validTargets = list.reduce((validTargets, target) => {\r\n    validTargets[target] = true;\r\n\r\n    return validTargets;\r\n  }, {});\r\n};\r\n\r\nexport const getDefaultValidTargets = () => ['object', 'function'];\r\n\r\nclass ResourcePool extends EventDispatcher {\r\n  constructor() {\r\n    super();\r\n    this[MAP_FIELD] = new Map();\r\n    Object.defineProperties(this, {\r\n      id: {\r\n        value: getId(),\r\n      },\r\n    });\r\n  }\r\n\r\n  set(value, type = null) {\r\n    const map = this[MAP_FIELD];\r\n    let resource = null;\r\n    if (isValidTarget(value)) {\r\n      if (map.has(value)) {\r\n        resource = map.get(value);\r\n      } else {\r\n        resource = createResource(this, value, type || typeof value);\r\n        map.set(resource.id, resource);\r\n        map.set(value, resource);\r\n        if (this.hasEventListener(ResourcePoolEvents.RESOURCE_ADDED)) {\r\n          this.dispatchEvent(ResourcePoolEvents.RESOURCE_ADDED, resource);\r\n        }\r\n      }\r\n    }\r\n\r\n    return resource;\r\n  }\r\n\r\n  has(target) {\r\n    return this[MAP_FIELD].has(target);\r\n  }\r\n\r\n  get(target) {\r\n    return this[MAP_FIELD].get(target);\r\n  }\r\n\r\n  remove(value) {\r\n    const map = this[MAP_FIELD];\r\n    const resource = map.get(value);\r\n    if (resource) {\r\n      map.delete(resource.id);\r\n      map.delete(resource.value);\r\n      if (this.hasEventListener(ResourcePoolEvents.RESOURCE_REMOVED)) {\r\n        this.dispatchEvent(ResourcePoolEvents.RESOURCE_REMOVED, resource);\r\n      }\r\n      resource.destroy();\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    const map = this[MAP_FIELD];\r\n    if (this.hasEventListener(ResourcePoolEvents.POOL_CLEAR)) {\r\n      this.dispatchEvent(ResourcePoolEvents.POOL_CLEAR, this);\r\n    }\r\n\r\n    for (const [key, resource] of map) {\r\n      if (typeof key === 'string' && key === resource.id) {\r\n        resource.destroy();\r\n      }\r\n    }\r\n\r\n    map.clear();\r\n\r\n    if (this.hasEventListener(ResourcePoolEvents.POOL_CLEARED)) {\r\n      this.dispatchEvent(ResourcePoolEvents.POOL_CLEARED, this);\r\n    }\r\n  }\r\n\r\n  isActive() {\r\n    return Boolean(this[MAP_FIELD]);\r\n  }\r\n\r\n  destroy() {\r\n    this.clear();\r\n    // intentionally make it not usable after its destroyed\r\n    delete this[MAP_FIELD];\r\n    if (this.hasEventListener(ResourcePoolEvents.POOL_DESTROYED)) {\r\n      // FIXME why for second parameter?\r\n      this.dispatchEvent(ResourcePoolEvents.POOL_DESTROYED, this);\r\n    }\r\n  }\r\n\r\n  static events = ResourcePoolEvents;\r\n}\r\n\r\nclass DefaultResourcePool extends ResourcePool {\r\n  // INFO default ResourcePool should not be destroyable;\r\n  destroy() {\r\n    throw new Error('Default ResourcePool cannot be destroyed.');\r\n  }\r\n}\r\n\r\nexport const defaultResourcePool = new DefaultResourcePool();\r\n\r\nexport const createResourcePool = () => new ResourcePool();\r\n\r\nsetValidTargets(getDefaultValidTargets());\r\n\r\nexport default ResourcePool;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/ResourcePool.js","export default (message) => Promise.reject(new Error(message));\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/reject.js","export default Object.freeze({\r\n  PENDING: 'pending',\r\n  RESOLVED: 'resolved',\r\n  REJECTED: 'rejected',\r\n  DESTROYED: 'destroyed',\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/TargetStatus.js","class Deferred {\r\n  constructor() {\r\n    this.promise = new Promise((resolve, reject) => {\r\n      this.resolve = resolve;\r\n      this.reject = reject;\r\n    });\r\n  }\r\n}\r\n\r\nexport const createDeferred = () => new Deferred();\r\nexport default Deferred;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/Deferred.js","/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\r\n\r\nimport getInternals from './getInternals';\r\n\r\nexport default (target) => {\r\n  const internals = getInternals(target);\r\n  return internals ? internals.toJSON() : undefined;\r\n};\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/toJSON.js","import TARGET_DATA from '../utils/TARGET_DATA';\r\nimport TARGET_INTERNALS from '../utils/TARGET_INTERNALS';\r\nimport getInternals from '../request/target/getInternals';\r\nimport getId from '../utils/getId';\r\n\r\nconst getPoolId = (pool) => (pool ? pool.id : null);\r\n\r\n/**\r\n * @exports Resource\r\n */\r\nclass Resource {\r\n  constructor(pool, value, type, id) {\r\n    Object.defineProperties(this, {\r\n      [TARGET_INTERNALS]: {\r\n        value: {\r\n          pool,\r\n          value,\r\n          type,\r\n          id,\r\n          active: true,\r\n          poolId: getPoolId(pool),\r\n        },\r\n      },\r\n      [TARGET_DATA]: {\r\n        get: this.toJSON,\r\n      },\r\n    });\r\n  }\r\n\r\n\r\n  get active() {\r\n    return Boolean(getInternals(this).active);\r\n  }\r\n\r\n  get value() {\r\n    return getInternals(this).value;\r\n  }\r\n\r\n  get type() {\r\n    return getInternals(this).type || typeof getInternals(this).value;\r\n  }\r\n\r\n  get id() {\r\n    return getInternals(this).id;\r\n  }\r\n\r\n  get poolId() {\r\n    return getInternals(this).poolId;\r\n  }\r\n\r\n  toJSON = () => ({\r\n    [TARGET_DATA]: {\r\n      $id: this.id,\r\n      $type: this.type,\r\n      $poolId: this.poolId,\r\n    },\r\n  });\r\n\r\n  destroy() {\r\n    const internals = getInternals(this);\r\n    const { id, pool } = internals;\r\n\r\n    if (!internals.active) {\r\n      return;\r\n    }\r\n\r\n    internals.active = false;\r\n    pool.remove(id);\r\n\r\n    Object.keys(internals).map((name) => delete internals[name]);\r\n  }\r\n}\r\n\r\nexport const createResource = (pool, value, resourceType, id = null) => (\r\n  new Resource(pool, value, resourceType, id || getId())\r\n);\r\n\r\nexport default Resource;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/Resource.js","const base = `DA/${Date.now()}/`;\r\nlet index = 0;\r\nexport default () => `${base}${++index}/${Date.now()}`;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getId.js","import TARGET_INTERNALS from './TARGET_INTERNALS';\r\nimport TARGET_DATA from './TARGET_DATA';\r\nimport isResource from './isResource';\r\n\r\nexport default (object) => {\r\n  if (typeof object[TARGET_INTERNALS] === 'object') {\r\n    return object[TARGET_INTERNALS].poolId;\r\n  } else if (isResource(object)) {\r\n    return object[TARGET_DATA].$poolId;\r\n  }\r\n  return null;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getResourcePoolId.js","import TARGET_INTERNALS from './TARGET_INTERNALS';\r\nimport TARGET_DATA from './TARGET_DATA';\r\nimport isResource from './isResource';\r\n\r\nexport default (object) => {\r\n  // if (object instanceof Resource || object instanceof Target) {\r\n  if (typeof object[TARGET_INTERNALS] === 'object') {\r\n    return object[TARGET_INTERNALS].id;\r\n  } else if (isResource(object)) {\r\n    return object[TARGET_DATA].$id;\r\n  }\r\n\r\n  return null;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getResourceId.js","import {\r\n  createDescriptor,\r\n  descriptorGeneratorFactory,\r\n} from '../Descriptor';\r\n\r\nexport const ProxyCommandNames = Object.freeze({\r\n  GET: 'get',\r\n  SET: 'set',\r\n  APPLY: 'apply',\r\n  DELETE_PROPERTY: 'deleteProperty',\r\n});\r\n\r\nexport const ProxyCommandFields = Object.freeze({\r\n  get: Symbol('proxy.commands::get'),\r\n  set: Symbol('proxy.commands::set'),\r\n  apply: Symbol('proxy.commands::apply'),\r\n  deleteProperty: Symbol('proxy.commands::deleteProperty'),\r\n});\r\n\r\nclass ProxyCommandsClass {\r\n  constructor() {\r\n    Object.freeze(this);\r\n  }\r\n\r\n  names = ProxyCommandNames;\r\n  fields = ProxyCommandFields;\r\n\r\n  get list() {\r\n    return [\r\n      ProxyCommandNames.GET,\r\n      ProxyCommandNames.SET,\r\n      ProxyCommandNames.APPLY,\r\n      ProxyCommandNames.DELETE_PROPERTY,\r\n    ];\r\n  }\r\n\r\n  get required() {\r\n    return [\r\n      ProxyCommandNames.GET,\r\n      ProxyCommandNames.SET,\r\n      ProxyCommandNames.APPLY,\r\n    ];\r\n  }\r\n\r\n  createGETDescriptor = descriptorGeneratorFactory(\r\n    ProxyCommandNames.GET,\r\n    ProxyCommandFields.get,\r\n  );\r\n  createSETDescriptor = descriptorGeneratorFactory(\r\n    ProxyCommandNames.SET,\r\n    ProxyCommandFields.set,\r\n  );\r\n  createAPPLYDescriptor = descriptorGeneratorFactory(\r\n    ProxyCommandNames.APPLY,\r\n    ProxyCommandFields.apply,\r\n  );\r\n}\r\n\r\nconst ProxyCommands = new ProxyCommandsClass();\r\n\r\nexport const createDescriptors = (\r\n  handlers,\r\n  target = {},\r\n  isTemporary = undefined,\r\n  resourceType = null,\r\n  cacheable = true,\r\n  virtual = false,\r\n) => {\r\n  const args = [isTemporary, resourceType, cacheable, virtual];\r\n  ProxyCommands.list.forEach((name) => {\r\n    const handler = handlers[name];\r\n    const field = ProxyCommandFields[name];\r\n\r\n    if (handler instanceof Function) {\r\n      let descriptor = createDescriptor(name, handler, field, ...args);\r\n      descriptor = Object.freeze(descriptor);\r\n\r\n      if (target instanceof Array) {\r\n        target.push(descriptor);\r\n      } else if (target) {\r\n        target[field] = descriptor;\r\n      }\r\n    }\r\n  });\r\n\r\n  return target;\r\n};\r\n\r\nexport default ProxyCommands;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/command/internal/ProxyCommands.js","import TARGET_INTERNALS from './TARGET_INTERNALS';\r\nimport TARGET_DATA from './TARGET_DATA';\r\nimport isResource from './isResource';\r\n\r\nconst getResourceType = (object) => {\r\n  if (typeof object[TARGET_INTERNALS] === 'object') {\r\n    return object[TARGET_INTERNALS].type;\r\n  } else if (isResource(object)) {\r\n    return object[TARGET_DATA].$type;\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport default getResourceType;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getResourceType.js","(function webpackUniversalModuleDefinition(root, factory) {\r\n\tif(typeof exports === 'object' && typeof module === 'object')\r\n\t\tmodule.exports = factory();\r\n\telse if(typeof define === 'function' && define.amd)\r\n\t\tdefine([], factory);\r\n\telse if(typeof exports === 'object')\r\n\t\texports[\"EventDispatcher\"] = factory();\r\n\telse\r\n\t\troot[\"EventDispatcher\"] = factory();\r\n})(this, function() {\r\nreturn /******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {};\r\n/******/\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n/******/\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId]) {\r\n/******/ \t\t\treturn installedModules[moduleId].exports;\r\n/******/ \t\t}\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\ti: moduleId,\r\n/******/ \t\t\tl: false,\r\n/******/ \t\t\texports: {}\r\n/******/ \t\t};\r\n/******/\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n/******/\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.l = true;\r\n/******/\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n/******/\r\n/******/\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__webpack_require__.m = modules;\r\n/******/\r\n/******/ \t// expose the module cache\r\n/******/ \t__webpack_require__.c = installedModules;\r\n/******/\r\n/******/ \t// define getter function for harmony exports\r\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\r\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\r\n/******/ \t\t\tObject.defineProperty(exports, name, {\r\n/******/ \t\t\t\tconfigurable: false,\r\n/******/ \t\t\t\tenumerable: true,\r\n/******/ \t\t\t\tget: getter\r\n/******/ \t\t\t});\r\n/******/ \t\t}\r\n/******/ \t};\r\n/******/\r\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\r\n/******/ \t__webpack_require__.n = function(module) {\r\n/******/ \t\tvar getter = module && module.__esModule ?\r\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\r\n/******/ \t\t\tfunction getModuleExports() { return module; };\r\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\r\n/******/ \t\treturn getter;\r\n/******/ \t};\r\n/******/\r\n/******/ \t// Object.prototype.hasOwnProperty.call\r\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\r\n/******/\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__webpack_require__.p = \"http://localhost:8081/dist/\";\r\n/******/\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ([\r\n/* 0 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.Event = undefined;\r\n\r\nvar _EventDispatcher = __webpack_require__(1);\r\n\r\nvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\nexports.default = _EventDispatcher2.default;\r\nexports.Event = _EventDispatcher.Event;\r\n\r\n/***/ }),\r\n/* 1 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\n\r\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar hasOwnProp = function hasOwnProp(target, name) {\r\n  return Object.prototype.hasOwnProperty.call(target, name);\r\n}; /**\r\n    * Created by Oleg Galaburda on 09.02.16.\r\n    * \r\n    */\r\n\r\nvar Event = exports.Event = function () {\r\n  function Event(type) {\r\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\r\n\r\n    _classCallCheck(this, Event);\r\n\r\n    this.type = type;\r\n    this.data = data;\r\n    this.defaultPrevented = false;\r\n  }\r\n\r\n  _createClass(Event, [{\r\n    key: 'toJSON',\r\n    value: function toJSON() {\r\n      return { type: this.type, data: this.data };\r\n    }\r\n  }, {\r\n    key: 'isDefaultPrevented',\r\n    value: function isDefaultPrevented() {\r\n      return this.defaultPrevented;\r\n    }\r\n  }, {\r\n    key: 'preventDefault',\r\n    value: function preventDefault() {\r\n      this.defaultPrevented = true;\r\n    }\r\n  }]);\r\n\r\n  return Event;\r\n}();\r\n\r\nvar ListenersRunner = function () {\r\n  function ListenersRunner(listeners, onStopped, onComplete) {\r\n    var _this = this;\r\n\r\n    _classCallCheck(this, ListenersRunner);\r\n\r\n    this.index = -1;\r\n    this.immediatelyStopped = false;\r\n\r\n    this.stopImmediatePropagation = function () {\r\n      _this.immediatelyStopped = true;\r\n    };\r\n\r\n    this.listeners = listeners;\r\n    this.onStopped = onStopped;\r\n    this.onComplete = onComplete;\r\n  }\r\n\r\n  _createClass(ListenersRunner, [{\r\n    key: 'run',\r\n    value: function run(event, target) {\r\n      var listener = void 0;\r\n      var listeners = this.listeners;\r\n\r\n      this.augmentEvent(event);\r\n      // TODO this has to be handled in separate object ListenersRunner that should be\r\n      // created for each call() call and asked for index validation on each listener remove.\r\n      for (this.index = 0; this.index < listeners.length; this.index++) {\r\n        if (this.immediatelyStopped) break;\r\n        listener = listeners[this.index];\r\n        listener.call(target, event);\r\n      }\r\n      this.clearEvent(event);\r\n      this.onComplete(this);\r\n    }\r\n  }, {\r\n    key: 'augmentEvent',\r\n    value: function augmentEvent(eventObject) {\r\n      var event = eventObject;\r\n      event.stopPropagation = this.onStopped;\r\n      event.stopImmediatePropagation = this.stopImmediatePropagation;\r\n    }\r\n\r\n    /* eslint class-methods-use-this: \"off\" */\r\n\r\n  }, {\r\n    key: 'clearEvent',\r\n    value: function clearEvent(eventObject) {\r\n      var event = eventObject;\r\n      delete event.stopPropagation;\r\n      delete event.stopImmediatePropagation;\r\n    }\r\n  }, {\r\n    key: 'listenerRemoved',\r\n    value: function listenerRemoved(listeners, index) {\r\n      if (listeners === this.listeners && index <= this.index) {\r\n        this.index--;\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return ListenersRunner;\r\n}();\r\n\r\nvar EventListeners = function () {\r\n  function EventListeners() {\r\n    var _this2 = this;\r\n\r\n    _classCallCheck(this, EventListeners);\r\n\r\n    this._listeners = {};\r\n    this._runners = [];\r\n\r\n    this.removeRunner = function (runner) {\r\n      _this2._runners.splice(_this2._runners.indexOf(runner), 1);\r\n    };\r\n  }\r\n  /**\r\n   * key - event Type\r\n   * value - hash of priorities\r\n   *    key - priority\r\n   *    value - list of handlers\r\n   * @type {Object<string, Object.<string, Array<number, Function>>>}\r\n   * @private\r\n   */\r\n\r\n\r\n  _createClass(EventListeners, [{\r\n    key: 'createList',\r\n    value: function createList(eventType, priorityOpt) {\r\n      var priority = parseInt(priorityOpt, 10);\r\n      var target = this.getPrioritiesByKey(eventType);\r\n      var key = String(priority);\r\n      var value = void 0;\r\n      if (hasOwnProp(target, key)) {\r\n        value = target[key];\r\n      } else {\r\n        value = [];\r\n        target[key] = value;\r\n      }\r\n      return value;\r\n    }\r\n  }, {\r\n    key: 'getPrioritiesByKey',\r\n    value: function getPrioritiesByKey(key) {\r\n      var value = void 0;\r\n      if (hasOwnProp(this._listeners, key)) {\r\n        value = this._listeners[key];\r\n      } else {\r\n        value = {};\r\n        this._listeners[key] = value;\r\n      }\r\n      return value;\r\n    }\r\n  }, {\r\n    key: 'add',\r\n    value: function add(eventType, handler, priority) {\r\n      var handlers = this.createList(eventType, priority);\r\n      if (handlers.indexOf(handler) < 0) {\r\n        handlers.push(handler);\r\n      }\r\n    }\r\n  }, {\r\n    key: 'has',\r\n    value: function has(eventType) {\r\n      var priority = void 0;\r\n      var result = false;\r\n      var priorities = this.getPrioritiesByKey(eventType);\r\n      if (priorities) {\r\n        for (priority in priorities) {\r\n          if (hasOwnProp(priorities, priority)) {\r\n            result = true;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n  }, {\r\n    key: 'remove',\r\n    value: function remove(eventType, handler) {\r\n      var _this3 = this;\r\n\r\n      var priorities = this.getPrioritiesByKey(eventType);\r\n      if (priorities) {\r\n        var list = Object.getOwnPropertyNames(priorities);\r\n        var length = list.length;\r\n\r\n        var _loop = function _loop(index) {\r\n          var priority = list[index];\r\n          var handlers = priorities[priority];\r\n          var handlerIndex = handlers.indexOf(handler);\r\n          if (handlerIndex >= 0) {\r\n            handlers.splice(handlerIndex, 1);\r\n            if (!handlers.length) {\r\n              delete priorities[priority];\r\n            }\r\n            _this3._runners.forEach(function (runner) {\r\n              runner.listenerRemoved(handlers, handlerIndex);\r\n            });\r\n          }\r\n        };\r\n\r\n        for (var index = 0; index < length; index++) {\r\n          _loop(index);\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: 'removeAll',\r\n    value: function removeAll(eventType) {\r\n      delete this._listeners[eventType];\r\n    }\r\n  }, {\r\n    key: 'createRunner',\r\n    value: function createRunner(handlers, onStopped) {\r\n      var runner = new ListenersRunner(handlers, onStopped, this.removeRunner);\r\n      this._runners.push(runner);\r\n      return runner;\r\n    }\r\n  }, {\r\n    key: 'call',\r\n    value: function call(event, target) {\r\n      var priorities = this.getPrioritiesByKey(event.type);\r\n      var stopped = false;\r\n      var stopPropagation = function stopPropagation() {\r\n        stopped = true;\r\n      };\r\n      if (priorities) {\r\n        // getOwnPropertyNames() or keys()?\r\n        var list = Object.getOwnPropertyNames(priorities).sort(function (a, b) {\r\n          return a - b;\r\n        });\r\n        var length = list.length;\r\n\r\n        for (var index = 0; index < length; index++) {\r\n          if (stopped) break;\r\n          var _handlers = priorities[list[index]];\r\n          // in case if all handlers of priority were removed while event\r\n          // was dispatched and handlers become undefined.\r\n          if (_handlers) {\r\n            var _runner = this.createRunner(_handlers, stopPropagation);\r\n            _runner.run(event, target);\r\n            if (_runner.immediatelyStopped) break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return EventListeners;\r\n}();\r\n\r\nvar EventDispatcher = function () {\r\n  function EventDispatcher() {\r\n    var eventPreprocessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\r\n    var noInit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\r\n\r\n    _classCallCheck(this, EventDispatcher);\r\n\r\n    if (!noInit) {\r\n      this.initialize(eventPreprocessor);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n\r\n\r\n  _createClass(EventDispatcher, [{\r\n    key: 'initialize',\r\n    value: function initialize() {\r\n      var eventPreprocessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\r\n\r\n      this._eventPreprocessor = eventPreprocessor;\r\n      this._listeners = new EventListeners();\r\n    }\r\n  }, {\r\n    key: 'addEventListener',\r\n    value: function addEventListener(eventType, listener) {\r\n      var priority = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\r\n\r\n      this._listeners.add(eventType, listener, -priority || 0);\r\n    }\r\n  }, {\r\n    key: 'hasEventListener',\r\n    value: function hasEventListener(eventType) {\r\n      return this._listeners.has(eventType);\r\n    }\r\n  }, {\r\n    key: 'removeEventListener',\r\n    value: function removeEventListener(eventType, listener) {\r\n      this._listeners.remove(eventType, listener);\r\n    }\r\n  }, {\r\n    key: 'removeAllEventListeners',\r\n    value: function removeAllEventListeners(eventType) {\r\n      this._listeners.removeAll(eventType);\r\n    }\r\n  }, {\r\n    key: 'dispatchEvent',\r\n    value: function dispatchEvent(event, data) {\r\n      var eventObject = EventDispatcher.getEvent(event, data);\r\n      if (this._eventPreprocessor) {\r\n        eventObject = this._eventPreprocessor.call(this, eventObject);\r\n      }\r\n      this._listeners.call(eventObject);\r\n    }\r\n  }], [{\r\n    key: 'isObject',\r\n    value: function isObject(value) {\r\n      return (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value !== null;\r\n    }\r\n  }, {\r\n    key: 'getEvent',\r\n    value: function getEvent(eventOrType, optionalData) {\r\n      var event = eventOrType;\r\n      if (!EventDispatcher.isObject(eventOrType)) {\r\n        event = new EventDispatcher.Event(String(eventOrType), optionalData);\r\n      }\r\n      return event;\r\n    }\r\n  }, {\r\n    key: 'create',\r\n    value: function create(eventPreprocessor) {\r\n      return new EventDispatcher(eventPreprocessor);\r\n    }\r\n\r\n    /* eslint no-undef: \"off\" */\r\n\r\n  }]);\r\n\r\n  return EventDispatcher;\r\n}();\r\n\r\nEventDispatcher.Event = Event;\r\n\r\nexports.default = EventDispatcher;\r\n\r\n/***/ })\r\n/******/ ]);\r\n});\r\n//# sourceMappingURL=event-dispatcher.js.map\n\n\n// WEBPACK FOOTER //\n// ./node_modules/event-dispatcher/dist/event-dispatcher.js","/**\r\n * Interface for all resource types, these will be treated as resources automatically\r\n * @interface\r\n */\r\nclass IConvertible {\r\n\r\n}\r\n\r\nexport default IConvertible;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/IConvertible.js","import TARGET_INTERNALS from './TARGET_INTERNALS';\r\nimport IConvertible from './IConvertible';\r\nimport isResource from './isResource';\r\nimport toJSON from '../request/target/toJSON';\r\nimport { defaultResourcePool } from '../resource/ResourcePool';\r\nimport Resource from '../resource/Resource';\r\n\r\nexport default (object, pool) => {\r\n  pool = pool || defaultResourcePool;\r\n\r\n  if (object instanceof Resource) {\r\n    return object.toJSON();\r\n  } else if (typeof object[TARGET_INTERNALS] === 'object') {\r\n    return toJSON(object);\r\n  } else if (object instanceof IConvertible || typeof object === 'function') {\r\n    return pool.set(object).toJSON();\r\n  } else if (isResource(object)) {\r\n    return object;\r\n  }\r\n\r\n  return null;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getRawResource.js","/**\r\n * All arguments are required\r\n * @param command Command name, Descriptor's name\r\n * @param propertyName Property name, this is the name of the handler called against target object\r\n * @param args Arguments passed to handler\r\n * @param target JSON object representing resource or target, its raw value\r\n * @returns {{command: *, args: *, target: *}}\r\n */\r\nexport default (propertyName, command, args, target) => ({\r\n  propertyName,\r\n  command,\r\n  args,\r\n  target,\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/createRequestPackage.js","import Descriptor, { addDescriptorTo } from '../Descriptor';\r\n\r\nexport const RequestCommandNames = Object.freeze({\r\n  DESTROY: '::destroy.resource',\r\n});\r\n\r\nexport const RequestCommandFields = Object.freeze({\r\n  DESTROY: Symbol('::destroy.resource'),\r\n});\r\n\r\n/**\r\n * Destroy is unique type that exists for every Target\r\n * and does not have a method on its instances. This type will\r\n * be send each time Target.destroy() is applied to\r\n * Target in stance.\r\n */\r\nclass RequestCommands {\r\n  constructor() {\r\n    Object.freeze(this);\r\n  }\r\n\r\n  names = RequestCommandNames;\r\n  fields = RequestCommandFields;\r\n\r\n  createDESTROYDescriptor = (handler, target) => {\r\n    const descriptor = new Descriptor(\r\n      RequestCommandNames.DESTROY,\r\n      handler,\r\n      RequestCommandFields.DESTROY,\r\n    );\r\n    descriptor.cacheable = false;\r\n    descriptor.virtual = true;\r\n    addDescriptorTo(descriptor, target);\r\n    return Object.freeze(descriptor);\r\n  };\r\n\r\n}\r\n\r\nexport default new RequestCommands();\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/command/internal/RequestCommands.js","/**\r\n * Reserved words\r\n */\r\nexport default Object.freeze({\r\n  /**\r\n   * Contains property names that cannot be used for Descriptor's\r\n   */\r\n  names: Object.freeze({\r\n    // INFO Exposed Promise method, cannot be overwritten by type\r\n    then: true,\r\n    // INFO Exposed Promise method, cannot be overwritten by type\r\n    catch: true,\r\n  }),\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/command/Reserved.js","import { createDecorator } from './Decorator';\r\nimport { createRequestTarget } from './Target';\r\n\r\nexport const NO_INIT = {};\r\n\r\nclass Factory {\r\n  /*\r\n   function DummyCacheImpl() {\r\n   this.get = function(name, pack) {\r\n\r\n   };\r\n   this.set = function(name, pack, request) {\r\n\r\n   };\r\n   }\r\n   */\r\n  constructor(handlers, cacheImpl = null) {\r\n    this.cache = cacheImpl;\r\n    this.handlers = handlers;\r\n\r\n    if (handlers !== NO_INIT) {\r\n      this.decorator = createDecorator(this, handlers);\r\n    }\r\n  }\r\n\r\n  create(promise, pack = null, cacheable = false) {\r\n    const request = createRequestTarget(promise, this.handlers);\r\n    if (this.handlers.available) {\r\n      this.decorator.apply(request);\r\n    }\r\n\r\n    if (this.cache && cacheable) {\r\n      this.cache.set(pack, request);\r\n    }\r\n\r\n    return request;\r\n  }\r\n\r\n  getCached(pack) {\r\n    return this.cache && this.cache.get(pack);\r\n  }\r\n}\r\n\r\nexport const createRequestFactory = (handlers, cacheImpl) => (\r\n  new Factory(handlers, cacheImpl)\r\n);\r\n\r\nexport default Factory;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/Factory.js","import EventDispatcher from 'event-dispatcher';\r\nimport hasOwnProperty from '../utils/hasOwnProperty';\r\nimport getResourcePoolId from '../utils/getResourcePoolId';\r\nimport getResourceId from '../utils/getResourceId';\r\nimport isResource from '../utils/isResource';\r\nimport isResourceConvertible from '../utils/isResourceConvertible';\r\nimport getRawResource from '../utils/getRawResource';\r\nimport isPending from '../request/target/isPending';\r\n\r\nexport const ConverterEvents = Object.freeze({\r\n  RESOURCE_CREATED: 'resourceCreated',\r\n  RESOURCE_CONVERTED: 'resourceConverted',\r\n});\r\n\r\n/**\r\n * Resource converter contains bunch of methods to lookup for resources\r\n * and registering them, converting them into RAWResource or into\r\n * Targets, depending on their origin.\r\n * Before sending data, bundled resources should be registered in ResourcePool\r\n * and then converted to RAWResource objects.\r\n * After data received, its RAWResources should be converted to Targets\r\n * for not resolved resources or to resource target values otherwise.\r\n * Resource can be resolved by its `id` and `poolId`, if Converter\r\n * can find ResourcePool with id from poolId, it will try to get target\r\n * resource value and replace with it RAWResource object.\r\n * If ResourcePool not found, Converter assumes that resource come from\r\n * other origin/environment and creates Target object that can be target\r\n * object for commands.\r\n * Converter while handling data does not look deeply, so its developer\r\n * responsibility to convert deeply nested resource targets.\r\n */\r\nclass Converter extends EventDispatcher {\r\n  constructor(factory, registry, pool, handlers = null) {\r\n    super();\r\n    this.factory = factory;\r\n    this.pool = pool;\r\n    this.registry = registry;\r\n\r\n    if (handlers) {\r\n      handlers.setConverter(this);\r\n    }\r\n  }\r\n\r\n  resourceToObject(data) {\r\n    let result;\r\n\r\n    if (isResourceConvertible(data)) {\r\n      result = getRawResource(data, this.pool);\r\n    } else if (typeof data.toJSON === 'function') {\r\n      result = data.toJSON();\r\n    } else {\r\n      return data;\r\n    }\r\n\r\n    if (this.hasEventListener(ConverterEvents.RESOURCE_CONVERTED)) {\r\n      this.dispatchEvent(ConverterEvents.RESOURCE_CONVERTED, {\r\n        data,\r\n        result,\r\n      });\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#objectToResource\r\n   * @param {*} data\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  objectToResource(data) {\r\n    let result = data;\r\n\r\n    if (isResource(data)) {\r\n      const poolId = getResourcePoolId(data);\r\n\r\n      if (this.registry.isRegistered(poolId)) { // target object is stored in current pool\r\n        const target = this.registry.get(poolId).get(getResourceId(data));\r\n\r\n        if (target) {\r\n          result = target.value;\r\n        }\r\n\r\n      } else { // target object has another origin, should be wrapped\r\n        result = this.factory.create(Promise.resolve(data));\r\n      }\r\n    }\r\n\r\n    if (result !== data && this.hasEventListener(ConverterEvents.RESOURCE_CREATED)) {\r\n      this.dispatchEvent(ConverterEvents.RESOURCE_CREATED, {\r\n        data,\r\n        result,\r\n      });\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#lookupArray\r\n   * @param list\r\n   * @param linkConvertHandler\r\n   * @returns {Array}\r\n   * @private\r\n   */\r\n  lookupArray(list, linkConvertHandler) {\r\n    return list.map((item) => linkConvertHandler.call(this, item));\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#lookupObject\r\n   * @param {*} data\r\n   * @param {Function} linkConvertHandler\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  lookupObject(data, linkConvertHandler) {\r\n    return Object.getOwnPropertyNames(data)\r\n      .reduce((result, name) => {\r\n        if (hasOwnProperty(data, name)) {\r\n          result[name] = linkConvertHandler.call(this, data[name]);\r\n        }\r\n\r\n        return result;\r\n      }, {});\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#toJSON\r\n   * @param {*} data\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  toJSON(data) {\r\n    let result = data;\r\n\r\n    if (data !== undefined && data !== null) {\r\n      if (isResourceConvertible(data)) {\r\n        // if data is Target, Resource, IConvertible, Function or RAW resource data\r\n        result = this.resourceToObject(data);\r\n      } else if (data instanceof Array) {\r\n        // if data is Array of values, check its\r\n        result = this.lookupArray(data, this.resourceToObject);\r\n      } else if (data.constructor === Object) {\r\n        // only Object instances can be looked up, other object types must be converted by hand\r\n        result = this.lookupObject(data, this.resourceToObject);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#parse\r\n   * @param {*} data\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  parse(data) {\r\n    let result = data;\r\n\r\n    if (data !== undefined && data !== null) {\r\n      if (isResource(data)) { // if data is RAW resource data\r\n        result = this.objectToResource(data);\r\n      } else if (data instanceof Array) { // if data is Array of values, check its\r\n        result = this.lookupArray(data, this.objectToResource);\r\n      } else if (data.constructor === Object) {\r\n        result = this.lookupObject(data, this.objectToResource);\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @method DataAccessInterface.ResourceConverter#lookupForPending\r\n   * @param {*} data\r\n   * @returns {Array}\r\n   */\r\n  // FIXME for now data is always array\r\n  lookupForPending(data) {\r\n    const result = [];\r\n\r\n    const add = (value) => {\r\n      if (isPending(value)) {\r\n        result.push(value);\r\n      }\r\n      return value;\r\n    };\r\n\r\n    if (typeof data === 'object' && data !== null) {\r\n      if (isPending(data)) {\r\n        result.push(data);\r\n      } else if (data instanceof Array) {\r\n        this.lookupArray(data, add);\r\n      } else if (data.constructor === Object) {\r\n        this.lookupObject(data, add);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  static events = ConverterEvents;\r\n}\r\n\r\n/**\r\n * @param {RequestFactory} factory\r\n * @param {DataAccessInterface.ResourcePoolRegistry} registry\r\n * @param {DataAccessInterface.ResourcePool} pool\r\n * @param {Handlers} handlers\r\n * @returns {ResourceConverter}\r\n */\r\nexport const createResourceConverter = (factory, registry, pool, handlers) => (\r\n  new Converter(factory, registry, pool, handlers)\r\n);\r\n\r\nexport default Converter;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/Converter.js","import isResource from './isResource';\r\nimport IConvertible from './IConvertible';\r\nimport Target from '../request/Target';\r\n\r\nexport default (data) => (\r\n  isResource(data)\r\n  || data instanceof Target\r\n  || typeof data === 'function'\r\n  || data instanceof IConvertible\r\n);\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/isResourceConvertible.js","import EventDispatcher from 'event-dispatcher';\r\nimport hasOwnProperty from '../utils/hasOwnProperty';\r\nimport ResourcePool, {\r\n  createResourcePool,\r\n  ResourcePoolEvents,\r\n  defaultResourcePool,\r\n} from './ResourcePool';\r\n\r\nexport const PoolRegistryEvents = Object.freeze({\r\n  RESOURCE_POOL_CREATED: 'resourcePoolCreated',\r\n  RESOURCE_POOL_REGISTERED: 'resourcePoolRegistered',\r\n  RESOURCE_POOL_REMOVED: 'resourcePoolRemoved',\r\n});\r\n\r\nconst POOLS_FIELD = Symbol('resource.pool.registry::pools');\r\n\r\n/**\r\n * @classdesc Collection of ResourcePool instances. Allows lookup for ResourcePool by its Id.\r\n * When ResourcePool is registered in PoolRegistry, it subscribes to\r\n * ResourcePool POOL_DESTROYED event and removes pool from registry after its destroyed.\r\n */\r\nclass PoolRegistry extends EventDispatcher {\r\n  constructor() {\r\n    super();\r\n    this[POOLS_FIELD] = {};\r\n\r\n    // every registry should keep default pool, so you can have access from anywhere\r\n    this.register(defaultResourcePool);\r\n  }\r\n\r\n  handlePoolDestroyed = (event) => {\r\n    this.remove(event.data);\r\n  }\r\n\r\n  /**\r\n   * Create and register ResourcePool\r\n   * @returns {DataAccessInterface.ResourcePool} New ResourcePool instance\r\n   */\r\n  createPool() {\r\n    const pool = createResourcePool();\r\n    if (this.hasEventListener(PoolRegistryEvents.RESOURCE_POOL_CREATED)) {\r\n      this.dispatchEvent(PoolRegistryEvents.RESOURCE_POOL_CREATED, pool);\r\n    }\r\n    this.register(pool);\r\n    return pool;\r\n  }\r\n\r\n  /**\r\n   * Register ResourcePool instance.\r\n   * @param pool {DataAccessInterface.ResourcePool} ResourcePool instance to be registered\r\n   */\r\n  register(pool) {\r\n    if (hasOwnProperty(this[POOLS_FIELD], pool.id)) return;\r\n    this[POOLS_FIELD][pool.id] = pool;\r\n    pool.addEventListener(ResourcePoolEvents.POOL_DESTROYED, this.handlePoolDestroyed);\r\n    if (this.hasEventListener(PoolRegistryEvents.RESOURCE_POOL_REGISTERED)) {\r\n      this.dispatchEvent(PoolRegistryEvents.RESOURCE_POOL_REGISTERED, pool);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Retrieve ResourcePool instance from registry by its Id.\r\n   * @param poolId {String} ResourcePool instance Id\r\n   * @returns {DataAccessInterface.ResourcePool|null}\r\n   */\r\n  get(poolId) {\r\n    return this[POOLS_FIELD][poolId] || null;\r\n  }\r\n\r\n  /**\r\n   * Check if ResourcePool registered in this registry instance.\r\n   * @param pool {DataAccessInterface.ResourcePool|String} ResourcePool instance or its Id.\r\n   * @returns {Boolean}\r\n   */\r\n  isRegistered(pool) {\r\n    return hasOwnProperty(\r\n      this[POOLS_FIELD],\r\n      pool instanceof ResourcePool ? pool.id : String(pool),\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Remove ResourcePool from current registry instance.\r\n   * @param pool {DataAccessInterface.ResourcePool|String} ResourcePool instance or its Id.\r\n   * @returns {Boolean}\r\n   */\r\n  remove(pool) {\r\n    let result = false;\r\n    pool = pool instanceof ResourcePool ? pool : this.get(pool);\r\n    if (pool) {\r\n      pool.removeEventListener(ResourcePoolEvents.POOL_DESTROYED, this.handlePoolDestroyed);\r\n      result = delete this[POOLS_FIELD][pool.id];\r\n    }\r\n    if (this.hasEventListener(PoolRegistryEvents.RESOURCE_POOL_REMOVED)) {\r\n      this.dispatchEvent(PoolRegistryEvents.RESOURCE_POOL_REMOVED, pool);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  static events = PoolRegistryEvents;\r\n}\r\n\r\nexport const createPoolRegistry = () => new PoolRegistry();\r\n\r\nexport default PoolRegistry;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/resource/PoolRegistry.js","import DataAccessInterface, { create, dummy } from './DataAccessInterface';\r\nimport Deferred, { createDeferred } from './utils/Deferred';\r\nimport Descriptor from './command/Descriptor';\r\nimport Reserved from './command/Reserved';\r\nimport RequestCommands from './command/internal/RequestCommands';\r\nimport ProxyCommands from './command/internal/ProxyCommands';\r\nimport Target from './request/Target';\r\nimport ResourcePool from './resource/ResourcePool';\r\nimport PoolRegistry from './resource/PoolRegistry';\r\nimport Converter from './resource/Converter';\r\nimport IConvertible from './utils/IConvertible';\r\nimport isResourceConvertible from './utils/isResourceConvertible';\r\nimport getRawResource from './utils/getRawResource';\r\nimport getResourceData from './utils/getResourceData';\r\nimport getResourceId from './utils/getResourceId';\r\nimport getResourcePoolId from './utils/getResourcePoolId';\r\nimport getResourceType from './utils/getResourceType';\r\nimport isResource from './utils/isResource';\r\n\r\nexport default DataAccessInterface;\r\n\r\nexport {\r\n  create,\r\n  dummy,\r\n  createDeferred,\r\n  Deferred,\r\n  Descriptor,\r\n  Reserved,\r\n  RequestCommands,\r\n  ProxyCommands,\r\n  Target,\r\n  ResourcePool,\r\n  PoolRegistry,\r\n  Converter,\r\n  IConvertible,\r\n  isResourceConvertible,\r\n  getRawResource,\r\n  getResourceData,\r\n  getResourceId,\r\n  getResourcePoolId,\r\n  getResourceType,\r\n  isResource,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/index.js","/**\r\n * @exports DataAccessInterface\r\n */\r\n\r\nimport areProxiesAvailable from './utils/areProxiesAvailable';\r\nimport isResource from './utils/isResource';\r\nimport getResourcePoolId from './utils/getResourcePoolId';\r\nimport getResourceId from './utils/getResourceId';\r\nimport createForeignResource from './utils/createForeignResource';\r\nimport { createHandlers } from './request/Handlers';\r\nimport { createProxyFactory } from './request/ProxyFactory';\r\nimport { createRequestFactory } from './request/Factory';\r\nimport { defaultResourcePool, ResourcePoolEvents } from './resource/ResourcePool';\r\nimport { createResourceConverter } from './resource/Converter';\r\nimport { createPoolRegistry } from './resource/PoolRegistry';\r\n\r\nclass DataAccessInterface {\r\n\r\n  /**\r\n   * @class DataAccessInterface\r\n   * @classdesc Facade of Deferred Data Access library, it holds all\r\n   * of public API -- objects like ResourcePool and methods to work\r\n   * with resources.\r\n   * @param {Descriptor[]|Object.<string, Function|Descriptor>} descriptors\r\n   * @param {boolean} [proxyEnabled=false]\r\n   * @param {ResourcePoolRegistry} [poolRegistry]\r\n   * @param {ResourcePool} [pool]\r\n   * @param {ICacheImpl} [cacheImpl]\r\n   */\r\n  constructor(\r\n    descriptors,\r\n    proxyEnabled = true,\r\n    poolRegistry = null,\r\n    pool = null,\r\n    cacheImpl = null,\r\n  ) {\r\n    this.poolRegistry = poolRegistry;\r\n    this.pool = pool;\r\n    this.cache = cacheImpl;\r\n    this.initialize(descriptors, proxyEnabled);\r\n  }\r\n\r\n  initialize(descriptors, proxyEnabled) {\r\n    if (proxyEnabled && !areProxiesAvailable()) {\r\n      throw new Error('Proxies are not available in this environment');\r\n    }\r\n\r\n    this.handlers = createHandlers(proxyEnabled);\r\n\r\n    if (proxyEnabled) {\r\n      this.factory = createProxyFactory(this.handlers, this.cache);\r\n    } else {\r\n      this.factory = createRequestFactory(this.handlers, this.cache);\r\n    }\r\n\r\n    if (!this.poolRegistry) {\r\n      this.poolRegistry = createPoolRegistry();\r\n    }\r\n\r\n    if (this.pool) {\r\n      this.poolRegistry.register(this.pool);\r\n    } else if (this.pool !== undefined) {\r\n      this.pool = this.poolRegistry.createPool();\r\n    } else {\r\n      this.pool = defaultResourcePool;\r\n    }\r\n\r\n    this.resourceConverter = createResourceConverter(\r\n      this.factory,\r\n      this.poolRegistry,\r\n      this.pool,\r\n      this.handlers,\r\n    );\r\n\r\n    const poolDestroyedHandler = () => {\r\n      this.pool.removeEventListener(ResourcePoolEvents.POOL_DESTROYED, poolDestroyedHandler);\r\n      this.pool = this.poolRegistry.createPool();\r\n      this.pool.addEventListener(ResourcePoolEvents.POOL_DESTROYED, poolDestroyedHandler);\r\n    };\r\n\r\n    this.handlers.setCommands(descriptors);\r\n    this.pool.addEventListener(ResourcePoolEvents.POOL_DESTROYED, poolDestroyedHandler);\r\n  }\r\n\r\n  get proxyEnabled() {\r\n    return this.handlers.proxyEnabled;\r\n  }\r\n\r\n  send(command, args, target = null) {\r\n    return\r\n  }\r\n\r\n  parse(data) {\r\n    return this.resourceConverter.parse(data);\r\n  }\r\n\r\n  dummy() {\r\n    return this.parse(createForeignResource());\r\n  };\r\n\r\n  toJSON(data) {\r\n    return this.resourceConverter.toJSON(data);\r\n  }\r\n\r\n  isOwnResource(resource) {\r\n    /**\r\n     * @type {DataAccessInterface.ResourcePool}\r\n     */\r\n    let pool;\r\n    if (isResource(resource)) {\r\n      pool = this.poolRegistry.get(getResourcePoolId(resource));\r\n      return pool && pool.has(getResourceId(resource));\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nexport const create = (handlers, proxyEnabled = true, poolRegistry = null, pool = null, cacheImpl = null) =>\r\n  new DataAccessInterface(handlers, proxyEnabled, poolRegistry, pool, cacheImpl);\r\n\r\nexport default DataAccessInterface;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/DataAccessInterface.js","export default () => (typeof Proxy === 'function');\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/areProxiesAvailable.js","import reject from '../../utils/reject';\r\nimport TargetStatus from '../../utils/TargetStatus';\r\nimport TARGET_DATA from '../../utils/TARGET_DATA';\r\nimport createRequestPackage from '../../utils/createRequestPackage';\r\nimport {\r\n  RequestCommandFields,\r\n  RequestCommandNames,\r\n} from '../../command//internal/RequestCommands';\r\nimport SubTargets from './SubTargets';\r\n\r\nclass Internals extends SubTargets {\r\n  constructor(target, promise, handlers) {\r\n    super();\r\n    this.handlers = handlers;\r\n    this.target = target;\r\n    // INFO this should be not initialized i.e. keep it undefined, this will be checked later\r\n    this.data = undefined;\r\n    this.temporary = undefined;\r\n    this.hadChildPromises = false;\r\n    this.status = TargetStatus.PENDING;\r\n    this.promise = promise\r\n      .then(this.handlePromiseResolve)\r\n      .catch(this.handlePromiseReject);\r\n    this.setParent(this);\r\n  }\r\n\r\n  isResource() {\r\n    if (typeof this.data === 'object' && this.data[TARGET_DATA]) {\r\n      const data = this.data[TARGET_DATA];\r\n      return Boolean(data.$poolId && data.$id);\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  get poolId() {\r\n    return this.isResource() ? this.data[TARGET_DATA].$poolId : null;\r\n  }\r\n\r\n  get type() {\r\n    return this.isResource() ? this.data[TARGET_DATA].$type : null;\r\n  }\r\n\r\n  get id() {\r\n    return this.isResource() ? this.data[TARGET_DATA].$id : null;\r\n  }\r\n\r\n  handlePromiseResolve = (value) => {\r\n    const result = { target: this.target, value };\r\n    this.data = value;\r\n    this.status = TargetStatus.RESOLVED;\r\n    if (this.isResource()) {\r\n      /*\r\n       INFO Sending \"this\" as result of resolve() handler, causes infinite\r\n       loop of this.then(), so I've used wrapper object\r\n      */\r\n      result.value = this.target;\r\n    }\r\n\r\n    this.parentResolved();\r\n\r\n    // FIXME isTemporary() was not called yet, as solution can move destruction out\r\n    if (this.temporary) {\r\n      this.destroy();\r\n    }\r\n\r\n    return result;\r\n  };\r\n\r\n  handlePromiseReject = (value) => {\r\n    this.status = TargetStatus.REJECTED;\r\n    this.parentRejected('Target of the call was rejected and call cannot be sent.');\r\n    return Promise.reject(value);\r\n  };\r\n\r\n  isActive() {\r\n    return this.status === TargetStatus.PENDING || this.status === TargetStatus.RESOLVED;\r\n  }\r\n\r\n  canBeDestroyed() {\r\n    return this.status === TargetStatus.RESOLVED || this.status === TargetStatus.REJECTED;\r\n  }\r\n\r\n  destroy() {\r\n    let promise = null;\r\n    if (this.canBeDestroyed()) {\r\n      // INFO I should not clear children list, since they are pending and requests already sent.\r\n      if (this.status === TargetStatus.RESOLVED) {\r\n        promise = this.send(\r\n          RequestCommandFields.DESTROY,\r\n          createRequestPackage(\r\n            RequestCommandNames.DESTROY,\r\n            [],\r\n            this.toJSON(),\r\n          ),\r\n        );\r\n      } else {\r\n        promise = Promise.resolve();\r\n      }\r\n      this.status = TargetStatus.DESTROYED;\r\n    } else {\r\n      promise = reject('Invalid or already destroyed target.');\r\n    }\r\n\r\n    return promise;\r\n  }\r\n\r\n  then(handleResolve, handleReject) {\r\n    const child = this.promise.then(handleResolve, handleReject);\r\n    this.hadChildPromises = true;\r\n    return child;\r\n  }\r\n\r\n  catch(handleReject) {\r\n    const child = this.promise.catch(handleReject);\r\n    this.hadChildPromises = true;\r\n    return child;\r\n  }\r\n\r\n  toJSON() {\r\n    return this.data;\r\n  }\r\n}\r\n\r\nexport default Internals;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/Internals.js","import reject from '../../utils/reject';\r\nimport { createDeferred } from '../../utils/Deferred';\r\nimport TargetStatus from '../../utils/TargetStatus';\r\nimport { createQueue } from './Queue';\r\nimport Children from './Children';\r\n\r\nclass SubTargets extends Children {\r\n  constructor(parent = null, children = []) {\r\n    super(children);\r\n    this.queue = null;\r\n    this.setParent(parent);\r\n  }\r\n\r\n  setParent(parent) {\r\n    this.parent = parent;\r\n  }\r\n\r\n  parentResolved() {\r\n    if (this.hasQueue()) {\r\n      this.queue.send(this.parent, this.handleSubRequest);\r\n      this.queue = null;\r\n    }\r\n  }\r\n\r\n  parentRejected(message = null) {\r\n    this.queue.reject(new Error(message || 'This request was rejected before sending.'));\r\n    this.queue = null;\r\n  }\r\n\r\n  hasQueue() {\r\n    return Boolean(this.queue && this.queue.length);\r\n  }\r\n\r\n  send(pack, child = null) {\r\n    const { propertyName } = pack;\r\n    const { handlers } = this.parent;\r\n    let promise;\r\n\r\n    if (!handlers.hasCommand(propertyName)) {\r\n      return reject(`Request handler for \"${propertyName}\" is not registered.`);\r\n    }\r\n\r\n    promise = this.handleSend(pack, child);\r\n\r\n    if (child) {\r\n      promise = this.register(child);\r\n    }\r\n\r\n    return promise;\r\n  }\r\n\r\n  handleSend(pack, child = null) {\r\n    const { status } = this.parent;\r\n\r\n    switch (status) {\r\n      case TargetStatus.PENDING:\r\n        if (!this.queue) {\r\n          this.queue = createQueue();\r\n        }\r\n\r\n        return this.queue.add(pack, child);\r\n      case TargetStatus.REJECTED:\r\n        return reject('Target object was rejected and cannot be used for calls.');\r\n      case TargetStatus.DESTROYED:\r\n        return reject('Target object was destroyed and cannot be used for calls.');\r\n      case TargetStatus.RESOLVED:\r\n        return this.handleSubRequest(pack, child);\r\n      default:\r\n        return reject(`Target object is in unknown status \"${status}\".`);\r\n    }\r\n  }\r\n\r\n  handleSubRequest = (pack, child) => {\r\n    const { handlers, target } = this.parent;\r\n    return handlers.handle(target, pack, child);\r\n  };\r\n}\r\n\r\nexport default SubTargets;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/SubTargets.js","import { createDeferred } from '../../utils/Deferred';\r\nimport toJSON from './toJSON';\r\n\r\nclass Queue {\r\n  constructor(list = []) {\r\n    this.list = list;\r\n  }\r\n\r\n  add(pack, child) {\r\n    const deferred = createDeferred();\r\n    this.list.push({\r\n      pack,\r\n      deferred,\r\n      child,\r\n    });\r\n\r\n    return deferred.promise;\r\n  }\r\n\r\n  get length() {\r\n    return this.list.length;\r\n  }\r\n\r\n  getList() {\r\n    return [...this.list];\r\n  }\r\n\r\n  getCommands() {\r\n    // return this.list.map(([name, pack]) => pack.type);\r\n    return this.list.map(({ pack: { propertyName } }) => propertyName);\r\n  }\r\n\r\n  send(target, callback) {\r\n    // target reset is needed because, when request was made, target probably was in\r\n    // pending mode and may be didn't have proper data\r\n    const targetJSON = toJSON(target);\r\n    this.list.forEach(({\r\n      pack,\r\n      deferred,\r\n      child,\r\n    }) => {\r\n      pack.target = targetJSON;\r\n      deferred.resolve(callback(pack, child));\r\n    });\r\n    this.list = [];\r\n  }\r\n\r\n  reject(message) {\r\n    const error = new Error(message || 'This request was rejected before sending.');\r\n    this.list.forEach(({ deferred }) => deferred.reject(error));\r\n    this.list = [];\r\n  }\r\n}\r\n\r\nexport const createQueue = (list = []) => new Queue(list);\r\n\r\nexport default Queue;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/Queue.js","import getRawPromise from './getRawPromise';\r\n\r\nclass Children {\r\n  constructor(list = []) {\r\n    this.list = list;\r\n  }\r\n\r\n  register(child) {\r\n    const handler = () => {\r\n      const index = this.list.indexOf(child);\r\n      if (index >= 0) {\r\n        this.list.splice(index, 1);\r\n      }\r\n    };\r\n\r\n    this.list.push(child);\r\n    // getRawPromise() is needed to capture promise resolution directly,\r\n    // otherwise this .then() call will be counted in child.hadChildPromises.\r\n    return getRawPromise(child).then(handler, handler);\r\n  }\r\n\r\n  get length() {\r\n    return this.list.length;\r\n  }\r\n\r\n  getList() {\r\n    return [...this.list];\r\n  }\r\n\r\n  contains(item) {\r\n    return this.list.indexOf(item) >= 0;\r\n  }\r\n\r\n  get lastItem() {\r\n    const { length } = this.list;\r\n    return length ? this.list[length - 1] : null;\r\n  }\r\n}\r\n\r\nexport default Children;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/Children.js","/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\r\n\r\nimport getInternals from './getInternals';\r\n\r\nexport default (target) => {\r\n  const internals = getInternals(target);\r\n  return internals ? internals.promise : undefined;\r\n};\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/getRawPromise.js","import TARGET_DATA from './TARGET_DATA';\r\nimport getId from './getId';\r\n\r\nexport default (type = '', resource = {}) => {\r\n  resource[TARGET_DATA] = {\r\n    $id: `foreign-id-${getId()}`,\r\n    $type: type || typeof resource,\r\n    $poolId: `foreign-poolId-${getId()}`,\r\n  };\r\n\r\n  return resource;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/createForeignResource.js","import Descriptor from '../command/Descriptor';\r\nimport ProxyCommands, { ProxyCommandFields } from '../command/internal/ProxyCommands';\r\nimport hasOwnProperty from '../utils/hasOwnProperty';\r\nimport filterHandlers from '../utils/filterRequestHandlers';\r\nimport getResourceType from '../utils/getResourceType';\r\n\r\n/**\r\n * Key for default type for handlers that will be applied to any\r\n * resource that does not have type-specific handlers registered\r\n * @type {string}\r\n */\r\nconst DEFAULT_KEY = '';\r\n\r\nexport const areProxyHandlersAvailable = (handlers, throwError = false) => {\r\n  let result = true;\r\n  ProxyCommands.required.forEach((name) => {\r\n    if (!(ProxyCommandFields[name] in handlers)) {\r\n      result = false;\r\n      if (throwError) {\r\n        throw new Error(`For Proxy interface, handler \"${name}\" should be set.`);\r\n      }\r\n    }\r\n  });\r\n\r\n  return result;\r\n};\r\n\r\nexport const HandlersEvents = Object.freeze({\r\n  HANDLERS_UPDATED: 'handlersUpdated',\r\n});\r\n\r\nclass Handlers {\r\n  constructor(proxyEnabled = false) {\r\n    // named collection of Descriptor lists that may be applied\r\n    this.properties = { [DEFAULT_KEY]: [] };\r\n    this.descriptors = { [DEFAULT_KEY]: [] };\r\n    this.proxyEnabled = Boolean(proxyEnabled);\r\n    this.converter = null;\r\n  }\r\n\r\n  get available() {\r\n    const nonEmptyListIndex = Object.getOwnPropertyNames(this.properties).findIndex((name) => {\r\n      const list = this.properties[name];\r\n      return Boolean(list && list.length);\r\n    });\r\n    return nonEmptyListIndex >= 0;\r\n  }\r\n\r\n  setConverter(converter) {\r\n    this.converter = converter;\r\n  }\r\n\r\n  setCommands(handlers) {\r\n    this.setCommandsByType(DEFAULT_KEY, handlers);\r\n\r\n    Object.keys(handlers).forEach((name) => {\r\n      const handler = handlers[name];\r\n      if (handler && (handler.constructor === Object || handler instanceof Array)) {\r\n        this.setCommandsByType(name, handler);\r\n      }\r\n    });\r\n\r\n    if (this.proxyEnabled) {\r\n      areProxyHandlersAvailable(this.descriptors[DEFAULT_KEY], true);\r\n    }\r\n  }\r\n\r\n  setCommandsByType(type, handlers) {\r\n    const descrs = {};\r\n    const props = [];\r\n    filterHandlers(handlers, descrs, props);\r\n    this.descriptors[type] = descrs;\r\n    this.properties[type] = props;\r\n  }\r\n\r\n  // FIXME Not quite obvious that it checks against property name, not command name\r\n  hasCommand(propertyName, type = DEFAULT_KEY) {\r\n    return (\r\n        type\r\n        && this.descriptors[type]\r\n        && hasOwnProperty(this.descriptors[type], propertyName)\r\n      )\r\n      || (\r\n        this.descriptors[DEFAULT_KEY]\r\n        && hasOwnProperty(this.descriptors[DEFAULT_KEY], propertyName)\r\n      );\r\n  }\r\n\r\n  getPropertyCommands(type = '') {\r\n    const list = this.properties[type || DEFAULT_KEY] || [];\r\n    return [...list];\r\n  }\r\n\r\n  getPropertyNames(type = '') {\r\n    return this.getPropertyCommands(type)\r\n      .map((descriptor) => descriptor.propertyName);\r\n  }\r\n\r\n  getCommands(type = DEFAULT_KEY) {\r\n    if (type && this.descriptors[type]) {\r\n      return {\r\n        ...this.descriptors[DEFAULT_KEY],\r\n        ...this.descriptors[type],\r\n      };\r\n    }\r\n\r\n    return this.descriptors[DEFAULT_KEY];\r\n  }\r\n\r\n  getCommand(propertyName, type = DEFAULT_KEY) {\r\n    const descriptor = (\r\n        this.descriptors[type]\r\n        && this.descriptors[type][propertyName]\r\n      )\r\n      || (\r\n        this.descriptors[DEFAULT_KEY]\r\n        && this.descriptors[DEFAULT_KEY][propertyName]\r\n      );\r\n\r\n    return descriptor || null;\r\n  }\r\n\r\n  call(parentRequest, pack, resultRequest) {\r\n    // FIXME should it also check for resultRequest to not appear in the list?\r\n    const list = this.converter ? this.converter.lookupForPending(pack.args) : null;\r\n\r\n    if (list && list.length) {\r\n      // FIXME Need to test on all platforms: might not work because may need list of\r\n      // Promise objects, not Targets\r\n      return Promise.all(list)\r\n        .then(() => this.callImmediately(parentRequest, pack, resultRequest));\r\n    }\r\n\r\n    return this.callImmediately(parentRequest, pack, resultRequest);\r\n  }\r\n\r\n  callImmediately(parentRequest, pack, resultRequest) {\r\n    const { propertyName } = pack;\r\n    const descriptor = this.getCommand(propertyName, getResourceType(parentRequest));\r\n    if (descriptor instanceof Descriptor) {\r\n      return new Promise((resolve) => {\r\n        resolve(descriptor.handler(parentRequest, pack, resultRequest));\r\n      });\r\n    }\r\n\r\n    return reject(`Command descriptor for \"${name}\" was not found.`);\r\n  }\r\n\r\n  static events = HandlersEvents;\r\n}\r\n\r\nexport const createHandlers = (proxyEnabled) => new Handlers(proxyEnabled);\r\n\r\nexport default Handlers;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/Handlers.js","import hasOwnProperty from './hasOwnProperty';\r\nimport Descriptor, { createDescriptor } from '../command/Descriptor';\r\nimport Reserved from '../command/Reserved';\r\n\r\n\r\n/**\r\n * Checks for Descriptor uniqueness and reserved words usage.\r\n * @param {DataAccessInterface.Descriptor} descriptor\r\n * @param {Object.<string, DataAccessInterface.Descriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.Descriptor>} properties\r\n * @private\r\n */\r\nconst applyDescriptor = (descriptor, descriptors, properties) => {\r\n  const { propertyName } = descriptor;\r\n  if (propertyName in Reserved.names) {\r\n    throw new Error(`Name \"${propertyName}\" is reserved and cannot be used in descriptor.`);\r\n  }\r\n  if (\r\n    hasOwnProperty(descriptors, propertyName)\r\n    && descriptors[propertyName] instanceof Descriptor\r\n  ) {\r\n    throw new Error(`Field names should be unique, \"${String(propertyName)}\" field has duplicates.`);\r\n  }\r\n  descriptors[propertyName] = descriptor;\r\n  // FIXME Check if new implementation uses virtual commands properly\r\n  if (!descriptor.virtual) {\r\n    properties.push(descriptor);\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Array} handlers\r\n * @param {Object} descriptors\r\n * @private\r\n */\r\nconst filterArray = (handlers, descriptors, properties) => {\r\n  handlers.forEach((value) => {\r\n    if (value instanceof Descriptor) {\r\n      applyDescriptor(value, descriptors, properties);\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * @param {Object} handlers\r\n * @param {Object.<string, DataAccessInterface.Descriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.Descriptor>} properties\r\n * @private\r\n */\r\nconst filterHash = (handlers, descriptors, properties) => {\r\n  if (!handlers) return;\r\n  ([\r\n    ...Object.getOwnPropertyNames(handlers),\r\n    ...Object.getOwnPropertySymbols(handlers),\r\n  ]).forEach((propertyName) => {\r\n    let value = handlers[propertyName];\r\n    // FIXME unnecessary typeof(value is defined), could be replaced with instanceof\r\n    if (typeof value === 'function') {\r\n      value = createDescriptor(propertyName, value);\r\n    }\r\n    if (value instanceof Descriptor) {\r\n      applyDescriptor(value, descriptors, properties);\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * @method Handlers.filterHandlers\r\n * @param {Array|Object} handlers\r\n * @param {Object.<string, DataAccessInterface.Descriptor>} descriptors\r\n * @param {Array.<number, DataAccessInterface.Descriptor>} properties\r\n */\r\nexport default (handlers, descriptors, properties) => {\r\n  if (handlers instanceof Array) {\r\n    filterArray(handlers, descriptors, properties);\r\n  } else {\r\n    filterHash(handlers, descriptors, properties);\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/filterRequestHandlers.js","import Factory, { NO_INIT, createRequestFactory } from './Factory';\r\nimport hasOwnProperty from '../utils/hasOwnProperty';\r\nimport { ProxyCommandFields } from '../command/internal/ProxyCommands';\r\n\r\nconst EXCLUSIONS = {\r\n  /*\r\n   INFO arguments and caller were included because they are required function properties\r\n   */\r\n  arguments: true,\r\n  caller: true,\r\n  prototype: true,\r\n};\r\n\r\nconst createFunctionWrapper = (target) => {\r\n  // INFO Target must be a function so I could use Proxy.call() interceptor.\r\n  function requestTargetProxy() {\r\n  }\r\n\r\n  requestTargetProxy.target = target;\r\n\r\n  return requestTargetProxy;\r\n};\r\n\r\nconst wrapWithProxy = (target, handlers) => new Proxy(createFunctionWrapper(target), handlers);\r\n\r\nconst proxyGet = (wrapper, name) => {\r\n  const { target } = wrapper;\r\n  if (name in target || name in EXCLUSIONS || typeof name === 'symbol') {\r\n    return target[name];\r\n  }\r\n  // INFO Proxy should be already applied, so no need in additional wrapping\r\n  return target[ProxyCommandFields.get](name);\r\n};\r\n\r\n// INFO Proxy should be already applied, so no need in additional wrapping\r\nconst proxyApply = (wrapper, thisValue, args) => (\r\n  wrapper.target[ProxyCommandFields.apply](null, args)\r\n);\r\n\r\nconst proxySet = (wrapper, name, value) => {\r\n  const { target } = wrapper;\r\n\r\n  if (name in target || name in EXCLUSIONS || typeof name === 'symbol') {\r\n    target[name] = value;\r\n    return value;\r\n  }\r\n\r\n  if (ProxyCommandFields.set in target) {\r\n    target[ProxyCommandFields.set](name, value);\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nconst proxyHas = (wrapper, name) => hasOwnProperty(wrapper.target, name);\r\n\r\nconst proxyDeleteProperty = (wrapper, name) => {\r\n  const { target } = wrapper;\r\n  if (ProxyCommandFields.deleteProperty in target) {\r\n    target[ProxyCommandFields.deleteProperty](name);\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nconst proxyOwnKeys = (wrapper) => {\r\n  const { target } = wrapper;\r\n  return [...Object.getOwnPropertyNames(target), ...Object.getOwnPropertyNames(EXCLUSIONS)];\r\n};\r\n\r\nconst proxyEnumerate = (wrapper) => {\r\n  const { target } = wrapper;\r\n  return [\r\n    ...Object.getOwnPropertyNames(target),\r\n    ...Object.getOwnPropertyNames(EXCLUSIONS),\r\n  ][Symbol.iterator]();\r\n};\r\n\r\nconst proxyGetOwnPropertyDescriptor = (wrapper, name) => {\r\n  if (hasOwnProperty(EXCLUSIONS, name)) {\r\n    return Object.getOwnPropertyDescriptor(wrapper, name);\r\n  }\r\n  return Object.getOwnPropertyDescriptor(wrapper.target, name);\r\n};\r\n\r\nconst proxyGetPrototypeOf = (wrapper) => Object.getPrototypeOf(wrapper.target);\r\n\r\n/**\r\n * Builds proper handlers hash for Proxy\r\n * @returns {Function}\r\n */\r\nexport const createProxyHandlers = (handlers = {}) => ({\r\n  get: proxyGet,\r\n  apply: proxyApply,\r\n  set: proxySet,\r\n  has: proxyHas,\r\n  deleteProperty: proxyDeleteProperty,\r\n  ownKeys: proxyOwnKeys,\r\n  enumerate: proxyEnumerate,\r\n  getOwnPropertyDescriptor: proxyGetOwnPropertyDescriptor,\r\n  getPrototypeOf: proxyGetPrototypeOf,\r\n  ...handlers,\r\n});\r\n\r\nconst PROXY_HANDLERS = createProxyHandlers();\r\n\r\nclass ProxyFactory extends Factory {\r\n  constructor(handlers, cacheImpl) {\r\n    super(NO_INIT);\r\n\r\n    this.handlers = handlers;\r\n    this.factory = createRequestFactory(handlers, cacheImpl);\r\n    this.factory.decorator.setFactory(this);\r\n  }\r\n\r\n  create(promise, name = null, pack = null, cacheable = false) {\r\n    const instance = this.factory.create(promise, name, pack, cacheable);\r\n\r\n    if (this.handlers.available) {\r\n      return wrapWithProxy(instance, PROXY_HANDLERS);\r\n    }\r\n\r\n    return instance;\r\n  }\r\n\r\n  getCached(name, pack) {\r\n    return this.factory.getCached(name, pack);\r\n  }\r\n}\r\n\r\nexport const applyProxyWithDefaultHandlers = (target) => wrapWithProxy(target, PROXY_HANDLERS);\r\n\r\nexport const createProxyFactory = (handlers, cacheImpl) => (\r\n  new ProxyFactory(handlers, cacheImpl)\r\n);\r\n\r\nexport default ProxyFactory;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/ProxyFactory.js","import CallbackFactory from '../command/CallbackFactory';\r\nimport getResourceType from '../utils/getResourceType';\r\n\r\nclass Decorator {\r\n  constructor(factory, handlers) {\r\n    this.handlers = handlers;\r\n    this.members = new CallbackFactory(factory);\r\n  }\r\n\r\n  apply(request) {\r\n    if (!this.handlers.available) {\r\n      return request;\r\n    }\r\n\r\n    const descriptors = this.handlers.getPropertyCommands(getResourceType(request));\r\n    return descriptors.forEach((descriptor) => {\r\n      request[descriptor.propertyName] = this.members.get(descriptor);\r\n    });\r\n  }\r\n\r\n  setFactory(factory) {\r\n    if (factory) {\r\n      this.members.setFactory(factory);\r\n    }\r\n  }\r\n}\r\n\r\nexport const createDecorator = (factory, handlers) => (\r\n  new Decorator(factory, handlers)\r\n);\r\n\r\nexport default Decorator;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/Decorator.js","import Flow from './Flow';\r\n\r\nconst createHandlerFor = (\r\n  flow,\r\n  propertyName,\r\n  command,\r\n  isTemporaryFn,\r\n  cacheable,\r\n) => {\r\n  function commandHandler(...args) {\r\n    return flow.apply(\r\n      this,\r\n      propertyName,\r\n      command,\r\n      args,\r\n      isTemporaryFn,\r\n      cacheable,\r\n    );\r\n  }\r\n\r\n  return commandHandler;\r\n};\r\n\r\nclass CallbackFactory {\r\n  members = new Map();\r\n  flow = null;\r\n\r\n  constructor(factory = null) {\r\n    this.setFactory(factory);\r\n  }\r\n\r\n  /**\r\n   * @param {Descriptor} descriptor\r\n   * @returns {Function}\r\n   * @private\r\n   */\r\n  get(descriptor) {\r\n    const { propertyName } = descriptor;\r\n    if (!this.members.has(propertyName)) {\r\n      this.members.set(\r\n        propertyName,\r\n        this.create(\r\n          propertyName,\r\n          descriptor.command,\r\n          descriptor.isTemporary,\r\n          descriptor.cacheable,\r\n        ),\r\n      );\r\n    }\r\n\r\n    return this.members.get(propertyName);\r\n  }\r\n\r\n  create(propertyName, command, isTemporaryFn, cacheable = false) {\r\n    return createHandlerFor(this.flow, propertyName, command, isTemporaryFn, cacheable);\r\n  }\r\n\r\n  setFactory(factory) {\r\n    this.flow = null;\r\n\r\n    if (factory) {\r\n      this.flow = new Flow(factory);\r\n    }\r\n  }\r\n}\r\n\r\nexport default CallbackFactory;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/command/CallbackFactory.js","import getInternals from '../request/target/getInternals';\r\nimport toJSON from '../request/target/toJSON';\r\nimport reject from '../utils/reject';\r\nimport createRequestPackage from '../utils/createRequestPackage';\r\nimport setTemporary from '../request/target/setTemporary';\r\n\r\nclass Flow {\r\n  constructor(factory) {\r\n    this.factory = factory;\r\n  }\r\n\r\n  apply(target, propertyName, command, args, isTemporaryFn, cacheable = false) {\r\n    const internals = getInternals(target);\r\n\r\n    // call target must be a request target\r\n    if (internals) {\r\n      const pack = createRequestPackage(propertyName, command, args, toJSON(target));\r\n\r\n      if (cacheable) {\r\n        const child = this.factory.getCached(pack);\r\n\r\n        if (child) {\r\n          return child;\r\n        }\r\n      }\r\n\r\n      return this.makeChildReqest(target, pack, isTemporaryFn, cacheable);\r\n    }\r\n\r\n    return this.rejectCall();\r\n  }\r\n\r\n  rejectCall() {\r\n    return this.factory.create(reject(\r\n      'Target object is not an instance of Target, so cannot be used for calls.',\r\n    ));\r\n  }\r\n\r\n  makeChildReqest(target, propertyName, pack, isTemporaryFn, cacheable = false) {\r\n    // this wil be populated on internals.send() call and passed into target's\r\n    // promise when it will be executed on next tick, so there are no need in deferred anymore\r\n    let promise;\r\n    const internals = getInternals(target);\r\n    const child = this.factory.create(\r\n      Promise.resolve().then(() => promise),\r\n      propertyName,\r\n      pack,\r\n      cacheable,\r\n    );\r\n\r\n    promise = internals.send(propertyName, pack, child);\r\n    this.checkState(promise, isTemporaryFn, target, child, pack);\r\n    return child;\r\n  }\r\n\r\n  checkState(promise, isTemporaryFn, parentRequest, childRequest, pack) {\r\n    return promise.then((data) => {\r\n      const isTemporary = Boolean(isTemporaryFn(parentRequest, childRequest, pack, data));\r\n      setTemporary(childRequest, isTemporary);\r\n    });\r\n  }\r\n}\r\n\r\nexport default Flow;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/command/Flow.js","/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\r\n\r\nimport getInternals from './getInternals';\r\n\r\nexport default (target, value) => getInternals(target).temporary = Boolean(value);\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/setTemporary.js","module.exports = function(module) {\n\tif(!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif(!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 44\n// module chunks = 0","import TARGET_INTERNALS from '../../utils/TARGET_INTERNALS';\r\n\r\nexport default (target) => Boolean(target && target[TARGET_INTERNALS]);\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/isRequest.js","/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\r\n\r\nimport getStatus from './getStatus';\r\nimport TargetStatus from '../../utils/TargetStatus';\r\n\r\nexport default (value) => {\r\n  const status = getStatus(value);\r\n  return status ? status === TargetStatus.PENDING : undefined;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/isPending.js","/**\r\n * Created by Oleg Galaburda on 16.11.17.\r\n */\r\n\r\nimport getInternals from './getInternals';\r\n\r\nexport default (target) => {\r\n  const internals = getInternals(target);\r\n  return internals ? internals.status : undefined;\r\n};\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/request/target/getStatus.js","import TARGET_DATA from './TARGET_DATA';\r\nimport getRawResource from './getRawResource';\r\n\r\nexport default (object) => {\r\n  const data = getRawResource(object);\r\n  return data ? data[TARGET_DATA] : null;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/getResourceData.js"],"sourceRoot":""}